2025-09-04 00:05:44.994 +03:00 [INF] This is a test log to file!
2025-09-04 00:05:45.434 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 00:05:45.483 +03:00 [INF] API configured successfully.
2025-09-04 00:05:45.608 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 00:05:45.674 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 00:05:46.205 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 00:05:46.247 +03:00 [INF] API key configured for HttpClient
2025-09-04 00:05:46.259 +03:00 [INF] Registered 14 endpoints in 1,119 milliseconds.
2025-09-04 00:05:46.265 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 00:05:46.305 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 00:05:46.399 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:05:46.412 +03:00 [DBG] Created DbConnection. (10ms).
2025-09-04 00:05:46.415 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:46.420 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:05:46.423 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 00:05:46.424 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:46.439 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:46.443 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:46.448 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 00:05:46.449 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:46.452 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:46.455 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 00:05:46.461 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:05:46.468 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (5ms).
2025-09-04 00:05:46.470 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (9ms).
2025-09-04 00:05:46.476 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 00:05:46.498 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 00:05:46.504 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:05:46.505 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 00:05:46.506 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:05:46.507 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 21:05:46.5042622+00:00');
SELECT changes();
2025-09-04 00:05:46.526 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 21:05:46.5042622+00:00');
SELECT changes();
2025-09-04 00:05:46.573 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 00:05:46.576 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 00:05:46.579 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 00:05:46.580 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 00:05:46.582 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 00:05:46.583 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 00:05:46.585 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 00:05:46.588 +03:00 [DBG] Committing transaction.
2025-09-04 00:05:46.591 +03:00 [DBG] Committed transaction.
2025-09-04 00:05:46.593 +03:00 [DBG] Disposing transaction.
2025-09-04 00:05:46.595 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 00:05:46.596 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 00:05:46.598 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:05:46.599 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 00:05:46.599 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:46.601 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:46.602 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:46.604 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 00:05:46.609 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:05:46.610 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:05:46.611 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 00:05:46.612 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 00:05:46.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 00:05:46.618 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 00:05:46.620 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 00:05:46.621 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 00:05:46.623 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 00:05:46.625 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 00:05:46.629 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:46.632 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 00:05:46.637 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 00:05:46.638 +03:00 [DBG] Committing transaction.
2025-09-04 00:05:46.639 +03:00 [DBG] Committed transaction.
2025-09-04 00:05:46.641 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:05:46.642 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:05:46.643 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 00:05:46.645 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 00:05:46.649 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 00:05:46.663 +03:00 [DBG] Disposing transaction.
2025-09-04 00:05:46.664 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:46.667 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (3ms).
2025-09-04 00:05:46.669 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 00:05:46.670 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:46.672 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 00:05:46.673 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 00:05:46.674 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 00:05:46.706 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 00:05:46.736 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 00:05:46.738 +03:00 [DBG] Hosting starting
2025-09-04 00:05:46.757 +03:00 [DBG] Middleware loaded
2025-09-04 00:05:46.761 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 00:05:46.762 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 00:05:46.858 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 00:05:46.871 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 00:05:46.873 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 00:05:46.923 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 00:05:47.216 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-09-04 00:05:58.507 +03:00 [INF] This is a test log to file!
2025-09-04 00:05:58.852 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 00:05:58.861 +03:00 [INF] API configured successfully.
2025-09-04 00:05:58.940 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 00:05:58.986 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 00:05:59.404 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 00:05:59.454 +03:00 [INF] API key configured for HttpClient
2025-09-04 00:05:59.466 +03:00 [INF] Registered 14 endpoints in 835 milliseconds.
2025-09-04 00:05:59.474 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 00:05:59.533 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 00:05:59.613 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:05:59.623 +03:00 [DBG] Created DbConnection. (7ms).
2025-09-04 00:05:59.625 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:59.629 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:05:59.631 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 00:05:59.633 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:59.641 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:59.644 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:59.648 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 00:05:59.649 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:59.652 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:59.654 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 00:05:59.658 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:05:59.662 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 00:05:59.664 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-04 00:05:59.670 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 00:05:59.690 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 00:05:59.694 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:05:59.695 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:05:59.696 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 00:05:59.698 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 21:05:59.6939163+00:00');
SELECT changes();
2025-09-04 00:05:59.703 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 21:05:59.6939163+00:00');
SELECT changes();
2025-09-04 00:05:59.742 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 00:05:59.745 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 00:05:59.747 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 00:05:59.748 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 00:05:59.750 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 00:05:59.751 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 00:05:59.753 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 00:05:59.756 +03:00 [DBG] Committing transaction.
2025-09-04 00:05:59.757 +03:00 [DBG] Committed transaction.
2025-09-04 00:05:59.758 +03:00 [DBG] Disposing transaction.
2025-09-04 00:05:59.761 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 00:05:59.762 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 00:05:59.763 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:05:59.764 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 00:05:59.765 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:59.766 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:59.768 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:59.769 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 00:05:59.770 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:05:59.771 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:05:59.773 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 00:05:59.774 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 00:05:59.776 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 00:05:59.779 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 00:05:59.780 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 00:05:59.782 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 00:05:59.783 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 00:05:59.785 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 00:05:59.788 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:59.791 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 00:05:59.795 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 00:05:59.796 +03:00 [DBG] Committing transaction.
2025-09-04 00:05:59.797 +03:00 [DBG] Committed transaction.
2025-09-04 00:05:59.798 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:05:59.798 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 00:05:59.799 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:05:59.800 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 00:05:59.808 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 00:05:59.810 +03:00 [DBG] Disposing transaction.
2025-09-04 00:05:59.811 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:05:59.814 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (3ms).
2025-09-04 00:05:59.816 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 00:05:59.817 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:05:59.819 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 00:05:59.820 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 00:05:59.821 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 00:05:59.848 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 00:05:59.883 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 00:05:59.886 +03:00 [DBG] Hosting starting
2025-09-04 00:05:59.899 +03:00 [DBG] Middleware loaded
2025-09-04 00:05:59.904 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 00:05:59.907 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 00:05:59.972 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 00:05:59.974 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 00:05:59.976 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 00:06:00.007 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 00:06:00.069 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 00:06:00.070 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 00:06:00.071 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 00:06:00.071 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 00:06:00.072 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 00:06:00.073 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 00:06:00.079 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 00:06:00.089 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 00:06:00.196 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 00:06:00.197 +03:00 [INF] Hosting environment: Development
2025-09-04 00:06:00.198 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 00:06:00.200 +03:00 [DBG] Hosting started
2025-09-04 00:09:18.456 +03:00 [DBG] Connection id "0HNFB5OIM0E96" received FIN.
2025-09-04 00:09:18.467 +03:00 [DBG] Connection id "0HNFB5OIM0E96" accepted.
2025-09-04 00:09:18.494 +03:00 [DBG] Connection id "0HNFB5OIM0E96" started.
2025-09-04 00:09:18.495 +03:00 [DBG] Connection id "0HNFB5OIM0E97" accepted.
2025-09-04 00:09:18.496 +03:00 [DBG] Connection id "0HNFB5OIM0E97" started.
2025-09-04 00:09:18.500 +03:00 [DBG] Connection id "0HNFB5OIM0E96" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 00:09:18.504 +03:00 [DBG] Connection id "0HNFB5OIM0E96" disconnecting.
2025-09-04 00:09:18.505 +03:00 [DBG] Connection id "0HNFB5OIM0E96" stopped.
2025-09-04 00:09:18.525 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - application/json 78
2025-09-04 00:09:18.572 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:09:18.575 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:09:18.599 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 00:09:18.601 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/test-groq-key'.
2025-09-04 00:09:18.605 +03:00 [DBG] Connection id "0HNFB5OIM0E97" completed keep alive response.
2025-09-04 00:09:18.607 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - 307 0 null 86.1006ms
2025-09-04 00:09:18.613 +03:00 [DBG] Connection id "0HNFB5OIM0E97", Request id "0HNFB5OIM0E97:00000001": started reading request body.
2025-09-04 00:09:18.614 +03:00 [DBG] Connection id "0HNFB5OIM0E97", Request id "0HNFB5OIM0E97:00000001": done reading request body.
2025-09-04 00:09:18.637 +03:00 [DBG] Connection id "0HNFB5OIM0E98" accepted.
2025-09-04 00:09:18.637 +03:00 [DBG] Connection id "0HNFB5OIM0E99" accepted.
2025-09-04 00:09:18.637 +03:00 [DBG] Connection id "0HNFB5OIM0E98" received FIN.
2025-09-04 00:09:18.638 +03:00 [DBG] Connection id "0HNFB5OIM0E98" started.
2025-09-04 00:09:18.639 +03:00 [DBG] Connection id "0HNFB5OIM0E99" started.
2025-09-04 00:09:18.640 +03:00 [DBG] Connection id "0HNFB5OIM0E98" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 00:09:18.642 +03:00 [DBG] Connection id "0HNFB5OIM0E98" disconnecting.
2025-09-04 00:09:18.643 +03:00 [DBG] Connection id "0HNFB5OIM0E98" stopped.
2025-09-04 00:09:18.676 +03:00 [DBG] Connection 0HNFB5OIM0E99 established using the following protocol: "Tls13"
2025-09-04 00:09:18.679 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - application/json 78
2025-09-04 00:09:18.682 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:09:18.684 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:09:18.687 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:09:18.713 +03:00 [DBG] Connection id "0HNFB5OIM0E99", Request id "0HNFB5OIM0E99:00000001": started reading request body.
2025-09-04 00:09:18.716 +03:00 [DBG] Connection id "0HNFB5OIM0E99", Request id "0HNFB5OIM0E99:00000001": done reading request body.
2025-09-04 00:09:18.854 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:09:18.905 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.SendAsync(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at NaturalToQuery.Infrastructure.LLM.LLMServiceHelper.TestApiKey(String apiKey, String testUrl, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Infrastructure\LLM\LLMService.helper.cs:line 24
   at NaturalToQuery.Api.Controllers.Setup.TestKey.HandleAsync(TestKeyRequest request, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\Setup\TestKey.cs:line 25
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-04 00:09:18.923 +03:00 [ERR] Unhandled exception occurred.
2025-09-04 00:09:18.935 +03:00 [DBG] Connection id "0HNFB5OIM0E99" completed keep alive response.
2025-09-04 00:09:18.938 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - 500 null application/json; charset=utf-8 258.6041ms
2025-09-04 00:09:28.965 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - application/json 78
2025-09-04 00:09:28.969 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:09:28.970 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:09:28.972 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/test-groq-key'.
2025-09-04 00:09:28.973 +03:00 [DBG] Connection id "0HNFB5OIM0E97" completed keep alive response.
2025-09-04 00:09:28.974 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - 307 0 null 8.7208ms
2025-09-04 00:09:28.975 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - application/json 78
2025-09-04 00:09:28.977 +03:00 [DBG] Connection id "0HNFB5OIM0E97", Request id "0HNFB5OIM0E97:00000002": started reading request body.
2025-09-04 00:09:28.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:09:28.981 +03:00 [DBG] Connection id "0HNFB5OIM0E97", Request id "0HNFB5OIM0E97:00000002": done reading request body.
2025-09-04 00:09:28.981 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:09:28.984 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:09:28.985 +03:00 [DBG] Connection id "0HNFB5OIM0E99", Request id "0HNFB5OIM0E99:00000002": started reading request body.
2025-09-04 00:09:28.986 +03:00 [DBG] Connection id "0HNFB5OIM0E99", Request id "0HNFB5OIM0E99:00000002": done reading request body.
2025-09-04 00:09:58.975 +03:00 [INF] This is a test log to file!
2025-09-04 00:09:59.284 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 00:09:59.292 +03:00 [INF] API configured successfully.
2025-09-04 00:09:59.427 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 00:09:59.496 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 00:09:59.915 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 00:09:59.944 +03:00 [INF] API key configured for HttpClient
2025-09-04 00:09:59.952 +03:00 [INF] Registered 14 endpoints in 870 milliseconds.
2025-09-04 00:09:59.958 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 00:09:59.990 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 00:10:00.061 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:10:00.070 +03:00 [DBG] Created DbConnection. (8ms).
2025-09-04 00:10:00.074 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 00:10:00.078 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:10:00.080 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 00:10:00.081 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:10:00.088 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:10:00.091 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:10:00.095 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 00:10:00.096 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:10:00.097 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:10:00.099 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 00:10:00.103 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:10:00.107 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 00:10:00.108 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-04 00:10:00.114 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 00:10:00.134 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 00:10:00.136 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:10:00.137 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 00:10:00.138 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:10:00.139 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 21:10:00.1366166+00:00');
SELECT changes();
2025-09-04 00:10:00.144 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 21:10:00.1366166+00:00');
SELECT changes();
2025-09-04 00:10:00.179 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 00:10:00.182 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 00:10:00.183 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 00:10:00.184 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 00:10:00.186 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 00:10:00.187 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 00:10:00.188 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 00:10:00.190 +03:00 [DBG] Committing transaction.
2025-09-04 00:10:00.192 +03:00 [DBG] Committed transaction.
2025-09-04 00:10:00.193 +03:00 [DBG] Disposing transaction.
2025-09-04 00:10:00.195 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 00:10:00.196 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 00:10:00.198 +03:00 [DBG] Creating DbConnection.
2025-09-04 00:10:00.198 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 00:10:00.199 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:10:00.200 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:10:00.201 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:10:00.202 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 00:10:00.203 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:10:00.204 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 00:10:00.205 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:10:00.206 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 00:10:00.207 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 00:10:00.210 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 00:10:00.211 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 00:10:00.212 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 00:10:00.213 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 00:10:00.215 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 00:10:00.219 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:10:00.222 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 00:10:00.227 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 00:10:00.228 +03:00 [DBG] Committing transaction.
2025-09-04 00:10:00.229 +03:00 [DBG] Committed transaction.
2025-09-04 00:10:00.230 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 00:10:00.231 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 00:10:00.232 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 00:10:00.233 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 00:10:00.237 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 00:10:00.238 +03:00 [DBG] Disposing transaction.
2025-09-04 00:10:00.240 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 00:10:00.242 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 00:10:00.243 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 00:10:00.244 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 00:10:00.245 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 00:10:00.246 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 00:10:00.247 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 00:10:00.267 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 00:10:00.293 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 00:10:00.295 +03:00 [DBG] Hosting starting
2025-09-04 00:10:00.307 +03:00 [DBG] Middleware loaded
2025-09-04 00:10:00.309 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 00:10:00.311 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 00:10:00.386 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 00:10:00.388 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 00:10:00.395 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 00:10:00.441 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 00:10:00.532 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 00:10:00.533 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 00:10:00.533 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 00:10:00.534 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 00:10:00.535 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 00:10:00.536 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 00:10:00.544 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 00:10:00.552 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 00:10:00.668 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 00:10:00.670 +03:00 [INF] Hosting environment: Development
2025-09-04 00:10:00.671 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 00:10:00.672 +03:00 [DBG] Hosting started
2025-09-04 00:10:01.430 +03:00 [DBG] Connection id "0HNFB5OVFR2K8" received FIN.
2025-09-04 00:10:01.437 +03:00 [DBG] Connection id "0HNFB5OVFR2K8" accepted.
2025-09-04 00:10:01.440 +03:00 [DBG] Connection id "0HNFB5OVFR2K8" started.
2025-09-04 00:10:01.442 +03:00 [DBG] Connection id "0HNFB5OVFR2K9" accepted.
2025-09-04 00:10:01.443 +03:00 [DBG] Connection id "0HNFB5OVFR2K9" started.
2025-09-04 00:10:01.448 +03:00 [DBG] Connection id "0HNFB5OVFR2K8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 00:10:01.452 +03:00 [DBG] Connection id "0HNFB5OVFR2K8" disconnecting.
2025-09-04 00:10:01.455 +03:00 [DBG] Connection id "0HNFB5OVFR2K8" stopped.
2025-09-04 00:10:01.473 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - application/json 78
2025-09-04 00:10:01.532 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:10:01.534 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:01.569 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 00:10:01.573 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/test-groq-key'.
2025-09-04 00:10:01.586 +03:00 [DBG] Connection id "0HNFB5OVFR2K9" completed keep alive response.
2025-09-04 00:10:01.589 +03:00 [DBG] Connection id "0HNFB5OVFR2KA" accepted.
2025-09-04 00:10:01.589 +03:00 [DBG] Connection id "0HNFB5OVFR2KA" received FIN.
2025-09-04 00:10:01.589 +03:00 [DBG] Connection id "0HNFB5OVFR2KB" accepted.
2025-09-04 00:10:01.597 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - 307 0 null 120.7385ms
2025-09-04 00:10:01.597 +03:00 [DBG] Connection id "0HNFB5OVFR2KA" started.
2025-09-04 00:10:01.599 +03:00 [DBG] Connection id "0HNFB5OVFR2KB" started.
2025-09-04 00:10:01.610 +03:00 [DBG] Connection id "0HNFB5OVFR2KA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 00:10:01.611 +03:00 [DBG] Connection id "0HNFB5OVFR2K9", Request id "0HNFB5OVFR2K9:00000001": started reading request body.
2025-09-04 00:10:01.613 +03:00 [DBG] Connection id "0HNFB5OVFR2KA" disconnecting.
2025-09-04 00:10:01.615 +03:00 [DBG] Connection id "0HNFB5OVFR2K9", Request id "0HNFB5OVFR2K9:00000001": done reading request body.
2025-09-04 00:10:01.616 +03:00 [DBG] Connection id "0HNFB5OVFR2KA" stopped.
2025-09-04 00:10:01.652 +03:00 [DBG] Connection 0HNFB5OVFR2KB established using the following protocol: "Tls13"
2025-09-04 00:10:01.656 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - application/json 78
2025-09-04 00:10:01.660 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:10:01.661 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:01.666 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:01.695 +03:00 [DBG] Connection id "0HNFB5OVFR2KB", Request id "0HNFB5OVFR2KB:00000001": started reading request body.
2025-09-04 00:10:01.697 +03:00 [DBG] Connection id "0HNFB5OVFR2KB", Request id "0HNFB5OVFR2KB:00000001": done reading request body.
2025-09-04 00:10:03.084 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:03.088 +03:00 [DBG] Connection id "0HNFB5OVFR2KB" completed keep alive response.
2025-09-04 00:10:03.089 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - 200 null application/json; charset=utf-8 1433.6873ms
2025-09-04 00:10:07.721 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - application/json 77
2025-09-04 00:10:07.724 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:10:07.725 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:07.726 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/test-groq-key'.
2025-09-04 00:10:07.727 +03:00 [DBG] Connection id "0HNFB5OVFR2K9" completed keep alive response.
2025-09-04 00:10:07.728 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - 307 0 null 7.4242ms
2025-09-04 00:10:07.729 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - application/json 77
2025-09-04 00:10:07.730 +03:00 [DBG] Connection id "0HNFB5OVFR2K9", Request id "0HNFB5OVFR2K9:00000002": started reading request body.
2025-09-04 00:10:07.732 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:10:07.733 +03:00 [DBG] Connection id "0HNFB5OVFR2K9", Request id "0HNFB5OVFR2K9:00000002": done reading request body.
2025-09-04 00:10:07.734 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:07.737 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:07.738 +03:00 [DBG] Connection id "0HNFB5OVFR2KB", Request id "0HNFB5OVFR2KB:00000002": started reading request body.
2025-09-04 00:10:07.739 +03:00 [DBG] Connection id "0HNFB5OVFR2KB", Request id "0HNFB5OVFR2KB:00000002": done reading request body.
2025-09-04 00:10:10.013 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:10.014 +03:00 [DBG] Connection id "0HNFB5OVFR2KB" completed keep alive response.
2025-09-04 00:10:10.015 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - 200 null application/json; charset=utf-8 2286.4736ms
2025-09-04 00:10:15.230 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - application/json 78
2025-09-04 00:10:15.234 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:10:15.235 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:15.237 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/test-groq-key'.
2025-09-04 00:10:15.239 +03:00 [DBG] Connection id "0HNFB5OVFR2K9" completed keep alive response.
2025-09-04 00:10:15.240 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/test-groq-key - 307 0 null 9.7647ms
2025-09-04 00:10:15.243 +03:00 [DBG] Connection id "0HNFB5OVFR2K9", Request id "0HNFB5OVFR2K9:00000003": started reading request body.
2025-09-04 00:10:15.240 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - application/json 78
2025-09-04 00:10:15.244 +03:00 [DBG] Connection id "0HNFB5OVFR2K9", Request id "0HNFB5OVFR2K9:00000003": done reading request body.
2025-09-04 00:10:15.246 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/test-groq-key'
2025-09-04 00:10:15.248 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:15.249 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:15.251 +03:00 [DBG] Connection id "0HNFB5OVFR2KB", Request id "0HNFB5OVFR2KB:00000003": started reading request body.
2025-09-04 00:10:15.253 +03:00 [DBG] Connection id "0HNFB5OVFR2KB", Request id "0HNFB5OVFR2KB:00000003": done reading request body.
2025-09-04 00:10:15.586 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/test-groq-key'
2025-09-04 00:10:15.589 +03:00 [DBG] Connection id "0HNFB5OVFR2KB" completed keep alive response.
2025-09-04 00:10:15.590 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/test-groq-key - 200 null application/json; charset=utf-8 349.8908ms
2025-09-04 01:30:15.246 +03:00 [INF] This is a test log to file!
2025-09-04 01:30:15.666 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 01:30:15.677 +03:00 [INF] API configured successfully.
2025-09-04 01:30:15.800 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 01:30:15.874 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 01:30:16.438 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 01:30:16.511 +03:00 [INF] API key configured for HttpClient
2025-09-04 01:30:16.521 +03:00 [INF] Registered 14 endpoints in 1,108 milliseconds.
2025-09-04 01:30:16.528 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 01:30:16.577 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 01:30:16.658 +03:00 [DBG] Creating DbConnection.
2025-09-04 01:30:16.670 +03:00 [DBG] Created DbConnection. (9ms).
2025-09-04 01:30:16.674 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:16.680 +03:00 [DBG] Creating DbConnection.
2025-09-04 01:30:16.682 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 01:30:16.684 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:16.700 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:16.705 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:16.710 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 01:30:16.712 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:16.715 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:16.718 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 01:30:16.722 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 01:30:16.727 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-09-04 01:30:16.729 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-04 01:30:16.735 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 01:30:16.758 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 01:30:16.763 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 01:30:16.764 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 01:30:16.766 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-09-04 01:30:16.767 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 22:30:16.7629092+00:00');
SELECT changes();
2025-09-04 01:30:16.778 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 22:30:16.7629092+00:00');
SELECT changes();
2025-09-04 01:30:16.836 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 01:30:16.841 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 01:30:16.843 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 01:30:16.845 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 01:30:16.848 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2025-09-04 01:30:16.855 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 01:30:16.860 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 01:30:16.863 +03:00 [DBG] Committing transaction.
2025-09-04 01:30:16.865 +03:00 [DBG] Committed transaction.
2025-09-04 01:30:16.867 +03:00 [DBG] Disposing transaction.
2025-09-04 01:30:16.870 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 01:30:16.872 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 01:30:16.876 +03:00 [DBG] Creating DbConnection.
2025-09-04 01:30:16.877 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 01:30:16.880 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:16.882 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:16.884 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:16.885 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 01:30:16.887 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 01:30:16.890 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 01:30:16.891 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-04 01:30:16.892 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 01:30:16.894 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 01:30:16.897 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 01:30:16.898 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 01:30:16.900 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 01:30:16.902 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 01:30:16.904 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 01:30:16.909 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:16.912 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 01:30:16.918 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 01:30:16.920 +03:00 [DBG] Committing transaction.
2025-09-04 01:30:16.921 +03:00 [DBG] Committed transaction.
2025-09-04 01:30:16.922 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 01:30:16.923 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 01:30:16.924 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 01:30:16.926 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 01:30:16.933 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 01:30:16.940 +03:00 [DBG] Disposing transaction.
2025-09-04 01:30:16.941 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:16.946 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (4ms).
2025-09-04 01:30:16.948 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 01:30:16.949 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:16.961 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (12ms).
2025-09-04 01:30:16.962 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 01:30:16.963 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 01:30:16.995 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 01:30:17.046 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 01:30:17.048 +03:00 [DBG] Hosting starting
2025-09-04 01:30:17.080 +03:00 [DBG] Middleware loaded
2025-09-04 01:30:17.085 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 01:30:17.087 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 01:30:17.187 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 01:30:17.189 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 01:30:17.192 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 01:30:17.248 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 01:30:17.320 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 01:30:17.321 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 01:30:17.322 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 01:30:17.323 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 01:30:17.323 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 01:30:17.324 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 01:30:17.330 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 01:30:17.341 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 01:30:17.514 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 01:30:17.516 +03:00 [INF] Hosting environment: Development
2025-09-04 01:30:17.517 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 01:30:17.518 +03:00 [DBG] Hosting started
2025-09-04 01:30:42.336 +03:00 [INF] This is a test log to file!
2025-09-04 01:30:42.692 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 01:30:42.699 +03:00 [INF] API configured successfully.
2025-09-04 01:30:42.773 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 01:30:42.821 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 01:30:43.237 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 01:30:43.275 +03:00 [INF] Registered 14 endpoints in 755 milliseconds.
2025-09-04 01:30:43.284 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 01:30:43.320 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 01:30:43.395 +03:00 [DBG] Creating DbConnection.
2025-09-04 01:30:43.406 +03:00 [DBG] Created DbConnection. (9ms).
2025-09-04 01:30:43.409 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:43.413 +03:00 [DBG] Creating DbConnection.
2025-09-04 01:30:43.415 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 01:30:43.417 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:43.424 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:43.426 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:43.430 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 01:30:43.431 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:43.433 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:43.435 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 01:30:43.439 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 01:30:43.443 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 01:30:43.445 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-04 01:30:43.449 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 01:30:43.467 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 01:30:43.469 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 01:30:43.470 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 01:30:43.471 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 01:30:43.471 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 22:30:43.4694205+00:00');
SELECT changes();
2025-09-04 01:30:43.476 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-03 22:30:43.4694205+00:00');
SELECT changes();
2025-09-04 01:30:43.512 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 01:30:43.517 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 01:30:43.518 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 01:30:43.519 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 01:30:43.521 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 01:30:43.522 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 01:30:43.523 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 01:30:43.526 +03:00 [DBG] Committing transaction.
2025-09-04 01:30:43.528 +03:00 [DBG] Committed transaction.
2025-09-04 01:30:43.530 +03:00 [DBG] Disposing transaction.
2025-09-04 01:30:43.532 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 01:30:43.533 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 01:30:43.535 +03:00 [DBG] Creating DbConnection.
2025-09-04 01:30:43.536 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 01:30:43.536 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:43.537 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:43.539 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:43.540 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 01:30:43.542 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 01:30:43.543 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 01:30:43.544 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 01:30:43.545 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 01:30:43.547 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 01:30:43.550 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 01:30:43.551 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 01:30:43.553 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 01:30:43.554 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 01:30:43.557 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 01:30:43.562 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:43.565 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 01:30:43.570 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 01:30:43.571 +03:00 [DBG] Committing transaction.
2025-09-04 01:30:43.572 +03:00 [DBG] Committed transaction.
2025-09-04 01:30:43.573 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 01:30:43.574 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 01:30:43.576 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 01:30:43.577 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 01:30:43.581 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 01:30:43.582 +03:00 [DBG] Disposing transaction.
2025-09-04 01:30:43.584 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:30:43.586 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 01:30:43.587 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 01:30:43.588 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:30:43.589 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 01:30:43.590 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 01:30:43.591 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 01:30:43.611 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 01:30:43.636 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 01:30:43.638 +03:00 [DBG] Hosting starting
2025-09-04 01:30:43.649 +03:00 [DBG] Middleware loaded
2025-09-04 01:30:43.651 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 01:30:43.653 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 01:30:43.717 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 01:30:43.721 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 01:30:43.723 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 01:30:43.750 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 01:30:43.810 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 01:30:43.811 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 01:30:43.812 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 01:30:43.812 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 01:30:43.813 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 01:30:43.813 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 01:30:43.818 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 01:30:43.824 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 01:30:43.910 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 01:30:43.911 +03:00 [INF] Hosting environment: Development
2025-09-04 01:30:43.912 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 01:30:43.913 +03:00 [DBG] Hosting started
2025-09-04 01:31:09.079 +03:00 [DBG] Connection id "0HNFB76A5BLHD" received FIN.
2025-09-04 01:31:09.091 +03:00 [DBG] Connection id "0HNFB76A5BLHD" accepted.
2025-09-04 01:31:09.119 +03:00 [DBG] Connection id "0HNFB76A5BLHD" started.
2025-09-04 01:31:09.121 +03:00 [DBG] Connection id "0HNFB76A5BLHE" accepted.
2025-09-04 01:31:09.122 +03:00 [DBG] Connection id "0HNFB76A5BLHE" started.
2025-09-04 01:31:09.125 +03:00 [DBG] Connection id "0HNFB76A5BLHD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 01:31:09.128 +03:00 [DBG] Connection id "0HNFB76A5BLHD" disconnecting.
2025-09-04 01:31:09.129 +03:00 [DBG] Connection id "0HNFB76A5BLHD" stopped.
2025-09-04 01:31:09.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute - application/json 289
2025-09-04 01:31:09.194 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute'
2025-09-04 01:31:09.197 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute'
2025-09-04 01:31:09.199 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-04 01:31:09.223 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 01:31:09.225 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute'.
2025-09-04 01:31:09.228 +03:00 [DBG] Connection id "0HNFB76A5BLHE" completed keep alive response.
2025-09-04 01:31:09.230 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute - 307 0 null 87.1074ms
2025-09-04 01:31:09.231 +03:00 [DBG] Connection id "0HNFB76A5BLHF" received FIN.
2025-09-04 01:31:09.231 +03:00 [DBG] Connection id "0HNFB76A5BLHG" accepted.
2025-09-04 01:31:09.236 +03:00 [DBG] Connection id "0HNFB76A5BLHF" accepted.
2025-09-04 01:31:09.236 +03:00 [DBG] Connection id "0HNFB76A5BLHE", Request id "0HNFB76A5BLHE:00000001": started reading request body.
2025-09-04 01:31:09.237 +03:00 [DBG] Connection id "0HNFB76A5BLHG" started.
2025-09-04 01:31:09.238 +03:00 [DBG] Connection id "0HNFB76A5BLHF" started.
2025-09-04 01:31:09.240 +03:00 [DBG] Connection id "0HNFB76A5BLHE", Request id "0HNFB76A5BLHE:00000001": done reading request body.
2025-09-04 01:31:09.241 +03:00 [DBG] Connection id "0HNFB76A5BLHF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 01:31:09.243 +03:00 [DBG] Connection id "0HNFB76A5BLHF" disconnecting.
2025-09-04 01:31:09.243 +03:00 [DBG] Connection id "0HNFB76A5BLHF" stopped.
2025-09-04 01:31:09.291 +03:00 [DBG] Connection 0HNFB76A5BLHG established using the following protocol: "Tls13"
2025-09-04 01:31:09.296 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute - application/json 289
2025-09-04 01:31:09.302 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute'
2025-09-04 01:31:09.303 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute'
2025-09-04 01:31:09.304 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-04 01:31:09.308 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-04 01:31:09.320 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ProfilesDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 01:31:09.372 +03:00 [DBG] Connection id "0HNFB76A5BLHG", Request id "0HNFB76A5BLHG:00000001": started reading request body.
2025-09-04 01:31:09.375 +03:00 [DBG] Connection id "0HNFB76A5BLHG", Request id "0HNFB76A5BLHG:00000001": done reading request body.
2025-09-04 01:31:09.444 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-04 01:31:09.496 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-04 01:31:09.711 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Query.ProfileId (Guid) Required FK Index, 8], [Property: Query.ResultJson (string) Required, 9], [Property: Query.SqlQuery (string) Required, 10], [Property: Query.TimestampUtc (DateTime) Required, 11], [Property: Query.UserQuery (string) Required, 12] }
                3 -> 7
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Query.ProfileId (Guid) Required FK Index, 8], [Property: Query.ResultJson (string) Required, 9], [Property: Query.SqlQuery (string) Required, 10], [Property: Query.TimestampUtc (DateTime) Required, 11], [Property: Query.UserQuery (string) Required, 12] }
                3 -> 7
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetGuid(7) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(7) ? default(Guid) : dataReader.GetGuid(7);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime) : dataReader.GetDateTime(11);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ProfilesDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 01:31:09.745 +03:00 [DBG] Creating DbConnection.
2025-09-04 01:31:09.746 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 01:31:09.749 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:31:09.752 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:09.754 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 01:31:09.756 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 01:31:09.759 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-04 01:31:09.762 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 01:31:09.769 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 01:31:09.806 +03:00 [DBG] Context 'ProfilesDbContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 01:31:09.840 +03:00 [DBG] Context 'ProfilesDbContext' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 01:31:09.849 +03:00 [DBG] Context 'ProfilesDbContext' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 01:31:09.851 +03:00 [DBG] Context 'ProfilesDbContext' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 01:31:09.852 +03:00 [DBG] Context 'ProfilesDbContext' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 01:31:09.853 +03:00 [DBG] Context 'ProfilesDbContext' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 01:31:09.857 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:09.858 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 87ms reading results.
2025-09-04 01:31:09.860 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:09.861 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 01:31:09.871 +03:00 [INF] Fetching connection string for profile "773c7d30-609c-442f-ad98-0546699311ed"
2025-09-04 01:31:09.874 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:31:09.875 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:09.877 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 01:31:09.878 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 01:31:09.879 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 01:31:09.880 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 01:31:09.882 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 01:31:09.883 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:09.884 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 01:31:09.885 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:09.887 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 01:31:09.905 +03:00 [DBG] Fetched secret for profile "773c7d30-609c-442f-ad98-0546699311ed"
2025-09-04 01:31:09.929 +03:00 [INF] Executing SQL for Profile "773c7d30-609c-442f-ad98-0546699311ed", Mode="Write"
2025-09-04 01:31:09.932 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="Write")
2025-09-04 01:31:09.933 +03:00 [DBG] SQL: Select * From Products
2025-09-04 01:31:09.936 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-04 01:31:10.309 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-04 01:31:10.371 +03:00 [INF] Query execution finished in 436 ms, returned 15 rows
2025-09-04 01:31:10.379 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:31:10.381 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:10.382 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 01:31:10.383 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 01:31:10.385 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 01:31:10.386 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 01:31:10.388 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 01:31:10.389 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:10.391 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 01:31:10.392 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 01:31:10.393 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 01:31:13.880 +03:00 [INF] Query not saved due to profile rules for profile "773c7d30-609c-442f-ad98-0546699311ed", Query already existed
2025-09-04 01:31:13.893 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-04 01:31:13.897 +03:00 [DBG] Connection id "0HNFB76A5BLHG" completed keep alive response.
2025-09-04 01:31:13.899 +03:00 [DBG] 'ProfilesDbContext' disposed.
2025-09-04 01:31:13.903 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 01:31:13.905 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 01:31:13.907 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/query/773c7d30-609c-442f-ad98-0546699311ed/execute - 200 null application/json; charset=utf-8 4610.6168ms
2025-09-04 17:54:53.945 +03:00 [INF] This is a test log to file!
2025-09-04 17:55:11.507 +03:00 [INF] This is a test log to file!
2025-09-04 17:58:08.712 +03:00 [INF] This is a test log to file!
2025-09-04 17:59:49.042 +03:00 [INF] This is a test log to file!
2025-09-04 18:00:40.357 +03:00 [INF] This is a test log to file!
2025-09-04 18:00:40.995 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 18:00:41.020 +03:00 [INF] API configured successfully.
2025-09-04 18:00:41.282 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 18:00:41.396 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 18:00:42.047 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 18:00:42.139 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:00:42.182 +03:00 [INF] Registered 21 endpoints in 1,578 milliseconds.
2025-09-04 18:00:42.205 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:00:42.249 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:00:42.363 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 18:01:30.713 +03:00 [INF] This is a test log to file!
2025-09-04 18:01:30.877 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 18:01:30.928 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 18:01:31.297 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 18:01:31.349 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:01:31.361 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:01:41.093 +03:00 [INF] This is a test log to file!
2025-09-04 18:01:41.224 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 18:01:41.271 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 18:01:41.692 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 18:01:41.760 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:01:42.603 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:01:57.490 +03:00 [INF] This is a test log to file!
2025-09-04 18:01:57.740 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 18:01:57.877 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 18:01:58.540 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 18:01:58.627 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:01:58.773 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:01:58.812 +03:00 [DBG] Created DbConnection. (36ms).
2025-09-04 18:01:58.819 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 18:01:58.835 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:01:58.838 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 18:01:58.840 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:01:58.869 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:01:58.870 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:01:58.873 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 18:01:58.874 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:01:58.885 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:01:58.891 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:01:58.898 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2025-09-04 18:01:58.899 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (10ms).
2025-09-04 18:01:58.907 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-04 18:01:58.951 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-04 18:01:58.952 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:01:58.958 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (5ms).
2025-09-04 18:01:58.958 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:01:58.958 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:01:58.961 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 18:01:58.964 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:01:58.964 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:01:58.964 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:01:58.965 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 18:01:58.972 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 18:01:58.972 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:01:58.973 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:58.973 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:58.973 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-04 18:01:58.991 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-04 18:01:58.991 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:01:58.992 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:01:58.992 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:01:58.992 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 15:01:58.9917439+00:00');
SELECT changes();
2025-09-04 18:01:58.994 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 15:01:58.9917439+00:00');
SELECT changes();
2025-09-04 18:01:59.042 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:01:59.045 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:01:59.046 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:01:59.046 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.046 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.046 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 18:01:59.047 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 18:01:59.048 +03:00 [DBG] Committing transaction.
2025-09-04 18:01:59.052 +03:00 [DBG] Committed transaction.
2025-09-04 18:01:59.053 +03:00 [DBG] Disposing transaction.
2025-09-04 18:01:59.054 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:01:59.054 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:01:59.055 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:01:59.055 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 18:01:59.055 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:01:59.055 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:01:59.056 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:01:59.056 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 18:01:59.056 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:01:59.056 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:01:59.056 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:01:59.056 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 18:01:59.056 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 18:01:59.058 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 18:01:59.058 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 18:01:59.058 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-04 18:01:59.733 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 18:01:59.733 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 18:01:59.735 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:01:59.735 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 18:01:59.740 +03:00 [INF] Applying migration '20250825154106_init'.
2025-09-04 18:01:59.755 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:01:59.756 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.756 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.756 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-04 18:01:59.756 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-04 18:01:59.756 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:01:59.756 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.756 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.756 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-04 18:01:59.757 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-04 18:01:59.757 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:01:59.757 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.757 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.757 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-04 18:01:59.758 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-04 18:01:59.758 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:01:59.758 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.758 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:01:59.758 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-04 18:01:59.759 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-04 18:01:59.759 +03:00 [INF] Applying migration '20250826210914_updatedsqlite'.
2025-09-04 18:01:59.768 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:01.727 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1959ms).
2025-09-04 18:02:01.727 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1959ms).
2025-09-04 18:02:01.727 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-04 18:02:01.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-04 18:02:01.728 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:01.728 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.728 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.728 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-04 18:02:01.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-04 18:02:01.728 +03:00 [DBG] Committing transaction.
2025-09-04 18:02:01.735 +03:00 [DBG] Committed transaction.
2025-09-04 18:02:01.735 +03:00 [DBG] Disposing transaction.
2025-09-04 18:02:01.735 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:01.735 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.735 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.735 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-04 18:02:01.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-04 18:02:01.735 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:02:01.736 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:02:01.736 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:01.736 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.736 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.736 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-04 18:02:01.736 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-04 18:02:01.736 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:01.736 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.736 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.736 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-04 18:02:01.739 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-04 18:02:01.740 +03:00 [DBG] Committing transaction.
2025-09-04 18:02:01.742 +03:00 [DBG] Committed transaction.
2025-09-04 18:02:01.742 +03:00 [DBG] Disposing transaction.
2025-09-04 18:02:01.742 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:01.742 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.742 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.742 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-04 18:02:01.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-04 18:02:01.743 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:01.743 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.743 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:01.743 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-04 18:02:04.062 +03:00 [INF] Executed DbCommand (2,319ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-04 18:02:04.062 +03:00 [INF] Applying migration '20250831091732_setdatabasenameinprofile'.
2025-09-04 18:02:04.065 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:02:04.065 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:02:04.065 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:04.065 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.065 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.065 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-04 18:02:04.065 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-04 18:02:04.065 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:04.065 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.065 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.065 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-04 18:02:04.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-04 18:02:04.066 +03:00 [INF] Applying migration '20250904150142_addeduser'.
2025-09-04 18:02:04.073 +03:00 [WRN] The migration operation 'PRAGMA foreign_keys = 0;
' from migration 'addeduser' cannot be executed in a transaction. If the app is terminated or an unrecoverable error occurs while this operation is being executed then the migration will be left in a partially applied state and would need to be reverted manually before it can be applied again. Create a separate migration that contains just this operation.
2025-09-04 18:02:04.073 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:04.073 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.073 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.073 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-04 18:02:04.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-04 18:02:04.073 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:04.073 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.073 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.073 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-04 18:02:04.074 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-04 18:02:04.074 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:04.074 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.074 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.074 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-04 18:02:04.074 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-04 18:02:04.074 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:04.074 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:04.074 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.374 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-04 18:02:06.374 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-04 18:02:06.374 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:06.374 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.375 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.375 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-04 18:02:06.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-04 18:02:06.375 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:06.375 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.375 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.375 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-04 18:02:06.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-04 18:02:06.375 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:06.375 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.375 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.375 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-04 18:02:06.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-04 18:02:06.376 +03:00 [DBG] Committing transaction.
2025-09-04 18:02:06.381 +03:00 [DBG] Committed transaction.
2025-09-04 18:02:06.381 +03:00 [DBG] Disposing transaction.
2025-09-04 18:02:06.381 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:06.382 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.382 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:06.382 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-04 18:02:06.382 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-04 18:02:06.382 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:02:06.382 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:02:06.382 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:08.449 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2067ms).
2025-09-04 18:02:08.449 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2067ms).
2025-09-04 18:02:08.449 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-04 18:02:08.450 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-04 18:02:08.450 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:08.450 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.450 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.450 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-04 18:02:08.451 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-04 18:02:08.451 +03:00 [DBG] Committing transaction.
2025-09-04 18:02:08.455 +03:00 [DBG] Committed transaction.
2025-09-04 18:02:08.455 +03:00 [DBG] Disposing transaction.
2025-09-04 18:02:08.455 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:08.455 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.455 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.455 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-04 18:02:08.455 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-04 18:02:08.455 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:02:08.455 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:02:08.455 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:08.455 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.455 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.455 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-04 18:02:08.456 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-04 18:02:08.456 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:08.456 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.456 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.456 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-04 18:02:08.456 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-04 18:02:08.456 +03:00 [DBG] Committing transaction.
2025-09-04 18:02:08.464 +03:00 [DBG] Committed transaction.
2025-09-04 18:02:08.464 +03:00 [DBG] Disposing transaction.
2025-09-04 18:02:08.464 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:08.464 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.464 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:02:08.464 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-04 18:02:08.466 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-04 18:02:08.467 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:02:08.467 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:02:08.467 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:02:08.467 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 18:02:08.469 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 18:02:08.469 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:02:08.470 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 18:02:08.471 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:02:08.471 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:02:11.036 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (2564ms).
2025-09-04 18:02:17.357 +03:00 [INF] This is a test log to file!
2025-09-04 18:02:17.811 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 18:02:17.825 +03:00 [INF] API configured successfully.
2025-09-04 18:02:17.915 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 18:02:17.970 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 18:02:18.800 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 18:02:18.902 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:02:18.944 +03:00 [INF] Registered 21 endpoints in 1,389 milliseconds.
2025-09-04 18:02:18.953 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:02:18.993 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:02:19.088 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:02:19.101 +03:00 [DBG] Created DbConnection. (11ms).
2025-09-04 18:02:19.104 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 18:02:19.113 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:02:19.116 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 18:02:19.118 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:02:19.130 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:02:19.134 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:02:19.139 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 18:02:19.141 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:02:19.144 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:02:19.146 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 18:02:19.151 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:02:19.158 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2025-09-04 18:02:19.160 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (9ms).
2025-09-04 18:02:19.169 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 18:02:19.193 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 18:02:19.198 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:02:19.199 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 18:02:19.200 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 18:02:19.201 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 15:02:19.197809+00:00');
SELECT changes();
2025-09-04 18:02:19.215 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 15:02:19.197809+00:00');
SELECT changes();
2025-09-04 18:02:19.261 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:02:19.265 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:02:19.268 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:02:19.269 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 18:02:19.272 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2025-09-04 18:02:19.273 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 18:02:19.276 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 18:02:19.280 +03:00 [DBG] Committing transaction.
2025-09-04 18:02:19.283 +03:00 [DBG] Committed transaction.
2025-09-04 18:02:19.285 +03:00 [DBG] Disposing transaction.
2025-09-04 18:02:19.288 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:02:19.289 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:02:19.292 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:02:19.293 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 18:02:19.294 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:02:19.296 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:02:19.298 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:02:19.300 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 18:02:19.302 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:02:19.303 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 18:02:19.306 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-09-04 18:02:19.308 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 18:02:19.311 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 18:02:19.315 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 18:02:19.316 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 18:02:19.318 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-04 18:02:19.321 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 18:02:19.327 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 18:02:19.337 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:02:19.339 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 5ms reading results.
2025-09-04 18:02:19.345 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 18:02:19.346 +03:00 [DBG] Committing transaction.
2025-09-04 18:02:19.347 +03:00 [DBG] Committed transaction.
2025-09-04 18:02:19.349 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:02:19.350 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 18:02:19.352 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 18:02:19.354 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 18:02:19.362 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 18:02:19.365 +03:00 [DBG] Disposing transaction.
2025-09-04 18:02:19.367 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:02:19.372 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (4ms).
2025-09-04 18:02:19.374 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:02:19.376 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:02:19.377 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 18:02:19.379 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 18:02:19.380 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 18:02:19.519 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 18:02:19.562 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 18:02:19.563 +03:00 [DBG] Hosting starting
2025-09-04 18:02:19.582 +03:00 [DBG] Middleware loaded
2025-09-04 18:02:19.586 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 18:02:19.588 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 18:02:19.722 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 18:02:19.724 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 18:02:19.733 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 18:02:19.783 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 18:02:19.899 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 18:02:19.900 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 18:02:19.901 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 18:02:19.902 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 18:02:19.903 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 18:02:19.904 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 18:02:19.924 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 18:02:19.940 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 18:02:19.975 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 18:02:19.976 +03:00 [INF] Hosting environment: Development
2025-09-04 18:02:19.977 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 18:02:19.978 +03:00 [DBG] Hosting started
2025-09-04 18:42:14.749 +03:00 [INF] This is a test log to file!
2025-09-04 18:42:15.054 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 18:42:15.069 +03:00 [INF] API configured successfully.
2025-09-04 18:42:15.153 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 18:42:15.202 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 18:42:15.643 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 18:42:15.715 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:42:15.745 +03:00 [INF] Registered 21 endpoints in 883 milliseconds.
2025-09-04 18:42:15.751 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:42:15.793 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:42:15.901 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:42:15.919 +03:00 [DBG] Created DbConnection. (8ms).
2025-09-04 18:42:15.925 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 18:42:15.929 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:42:15.934 +03:00 [DBG] Created DbConnection. (5ms).
2025-09-04 18:42:15.936 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:42:15.947 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:42:15.956 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:42:15.960 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 18:42:15.961 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:42:15.964 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:42:15.967 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 18:42:15.971 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:42:15.976 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 18:42:15.978 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (7ms).
2025-09-04 18:42:15.986 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 18:42:16.005 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 18:42:16.008 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:42:16.008 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 18:42:16.010 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 18:42:16.011 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 15:42:16.0080614+00:00');
SELECT changes();
2025-09-04 18:42:16.020 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 15:42:16.0080614+00:00');
SELECT changes();
2025-09-04 18:42:16.059 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:42:16.061 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:42:16.063 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 18:42:16.064 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 18:42:16.065 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 18:42:16.066 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 18:42:16.068 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 18:42:16.071 +03:00 [DBG] Committing transaction.
2025-09-04 18:42:16.072 +03:00 [DBG] Committed transaction.
2025-09-04 18:42:16.076 +03:00 [DBG] Disposing transaction.
2025-09-04 18:42:16.078 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 18:42:16.079 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 18:42:16.081 +03:00 [DBG] Creating DbConnection.
2025-09-04 18:42:16.082 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 18:42:16.084 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:42:16.086 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:42:16.087 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:42:16.089 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 18:42:16.091 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:42:16.092 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 18:42:16.094 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 18:42:16.095 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 18:42:16.097 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 18:42:16.101 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 18:42:16.102 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 18:42:16.103 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 18:42:16.105 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 18:42:16.108 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 18:42:16.113 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:42:16.116 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-04 18:42:16.121 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 18:42:16.123 +03:00 [DBG] Committing transaction.
2025-09-04 18:42:16.123 +03:00 [DBG] Committed transaction.
2025-09-04 18:42:16.124 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 18:42:16.126 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 18:42:16.127 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 18:42:16.128 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 18:42:16.132 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 18:42:16.134 +03:00 [DBG] Disposing transaction.
2025-09-04 18:42:16.136 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 18:42:16.139 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (3ms).
2025-09-04 18:42:16.140 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:42:16.141 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 18:42:16.143 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 18:42:16.144 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 18:42:16.145 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 18:42:16.174 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 18:42:16.203 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 18:42:16.205 +03:00 [DBG] Hosting starting
2025-09-04 18:42:16.219 +03:00 [DBG] Middleware loaded
2025-09-04 18:42:16.222 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 18:42:16.224 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 18:42:16.308 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 18:42:16.311 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 18:42:16.317 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 18:42:16.353 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 18:42:16.394 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 18:42:16.395 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 18:42:16.396 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 18:42:16.397 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 18:42:16.398 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 18:42:16.399 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 18:42:16.405 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 18:42:16.424 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 18:42:16.461 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 18:42:16.462 +03:00 [INF] Hosting environment: Development
2025-09-04 18:42:16.463 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 18:42:16.464 +03:00 [DBG] Hosting started
2025-09-04 18:42:17.541 +03:00 [DBG] Connection id "0HNFBP6GCVTHI" received FIN.
2025-09-04 18:42:17.549 +03:00 [DBG] Connection id "0HNFBP6GCVTHI" accepted.
2025-09-04 18:42:17.551 +03:00 [DBG] Connection id "0HNFBP6GCVTHI" started.
2025-09-04 18:42:17.552 +03:00 [DBG] Connection id "0HNFBP6GCVTHJ" accepted.
2025-09-04 18:42:17.554 +03:00 [DBG] Connection id "0HNFBP6GCVTHJ" started.
2025-09-04 18:42:17.561 +03:00 [DBG] Connection id "0HNFBP6GCVTHI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 18:42:17.564 +03:00 [DBG] Connection id "0HNFBP6GCVTHI" disconnecting.
2025-09-04 18:42:17.566 +03:00 [DBG] Connection id "0HNFBP6GCVTHI" stopped.
2025-09-04 18:42:17.596 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-04 18:42:17.642 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-04 18:42:17.656 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-04 18:42:17.694 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 18:42:17.696 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/health'.
2025-09-04 18:42:17.700 +03:00 [DBG] Connection id "0HNFBP6GCVTHJ" completed keep alive response.
2025-09-04 18:42:17.703 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 307 0 null 118.8618ms
2025-09-04 18:42:17.708 +03:00 [DBG] Connection id "0HNFBP6GCVTHK" accepted.
2025-09-04 18:42:17.708 +03:00 [DBG] Connection id "0HNFBP6GCVTHK" received FIN.
2025-09-04 18:42:17.708 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" accepted.
2025-09-04 18:42:17.714 +03:00 [DBG] Connection id "0HNFBP6GCVTHK" started.
2025-09-04 18:42:17.716 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" started.
2025-09-04 18:42:17.717 +03:00 [DBG] Connection id "0HNFBP6GCVTHK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 18:42:17.719 +03:00 [DBG] Connection id "0HNFBP6GCVTHK" disconnecting.
2025-09-04 18:42:17.720 +03:00 [DBG] Connection id "0HNFBP6GCVTHK" stopped.
2025-09-04 18:42:17.787 +03:00 [DBG] Connection 0HNFBP6GCVTHL established using the following protocol: "Tls13"
2025-09-04 18:42:17.791 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/health - null null
2025-09-04 18:42:17.795 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-04 18:42:17.796 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-04 18:42:17.801 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-04 18:42:17.865 +03:00 [INF] Api health check sent.
2025-09-04 18:42:17.868 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-04 18:42:17.869 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" completed keep alive response.
2025-09-04 18:42:17.871 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/health - 200 null application/json; charset=utf-8 80.0771ms
2025-09-04 18:58:27.711 +03:00 [DBG] Connection id "0HNFBP6GCVTHM" received FIN.
2025-09-04 18:58:27.713 +03:00 [DBG] Connection id "0HNFBP6GCVTHM" accepted.
2025-09-04 18:58:27.737 +03:00 [DBG] Connection id "0HNFBP6GCVTHM" started.
2025-09-04 18:58:27.738 +03:00 [DBG] Connection id "0HNFBP6GCVTHN" accepted.
2025-09-04 18:58:27.743 +03:00 [DBG] Connection id "0HNFBP6GCVTHM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 18:58:27.744 +03:00 [DBG] Connection id "0HNFBP6GCVTHN" started.
2025-09-04 18:58:27.745 +03:00 [DBG] Connection id "0HNFBP6GCVTHM" disconnecting.
2025-09-04 18:58:27.746 +03:00 [DBG] Connection id "0HNFBP6GCVTHM" stopped.
2025-09-04 18:58:27.746 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 24
2025-09-04 18:58:27.749 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 18:58:27.750 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:27.751 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo'.
2025-09-04 18:58:27.752 +03:00 [DBG] Connection id "0HNFBP6GCVTHN" completed keep alive response.
2025-09-04 18:58:27.754 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 307 0 null 7.1856ms
2025-09-04 18:58:27.756 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/userinfo - application/json 24
2025-09-04 18:58:27.757 +03:00 [DBG] Connection id "0HNFBP6GCVTHN", Request id "0HNFBP6GCVTHN:00000001": started reading request body.
2025-09-04 18:58:27.758 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 18:58:27.759 +03:00 [DBG] Connection id "0HNFBP6GCVTHN", Request id "0HNFBP6GCVTHN:00000001": done reading request body.
2025-09-04 18:58:27.760 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:27.761 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:27.781 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:58:27.813 +03:00 [DBG] Connection id "0HNFBP6GCVTHL", Request id "0HNFBP6GCVTHL:00000002": started reading request body.
2025-09-04 18:58:27.816 +03:00 [DBG] Connection id "0HNFBP6GCVTHL", Request id "0HNFBP6GCVTHL:00000002": done reading request body.
2025-09-04 18:58:27.830 +03:00 [INF] Creating new user with API key: 
2025-09-04 18:58:27.898 +03:00 [ERR] Error creating user with API key: 
2025-09-04 18:58:27.905 +03:00 [INF] Executed endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:27.907 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" completed keep alive response.
2025-09-04 18:58:27.909 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:58:27.912 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/userinfo - 200 null application/json; charset=utf-8 156.1894ms
2025-09-04 18:58:43.002 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 24
2025-09-04 18:58:43.006 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 18:58:43.007 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:43.008 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo'.
2025-09-04 18:58:43.009 +03:00 [DBG] Connection id "0HNFBP6GCVTHN" completed keep alive response.
2025-09-04 18:58:43.010 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 307 0 null 7.9804ms
2025-09-04 18:58:43.010 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/userinfo - application/json 24
2025-09-04 18:58:43.013 +03:00 [DBG] Connection id "0HNFBP6GCVTHN", Request id "0HNFBP6GCVTHN:00000002": started reading request body.
2025-09-04 18:58:43.014 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 18:58:43.015 +03:00 [DBG] Connection id "0HNFBP6GCVTHN", Request id "0HNFBP6GCVTHN:00000002": done reading request body.
2025-09-04 18:58:43.016 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:43.019 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:43.021 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:58:43.023 +03:00 [DBG] Connection id "0HNFBP6GCVTHL", Request id "0HNFBP6GCVTHL:00000003": started reading request body.
2025-09-04 18:58:43.024 +03:00 [DBG] Connection id "0HNFBP6GCVTHL", Request id "0HNFBP6GCVTHL:00000003": done reading request body.
2025-09-04 18:58:45.333 +03:00 [INF] Creating new user with API key: 
2025-09-04 18:58:45.374 +03:00 [ERR] Error creating user with API key: 
2025-09-04 18:58:54.828 +03:00 [INF] Executed endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:54.831 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 24
2025-09-04 18:58:54.828 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" received FIN.
2025-09-04 18:58:54.835 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" completed keep alive response.
2025-09-04 18:58:54.837 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 18:58:54.838 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 18:58:54.839 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 18:58:54.840 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:54.840 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" disconnecting.
2025-09-04 18:58:54.841 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/userinfo - 200 null application/json; charset=utf-8 11830.9925ms
2025-09-04 18:58:54.842 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo'.
2025-09-04 18:58:54.848 +03:00 [DBG] Connection id "0HNFBP6GCVTHN" completed keep alive response.
2025-09-04 18:58:54.849 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 307 0 null 19.9767ms
2025-09-04 18:58:54.849 +03:00 [DBG] Connection id "0HNFBP6GCVTHL" stopped.
2025-09-04 18:58:54.853 +03:00 [DBG] Connection id "0HNFBP6GCVTHN", Request id "0HNFBP6GCVTHN:00000003": started reading request body.
2025-09-04 18:58:54.851 +03:00 [DBG] Connection id "0HNFBP6GCVTHP" accepted.
2025-09-04 18:58:54.850 +03:00 [DBG] Connection id "0HNFBP6GCVTHO" accepted.
2025-09-04 18:58:54.855 +03:00 [DBG] Connection id "0HNFBP6GCVTHO" received FIN.
2025-09-04 18:58:54.860 +03:00 [DBG] Connection id "0HNFBP6GCVTHN", Request id "0HNFBP6GCVTHN:00000003": done reading request body.
2025-09-04 18:58:54.861 +03:00 [DBG] Connection id "0HNFBP6GCVTHP" started.
2025-09-04 18:58:54.862 +03:00 [DBG] Connection id "0HNFBP6GCVTHO" started.
2025-09-04 18:58:54.866 +03:00 [DBG] Connection id "0HNFBP6GCVTHO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 18:58:54.867 +03:00 [DBG] Connection id "0HNFBP6GCVTHO" disconnecting.
2025-09-04 18:58:54.868 +03:00 [DBG] Connection id "0HNFBP6GCVTHO" stopped.
2025-09-04 18:58:54.869 +03:00 [DBG] Connection 0HNFBP6GCVTHP established using the following protocol: "Tls13"
2025-09-04 18:58:54.870 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/userinfo - application/json 24
2025-09-04 18:58:54.872 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 18:58:54.873 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:54.874 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-04 18:58:54.876 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 18:58:54.877 +03:00 [DBG] Connection id "0HNFBP6GCVTHP", Request id "0HNFBP6GCVTHP:00000001": started reading request body.
2025-09-04 18:58:54.878 +03:00 [DBG] Connection id "0HNFBP6GCVTHP", Request id "0HNFBP6GCVTHP:00000001": done reading request body.
2025-09-04 18:59:05.532 +03:00 [INF] Creating new user with API key: 
2025-09-04 19:02:43.454 +03:00 [INF] This is a test log to file!
2025-09-04 19:02:43.904 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 19:02:43.913 +03:00 [INF] API configured successfully.
2025-09-04 19:02:44.016 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 19:02:44.081 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 19:02:44.587 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 19:02:44.724 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:02:44.769 +03:00 [INF] Registered 21 endpoints in 1,112 milliseconds.
2025-09-04 19:02:44.778 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:02:44.826 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:02:44.937 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:02:44.949 +03:00 [DBG] Created DbConnection. (10ms).
2025-09-04 19:02:44.953 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 19:02:44.958 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:02:44.960 +03:00 [DBG] Created DbConnection. (3ms).
2025-09-04 19:02:44.962 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:02:44.977 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:02:44.994 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:02:44.999 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:02:45.001 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:02:45.020 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:02:45.023 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 19:02:45.028 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:02:45.033 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 19:02:45.035 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (7ms).
2025-09-04 19:02:45.042 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 19:02:45.064 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 19:02:45.067 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:02:45.068 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 19:02:45.069 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 19:02:45.070 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 16:02:45.0672233+00:00');
SELECT changes();
2025-09-04 19:02:45.081 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 16:02:45.0672233+00:00');
SELECT changes();
2025-09-04 19:02:45.134 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:02:45.138 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:02:45.141 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:02:45.142 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:02:45.153 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2025-09-04 19:02:45.155 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 19:02:45.157 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 19:02:45.159 +03:00 [DBG] Committing transaction.
2025-09-04 19:02:45.167 +03:00 [DBG] Committed transaction.
2025-09-04 19:02:45.169 +03:00 [DBG] Disposing transaction.
2025-09-04 19:02:45.172 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:02:45.173 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:02:45.175 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:02:45.178 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 19:02:45.179 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:02:45.181 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:02:45.182 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:02:45.184 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:02:45.185 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:02:45.194 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (8ms).
2025-09-04 19:02:45.195 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (9ms).
2025-09-04 19:02:45.196 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 19:02:45.197 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 19:02:45.203 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:02:45.217 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-09-04 19:02:45.218 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-09-04 19:02:45.220 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 19:02:45.223 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 19:02:45.229 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:02:45.232 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 5ms reading results.
2025-09-04 19:02:45.244 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 19:02:45.245 +03:00 [DBG] Committing transaction.
2025-09-04 19:02:45.246 +03:00 [DBG] Committed transaction.
2025-09-04 19:02:45.247 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:02:45.248 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 19:02:45.249 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 19:02:45.250 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 19:02:45.254 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 19:02:45.255 +03:00 [DBG] Disposing transaction.
2025-09-04 19:02:45.257 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:02:45.260 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (3ms).
2025-09-04 19:02:45.262 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:02:45.263 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:02:45.264 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:02:45.266 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 19:02:45.267 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 19:02:45.298 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 19:02:45.331 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 19:02:45.332 +03:00 [DBG] Hosting starting
2025-09-04 19:02:45.347 +03:00 [DBG] Middleware loaded
2025-09-04 19:02:45.356 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 19:02:45.359 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 19:02:45.473 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 19:02:45.487 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 19:02:45.491 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 19:02:45.552 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 19:02:45.616 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 19:02:45.617 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 19:02:45.618 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 19:02:45.619 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 19:02:45.620 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 19:02:45.621 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 19:02:45.627 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 19:02:45.639 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 19:02:45.670 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 19:02:45.671 +03:00 [INF] Hosting environment: Development
2025-09-04 19:02:45.672 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 19:02:45.673 +03:00 [DBG] Hosting started
2025-09-04 19:02:51.711 +03:00 [DBG] Connection id "0HNFBPI06UHRG" received FIN.
2025-09-04 19:02:51.716 +03:00 [DBG] Connection id "0HNFBPI06UHRG" accepted.
2025-09-04 19:02:51.718 +03:00 [DBG] Connection id "0HNFBPI06UHRG" started.
2025-09-04 19:02:51.719 +03:00 [DBG] Connection id "0HNFBPI06UHRH" accepted.
2025-09-04 19:02:51.720 +03:00 [DBG] Connection id "0HNFBPI06UHRH" started.
2025-09-04 19:02:51.724 +03:00 [DBG] Connection id "0HNFBPI06UHRG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 19:02:51.727 +03:00 [DBG] Connection id "0HNFBPI06UHRG" disconnecting.
2025-09-04 19:02:51.730 +03:00 [DBG] Connection id "0HNFBPI06UHRG" stopped.
2025-09-04 19:02:51.774 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 24
2025-09-04 19:02:51.820 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 19:02:51.822 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:02:51.847 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 19:02:51.854 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo'.
2025-09-04 19:02:51.856 +03:00 [DBG] Connection id "0HNFBPI06UHRH" completed keep alive response.
2025-09-04 19:02:51.859 +03:00 [DBG] Connection id "0HNFBPI06UHRI" accepted.
2025-09-04 19:02:51.859 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" accepted.
2025-09-04 19:02:51.860 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 307 0 null 91.3149ms
2025-09-04 19:02:51.873 +03:00 [DBG] Connection id "0HNFBPI06UHRI" received FIN.
2025-09-04 19:02:51.874 +03:00 [DBG] Connection id "0HNFBPI06UHRI" started.
2025-09-04 19:02:51.875 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" started.
2025-09-04 19:02:51.882 +03:00 [DBG] Connection id "0HNFBPI06UHRH", Request id "0HNFBPI06UHRH:00000001": started reading request body.
2025-09-04 19:02:51.887 +03:00 [DBG] Connection id "0HNFBPI06UHRI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 19:02:51.889 +03:00 [DBG] Connection id "0HNFBPI06UHRH", Request id "0HNFBPI06UHRH:00000001": done reading request body.
2025-09-04 19:02:51.890 +03:00 [DBG] Connection id "0HNFBPI06UHRI" disconnecting.
2025-09-04 19:02:51.892 +03:00 [DBG] Connection id "0HNFBPI06UHRI" stopped.
2025-09-04 19:02:51.924 +03:00 [DBG] Connection 0HNFBPI06UHRJ established using the following protocol: "Tls13"
2025-09-04 19:02:51.927 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/userinfo - application/json 24
2025-09-04 19:02:51.930 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 19:02:51.931 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:02:51.934 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:02:51.945 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:02:51.976 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000001": started reading request body.
2025-09-04 19:02:51.977 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000001": done reading request body.
2025-09-04 19:02:55.866 +03:00 [INF] Creating new user with API key: 
2025-09-04 19:03:01.982 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()'
2025-09-04 19:03:02.167 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserInfo entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserInfo instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserInfo);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserInfo)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                        {
                            return 
                            {
                                UserInfo instance;
                                instance = new UserInfo();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserInfo)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-04 19:03:02.188 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:03:02.189 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 19:03:02.192 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:03:02.194 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:02.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:03:02.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:03:02.197 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 19:03:02.198 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-04 19:03:02.202 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-04 19:03:02.207 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:02.209 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-04 19:03:02.211 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:02.212 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:03:02.239 +03:00 [DBG] 'ContextDB' generated a value for the property 'UserInfo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:03:02.279 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:03:02.942 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:03:02.958 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:03:02.965 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 19:03:02.967 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:03:02.968 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:03:03.042 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:03:03.051 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:03.053 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:03:03.054 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:03:03.058 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-04 19:03:03.072 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-04 19:03:03.090 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-04 19:03:03.093 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:03.094 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-04 19:03:03.096 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:03.097 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:03:03.107 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:03:03.113 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-04 19:03:04.344 +03:00 [INF] User created successfully with ID: "960f7d35-a33e-44a1-8019-44b66e065057"
2025-09-04 19:03:04.354 +03:00 [INF] Executed endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:03:04.355 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" completed keep alive response.
2025-09-04 19:03:04.357 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:03:04.360 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:03:04.365 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (4ms).
2025-09-04 19:03:04.369 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/userinfo - 200 null application/json; charset=utf-8 12442.4081ms
2025-09-04 19:03:28.581 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057 - null null
2025-09-04 19:03:28.583 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057'
2025-09-04 19:03:28.585 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057'
2025-09-04 19:03:28.587 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:03:28.593 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057'.
2025-09-04 19:03:28.594 +03:00 [DBG] Connection id "0HNFBPI06UHRH" completed keep alive response.
2025-09-04 19:03:28.595 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057 - 307 0 null 14.5364ms
2025-09-04 19:03:28.603 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057 - null null
2025-09-04 19:03:28.605 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057'
2025-09-04 19:03:28.607 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057'
2025-09-04 19:03:28.608 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:03:28.610 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:03:28.619 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:03:28.628 +03:00 [INF] Getting user by ID: "960f7d35-a33e-44a1-8019-44b66e065057"
2025-09-04 19:03:28.641 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-04 19:03:28.665 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-04 19:03:28.750 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 19:03:28.762 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:03:28.763 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:03:28.764 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:03:28.765 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:28.766 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:03:28.767 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:03:28.768 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:03:28.769 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:03:28.771 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:03:28.785 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:03:28.791 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:28.792 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 19ms reading results.
2025-09-04 19:03:28.793 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:03:28.793 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:03:28.803 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:03:28.803 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" completed keep alive response.
2025-09-04 19:03:28.804 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:03:28.805 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:03:28.806 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:03:28.807 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/userinfo/960f7d35-a33e-44a1-8019-44b66e065057 - 200 null application/json; charset=utf-8 204.9092ms
2025-09-04 19:12:15.803 +03:00 [DBG] Connection id "0HNFBPI06UHRK" received FIN.
2025-09-04 19:12:15.829 +03:00 [DBG] Connection id "0HNFBPI06UHRK" accepted.
2025-09-04 19:12:15.853 +03:00 [DBG] Connection id "0HNFBPI06UHRK" started.
2025-09-04 19:12:15.853 +03:00 [DBG] Connection id "0HNFBPI06UHRL" accepted.
2025-09-04 19:12:15.859 +03:00 [DBG] Connection id "0HNFBPI06UHRK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 19:12:15.860 +03:00 [DBG] Connection id "0HNFBPI06UHRL" started.
2025-09-04 19:12:15.861 +03:00 [DBG] Connection id "0HNFBPI06UHRK" disconnecting.
2025-09-04 19:12:15.863 +03:00 [DBG] Connection id "0HNFBPI06UHRK" stopped.
2025-09-04 19:12:15.865 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/databases/0/DESKTOP-QCK8UI5\SQLEXPRESS - null null
2025-09-04 19:12:15.867 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/databases/0/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-04 19:12:15.868 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}' with route pattern 'api/setup/databases/{type}/{serverName}' is valid for the request path '/api/setup/databases/0/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-04 19:12:15.870 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-04 19:12:15.871 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/databases/0/DESKTOP-QCK8UI5%5CSQLEXPRESS'.
2025-09-04 19:12:15.872 +03:00 [DBG] Connection id "0HNFBPI06UHRL" completed keep alive response.
2025-09-04 19:12:15.873 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/databases/0/DESKTOP-QCK8UI5\SQLEXPRESS - 307 0 null 10.5608ms
2025-09-04 19:12:15.873 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/setup/databases/0/DESKTOP-QCK8UI5\SQLEXPRESS - null null
2025-09-04 19:12:15.879 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/databases/0/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-04 19:12:15.881 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}' with route pattern 'api/setup/databases/{type}/{serverName}' is valid for the request path '/api/setup/databases/0/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-04 19:12:15.882 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-04 19:12:15.884 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-04 19:12:15.887 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:12:15.923 +03:00 [INF] Fetching databases for server DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-04 19:12:15.938 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-04 19:12:16.263 +03:00 [DBG] Connected to server DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-04 19:12:17.790 +03:00 [INF] Found 8 databases on DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-04 19:12:17.799 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-04 19:12:17.803 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" completed keep alive response.
2025-09-04 19:12:17.804 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:12:17.806 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/setup/databases/0/DESKTOP-QCK8UI5\SQLEXPRESS - 200 null application/json; charset=utf-8 1932.1489ms
2025-09-04 19:12:45.494 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 190
2025-09-04 19:12:45.500 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:12:45.501 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:12:45.501 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profile'.
2025-09-04 19:12:45.502 +03:00 [DBG] Connection id "0HNFBPI06UHRL" completed keep alive response.
2025-09-04 19:12:45.503 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 307 0 null 11.5835ms
2025-09-04 19:12:45.507 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/profile - application/json 190
2025-09-04 19:12:45.509 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000002": started reading request body.
2025-09-04 19:12:45.511 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:12:45.512 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000002": done reading request body.
2025-09-04 19:12:45.512 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:12:45.514 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:12:45.515 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:12:45.527 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000004": started reading request body.
2025-09-04 19:12:45.528 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000004": done reading request body.
2025-09-04 19:12:45.731 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:12:45.734 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" completed keep alive response.
2025-09-04 19:12:45.735 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:12:45.736 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/profile - 400 null application/problem+json; charset=utf-8 229.9232ms
2025-09-04 19:13:15.486 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 189
2025-09-04 19:13:15.489 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:13:15.490 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:15.490 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profile'.
2025-09-04 19:13:15.491 +03:00 [DBG] Connection id "0HNFBPI06UHRL" completed keep alive response.
2025-09-04 19:13:15.492 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 307 0 null 28.8676ms
2025-09-04 19:13:15.538 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/profile - application/json 189
2025-09-04 19:13:15.540 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000003": started reading request body.
2025-09-04 19:13:15.541 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:13:15.542 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000003": done reading request body.
2025-09-04 19:13:15.543 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:15.544 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:15.545 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:13:15.547 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000005": started reading request body.
2025-09-04 19:13:15.547 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000005": done reading request body.
2025-09-04 19:13:15.676 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:15.677 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" completed keep alive response.
2025-09-04 19:13:15.678 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:13:15.679 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/profile - 400 null application/problem+json; charset=utf-8 162.9685ms
2025-09-04 19:13:22.186 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 189
2025-09-04 19:13:22.189 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:13:22.189 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:22.190 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profile'.
2025-09-04 19:13:22.191 +03:00 [DBG] Connection id "0HNFBPI06UHRL" completed keep alive response.
2025-09-04 19:13:22.192 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 307 0 null 6.2506ms
2025-09-04 19:13:22.192 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/profile - application/json 189
2025-09-04 19:13:22.194 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000004": started reading request body.
2025-09-04 19:13:22.196 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:13:22.196 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000004": done reading request body.
2025-09-04 19:13:22.197 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:22.199 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:22.200 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:13:22.201 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000006": started reading request body.
2025-09-04 19:13:22.202 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000006": done reading request body.
2025-09-04 19:13:22.207 +03:00 [INF] Creating profile for provider "SqlServer"
2025-09-04 19:13:22.209 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5/SQLEXPRESS, Database=ProductInventory)
2025-09-04 19:13:36.412 +03:00 [DBG] Failed to connect ConnectionString: Data Source=DESKTOP-QCK8UI5/SQLEXPRESS;Initial Catalog=ProductInventory;Integrated Security=True;Connect Timeout=15;Trust Server Certificate=True
2025-09-04 19:13:36.413 +03:00 [DBG] failed to connect to the configured connection string NaturalToQuery.Infrastructure.Providers.ProviderConnectionConfig
2025-09-04 19:13:36.567 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:36.665 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: failed to connect to the configured connection string Data Source=DESKTOP-QCK8UI5/SQLEXPRESS;Initial Catalog=ProductInventory;Integrated Security=True;Connect Timeout=15;Trust Server Certificate=True
   at NaturalToQuery.Application.Services.ProfileService.CreateAsync(ProviderType Type, ProviderConnectionConfig config, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\ProfileService.cs:line 41
   at NaturalToQuery.Application.Services.SetupService.CreateProfileAsync(SetupRequest request, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\SetupService.cs:line 38
   at NaturalToQuery.Api.Controllers.Setup.CreateProfile.HandleAsync(SetupRequest req, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\Setup\CreateProfile.cs:line 24
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-04 19:13:36.680 +03:00 [ERR] Unhandled exception occurred.
2025-09-04 19:13:36.686 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" completed keep alive response.
2025-09-04 19:13:36.687 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:13:36.688 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/profile - 500 null application/json; charset=utf-8 14496.5899ms
2025-09-04 19:13:44.221 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 190
2025-09-04 19:13:44.223 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:13:44.224 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:44.225 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profile'.
2025-09-04 19:13:44.225 +03:00 [DBG] Connection id "0HNFBPI06UHRL" completed keep alive response.
2025-09-04 19:13:44.226 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 307 0 null 5.217ms
2025-09-04 19:13:44.251 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/profile - application/json 190
2025-09-04 19:13:44.253 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000005": started reading request body.
2025-09-04 19:13:44.254 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:13:44.255 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000005": done reading request body.
2025-09-04 19:13:44.256 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:44.258 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:44.259 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:13:44.261 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000007": started reading request body.
2025-09-04 19:13:44.262 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000007": done reading request body.
2025-09-04 19:13:44.264 +03:00 [INF] Creating profile for provider "SqlServer"
2025-09-04 19:13:44.265 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5//SQLEXPRESS, Database=ProductInventory)
2025-09-04 19:13:59.282 +03:00 [DBG] Failed to connect ConnectionString: Data Source=DESKTOP-QCK8UI5//SQLEXPRESS;Initial Catalog=ProductInventory;Integrated Security=True;Connect Timeout=15;Trust Server Certificate=True
2025-09-04 19:13:59.283 +03:00 [DBG] failed to connect to the configured connection string NaturalToQuery.Infrastructure.Providers.ProviderConnectionConfig
2025-09-04 19:13:59.394 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:13:59.480 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: failed to connect to the configured connection string Data Source=DESKTOP-QCK8UI5//SQLEXPRESS;Initial Catalog=ProductInventory;Integrated Security=True;Connect Timeout=15;Trust Server Certificate=True
   at NaturalToQuery.Application.Services.ProfileService.CreateAsync(ProviderType Type, ProviderConnectionConfig config, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\ProfileService.cs:line 41
   at NaturalToQuery.Application.Services.SetupService.CreateProfileAsync(SetupRequest request, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\SetupService.cs:line 38
   at NaturalToQuery.Api.Controllers.Setup.CreateProfile.HandleAsync(SetupRequest req, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\Setup\CreateProfile.cs:line 24
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-04 19:13:59.482 +03:00 [ERR] Unhandled exception occurred.
2025-09-04 19:13:59.483 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" completed keep alive response.
2025-09-04 19:13:59.484 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:13:59.485 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/profile - 500 null application/json; charset=utf-8 15257.2297ms
2025-09-04 19:14:04.006 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 190
2025-09-04 19:14:04.010 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:14:04.011 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:14:04.012 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profile'.
2025-09-04 19:14:04.013 +03:00 [DBG] Connection id "0HNFBPI06UHRL" completed keep alive response.
2025-09-04 19:14:04.014 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/profile - application/json 190
2025-09-04 19:14:04.015 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 307 0 null 8.9725ms
2025-09-04 19:14:04.016 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:14:04.019 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000006": started reading request body.
2025-09-04 19:14:04.020 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:14:04.021 +03:00 [DBG] Connection id "0HNFBPI06UHRL", Request id "0HNFBPI06UHRL:00000006": done reading request body.
2025-09-04 19:14:04.022 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:14:04.024 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:14:04.026 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000008": started reading request body.
2025-09-04 19:14:04.027 +03:00 [DBG] Connection id "0HNFBPI06UHRJ", Request id "0HNFBPI06UHRJ:00000008": done reading request body.
2025-09-04 19:14:04.028 +03:00 [INF] Creating profile for provider "SqlServer"
2025-09-04 19:14:04.028 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-04 19:14:04.149 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-04 19:14:04.173 +03:00 [DBG] Saved secret profile-b7a483c3-e9f5-4921-af62-9d4e4c8c0087 for provider "SqlServer"
2025-09-04 19:14:04.174 +03:00 [DBG] Generated profile name SqlServer - ProductInventory with cache dir C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer
2025-09-04 19:14:04.186 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Any(p => p.DatabaseName.Equals(__profile_DatabaseName_0))'
2025-09-04 19:14:04.193 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 19:14:04.198 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:14:04.199 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:14:04.200 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:14:04.201 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:14:04.202 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:14:04.203 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:14:04.203 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:14:04.204 +03:00 [DBG] Executing DbCommand [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-04 19:14:04.208 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-04 19:14:04.210 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:14:04.211 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 19:14:04.212 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:14:04.213 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:14:04.220 +03:00 [DBG] 'ContextDB' generated a value for the property 'Profile.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:14:04.237 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:14:04.239 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:14:04.245 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:14:04.246 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 19:14:04.247 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:14:04.248 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:14:04.251 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:14:04.252 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:14:04.253 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:14:04.253 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:14:04.256 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-04 19:14:04.257 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-04 19:14:04.275 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-04 19:14:04.277 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:14:04.278 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 19:14:04.279 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:14:04.281 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:14:04.282 +03:00 [DBG] An entity of type 'Profile' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:14:04.284 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-04 19:14:04.285 +03:00 [INF] Profile created successfully with Id "568e55bd-4786-443b-adce-cd683add04a1"
2025-09-04 19:14:04.287 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:14:04.288 +03:00 [DBG] Connection id "0HNFBPI06UHRJ" completed keep alive response.
2025-09-04 19:14:04.289 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:14:04.290 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:14:04.291 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:14:04.292 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/profile - 200 null application/json; charset=utf-8 277.3552ms
2025-09-04 19:47:08.638 +03:00 [INF] This is a test log to file!
2025-09-04 19:47:08.935 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 19:47:08.942 +03:00 [INF] API configured successfully.
2025-09-04 19:47:09.038 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 19:47:09.104 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 19:47:09.581 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 19:47:09.659 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:47:09.688 +03:00 [INF] Registered 21 endpoints in 944 milliseconds.
2025-09-04 19:47:09.705 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:47:09.763 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:47:09.860 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:47:09.881 +03:00 [DBG] Created DbConnection. (19ms).
2025-09-04 19:47:09.895 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:09.899 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:47:09.910 +03:00 [DBG] Created DbConnection. (10ms).
2025-09-04 19:47:09.913 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:09.921 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:09.924 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:09.928 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:47:09.930 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:09.937 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:09.948 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 19:47:09.952 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:47:09.961 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-09-04 19:47:09.967 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (14ms).
2025-09-04 19:47:09.972 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 19:47:10.006 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 19:47:10.019 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:47:10.067 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (48ms).
2025-09-04 19:47:10.069 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (50ms).
2025-09-04 19:47:10.071 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 16:47:10.0190603+00:00');
SELECT changes();
2025-09-04 19:47:10.093 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 16:47:10.0190603+00:00');
SELECT changes();
2025-09-04 19:47:10.149 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:47:10.157 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:47:10.159 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:10.160 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:10.170 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (11ms).
2025-09-04 19:47:10.172 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 19:47:10.173 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 19:47:10.177 +03:00 [DBG] Committing transaction.
2025-09-04 19:47:10.178 +03:00 [DBG] Committed transaction.
2025-09-04 19:47:10.191 +03:00 [DBG] Disposing transaction.
2025-09-04 19:47:10.194 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:47:10.195 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:47:10.197 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:47:10.198 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:47:10.200 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:10.202 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:10.203 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:10.204 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:47:10.205 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:47:10.206 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 19:47:10.207 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 19:47:10.208 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 19:47:10.209 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 19:47:10.212 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:47:10.213 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:47:10.214 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:47:10.215 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 19:47:10.217 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 19:47:10.222 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:10.229 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 8ms reading results.
2025-09-04 19:47:10.233 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 19:47:10.235 +03:00 [DBG] Committing transaction.
2025-09-04 19:47:10.246 +03:00 [DBG] Committed transaction.
2025-09-04 19:47:10.247 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:47:10.248 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 19:47:10.249 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 19:47:10.250 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 19:47:10.263 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 19:47:10.269 +03:00 [DBG] Disposing transaction.
2025-09-04 19:47:10.271 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:10.274 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (3ms).
2025-09-04 19:47:10.276 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:47:10.288 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:10.290 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:47:10.292 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 19:47:10.293 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 19:47:10.332 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 19:47:10.363 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 19:47:10.365 +03:00 [DBG] Hosting starting
2025-09-04 19:47:10.380 +03:00 [DBG] Middleware loaded
2025-09-04 19:47:10.384 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 19:47:10.386 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 19:47:10.495 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 19:47:10.498 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 19:47:10.503 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 19:47:10.550 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 19:47:10.619 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 19:47:10.641 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 19:47:10.658 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 19:47:10.660 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 19:47:10.661 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 19:47:10.663 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 19:47:10.673 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 19:47:10.724 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 19:47:10.785 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 19:47:10.786 +03:00 [INF] Hosting environment: Development
2025-09-04 19:47:10.911 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 19:47:10.913 +03:00 [DBG] Hosting started
2025-09-04 19:47:30.165 +03:00 [INF] This is a test log to file!
2025-09-04 19:47:30.560 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 19:47:30.572 +03:00 [INF] API configured successfully.
2025-09-04 19:47:30.704 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 19:47:30.793 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 19:47:31.321 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 19:47:31.408 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:47:31.440 +03:00 [INF] Registered 21 endpoints in 1,117 milliseconds.
2025-09-04 19:47:31.448 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:47:31.485 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:47:31.589 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:47:31.601 +03:00 [DBG] Created DbConnection. (10ms).
2025-09-04 19:47:31.603 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:31.611 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:47:31.615 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-04 19:47:31.617 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:31.638 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:31.659 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:31.668 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 19:47:31.674 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:31.681 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:31.691 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.695 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:31.703 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2025-09-04 19:47:31.709 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-04 19:47:31.743 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-04 19:47:31.747 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:31.751 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (3ms).
2025-09-04 19:47:31.752 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:31.754 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:31.756 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 19:47:31.775 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:47:31.776 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 19:47:31.777 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 19:47:31.778 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 19:47:31.786 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 19:47:31.793 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.793 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:31.794 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.795 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-04 19:47:31.813 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-04 19:47:31.815 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:47:31.816 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 19:47:31.817 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 19:47:31.818 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 16:47:31.8151531+00:00');
SELECT changes();
2025-09-04 19:47:31.821 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 16:47:31.8151531+00:00');
SELECT changes();
2025-09-04 19:47:31.864 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:47:31.867 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:47:31.868 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.869 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:31.870 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.871 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 19:47:31.873 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 19:47:31.875 +03:00 [DBG] Committing transaction.
2025-09-04 19:47:31.879 +03:00 [DBG] Committed transaction.
2025-09-04 19:47:31.880 +03:00 [DBG] Disposing transaction.
2025-09-04 19:47:31.882 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:47:31.883 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:47:31.886 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:47:31.893 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-04 19:47:31.894 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:31.895 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:31.897 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:31.898 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:47:31.899 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:47:31.900 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 19:47:31.902 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 19:47:31.903 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 19:47:31.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 19:47:31.907 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:47:31.908 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:47:31.909 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 19:47:31.911 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 19:47:31.912 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 19:47:31.915 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:31.917 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-04 19:47:31.923 +03:00 [INF] Applying migration '20250825154106_init'.
2025-09-04 19:47:31.946 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.947 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:31.948 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.949 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-04 19:47:31.950 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-04 19:47:31.952 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.953 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.954 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.955 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-04 19:47:31.957 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-04 19:47:31.959 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.959 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:31.960 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.961 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-04 19:47:31.962 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-04 19:47:31.964 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.965 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:31.966 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:31.967 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-04 19:47:31.969 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-04 19:47:31.971 +03:00 [INF] Applying migration '20250826210914_updatedsqlite'.
2025-09-04 19:47:31.976 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.977 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.978 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:31.979 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-04 19:47:31.981 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-04 19:47:31.982 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.983 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:31.984 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.985 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-04 19:47:31.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-04 19:47:31.987 +03:00 [DBG] Committing transaction.
2025-09-04 19:47:31.991 +03:00 [DBG] Committed transaction.
2025-09-04 19:47:31.991 +03:00 [DBG] Disposing transaction.
2025-09-04 19:47:31.992 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:31.993 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:31.994 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:31.995 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-04 19:47:31.996 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-04 19:47:32.000 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:47:32.001 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:47:32.002 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.002 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.003 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.004 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-04 19:47:32.006 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-04 19:47:32.008 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.008 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.009 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.010 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-04 19:47:32.013 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-04 19:47:32.014 +03:00 [DBG] Committing transaction.
2025-09-04 19:47:32.028 +03:00 [DBG] Committed transaction.
2025-09-04 19:47:32.029 +03:00 [DBG] Disposing transaction.
2025-09-04 19:47:32.030 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.031 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.032 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.033 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-04 19:47:32.045 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-04 19:47:32.047 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.048 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.049 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.050 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-04 19:47:32.054 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-04 19:47:32.056 +03:00 [INF] Applying migration '20250831091732_setdatabasenameinprofile'.
2025-09-04 19:47:32.060 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:47:32.071 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:47:32.072 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.073 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.074 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.075 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-04 19:47:32.077 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-04 19:47:32.078 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.081 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.083 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2025-09-04 19:47:32.095 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-04 19:47:32.097 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-04 19:47:32.100 +03:00 [INF] Applying migration '20250904150142_addeduser'.
2025-09-04 19:47:32.113 +03:00 [WRN] The migration operation 'PRAGMA foreign_keys = 0;
' from migration 'addeduser' cannot be executed in a transaction. If the app is terminated or an unrecoverable error occurs while this operation is being executed then the migration will be left in a partially applied state and would need to be reverted manually before it can be applied again. Create a separate migration that contains just this operation.
2025-09-04 19:47:32.115 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.116 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.118 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.119 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-04 19:47:32.121 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-04 19:47:32.123 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.124 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.126 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.127 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-04 19:47:32.129 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-04 19:47:32.131 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.132 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.133 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.134 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-04 19:47:32.136 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-04 19:47:32.138 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.139 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.140 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.141 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-04 19:47:32.143 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-04 19:47:32.145 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.146 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.147 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.149 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-04 19:47:32.151 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-04 19:47:32.152 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.153 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.154 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.155 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-04 19:47:32.157 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-04 19:47:32.159 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.159 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.160 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.161 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-04 19:47:32.163 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-04 19:47:32.165 +03:00 [DBG] Committing transaction.
2025-09-04 19:47:32.168 +03:00 [DBG] Committed transaction.
2025-09-04 19:47:32.169 +03:00 [DBG] Disposing transaction.
2025-09-04 19:47:32.170 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.171 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.172 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.173 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-04 19:47:32.175 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-04 19:47:32.177 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:47:32.178 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:47:32.179 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.181 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.182 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.183 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-04 19:47:32.185 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-04 19:47:32.188 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.189 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 19:47:32.190 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.193 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-04 19:47:32.195 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-04 19:47:32.197 +03:00 [DBG] Committing transaction.
2025-09-04 19:47:32.201 +03:00 [DBG] Committed transaction.
2025-09-04 19:47:32.204 +03:00 [DBG] Disposing transaction.
2025-09-04 19:47:32.216 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.218 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.219 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.220 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-04 19:47:32.222 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-04 19:47:32.225 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:47:32.226 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:47:32.240 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.241 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.243 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.244 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-04 19:47:32.246 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-04 19:47:32.248 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.249 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.250 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.252 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-04 19:47:32.265 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-04 19:47:32.268 +03:00 [DBG] Committing transaction.
2025-09-04 19:47:32.271 +03:00 [DBG] Committed transaction.
2025-09-04 19:47:32.272 +03:00 [DBG] Disposing transaction.
2025-09-04 19:47:32.273 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 19:47:32.274 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 19:47:32.275 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 19:47:32.277 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-04 19:47:32.285 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-04 19:47:32.287 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 19:47:32.288 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 19:47:32.289 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 19:47:32.302 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 19:47:32.310 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 19:47:32.314 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:32.316 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:47:32.329 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:47:32.330 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:32.331 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:47:32.332 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 19:47:32.333 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 19:47:32.364 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 19:47:32.397 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 19:47:32.399 +03:00 [DBG] Hosting starting
2025-09-04 19:47:32.412 +03:00 [DBG] Middleware loaded
2025-09-04 19:47:32.415 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 19:47:32.417 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 19:47:32.491 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 19:47:32.493 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 19:47:32.495 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 19:47:32.528 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 19:47:32.607 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 19:47:32.608 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 19:47:32.610 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 19:47:32.611 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 19:47:32.611 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 19:47:32.612 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 19:47:32.617 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 19:47:32.627 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 19:47:32.652 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 19:47:32.654 +03:00 [INF] Hosting environment: Development
2025-09-04 19:47:32.655 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 19:47:32.655 +03:00 [DBG] Hosting started
2025-09-04 19:47:42.138 +03:00 [DBG] Connection id "0HNFBQB20RJ23" received FIN.
2025-09-04 19:47:42.143 +03:00 [DBG] Connection id "0HNFBQB20RJ23" accepted.
2025-09-04 19:47:42.145 +03:00 [DBG] Connection id "0HNFBQB20RJ23" started.
2025-09-04 19:47:42.147 +03:00 [DBG] Connection id "0HNFBQB20RJ24" accepted.
2025-09-04 19:47:42.148 +03:00 [DBG] Connection id "0HNFBQB20RJ24" started.
2025-09-04 19:47:42.152 +03:00 [DBG] Connection id "0HNFBQB20RJ23" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 19:47:42.156 +03:00 [DBG] Connection id "0HNFBQB20RJ23" disconnecting.
2025-09-04 19:47:42.158 +03:00 [DBG] Connection id "0HNFBQB20RJ23" stopped.
2025-09-04 19:47:42.178 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 24
2025-09-04 19:47:42.211 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 19:47:42.212 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:47:42.232 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 19:47:42.233 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo'.
2025-09-04 19:47:42.236 +03:00 [DBG] Connection id "0HNFBQB20RJ24" completed keep alive response.
2025-09-04 19:47:42.238 +03:00 [DBG] Connection id "0HNFBQB20RJ25" accepted.
2025-09-04 19:47:42.238 +03:00 [DBG] Connection id "0HNFBQB20RJ25" received FIN.
2025-09-04 19:47:42.238 +03:00 [DBG] Connection id "0HNFBQB20RJ26" accepted.
2025-09-04 19:47:42.244 +03:00 [DBG] Connection id "0HNFBQB20RJ25" started.
2025-09-04 19:47:42.244 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 307 0 null 70.7732ms
2025-09-04 19:47:42.246 +03:00 [DBG] Connection id "0HNFBQB20RJ26" started.
2025-09-04 19:47:42.247 +03:00 [DBG] Connection id "0HNFBQB20RJ25" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 19:47:42.251 +03:00 [DBG] Connection id "0HNFBQB20RJ24", Request id "0HNFBQB20RJ24:00000001": started reading request body.
2025-09-04 19:47:42.252 +03:00 [DBG] Connection id "0HNFBQB20RJ25" disconnecting.
2025-09-04 19:47:42.254 +03:00 [DBG] Connection id "0HNFBQB20RJ24", Request id "0HNFBQB20RJ24:00000001": done reading request body.
2025-09-04 19:47:42.255 +03:00 [DBG] Connection id "0HNFBQB20RJ25" stopped.
2025-09-04 19:47:42.281 +03:00 [DBG] Connection 0HNFBQB20RJ26 established using the following protocol: "Tls13"
2025-09-04 19:47:42.284 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/userinfo - application/json 24
2025-09-04 19:47:42.287 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 19:47:42.288 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:47:42.291 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:47:42.301 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:47:42.334 +03:00 [DBG] Connection id "0HNFBQB20RJ26", Request id "0HNFBQB20RJ26:00000001": started reading request body.
2025-09-04 19:47:42.335 +03:00 [DBG] Connection id "0HNFBQB20RJ26", Request id "0HNFBQB20RJ26:00000001": done reading request body.
2025-09-04 19:47:44.372 +03:00 [INF] Creating new user with API key: 
2025-09-04 19:47:44.391 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()'
2025-09-04 19:47:44.526 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserInfo entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserInfo instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserInfo);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserInfo)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                        {
                            return 
                            {
                                UserInfo instance;
                                instance = new UserInfo();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserInfo)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-04 19:47:44.546 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:47:44.548 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 19:47:44.551 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:44.553 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:44.554 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:47:44.555 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:47:44.556 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 19:47:44.557 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-04 19:47:44.560 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-04 19:47:44.565 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:44.566 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-04 19:47:44.569 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:44.571 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:47:44.595 +03:00 [DBG] 'ContextDB' generated a value for the property 'UserInfo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:47:44.631 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:47:44.636 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:47:44.646 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:47:44.651 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 19:47:44.652 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:47:44.654 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:47:44.691 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:44.692 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:44.694 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:47:44.696 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:47:44.699 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-04 19:47:44.702 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-04 19:47:44.709 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-04 19:47:44.713 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:44.714 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 19:47:44.716 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:44.717 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:47:44.723 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:47:44.726 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-04 19:47:44.728 +03:00 [INF] User created successfully with ID: "c79097b4-8df7-446e-954c-8098b8bc61a4"
2025-09-04 19:47:44.735 +03:00 [INF] Executed endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:47:44.737 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:47:44.738 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:47:44.741 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:44.743 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:47:44.745 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/userinfo - 200 null application/json; charset=utf-8 2461.1749ms
2025-09-04 19:47:59.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - null null
2025-09-04 19:47:59.160 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:47:59.163 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:47:59.164 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:47:59.169 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'.
2025-09-04 19:47:59.170 +03:00 [DBG] Connection id "0HNFBQB20RJ24" completed keep alive response.
2025-09-04 19:47:59.171 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - 307 0 null 12.5392ms
2025-09-04 19:47:59.172 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - null null
2025-09-04 19:47:59.175 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:47:59.176 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:47:59.177 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:47:59.178 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:47:59.188 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:47:59.195 +03:00 [INF] Getting user by ID: "c79097b4-8df7-446e-954c-8098b8bc61a4"
2025-09-04 19:47:59.207 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-04 19:47:59.228 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-04 19:47:59.306 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 19:47:59.319 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:47:59.320 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 19:47:59.320 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:59.321 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:59.322 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:47:59.323 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:47:59.324 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:47:59.325 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:47:59.326 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:47:59.334 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:47:59.339 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:59.340 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 12ms reading results.
2025-09-04 19:47:59.341 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:47:59.342 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:47:59.350 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:47:59.352 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:47:59.353 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:47:59.354 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:47:59.355 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:47:59.357 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - 200 null application/json; charset=utf-8 184.9432ms
2025-09-04 19:48:45.681 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 244
2025-09-04 19:48:45.685 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:48:45.686 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:48:45.688 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profile'.
2025-09-04 19:48:45.689 +03:00 [DBG] Connection id "0HNFBQB20RJ24" completed keep alive response.
2025-09-04 19:48:45.690 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 307 0 null 55.0236ms
2025-09-04 19:48:45.716 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/profile - application/json 244
2025-09-04 19:48:45.719 +03:00 [DBG] Connection id "0HNFBQB20RJ24", Request id "0HNFBQB20RJ24:00000003": started reading request body.
2025-09-04 19:48:45.721 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:48:45.721 +03:00 [DBG] Connection id "0HNFBQB20RJ24", Request id "0HNFBQB20RJ24:00000003": done reading request body.
2025-09-04 19:48:45.722 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:48:45.724 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:48:45.726 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:48:45.737 +03:00 [DBG] Connection id "0HNFBQB20RJ26", Request id "0HNFBQB20RJ26:00000003": started reading request body.
2025-09-04 19:48:45.738 +03:00 [DBG] Connection id "0HNFBQB20RJ26", Request id "0HNFBQB20RJ26:00000003": done reading request body.
2025-09-04 19:48:45.755 +03:00 [INF] Creating profile for provider "SqlServer"
2025-09-04 19:48:45.763 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-04 19:48:46.154 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-04 19:48:46.177 +03:00 [DBG] Saved secret profile-8a67d94f-edd6-4d45-8541-f6b30450e14b for provider "SqlServer"
2025-09-04 19:48:46.179 +03:00 [DBG] Generated profile name SqlServer - ProductInventory with cache dir C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer
2025-09-04 19:48:46.188 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Any(p => p.DatabaseName.Equals(__profile_DatabaseName_0))'
2025-09-04 19:48:46.194 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 19:48:46.199 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:48:46.200 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:48:46.201 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:48:46.202 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:46.203 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:48:46.204 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:48:46.205 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:48:46.206 +03:00 [DBG] Executing DbCommand [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-04 19:48:46.208 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-04 19:48:46.210 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:46.211 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 19:48:46.212 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:46.213 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:48:46.220 +03:00 [DBG] 'ContextDB' generated a value for the property 'Profile.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:48:46.237 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:48:46.239 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:48:46.247 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:48:46.248 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 19:48:46.249 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:48:46.250 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:48:46.253 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:48:46.255 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:46.256 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:48:46.257 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:48:46.259 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 19:48:46.260 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-04 19:48:46.267 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-04 19:48:46.268 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:46.269 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-04 19:48:46.270 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:46.271 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:48:46.272 +03:00 [DBG] An entity of type 'Profile' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:48:46.274 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-04 19:48:46.274 +03:00 [INF] Profile created successfully with Id "a6422825-55fe-448a-982f-17bcbb1c5c7d"
2025-09-04 19:48:46.277 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:48:46.280 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:48:46.281 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:48:46.282 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:48:46.283 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:48:46.284 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/profile - 200 null application/json; charset=utf-8 567.4169ms
2025-09-04 19:48:52.582 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - null null
2025-09-04 19:48:52.587 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:48:52.588 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:48:52.590 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:48:52.591 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'.
2025-09-04 19:48:52.592 +03:00 [DBG] Connection id "0HNFBQB20RJ24" completed keep alive response.
2025-09-04 19:48:52.593 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - 307 0 null 10.7375ms
2025-09-04 19:48:52.593 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - null null
2025-09-04 19:48:52.598 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:48:52.599 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:48:52.600 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:48:52.601 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:48:52.603 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:48:52.605 +03:00 [INF] Getting user by ID: "c79097b4-8df7-446e-954c-8098b8bc61a4"
2025-09-04 19:48:52.608 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:48:52.609 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:48:52.610 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:48:52.611 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:52.612 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:48:52.613 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:48:52.614 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:48:52.615 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:48:52.617 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:48:52.618 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:48:52.623 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:48:52.624 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:52.625 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 7ms reading results.
2025-09-04 19:48:52.627 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:48:52.628 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:48:52.631 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:48:52.632 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:48:52.633 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:48:52.634 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:48:52.635 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:48:52.636 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - 200 null application/json; charset=utf-8 42.6571ms
2025-09-04 19:51:20.446 +03:00 [DBG] Connection id "0HNFBQB20RJ27" received FIN.
2025-09-04 19:51:20.447 +03:00 [DBG] Connection id "0HNFBQB20RJ27" accepted.
2025-09-04 19:51:20.452 +03:00 [DBG] Connection id "0HNFBQB20RJ27" started.
2025-09-04 19:51:20.452 +03:00 [DBG] Connection id "0HNFBQB20RJ28" accepted.
2025-09-04 19:51:20.458 +03:00 [DBG] Connection id "0HNFBQB20RJ27" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 19:51:20.458 +03:00 [DBG] Connection id "0HNFBQB20RJ28" started.
2025-09-04 19:51:20.459 +03:00 [DBG] Connection id "0HNFBQB20RJ27" disconnecting.
2025-09-04 19:51:20.460 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5000/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - null null
2025-09-04 19:51:20.461 +03:00 [DBG] Connection id "0HNFBQB20RJ27" stopped.
2025-09-04 19:51:20.463 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:51:20.464 +03:00 [DBG] Endpoint 'HTTP: DELETE api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:51:20.465 +03:00 [DBG] Request matched endpoint 'HTTP: DELETE api/userinfo/{id}'
2025-09-04 19:51:20.466 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'.
2025-09-04 19:51:20.467 +03:00 [DBG] Connection id "0HNFBQB20RJ28" completed keep alive response.
2025-09-04 19:51:20.468 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5000/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - 307 0 null 7.7456ms
2025-09-04 19:51:20.468 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - null null
2025-09-04 19:51:20.471 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:51:20.473 +03:00 [DBG] Endpoint 'HTTP: DELETE api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:51:20.474 +03:00 [DBG] Request matched endpoint 'HTTP: DELETE api/userinfo/{id}'
2025-09-04 19:51:20.475 +03:00 [INF] Executing endpoint 'HTTP: DELETE api/userinfo/{id}'
2025-09-04 19:51:20.477 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:51:20.481 +03:00 [INF] Deleting user with ID: "c79097b4-8df7-446e-954c-8098b8bc61a4"
2025-09-04 19:51:20.482 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:51:20.483 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:51:20.483 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:51:20.485 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:20.486 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:51:20.487 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:51:20.488 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:51:20.489 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:51:20.491 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:51:20.493 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:51:20.495 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:51:20.497 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:20.498 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-04 19:51:20.499 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:20.500 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:51:20.503 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:51:20.509 +03:00 [DBG] A cascade state change of an entity of type 'Profile' to '"Deleted"' occurred due to deletion of its parent entity of type 'UserInfo'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:51:20.511 +03:00 [DBG] An entity of type 'Profile' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:51:20.514 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:51:20.515 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:51:20.516 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 19:51:20.517 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:51:20.518 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:51:20.526 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:51:20.527 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:20.529 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 19:51:20.530 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 19:51:20.531 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:51:20.532 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:51:20.533 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 19:51:20.534 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Profiles"
WHERE "Id" = @p0
RETURNING 1;
2025-09-04 19:51:20.536 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Profiles"
WHERE "Id" = @p0
RETURNING 1;
2025-09-04 19:51:20.539 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:20.540 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-04 19:51:20.541 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:51:20.542 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:51:20.543 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:51:20.543 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "UserInfos"
WHERE "Id" = @p0
RETURNING 1;
2025-09-04 19:51:20.545 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "UserInfos"
WHERE "Id" = @p0
RETURNING 1;
2025-09-04 19:51:20.546 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:20.547 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-04 19:51:20.549 +03:00 [DBG] Committing transaction.
2025-09-04 19:51:20.554 +03:00 [DBG] Committed transaction.
2025-09-04 19:51:20.555 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:20.556 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:51:20.559 +03:00 [DBG] Disposing transaction.
2025-09-04 19:51:20.561 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:51:20.563 +03:00 [DBG] An entity of type 'Profile' tracked by 'ContextDB' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:51:20.564 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 2 entities written to the database.
2025-09-04 19:51:20.565 +03:00 [INF] User with ID "c79097b4-8df7-446e-954c-8098b8bc61a4" deleted successfully
2025-09-04 19:51:20.566 +03:00 [INF] Executed endpoint 'HTTP: DELETE api/userinfo/{id}'
2025-09-04 19:51:20.566 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:51:20.567 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:51:20.568 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:51:20.569 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:51:20.570 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - 200 null application/json; charset=utf-8 102.1747ms
2025-09-04 19:51:45.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-04 19:51:45.766 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-04 19:51:45.767 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 19:51:45.768 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profiles'.
2025-09-04 19:51:45.769 +03:00 [DBG] Connection id "0HNFBQB20RJ28" completed keep alive response.
2025-09-04 19:51:45.770 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 307 0 null 28.5879ms
2025-09-04 19:51:45.774 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/setup/profiles - null null
2025-09-04 19:51:45.779 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-04 19:51:45.780 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 19:51:45.781 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 19:51:45.782 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:51:45.792 +03:00 [INF] Listing all profiles
2025-09-04 19:51:45.794 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-04 19:51:45.796 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-04 19:51:45.810 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-04 19:51:45.816 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:51:45.816 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:51:45.817 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:51:45.818 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:45.819 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:51:45.820 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:51:45.821 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 19:51:45.822 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-04 19:51:45.823 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-04 19:51:45.825 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:45.825 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-04 19:51:45.826 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:51:45.827 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:51:45.831 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 19:51:45.832 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:51:45.833 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:51:45.834 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:51:45.834 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:51:45.836 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/setup/profiles - 200 null application/json; charset=utf-8 65.3851ms
2025-09-04 19:52:01.209 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 24
2025-09-04 19:52:01.212 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 19:52:01.213 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:52:01.214 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo'.
2025-09-04 19:52:01.214 +03:00 [DBG] Connection id "0HNFBQB20RJ28" completed keep alive response.
2025-09-04 19:52:01.215 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/userinfo - application/json 24
2025-09-04 19:52:01.216 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 307 0 null 6.6091ms
2025-09-04 19:52:01.218 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-04 19:52:01.221 +03:00 [DBG] Connection id "0HNFBQB20RJ28", Request id "0HNFBQB20RJ28:00000003": started reading request body.
2025-09-04 19:52:01.222 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:52:01.223 +03:00 [DBG] Connection id "0HNFBQB20RJ28", Request id "0HNFBQB20RJ28:00000003": done reading request body.
2025-09-04 19:52:01.224 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:52:01.226 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:52:01.227 +03:00 [DBG] Connection id "0HNFBQB20RJ26", Request id "0HNFBQB20RJ26:00000007": started reading request body.
2025-09-04 19:52:01.228 +03:00 [DBG] Connection id "0HNFBQB20RJ26", Request id "0HNFBQB20RJ26:00000007": done reading request body.
2025-09-04 19:52:01.230 +03:00 [INF] Creating new user with API key: 
2025-09-04 19:52:01.231 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:52:01.232 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:52:01.233 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:52:01.233 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:01.234 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:52:01.235 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:52:01.236 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 19:52:01.237 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-04 19:52:01.239 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-04 19:52:01.240 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:01.242 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 19:52:01.243 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:01.244 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:52:01.246 +03:00 [DBG] 'ContextDB' generated a value for the property 'UserInfo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:52:01.247 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:52:01.248 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:52:01.249 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:52:01.250 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 19:52:01.251 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:52:01.252 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:52:01.253 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:52:01.254 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:01.255 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:52:01.256 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:52:01.257 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:52:01.258 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-04 19:52:01.263 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-04 19:52:01.264 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:01.266 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 19:52:01.267 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:01.268 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:52:01.269 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:52:01.270 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-04 19:52:01.271 +03:00 [INF] User created successfully with ID: "46d016a8-8e03-4987-91a6-998f321cfacf"
2025-09-04 19:52:01.272 +03:00 [INF] Executed endpoint 'HTTP: POST api/userinfo'
2025-09-04 19:52:01.273 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:52:01.274 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:52:01.275 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:52:01.276 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:52:01.277 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/userinfo - 200 null application/json; charset=utf-8 61.876ms
2025-09-04 19:52:07.614 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 244
2025-09-04 19:52:07.616 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:52:07.617 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:52:07.618 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profile'.
2025-09-04 19:52:07.619 +03:00 [DBG] Connection id "0HNFBQB20RJ28" completed keep alive response.
2025-09-04 19:52:07.620 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 307 0 null 5.9888ms
2025-09-04 19:52:07.620 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/setup/profile - application/json 244
2025-09-04 19:52:07.622 +03:00 [DBG] Connection id "0HNFBQB20RJ28", Request id "0HNFBQB20RJ28:00000004": started reading request body.
2025-09-04 19:52:07.624 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-04 19:52:07.624 +03:00 [DBG] Connection id "0HNFBQB20RJ28", Request id "0HNFBQB20RJ28:00000004": done reading request body.
2025-09-04 19:52:07.625 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:52:07.627 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:52:07.628 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:52:07.630 +03:00 [DBG] Connection id "0HNFBQB20RJ26", Request id "0HNFBQB20RJ26:00000008": started reading request body.
2025-09-04 19:52:07.631 +03:00 [DBG] Connection id "0HNFBQB20RJ26", Request id "0HNFBQB20RJ26:00000008": done reading request body.
2025-09-04 19:52:07.632 +03:00 [INF] Creating profile for provider "SqlServer"
2025-09-04 19:52:07.633 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-04 19:52:07.635 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-04 19:52:07.638 +03:00 [DBG] Saved secret profile-6e77434c-b352-4437-8d4b-aaade94e8235 for provider "SqlServer"
2025-09-04 19:52:07.638 +03:00 [DBG] Generated profile name SqlServer - ProductInventory with cache dir C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer
2025-09-04 19:52:07.639 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:52:07.640 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:52:07.640 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:52:07.641 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:07.642 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:52:07.643 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:52:07.643 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:52:07.644 +03:00 [DBG] Executing DbCommand [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-04 19:52:07.645 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-04 19:52:07.647 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:07.648 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 19:52:07.649 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:07.650 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:52:07.651 +03:00 [DBG] 'ContextDB' generated a value for the property 'Profile.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:52:07.652 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:52:07.653 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:52:07.653 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:52:07.654 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 19:52:07.655 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 19:52:07.656 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 19:52:07.656 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:52:07.657 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:07.658 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:52:07.658 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:52:07.659 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:52:07.660 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-04 19:52:07.664 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-04 19:52:07.666 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:07.667 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-04 19:52:07.668 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:52:07.669 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:52:07.669 +03:00 [DBG] An entity of type 'Profile' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:52:07.670 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-04 19:52:07.671 +03:00 [INF] Profile created successfully with Id "17b4d629-6bfa-4574-bef7-f1e0ebe16b08"
2025-09-04 19:52:07.672 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-04 19:52:07.673 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:52:07.674 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:52:07.675 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:52:07.675 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:52:07.676 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/setup/profile - 200 null application/json; charset=utf-8 56.1459ms
2025-09-04 19:53:41.861 +03:00 [DBG] Connection id "0HNFBQB20RJ29" accepted.
2025-09-04 19:53:41.867 +03:00 [DBG] Connection id "0HNFBQB20RJ29" received FIN.
2025-09-04 19:53:41.894 +03:00 [DBG] Connection id "0HNFBQB20RJ29" started.
2025-09-04 19:53:41.894 +03:00 [DBG] Connection id "0HNFBQB20RJ2A" accepted.
2025-09-04 19:53:41.901 +03:00 [DBG] Connection id "0HNFBQB20RJ29" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 19:53:41.902 +03:00 [DBG] Connection id "0HNFBQB20RJ2A" started.
2025-09-04 19:53:41.903 +03:00 [DBG] Connection id "0HNFBQB20RJ29" disconnecting.
2025-09-04 19:53:41.904 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - null null
2025-09-04 19:53:41.904 +03:00 [DBG] Connection id "0HNFBQB20RJ29" stopped.
2025-09-04 19:53:41.906 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:53:41.908 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:53:41.909 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:53:41.910 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'.
2025-09-04 19:53:41.910 +03:00 [DBG] Connection id "0HNFBQB20RJ2A" completed keep alive response.
2025-09-04 19:53:41.911 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - 307 0 null 7.3966ms
2025-09-04 19:53:41.912 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - null null
2025-09-04 19:53:41.915 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:53:41.916 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4'
2025-09-04 19:53:41.917 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:53:41.918 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:53:41.919 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:53:41.921 +03:00 [INF] Getting user by ID: "c79097b4-8df7-446e-954c-8098b8bc61a4"
2025-09-04 19:53:41.922 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:53:41.922 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:53:41.923 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:53:41.924 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:53:41.925 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:53:41.926 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:53:41.927 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:53:41.928 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:53:41.929 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:53:41.931 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:53:41.932 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-04 19:53:41.933 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:53:41.933 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:53:41.935 +03:00 [WRN] User with ID "c79097b4-8df7-446e-954c-8098b8bc61a4" not found
2025-09-04 19:53:41.935 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:53:41.936 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:53:41.937 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:53:41.937 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:53:41.938 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:53:41.940 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/userinfo/c79097b4-8df7-446e-954c-8098b8bc61a4 - 200 0 null 27.8754ms
2025-09-04 19:53:51.649 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf - null null
2025-09-04 19:53:51.652 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'
2025-09-04 19:53:51.653 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'
2025-09-04 19:53:51.654 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:53:51.655 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'.
2025-09-04 19:53:51.655 +03:00 [DBG] Connection id "0HNFBQB20RJ2A" completed keep alive response.
2025-09-04 19:53:51.656 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf - 307 0 null 7.2076ms
2025-09-04 19:53:51.656 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf - null null
2025-09-04 19:53:51.660 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'
2025-09-04 19:53:51.661 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'
2025-09-04 19:53:51.662 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:53:51.662 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:53:51.664 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 19:53:51.665 +03:00 [INF] Getting user by ID: "46d016a8-8e03-4987-91a6-998f321cfacf"
2025-09-04 19:53:51.666 +03:00 [DBG] Creating DbConnection.
2025-09-04 19:53:51.667 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 19:53:51.667 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:53:51.668 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:53:51.669 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 19:53:51.669 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 19:53:51.670 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 19:53:51.671 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:53:51.673 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 19:53:51.674 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:53:51.675 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 19:53:51.676 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:53:51.677 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 19:53:51.678 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 19:53:51.679 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 19:53:51.681 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 19:53:51.682 +03:00 [DBG] Connection id "0HNFBQB20RJ26" completed keep alive response.
2025-09-04 19:53:51.683 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 19:53:51.684 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 19:53:51.685 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 19:53:51.687 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf - 200 null application/json; charset=utf-8 30.3368ms
2025-09-04 20:00:56.662 +03:00 [INF] This is a test log to file!
2025-09-04 20:00:57.019 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 20:00:57.029 +03:00 [INF] API configured successfully.
2025-09-04 20:00:57.120 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 20:00:57.200 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 20:00:57.675 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 20:00:57.735 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:00:57.764 +03:00 [INF] Registered 21 endpoints in 975 milliseconds.
2025-09-04 20:00:57.770 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:00:57.803 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:00:57.878 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:00:57.889 +03:00 [DBG] Created DbConnection. (9ms).
2025-09-04 20:00:57.893 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 20:00:57.903 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:00:57.906 +03:00 [DBG] Created DbConnection. (3ms).
2025-09-04 20:00:57.908 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:00:57.921 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:00:57.925 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:00:57.931 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:00:57.938 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:00:57.941 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:00:57.944 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 20:00:57.948 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:00:57.954 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-09-04 20:00:57.956 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (7ms).
2025-09-04 20:00:57.961 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 20:00:57.987 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 20:00:57.993 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:00:57.994 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:00:57.995 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:00:57.996 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 17:00:57.993202+00:00');
SELECT changes();
2025-09-04 20:00:58.004 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 17:00:57.993202+00:00');
SELECT changes();
2025-09-04 20:00:58.064 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 20:00:58.068 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 20:00:58.070 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 20:00:58.071 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 20:00:58.073 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 20:00:58.075 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 20:00:58.077 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 20:00:58.080 +03:00 [DBG] Committing transaction.
2025-09-04 20:00:58.082 +03:00 [DBG] Committed transaction.
2025-09-04 20:00:58.083 +03:00 [DBG] Disposing transaction.
2025-09-04 20:00:58.086 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 20:00:58.088 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 20:00:58.090 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:00:58.091 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 20:00:58.092 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:00:58.093 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:00:58.095 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:00:58.096 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:00:58.097 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:00:58.098 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:00:58.100 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:00:58.101 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 20:00:58.103 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 20:00:58.108 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:00:58.110 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 20:00:58.111 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-04 20:00:58.113 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 20:00:58.115 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 20:00:58.120 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:00:58.122 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 20:00:58.127 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 20:00:58.128 +03:00 [DBG] Committing transaction.
2025-09-04 20:00:58.129 +03:00 [DBG] Committed transaction.
2025-09-04 20:00:58.130 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:00:58.131 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 20:00:58.132 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:00:58.133 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 20:00:58.137 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 20:00:58.139 +03:00 [DBG] Disposing transaction.
2025-09-04 20:00:58.141 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:00:58.143 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 20:00:58.145 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:00:58.145 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:00:58.146 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 20:00:58.147 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 20:00:58.148 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 20:00:58.171 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 20:00:58.195 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 20:00:58.196 +03:00 [DBG] Hosting starting
2025-09-04 20:00:58.208 +03:00 [DBG] Middleware loaded
2025-09-04 20:00:58.211 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 20:00:58.213 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 20:00:58.287 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 20:00:58.289 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 20:00:58.294 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 20:00:58.326 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 20:00:58.374 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 20:00:58.375 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 20:00:58.376 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 20:00:58.377 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 20:00:58.378 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 20:00:58.379 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 20:00:58.383 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 20:00:58.399 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 20:00:58.423 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 20:00:58.423 +03:00 [INF] Hosting environment: Development
2025-09-04 20:00:58.425 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 20:00:58.425 +03:00 [DBG] Hosting started
2025-09-04 20:01:02.456 +03:00 [DBG] Connection id "0HNFBQIGH9CMU" received FIN.
2025-09-04 20:01:02.461 +03:00 [DBG] Connection id "0HNFBQIGH9CMU" accepted.
2025-09-04 20:01:02.463 +03:00 [DBG] Connection id "0HNFBQIGH9CMU" started.
2025-09-04 20:01:02.464 +03:00 [DBG] Connection id "0HNFBQIGH9CMV" accepted.
2025-09-04 20:01:02.465 +03:00 [DBG] Connection id "0HNFBQIGH9CMV" started.
2025-09-04 20:01:02.469 +03:00 [DBG] Connection id "0HNFBQIGH9CMU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 20:01:02.472 +03:00 [DBG] Connection id "0HNFBQIGH9CMU" disconnecting.
2025-09-04 20:01:02.474 +03:00 [DBG] Connection id "0HNFBQIGH9CMU" stopped.
2025-09-04 20:01:02.490 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf - null null
2025-09-04 20:01:02.538 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'
2025-09-04 20:01:02.541 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'
2025-09-04 20:01:02.543 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 20:01:02.570 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 20:01:02.572 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'.
2025-09-04 20:01:02.574 +03:00 [DBG] Connection id "0HNFBQIGH9CMV" completed keep alive response.
2025-09-04 20:01:02.576 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf - 307 0 null 90.4404ms
2025-09-04 20:01:02.577 +03:00 [DBG] Connection id "0HNFBQIGH9CN1" accepted.
2025-09-04 20:01:02.577 +03:00 [DBG] Connection id "0HNFBQIGH9CN0" received FIN.
2025-09-04 20:01:02.577 +03:00 [DBG] Connection id "0HNFBQIGH9CN0" accepted.
2025-09-04 20:01:02.586 +03:00 [DBG] Connection id "0HNFBQIGH9CN1" started.
2025-09-04 20:01:02.587 +03:00 [DBG] Connection id "0HNFBQIGH9CN0" started.
2025-09-04 20:01:02.589 +03:00 [DBG] Connection id "0HNFBQIGH9CN0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 20:01:02.590 +03:00 [DBG] Connection id "0HNFBQIGH9CN0" disconnecting.
2025-09-04 20:01:02.591 +03:00 [DBG] Connection id "0HNFBQIGH9CN0" stopped.
2025-09-04 20:01:02.618 +03:00 [DBG] Connection 0HNFBQIGH9CN1 established using the following protocol: "Tls13"
2025-09-04 20:01:02.621 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf - null null
2025-09-04 20:01:02.623 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'
2025-09-04 20:01:02.624 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf'
2025-09-04 20:01:02.626 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 20:01:02.629 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 20:01:02.639 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:01:02.672 +03:00 [INF] Getting user by ID: "46d016a8-8e03-4987-91a6-998f321cfacf"
2025-09-04 20:01:02.721 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-04 20:01:02.755 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-04 20:01:02.947 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 20:01:02.975 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:01:02.976 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 20:01:02.978 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:01:02.980 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:02.982 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:01:02.983 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 20:01:02.986 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-04 20:01:02.990 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:01:02.997 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:01:03.034 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:01:03.061 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:01:03.080 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:03.081 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 81ms reading results.
2025-09-04 20:01:03.084 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:03.086 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:01:03.109 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-04 20:01:03.110 +03:00 [DBG] Connection id "0HNFBQIGH9CN1" completed keep alive response.
2025-09-04 20:01:03.112 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:01:03.115 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:01:03.117 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:01:03.119 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf - 200 null application/json; charset=utf-8 497.8066ms
2025-09-04 20:01:10.183 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-04 20:01:10.186 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-04 20:01:10.187 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 20:01:10.189 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profiles'.
2025-09-04 20:01:10.190 +03:00 [DBG] Connection id "0HNFBQIGH9CMV" completed keep alive response.
2025-09-04 20:01:10.191 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 307 0 null 8.5093ms
2025-09-04 20:01:10.192 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/setup/profiles - null null
2025-09-04 20:01:10.197 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-04 20:01:10.198 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 20:01:10.199 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 20:01:10.210 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:01:10.221 +03:00 [INF] Listing all profiles
2025-09-04 20:01:10.225 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-04 20:01:10.227 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-04 20:01:10.243 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-04 20:01:10.249 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:01:10.250 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 20:01:10.251 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:01:10.253 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:10.254 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:01:10.255 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 20:01:10.257 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:01:10.258 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-04 20:01:10.260 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-04 20:01:10.264 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:10.265 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 20:01:10.267 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:10.268 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:01:10.271 +03:00 [INF] Fetching connection string for profile "17b4d629-6bfa-4574-bef7-f1e0ebe16b08"
2025-09-04 20:01:10.273 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-04 20:01:10.275 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-04 20:01:10.287 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 20:01:10.293 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:01:10.294 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:10.295 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:01:10.296 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 20:01:10.298 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:01:10.299 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 20:01:10.301 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 20:01:10.303 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:01:10.306 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:10.307 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 20:01:10.308 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:10.310 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:01:10.343 +03:00 [DBG] Fetched secret for profile "17b4d629-6bfa-4574-bef7-f1e0ebe16b08"
2025-09-04 20:01:10.352 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 20:01:10.354 +03:00 [DBG] Connection id "0HNFBQIGH9CN1" completed keep alive response.
2025-09-04 20:01:10.355 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:01:10.356 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:01:10.357 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:01:10.359 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/setup/profiles - 200 null application/json; charset=utf-8 166.7654ms
2025-09-04 20:01:50.396 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - application/json 28
2025-09-04 20:01:50.398 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:01:50.399 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:01:50.400 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:01:50.401 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'.
2025-09-04 20:01:50.402 +03:00 [DBG] Connection id "0HNFBQIGH9CMV" completed keep alive response.
2025-09-04 20:01:50.403 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - 307 0 null 7.0672ms
2025-09-04 20:01:50.410 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - application/json 28
2025-09-04 20:01:50.411 +03:00 [DBG] Connection id "0HNFBQIGH9CMV", Request id "0HNFBQIGH9CMV:00000003": started reading request body.
2025-09-04 20:01:50.413 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:01:50.413 +03:00 [DBG] Connection id "0HNFBQIGH9CMV", Request id "0HNFBQIGH9CMV:00000003": done reading request body.
2025-09-04 20:01:50.414 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:01:50.415 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:01:50.417 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:01:50.418 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:01:50.425 +03:00 [DBG] Connection id "0HNFBQIGH9CN1", Request id "0HNFBQIGH9CN1:00000003": started reading request body.
2025-09-04 20:01:50.426 +03:00 [DBG] Connection id "0HNFBQIGH9CN1", Request id "0HNFBQIGH9CN1:00000003": done reading request body.
2025-09-04 20:01:50.437 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:01:50.437 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 20:01:50.438 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:01:50.439 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:50.439 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:01:50.440 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 20:01:50.441 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 20:01:50.442 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:01:50.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:01:50.445 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:01:50.446 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:01:50.446 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:50.447 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-04 20:01:50.448 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:50.449 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 20:01:50.457 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:01:50.461 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 20:01:50.480 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 20:01:50.484 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 20:01:50.486 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 20:01:50.487 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 20:01:50.523 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:01:50.524 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:50.526 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:01:50.526 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 20:01:50.528 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:01:50.529 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-04 20:01:50.531 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-04 20:01:50.537 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:50.539 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 5ms reading results.
2025-09-04 20:01:50.540 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:01:50.541 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:01:50.543 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:01:50.545 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-04 20:01:50.549 +03:00 [INF] AI mode changed to "Groq" for user "46d016a8-8e03-4987-91a6-998f321cfacf" at "2025-09-04T17:01:50.4509232Z"
2025-09-04 20:01:50.551 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:01:50.552 +03:00 [DBG] Connection id "0HNFBQIGH9CN1" completed keep alive response.
2025-09-04 20:01:50.553 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:01:50.553 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:01:50.554 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 20:01:50.555 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - 200 null application/json; charset=utf-8 145.7752ms
2025-09-04 20:10:53.119 +03:00 [INF] This is a test log to file!
2025-09-04 20:10:53.524 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 20:10:53.558 +03:00 [INF] API configured successfully.
2025-09-04 20:10:53.639 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 20:10:53.731 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 20:10:54.161 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 20:10:54.260 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:10:54.300 +03:00 [INF] Registered 20 endpoints in 953 milliseconds.
2025-09-04 20:10:54.306 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:10:54.349 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:10:54.478 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:10:54.489 +03:00 [DBG] Created DbConnection. (9ms).
2025-09-04 20:10:54.492 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 20:10:54.496 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:10:54.498 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 20:10:54.501 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:10:54.509 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:10:54.513 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:10:54.517 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:10:54.518 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:10:54.520 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:10:54.522 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 20:10:54.526 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:10:54.530 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:10:54.532 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-04 20:10:54.538 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 20:10:54.560 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 20:10:54.571 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:10:54.572 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 20:10:54.573 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:10:54.575 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 17:10:54.571531+00:00');
SELECT changes();
2025-09-04 20:10:54.591 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 17:10:54.571531+00:00');
SELECT changes();
2025-09-04 20:10:54.645 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 20:10:54.650 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 20:10:54.652 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 20:10:54.653 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 20:10:54.655 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-04 20:10:54.656 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 20:10:54.658 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 20:10:54.661 +03:00 [DBG] Committing transaction.
2025-09-04 20:10:54.664 +03:00 [DBG] Committed transaction.
2025-09-04 20:10:54.676 +03:00 [DBG] Disposing transaction.
2025-09-04 20:10:54.678 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 20:10:54.679 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 20:10:54.681 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:10:54.685 +03:00 [DBG] Created DbConnection. (3ms).
2025-09-04 20:10:54.686 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:10:54.688 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:10:54.689 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:10:54.690 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:10:54.692 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:10:54.693 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:10:54.694 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:10:54.696 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 20:10:54.698 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 20:10:54.701 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:10:54.702 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 20:10:54.703 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:10:54.704 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 20:10:54.706 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 20:10:54.711 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:10:54.713 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 20:10:54.717 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 20:10:54.718 +03:00 [DBG] Committing transaction.
2025-09-04 20:10:54.718 +03:00 [DBG] Committed transaction.
2025-09-04 20:10:54.719 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:10:54.720 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:10:54.721 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:10:54.722 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 20:10:54.727 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 20:10:54.728 +03:00 [DBG] Disposing transaction.
2025-09-04 20:10:54.729 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:10:54.732 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 20:10:54.733 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:10:54.734 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:10:54.735 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 20:10:54.735 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 20:10:54.736 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 20:10:54.760 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 20:10:54.788 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 20:10:54.790 +03:00 [DBG] Hosting starting
2025-09-04 20:10:54.803 +03:00 [DBG] Middleware loaded
2025-09-04 20:10:54.807 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 20:10:54.808 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 20:10:54.903 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 20:10:54.905 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 20:10:54.908 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 20:10:54.958 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 20:10:55.009 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 20:10:55.009 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 20:10:55.010 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 20:10:55.011 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 20:10:55.012 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 20:10:55.012 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 20:10:55.017 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 20:10:55.033 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 20:10:55.059 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 20:10:55.060 +03:00 [INF] Hosting environment: Development
2025-09-04 20:10:55.061 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 20:10:55.062 +03:00 [DBG] Hosting started
2025-09-04 20:12:18.180 +03:00 [INF] This is a test log to file!
2025-09-04 20:12:18.554 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 20:12:18.566 +03:00 [INF] API configured successfully.
2025-09-04 20:12:18.663 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 20:12:18.762 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 20:12:19.280 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 20:12:19.359 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:12:19.408 +03:00 [INF] Registered 20 endpoints in 1,092 milliseconds.
2025-09-04 20:12:19.423 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:12:19.482 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:12:19.609 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:12:19.624 +03:00 [DBG] Created DbConnection. (12ms).
2025-09-04 20:12:19.626 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:19.631 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:12:19.634 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 20:12:19.637 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:19.648 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:19.651 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:19.655 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:12:19.656 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:19.658 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:19.660 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 20:12:19.664 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:12:19.669 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:12:19.671 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-04 20:12:19.676 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 20:12:19.695 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 20:12:19.698 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:12:19.699 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 20:12:19.700 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:12:19.701 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 17:12:19.6985898+00:00');
SELECT changes();
2025-09-04 20:12:19.706 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 17:12:19.6985898+00:00');
SELECT changes();
2025-09-04 20:12:19.747 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 20:12:19.750 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 20:12:19.755 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 20:12:19.759 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-09-04 20:12:19.761 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (6ms).
2025-09-04 20:12:19.764 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 20:12:19.776 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 20:12:19.780 +03:00 [DBG] Committing transaction.
2025-09-04 20:12:19.782 +03:00 [DBG] Committed transaction.
2025-09-04 20:12:19.784 +03:00 [DBG] Disposing transaction.
2025-09-04 20:12:19.789 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 20:12:19.792 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 20:12:19.794 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:12:19.795 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 20:12:19.796 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:19.798 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:19.800 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:19.801 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:12:19.804 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:12:19.805 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:12:19.807 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:12:19.808 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 20:12:19.810 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 20:12:19.813 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:12:19.814 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 20:12:19.815 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:12:19.817 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 20:12:19.819 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 20:12:19.832 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:19.834 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 20:12:19.850 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 20:12:19.851 +03:00 [DBG] Committing transaction.
2025-09-04 20:12:19.853 +03:00 [DBG] Committed transaction.
2025-09-04 20:12:19.853 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:12:19.854 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 20:12:19.856 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:12:19.857 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 20:12:19.861 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 20:12:19.863 +03:00 [DBG] Disposing transaction.
2025-09-04 20:12:19.864 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:19.868 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (3ms).
2025-09-04 20:12:19.870 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:12:19.871 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:19.884 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (13ms).
2025-09-04 20:12:19.886 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 20:12:19.887 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 20:12:19.923 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 20:12:19.951 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 20:12:19.953 +03:00 [DBG] Hosting starting
2025-09-04 20:12:19.966 +03:00 [DBG] Middleware loaded
2025-09-04 20:12:19.969 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 20:12:19.971 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 20:12:20.043 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 20:12:20.046 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 20:12:20.049 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 20:12:20.116 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 20:12:20.168 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 20:12:20.169 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 20:12:20.171 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 20:12:20.172 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 20:12:20.173 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 20:12:20.174 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 20:12:20.179 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 20:12:20.194 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 20:12:20.218 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 20:12:20.219 +03:00 [INF] Hosting environment: Development
2025-09-04 20:12:20.220 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 20:12:20.221 +03:00 [DBG] Hosting started
2025-09-04 20:12:25.984 +03:00 [DBG] Connection id "0HNFBQOS7TH9G" received FIN.
2025-09-04 20:12:26.000 +03:00 [DBG] Connection id "0HNFBQOS7TH9G" accepted.
2025-09-04 20:12:26.003 +03:00 [DBG] Connection id "0HNFBQOS7TH9G" started.
2025-09-04 20:12:26.004 +03:00 [DBG] Connection id "0HNFBQOS7TH9H" accepted.
2025-09-04 20:12:26.005 +03:00 [DBG] Connection id "0HNFBQOS7TH9H" started.
2025-09-04 20:12:26.009 +03:00 [DBG] Connection id "0HNFBQOS7TH9G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 20:12:26.012 +03:00 [DBG] Connection id "0HNFBQOS7TH9G" disconnecting.
2025-09-04 20:12:26.014 +03:00 [DBG] Connection id "0HNFBQOS7TH9G" stopped.
2025-09-04 20:12:26.033 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - application/json 28
2025-09-04 20:12:26.070 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:12:26.072 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:12:26.074 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:12:26.106 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 20:12:26.109 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'.
2025-09-04 20:12:26.113 +03:00 [DBG] Connection id "0HNFBQOS7TH9H" completed keep alive response.
2025-09-04 20:12:26.116 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - 307 0 null 87.2892ms
2025-09-04 20:12:26.125 +03:00 [DBG] Connection id "0HNFBQOS7TH9H", Request id "0HNFBQOS7TH9H:00000001": started reading request body.
2025-09-04 20:12:26.126 +03:00 [DBG] Connection id "0HNFBQOS7TH9I" received FIN.
2025-09-04 20:12:26.127 +03:00 [DBG] Connection id "0HNFBQOS7TH9J" accepted.
2025-09-04 20:12:26.127 +03:00 [DBG] Connection id "0HNFBQOS7TH9H", Request id "0HNFBQOS7TH9H:00000001": done reading request body.
2025-09-04 20:12:26.128 +03:00 [DBG] Connection id "0HNFBQOS7TH9I" accepted.
2025-09-04 20:12:26.128 +03:00 [DBG] Connection id "0HNFBQOS7TH9J" started.
2025-09-04 20:12:26.131 +03:00 [DBG] Connection id "0HNFBQOS7TH9I" started.
2025-09-04 20:12:26.133 +03:00 [DBG] Connection id "0HNFBQOS7TH9I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 20:12:26.134 +03:00 [DBG] Connection id "0HNFBQOS7TH9I" disconnecting.
2025-09-04 20:12:26.136 +03:00 [DBG] Connection id "0HNFBQOS7TH9I" stopped.
2025-09-04 20:12:26.209 +03:00 [DBG] Connection 0HNFBQOS7TH9J established using the following protocol: "Tls13"
2025-09-04 20:12:26.212 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - application/json 28
2025-09-04 20:12:26.215 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:12:26.220 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:12:26.222 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:12:26.228 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:12:26.239 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:12:26.291 +03:00 [DBG] Connection id "0HNFBQOS7TH9J", Request id "0HNFBQOS7TH9J:00000001": started reading request body.
2025-09-04 20:12:26.292 +03:00 [DBG] Connection id "0HNFBQOS7TH9J", Request id "0HNFBQOS7TH9J:00000001": done reading request body.
2025-09-04 20:12:26.359 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-04 20:12:26.426 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-04 20:12:26.683 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 20:12:26.726 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:12:26.731 +03:00 [DBG] Created DbConnection. (4ms).
2025-09-04 20:12:26.733 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:26.735 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:26.736 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:12:26.738 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:12:26.741 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-09-04 20:12:26.744 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:12:26.749 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:12:26.782 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:12:26.815 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:12:26.837 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:26.838 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 86ms reading results.
2025-09-04 20:12:26.842 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:26.849 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (7ms).
2025-09-04 20:12:26.973 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:12:27.036 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'Cannot switch to groq mode without providing api key')
   at NaturalToQuery.Application.Services.UserInfoService.UpdateAiModeAsync(Guid UserId, String ApiKey, AIMode newAiMode, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\UserInfoService.cs:line 271
   at NaturalToQuery.Api.Controllers.UserInfo.UpdateAiMode.HandleAsync(UpdateAiModeRequest req, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\UserInfo\UpdateAiMode.cs:line 32
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-04 20:12:27.049 +03:00 [ERR] Unhandled exception occurred.
2025-09-04 20:12:27.059 +03:00 [DBG] Connection id "0HNFBQOS7TH9J" completed keep alive response.
2025-09-04 20:12:27.067 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:12:27.070 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:27.072 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:12:27.074 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - 500 null application/json; charset=utf-8 862.0147ms
2025-09-04 20:12:50.329 +03:00 [INF] This is a test log to file!
2025-09-04 20:12:50.689 +03:00 [INF] Shared Kernal configured successfully.
2025-09-04 20:12:50.698 +03:00 [INF] API configured successfully.
2025-09-04 20:12:50.785 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-04 20:12:50.853 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 20:12:51.248 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-04 20:12:51.303 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:12:51.330 +03:00 [INF] Registered 20 endpoints in 842 milliseconds.
2025-09-04 20:12:51.335 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:12:51.366 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:12:51.434 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:12:51.444 +03:00 [DBG] Created DbConnection. (8ms).
2025-09-04 20:12:51.447 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:51.450 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:12:51.452 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-04 20:12:51.454 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:51.461 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:51.464 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:51.468 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:12:51.469 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:51.471 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:51.473 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-04 20:12:51.476 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:12:51.480 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:12:51.481 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-04 20:12:51.486 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 20:12:51.502 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-04 20:12:51.505 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:12:51.506 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:12:51.508 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-09-04 20:12:51.509 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 17:12:51.5051544+00:00');
SELECT changes();
2025-09-04 20:12:51.513 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-04 17:12:51.5051544+00:00');
SELECT changes();
2025-09-04 20:12:51.549 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 20:12:51.551 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 20:12:51.553 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-04 20:12:51.554 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-04 20:12:51.555 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-04 20:12:51.556 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 20:12:51.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-04 20:12:51.559 +03:00 [DBG] Committing transaction.
2025-09-04 20:12:51.560 +03:00 [DBG] Committed transaction.
2025-09-04 20:12:51.562 +03:00 [DBG] Disposing transaction.
2025-09-04 20:12:51.563 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-04 20:12:51.564 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-04 20:12:51.565 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:12:51.566 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 20:12:51.567 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:51.568 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:51.569 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:51.570 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-04 20:12:51.571 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:12:51.571 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 20:12:51.572 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:12:51.573 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 20:12:51.575 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-04 20:12:51.577 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:12:51.578 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 20:12:51.578 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-04 20:12:51.579 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 20:12:51.581 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-04 20:12:51.584 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:51.585 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-04 20:12:51.589 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-04 20:12:51.590 +03:00 [DBG] Committing transaction.
2025-09-04 20:12:51.590 +03:00 [DBG] Committed transaction.
2025-09-04 20:12:51.591 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-04 20:12:51.592 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-04 20:12:51.593 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-09-04 20:12:51.594 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 20:12:51.597 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-04 20:12:51.599 +03:00 [DBG] Disposing transaction.
2025-09-04 20:12:51.600 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:51.603 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 20:12:51.604 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:12:51.605 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:51.606 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:12:51.607 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 20:12:51.608 +03:00 [INF] Infrastructure configured successfully.
2025-09-04 20:12:51.629 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 20:12:51.652 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-04 20:12:51.654 +03:00 [DBG] Hosting starting
2025-09-04 20:12:51.664 +03:00 [DBG] Middleware loaded
2025-09-04 20:12:51.667 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16521 B).
2025-09-04 20:12:51.668 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 20:12:51.730 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 20:12:51.732 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 20:12:51.736 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 20:12:51.763 +03:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-09-04 20:12:51.823 +03:00 [INF] Now listening on: https://localhost:7202
2025-09-04 20:12:51.826 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-04 20:12:51.827 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-04 20:12:51.828 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 20:12:51.829 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 20:12:51.830 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 20:12:51.834 +03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 20:12:51.848 +03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 20:12:51.870 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 20:12:51.872 +03:00 [INF] Hosting environment: Development
2025-09-04 20:12:51.873 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql
2025-09-04 20:12:51.874 +03:00 [DBG] Hosting started
2025-09-04 20:12:54.565 +03:00 [DBG] Connection id "0HNFBQP4OFRKV" received FIN.
2025-09-04 20:12:54.571 +03:00 [DBG] Connection id "0HNFBQP4OFRKV" accepted.
2025-09-04 20:12:54.573 +03:00 [DBG] Connection id "0HNFBQP4OFRKV" started.
2025-09-04 20:12:54.575 +03:00 [DBG] Connection id "0HNFBQP4OFRL0" accepted.
2025-09-04 20:12:54.576 +03:00 [DBG] Connection id "0HNFBQP4OFRL0" started.
2025-09-04 20:12:54.580 +03:00 [DBG] Connection id "0HNFBQP4OFRKV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 20:12:54.583 +03:00 [DBG] Connection id "0HNFBQP4OFRKV" disconnecting.
2025-09-04 20:12:54.586 +03:00 [DBG] Connection id "0HNFBQP4OFRKV" stopped.
2025-09-04 20:12:54.607 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - application/json 28
2025-09-04 20:12:54.665 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:12:54.667 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:12:54.669 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:12:54.695 +03:00 [DBG] Https port '7202' loaded from configuration.
2025-09-04 20:12:54.697 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'.
2025-09-04 20:12:54.699 +03:00 [DBG] Connection id "0HNFBQP4OFRL0" completed keep alive response.
2025-09-04 20:12:54.701 +03:00 [DBG] Connection id "0HNFBQP4OFRL1" accepted.
2025-09-04 20:12:54.702 +03:00 [DBG] Connection id "0HNFBQP4OFRL1" received FIN.
2025-09-04 20:12:54.702 +03:00 [DBG] Connection id "0HNFBQP4OFRL2" accepted.
2025-09-04 20:12:54.702 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - 307 0 null 101.2071ms
2025-09-04 20:12:54.707 +03:00 [DBG] Connection id "0HNFBQP4OFRL1" started.
2025-09-04 20:12:54.709 +03:00 [DBG] Connection id "0HNFBQP4OFRL2" started.
2025-09-04 20:12:54.715 +03:00 [DBG] Connection id "0HNFBQP4OFRL0", Request id "0HNFBQP4OFRL0:00000001": started reading request body.
2025-09-04 20:12:54.715 +03:00 [DBG] Connection id "0HNFBQP4OFRL1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 20:12:54.717 +03:00 [DBG] Connection id "0HNFBQP4OFRL0", Request id "0HNFBQP4OFRL0:00000001": done reading request body.
2025-09-04 20:12:54.719 +03:00 [DBG] Connection id "0HNFBQP4OFRL1" disconnecting.
2025-09-04 20:12:54.721 +03:00 [DBG] Connection id "0HNFBQP4OFRL1" stopped.
2025-09-04 20:12:54.773 +03:00 [DBG] Connection 0HNFBQP4OFRL2 established using the following protocol: "Tls13"
2025-09-04 20:12:54.776 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - application/json 28
2025-09-04 20:12:54.780 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:12:54.781 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:12:54.782 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:12:54.785 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:12:54.796 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:12:54.830 +03:00 [DBG] Connection id "0HNFBQP4OFRL2", Request id "0HNFBQP4OFRL2:00000001": started reading request body.
2025-09-04 20:12:54.833 +03:00 [DBG] Connection id "0HNFBQP4OFRL2", Request id "0HNFBQP4OFRL2:00000001": done reading request body.
2025-09-04 20:12:54.890 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-04 20:12:54.922 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-04 20:12:55.098 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 20:12:55.124 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:12:55.126 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-04 20:12:55.128 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:55.131 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:55.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:12:55.133 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 20:12:55.135 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-04 20:12:55.138 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:12:55.143 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:12:55.171 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:12:55.197 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:12:55.216 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:55.219 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 73ms reading results.
2025-09-04 20:12:55.222 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:12:55.224 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 20:12:55.333 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:12:55.378 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot switch to groq mode without providing api key
   at NaturalToQuery.Application.Services.UserInfoService.UpdateAiModeAsync(Guid UserId, String ApiKey, AIMode newAiMode, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\UserInfoService.cs:line 271
   at NaturalToQuery.Api.Controllers.UserInfo.UpdateAiMode.HandleAsync(UpdateAiModeRequest req, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\UserInfo\UpdateAiMode.cs:line 32
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-04 20:12:55.387 +03:00 [ERR] Unhandled exception occurred.
2025-09-04 20:12:55.394 +03:00 [DBG] Connection id "0HNFBQP4OFRL2" completed keep alive response.
2025-09-04 20:12:55.396 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:12:55.399 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:12:55.401 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-04 20:12:55.403 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - 500 null application/json; charset=utf-8 626.6687ms
2025-09-04 20:14:11.646 +03:00 [DBG] Connection id "0HNFBQP4OFRL3" received FIN.
2025-09-04 20:14:11.648 +03:00 [DBG] Connection id "0HNFBQP4OFRL3" accepted.
2025-09-04 20:14:11.652 +03:00 [DBG] Connection id "0HNFBQP4OFRL3" started.
2025-09-04 20:14:11.653 +03:00 [DBG] Connection id "0HNFBQP4OFRL4" accepted.
2025-09-04 20:14:11.657 +03:00 [DBG] Connection id "0HNFBQP4OFRL3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 20:14:11.658 +03:00 [DBG] Connection id "0HNFBQP4OFRL4" started.
2025-09-04 20:14:11.659 +03:00 [DBG] Connection id "0HNFBQP4OFRL3" disconnecting.
2025-09-04 20:14:11.660 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - application/json 29
2025-09-04 20:14:11.661 +03:00 [DBG] Connection id "0HNFBQP4OFRL3" stopped.
2025-09-04 20:14:11.663 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:14:11.665 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:14:11.667 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:14:11.668 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'.
2025-09-04 20:14:11.670 +03:00 [DBG] Connection id "0HNFBQP4OFRL4" completed keep alive response.
2025-09-04 20:14:11.671 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - 307 0 null 10.5231ms
2025-09-04 20:14:11.673 +03:00 [DBG] Connection id "0HNFBQP4OFRL4", Request id "0HNFBQP4OFRL4:00000001": started reading request body.
2025-09-04 20:14:11.672 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - application/json 29
2025-09-04 20:14:11.674 +03:00 [DBG] Connection id "0HNFBQP4OFRL4", Request id "0HNFBQP4OFRL4:00000001": done reading request body.
2025-09-04 20:14:11.676 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:14:11.679 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode'
2025-09-04 20:14:11.680 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:14:11.681 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:14:11.691 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:14:11.693 +03:00 [DBG] Connection id "0HNFBQP4OFRL2", Request id "0HNFBQP4OFRL2:00000002": started reading request body.
2025-09-04 20:14:11.694 +03:00 [DBG] Connection id "0HNFBQP4OFRL2", Request id "0HNFBQP4OFRL2:00000002": done reading request body.
2025-09-04 20:14:11.698 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:14:11.699 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 20:14:11.700 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:14:11.701 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:14:11.702 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:14:11.703 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 20:14:11.704 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:14:11.706 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:14:11.707 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-04 20:14:11.709 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:14:11.711 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:14:11.712 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:14:11.713 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-04 20:14:11.714 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:14:11.716 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:14:11.724 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:14:11.728 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 20:14:11.751 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 20:14:11.755 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-04 20:14:11.757 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-04 20:14:11.758 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-04 20:14:11.794 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:14:11.795 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:14:11.797 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:14:11.798 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 20:14:11.800 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-04 20:14:11.802 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-04 20:14:11.804 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-04 20:14:11.811 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:14:11.812 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 6ms reading results.
2025-09-04 20:14:11.813 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:14:11.815 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:14:11.818 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:14:11.821 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-04 20:14:11.826 +03:00 [INF] AI mode changed to "Basic" for user "46d016a8-8e03-4987-91a6-998f321cfacf" at "2025-09-04T17:14:11.7175083Z"
2025-09-04 20:14:11.840 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-04 20:14:11.841 +03:00 [DBG] Connection id "0HNFBQP4OFRL2" completed keep alive response.
2025-09-04 20:14:11.842 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:14:11.843 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:14:11.845 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:14:11.846 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7202/api/userinfo/46d016a8-8e03-4987-91a6-998f321cfacf/aimode - 200 null application/json; charset=utf-8 174.2342ms
2025-09-04 20:34:31.637 +03:00 [DBG] Connection id "0HNFBQP4OFRL5" received FIN.
2025-09-04 20:34:31.643 +03:00 [DBG] Connection id "0HNFBQP4OFRL5" accepted.
2025-09-04 20:34:31.644 +03:00 [DBG] Connection id "0HNFBQP4OFRL5" started.
2025-09-04 20:34:31.644 +03:00 [DBG] Connection id "0HNFBQP4OFRL6" accepted.
2025-09-04 20:34:31.649 +03:00 [DBG] Connection id "0HNFBQP4OFRL5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 20:34:31.650 +03:00 [DBG] Connection id "0HNFBQP4OFRL6" started.
2025-09-04 20:34:31.651 +03:00 [DBG] Connection id "0HNFBQP4OFRL5" disconnecting.
2025-09-04 20:34:31.652 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-04 20:34:31.652 +03:00 [DBG] Connection id "0HNFBQP4OFRL5" stopped.
2025-09-04 20:34:31.656 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-04 20:34:31.657 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 20:34:31.661 +03:00 [DBG] Redirecting to 'https://localhost:7202/api/setup/profiles'.
2025-09-04 20:34:31.662 +03:00 [DBG] Connection id "0HNFBQP4OFRL6" completed keep alive response.
2025-09-04 20:34:31.663 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 307 0 null 10.9303ms
2025-09-04 20:34:31.663 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/setup/profiles - null null
2025-09-04 20:34:31.669 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-04 20:34:31.670 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 20:34:31.672 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 20:34:31.674 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-04 20:34:31.685 +03:00 [INF] Listing all profiles
2025-09-04 20:34:31.689 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-04 20:34:31.691 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-04 20:34:31.705 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-04 20:34:31.711 +03:00 [DBG] Creating DbConnection.
2025-09-04 20:34:31.711 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-04 20:34:31.712 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:34:31.714 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:34:31.715 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:34:31.716 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 20:34:31.717 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:34:31.718 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-04 20:34:31.722 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-04 20:34:31.726 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:34:31.727 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 20:34:31.728 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:34:31.730 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:34:31.732 +03:00 [INF] Fetching connection string for profile "17b4d629-6bfa-4574-bef7-f1e0ebe16b08"
2025-09-04 20:34:31.734 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-04 20:34:31.735 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-04 20:34:31.746 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 20:34:31.752 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:34:31.753 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:34:31.754 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 20:34:31.755 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-04 20:34:31.756 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 20:34:31.757 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 20:34:31.759 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-04 20:34:31.761 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 20:34:31.763 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:34:31.765 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-04 20:34:31.766 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\schema_cache.db'.
2025-09-04 20:34:31.767 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:34:31.776 +03:00 [DBG] Fetched secret for profile "17b4d629-6bfa-4574-bef7-f1e0ebe16b08"
2025-09-04 20:34:31.780 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-04 20:34:31.781 +03:00 [DBG] Connection id "0HNFBQP4OFRL2" completed keep alive response.
2025-09-04 20:34:31.782 +03:00 [DBG] 'ContextDB' disposed.
2025-09-04 20:34:31.782 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-04 20:34:31.783 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-04 20:34:31.785 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/setup/profiles - 200 null application/json; charset=utf-8 121.5729ms
