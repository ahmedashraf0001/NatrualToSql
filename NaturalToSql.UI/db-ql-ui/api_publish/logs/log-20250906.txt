2025-09-06 04:11:17.313 +03:00 [INF] This is a test log to file!
2025-09-06 04:11:17.596 +03:00 [INF] Shared Kernal configured successfully.
2025-09-06 04:11:17.601 +03:00 [INF] API configured successfully.
2025-09-06 04:11:17.693 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-06 04:11:17.838 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-06 04:11:18.309 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-06 04:11:18.394 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:18.412 +03:00 [INF] Registered 23 endpoints in 928 milliseconds.
2025-09-06 04:11:18.416 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:18.466 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:18.566 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:18.582 +03:00 [DBG] Created DbConnection. (14ms).
2025-09-06 04:11:18.585 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.588 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:18.591 +03:00 [DBG] Created DbConnection. (3ms).
2025-09-06 04:11:18.593 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.602 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.603 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.607 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:18.608 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.617 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:18.621 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.627 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-06 04:11:18.629 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (8ms).
2025-09-06 04:11:18.635 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-06 04:11:18.677 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-06 04:11:18.679 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:18.680 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-06 04:11:18.681 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.681 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:18.682 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-06 04:11:18.686 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:11:18.686 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:18.686 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:18.687 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:11:18.693 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:11:18.694 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.694 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.694 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.694 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-06 04:11:18.706 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-06 04:11:18.707 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:11:18.707 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:18.707 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:18.707 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:11:18.707256+00:00');
SELECT changes();
2025-09-06 04:11:18.711 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:11:18.707256+00:00');
SELECT changes();
2025-09-06 04:11:18.755 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:11:18.757 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:11:18.757 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.757 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.757 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.757 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:11:18.758 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:11:18.759 +03:00 [DBG] Committing transaction.
2025-09-06 04:11:18.770 +03:00 [DBG] Committed transaction.
2025-09-06 04:11:18.771 +03:00 [DBG] Disposing transaction.
2025-09-06 04:11:18.772 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:11:18.772 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:11:18.773 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:18.773 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:18.773 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.774 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:18.775 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.775 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:18.775 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:11:18.775 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:18.775 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:18.775 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:11:18.775 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:11:18.777 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:18.777 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:18.777 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:18.777 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:11:18.778 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:11:18.780 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:18.781 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:11:18.787 +03:00 [INF] Applying migration '20250825154106_init'.
2025-09-06 04:11:18.802 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.802 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.802 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.802 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-06 04:11:18.802 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-06 04:11:18.802 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.803 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.803 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.803 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-06 04:11:18.803 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-06 04:11:18.803 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.803 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.803 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.803 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-06 04:11:18.803 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-06 04:11:18.803 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.803 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.803 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.803 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-06 04:11:18.803 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-06 04:11:18.803 +03:00 [INF] Applying migration '20250826210914_updatedsqlite'.
2025-09-06 04:11:18.812 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.812 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.812 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.812 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-06 04:11:18.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-06 04:11:18.812 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.812 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.812 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.812 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-06 04:11:18.813 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-06 04:11:18.813 +03:00 [DBG] Committing transaction.
2025-09-06 04:11:18.820 +03:00 [DBG] Committed transaction.
2025-09-06 04:11:18.821 +03:00 [DBG] Disposing transaction.
2025-09-06 04:11:18.821 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.821 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.821 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.821 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-06 04:11:18.821 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-06 04:11:18.821 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:11:18.822 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:11:18.822 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.822 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.822 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.822 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-06 04:11:18.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-06 04:11:18.822 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.822 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.822 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.822 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-06 04:11:18.823 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-06 04:11:18.823 +03:00 [DBG] Committing transaction.
2025-09-06 04:11:18.827 +03:00 [DBG] Committed transaction.
2025-09-06 04:11:18.827 +03:00 [DBG] Disposing transaction.
2025-09-06 04:11:18.827 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.827 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.827 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.827 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-06 04:11:18.827 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-06 04:11:18.827 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.827 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.827 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.827 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-06 04:11:18.830 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-06 04:11:18.830 +03:00 [INF] Applying migration '20250831091732_setdatabasenameinprofile'.
2025-09-06 04:11:18.834 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:11:18.834 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:11:18.834 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.834 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.834 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.834 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-06 04:11:18.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-06 04:11:18.835 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.835 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.835 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.835 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-06 04:11:18.835 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-06 04:11:18.835 +03:00 [INF] Applying migration '20250904150142_addeduser'.
2025-09-06 04:11:18.845 +03:00 [WRN] The migration operation 'PRAGMA foreign_keys = 0;
' from migration 'addeduser' cannot be executed in a transaction. If the app is terminated or an unrecoverable error occurs while this operation is being executed then the migration will be left in a partially applied state and would need to be reverted manually before it can be applied again. Create a separate migration that contains just this operation.
2025-09-06 04:11:18.845 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.845 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.845 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.845 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-06 04:11:18.845 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-06 04:11:18.846 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.846 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.846 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-06 04:11:18.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-06 04:11:18.846 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.846 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.846 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-06 04:11:18.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-06 04:11:18.846 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.846 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.846 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-06 04:11:18.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-06 04:11:18.846 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.846 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.846 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-06 04:11:18.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-06 04:11:18.847 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.847 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.847 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.847 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-06 04:11:18.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-06 04:11:18.847 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.847 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.847 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.847 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-06 04:11:18.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-06 04:11:18.847 +03:00 [DBG] Committing transaction.
2025-09-06 04:11:18.853 +03:00 [DBG] Committed transaction.
2025-09-06 04:11:18.853 +03:00 [DBG] Disposing transaction.
2025-09-06 04:11:18.853 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.853 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.853 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.853 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-06 04:11:18.853 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-06 04:11:18.853 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:11:18.855 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:11:18.855 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.855 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.855 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.855 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-06 04:11:18.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-06 04:11:18.856 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.856 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.856 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.856 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-06 04:11:18.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-06 04:11:18.857 +03:00 [DBG] Committing transaction.
2025-09-06 04:11:18.864 +03:00 [DBG] Committed transaction.
2025-09-06 04:11:18.864 +03:00 [DBG] Disposing transaction.
2025-09-06 04:11:18.864 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.864 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.864 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.864 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-06 04:11:18.864 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-06 04:11:18.864 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:11:18.864 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:11:18.864 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.864 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.864 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.864 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-06 04:11:18.865 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-06 04:11:18.865 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.865 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.865 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.865 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-06 04:11:18.865 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-06 04:11:18.865 +03:00 [DBG] Committing transaction.
2025-09-06 04:11:18.868 +03:00 [DBG] Committed transaction.
2025-09-06 04:11:18.868 +03:00 [DBG] Disposing transaction.
2025-09-06 04:11:18.868 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:18.868 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.868 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:18.868 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-06 04:11:18.876 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-06 04:11:18.877 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:11:18.877 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:18.877 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:18.877 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:11:18.880 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:11:18.881 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:18.881 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:18.881 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:18.881 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:18.882 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:18.882 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:11:18.882 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:11:18.911 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-06 04:11:18.926 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-06 04:11:18.927 +03:00 [DBG] Hosting starting
2025-09-06 04:11:18.982 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-06 04:11:18.983 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-06 04:11:18.997 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-06 04:11:18.997 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-06 04:11:18.997 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-06 04:11:18.998 +03:00 [INF] Hosting environment: Development
2025-09-06 04:11:18.998 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-06 04:11:18.998 +03:00 [DBG] Hosting started
2025-09-06 04:11:19.119 +03:00 [DBG] Connection id "0HNFCS94J25TL" accepted.
2025-09-06 04:11:19.120 +03:00 [DBG] Connection id "0HNFCS94J25TL" started.
2025-09-06 04:11:19.138 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:11:19.163 +03:00 [DBG] Connection id "0HNFCS94J25TM" accepted.
2025-09-06 04:11:19.164 +03:00 [DBG] Connection id "0HNFCS94J25TM" started.
2025-09-06 04:11:19.166 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:11:19.167 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.184 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:19.185 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:19.186 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-06 04:11:19.188 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.200 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:19.223 +03:00 [INF] Getting all users
2025-09-06 04:11:19.252 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-06 04:11:19.288 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-06 04:11:19.466 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-06 04:11:19.487 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:19.487 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:19.488 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:19.489 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.489 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:19.489 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:19.489 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:19.490 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:11:19.491 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:11:19.494 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.495 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-06 04:11:19.496 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.496 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:19.519 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.520 +03:00 [DBG] Connection id "0HNFCS94J25TL" completed keep alive response.
2025-09-06 04:11:19.521 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:19.523 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:19.523 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:19.524 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 386.5268ms
2025-09-06 04:11:19.529 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:11:19.531 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:11:19.531 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.533 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:19.533 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:19.534 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.535 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:19.535 +03:00 [INF] Getting all users
2025-09-06 04:11:19.538 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:19.539 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:19.539 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:19.539 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.540 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:19.540 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:19.540 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:19.540 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:11:19.540 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:11:19.540 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.540 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:19.541 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.541 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:19.541 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.542 +03:00 [DBG] Connection id "0HNFCS94J25TL" completed keep alive response.
2025-09-06 04:11:19.543 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:19.543 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:19.544 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:19.544 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 14.5987ms
2025-09-06 04:11:19.554 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:11:19.554 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:11:19.554 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.555 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:19.555 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:19.556 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.556 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:19.557 +03:00 [INF] Getting all users
2025-09-06 04:11:19.559 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:19.559 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:19.559 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:19.559 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.559 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:19.559 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:19.559 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:19.560 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:11:19.560 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:11:19.560 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.560 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:19.560 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:19.560 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:19.561 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:11:19.561 +03:00 [DBG] Connection id "0HNFCS94J25TL" completed keep alive response.
2025-09-06 04:11:19.561 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:19.561 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:19.561 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:19.561 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 6.8186ms
2025-09-06 04:11:30.585 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/ab6d8b4a-e946-4a57-a380-c5b24b8b4963 - null null
2025-09-06 04:11:30.586 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/ab6d8b4a-e946-4a57-a380-c5b24b8b4963'
2025-09-06 04:11:30.586 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/ab6d8b4a-e946-4a57-a380-c5b24b8b4963'
2025-09-06 04:11:30.586 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:30.587 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:30.587 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:30.587 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:30.595 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:30.619 +03:00 [INF] Getting user by ID: "ab6d8b4a-e946-4a57-a380-c5b24b8b4963"
2025-09-06 04:11:30.627 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-06 04:11:30.631 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-06 04:11:30.657 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:11:30.663 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:30.663 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:30.663 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:30.663 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.663 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:30.663 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:30.665 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-06 04:11:30.666 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:11:30.669 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:11:30.669 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.669 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:30.669 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.669 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:30.670 +03:00 [WRN] User with ID "ab6d8b4a-e946-4a57-a380-c5b24b8b4963" not found
2025-09-06 04:11:30.672 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:30.673 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: User with ID ab6d8b4a-e946-4a57-a380-c5b24b8b4963 not found
   at NaturalToQuery.Application.Services.UserInfoService.GetByIdAsync(Guid id, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\UserInfoService.cs:line 121
   at NaturalToQuery.Api.Controllers.UserInfo.GetUserById.HandleAsync(GetUserByIdRequest req, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\UserInfo\GetUserById.cs:line 25
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-06 04:11:30.685 +03:00 [ERR] Unhandled exception occurred.
2025-09-06 04:11:30.689 +03:00 [DBG] Connection id "0HNFCS94J25TL" completed keep alive response.
2025-09-06 04:11:30.689 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:30.690 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:30.690 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:30.690 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/ab6d8b4a-e946-4a57-a380-c5b24b8b4963 - 500 null application/json; charset=utf-8 104.3299ms
2025-09-06 04:11:30.695 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo - null null
2025-09-06 04:11:30.695 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:11:30.695 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:11:30.695 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:30.695 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:30.695 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:11:30.696 +03:00 [DBG] Connection id "0HNFCS94J25TL" completed keep alive response.
2025-09-06 04:11:30.696 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo - 204 null null 1.3183ms
2025-09-06 04:11:30.699 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 28
2025-09-06 04:11:30.699 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:11:30.699 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-06 04:11:30.699 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:30.699 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:30.699 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-06 04:11:30.700 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:30.707 +03:00 [DBG] Connection id "0HNFCS94J25TL", Request id "0HNFCS94J25TL:00000006": started reading request body.
2025-09-06 04:11:30.707 +03:00 [DBG] Connection id "0HNFCS94J25TL", Request id "0HNFCS94J25TL:00000006": done reading request body.
2025-09-06 04:11:30.715 +03:00 [INF] Creating new user with API key: 
2025-09-06 04:11:30.716 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()'
2025-09-06 04:11:30.719 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserInfo entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserInfo instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserInfo);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserInfo)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                        {
                            return 
                            {
                                UserInfo instance;
                                instance = new UserInfo();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserInfo)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-06 04:11:30.720 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:30.721 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:30.721 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:30.721 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.721 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:30.721 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:30.721 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:30.721 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-06 04:11:30.721 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-06 04:11:30.721 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.721 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:30.722 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.722 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:30.743 +03:00 [DBG] 'ContextDB' generated a value for the property 'UserInfo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:30.775 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:30.778 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:11:30.787 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:11:30.790 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:11:30.790 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:11:30.790 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:11:30.824 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:30.824 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.825 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:30.825 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:30.826 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-06 04:11:30.826 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-06 04:11:30.829 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-06 04:11:30.831 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.831 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:11:30.831 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.832 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:30.838 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:30.838 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:11:30.838 +03:00 [INF] User created successfully with ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:11:30.840 +03:00 [INF] Executed endpoint 'HTTP: POST api/userinfo'
2025-09-06 04:11:30.841 +03:00 [DBG] Connection id "0HNFCS94J25TL" completed keep alive response.
2025-09-06 04:11:30.841 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:30.841 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:30.841 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:30.841 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 142.0188ms
2025-09-06 04:11:30.842 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:11:30.842 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:11:30.843 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:11:30.843 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:30.843 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:30.843 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:30.843 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:30.843 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:30.844 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:11:30.844 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:30.844 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:30.844 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:30.844 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.844 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:30.844 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:30.844 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:30.844 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:11:30.845 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:11:30.850 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:30.853 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.853 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 8ms reading results.
2025-09-06 04:11:30.853 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:30.854 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:30.857 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:30.857 +03:00 [DBG] Connection id "0HNFCS94J25TL" completed keep alive response.
2025-09-06 04:11:30.857 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:30.857 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:30.857 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:30.857 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 15.049ms
2025-09-06 04:11:34.043 +03:00 [INF] This is a test log to file!
2025-09-06 04:11:34.159 +03:00 [INF] Shared Kernal configured successfully.
2025-09-06 04:11:34.162 +03:00 [INF] API configured successfully.
2025-09-06 04:11:34.209 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-06 04:11:34.242 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-06 04:11:34.551 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-06 04:11:34.604 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:34.621 +03:00 [INF] Registered 23 endpoints in 520 milliseconds.
2025-09-06 04:11:34.626 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:34.663 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:34.729 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:34.737 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-06 04:11:34.738 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:34.741 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:34.742 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-06 04:11:34.743 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:34.749 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:34.751 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:34.754 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:34.754 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:34.755 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:34.756 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-06 04:11:34.759 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:11:34.762 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-06 04:11:34.763 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-09-06 04:11:34.767 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:11:34.783 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:11:34.785 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:11:34.785 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:34.785 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:34.785 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:11:34.7848762+00:00');
SELECT changes();
2025-09-06 04:11:34.789 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:11:34.7848762+00:00');
SELECT changes();
2025-09-06 04:11:34.822 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:11:34.823 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:11:34.824 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:11:34.824 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:34.825 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:11:34.825 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:11:34.825 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:11:34.826 +03:00 [DBG] Committing transaction.
2025-09-06 04:11:34.826 +03:00 [DBG] Committed transaction.
2025-09-06 04:11:34.827 +03:00 [DBG] Disposing transaction.
2025-09-06 04:11:34.828 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:11:34.828 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:11:34.829 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:34.829 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:34.829 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:34.829 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:34.830 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:34.830 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:34.830 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:11:34.830 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:34.830 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:34.830 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:11:34.830 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:11:34.832 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:34.832 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:34.832 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:34.832 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:11:34.832 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:11:34.834 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:34.835 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:11:34.837 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-06 04:11:34.838 +03:00 [DBG] Committing transaction.
2025-09-06 04:11:34.838 +03:00 [DBG] Committed transaction.
2025-09-06 04:11:34.838 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:11:34.838 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:34.838 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:11:34.838 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:11:34.840 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:11:34.840 +03:00 [DBG] Disposing transaction.
2025-09-06 04:11:34.841 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:34.843 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-06 04:11:34.843 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:34.843 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:34.843 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:34.843 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:11:34.843 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:11:34.856 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-06 04:11:34.867 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-06 04:11:34.867 +03:00 [DBG] Hosting starting
2025-09-06 04:11:34.904 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-06 04:11:34.905 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-06 04:11:34.913 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-06 04:11:34.913 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-06 04:11:34.913 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-06 04:11:34.913 +03:00 [INF] Hosting environment: Development
2025-09-06 04:11:34.913 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-06 04:11:34.913 +03:00 [DBG] Hosting started
2025-09-06 04:11:38.096 +03:00 [DBG] Connection id "0HNFCS9A818CT" accepted.
2025-09-06 04:11:38.096 +03:00 [DBG] Connection id "0HNFCS9A818CT" started.
2025-09-06 04:11:38.133 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:11:38.160 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:11:38.161 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:11:38.174 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-06 04:11:38.176 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:11:38.198 +03:00 [INF] Api health check sent.
2025-09-06 04:11:38.199 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:11:38.199 +03:00 [DBG] Connection id "0HNFCS9A818CT" completed keep alive response.
2025-09-06 04:11:38.200 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 68.5645ms
2025-09-06 04:11:38.208 +03:00 [DBG] Connection id "0HNFCS9A818CU" accepted.
2025-09-06 04:11:38.208 +03:00 [DBG] Connection id "0HNFCS9A818CU" started.
2025-09-06 04:11:38.209 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:11:38.210 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:11:38.211 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:11:38.211 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:38.213 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:38.213 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:38.214 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:38.225 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:38.242 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:11:38.279 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-06 04:11:38.306 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-06 04:11:38.452 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:11:38.472 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:38.472 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:38.474 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:38.475 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:38.475 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:38.476 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:38.477 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-06 04:11:38.478 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:11:38.483 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:11:38.508 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:38.524 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:38.525 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 41ms reading results.
2025-09-06 04:11:38.526 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:38.526 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:38.541 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:38.541 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:38.541 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:38.543 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:38.543 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:38.544 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 334.3209ms
2025-09-06 04:11:38.586 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/providers - null null
2025-09-06 04:11:38.586 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/providers'
2025-09-06 04:11:38.586 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/providers'
2025-09-06 04:11:38.589 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:38.589 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:38.590 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/providers'
2025-09-06 04:11:38.591 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:38.597 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/providers'
2025-09-06 04:11:38.598 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:38.598 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:38.598 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/providers - 200 null application/json; charset=utf-8 11.818ms
2025-09-06 04:11:39.590 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:11:39.590 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:11:39.590 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:11:39.590 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:39.591 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:39.591 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:11:39.591 +03:00 [INF] Api health check sent.
2025-09-06 04:11:39.591 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:11:39.591 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:39.591 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.3806ms
2025-09-06 04:11:41.235 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - null null
2025-09-06 04:11:41.236 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/servers/SqlServer'
2025-09-06 04:11:41.236 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/servers/{type}' with route pattern 'api/setup/servers/{type}' is valid for the request path '/api/setup/servers/SqlServer'
2025-09-06 04:11:41.236 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-06 04:11:41.236 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:41.236 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:41.236 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-06 04:11:41.246 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:41.255 +03:00 [INF] Fetching servers (forceRefresh=true)
2025-09-06 04:11:41.256 +03:00 [DBG] Looking up servers from registry key SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL
2025-09-06 04:11:41.262 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-06 04:11:41.404 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-06 04:11:41.408 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-06 04:11:41.455 +03:00 [INF] Discovered server DESKTOP-QCK8UI5\SQLEXPRESS with 4 running DBs
2025-09-06 04:11:41.524 +03:00 [DBG] Saved cache file C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-06 04:11:41.524 +03:00 [INF] Cached 1 servers to C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-06 04:11:41.529 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-06 04:11:41.530 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:41.530 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:41.530 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - 200 null application/json; charset=utf-8 295.2099ms
2025-09-06 04:11:41.572 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - null null
2025-09-06 04:11:41.572 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/servers/SqlServer'
2025-09-06 04:11:41.572 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/servers/{type}' with route pattern 'api/setup/servers/{type}' is valid for the request path '/api/setup/servers/SqlServer'
2025-09-06 04:11:41.572 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-06 04:11:41.572 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:41.572 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:41.572 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-06 04:11:41.573 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:41.573 +03:00 [INF] Fetching servers (forceRefresh=true)
2025-09-06 04:11:41.573 +03:00 [DBG] Looking up servers from registry key SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL
2025-09-06 04:11:41.573 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-06 04:11:41.574 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-06 04:11:41.574 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-06 04:11:41.575 +03:00 [INF] Discovered server DESKTOP-QCK8UI5\SQLEXPRESS with 4 running DBs
2025-09-06 04:11:41.577 +03:00 [DBG] Saved cache file C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-06 04:11:41.577 +03:00 [INF] Cached 1 servers to C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-06 04:11:41.578 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-06 04:11:41.578 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:41.578 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:41.578 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - 200 null application/json; charset=utf-8 6.0995ms
2025-09-06 04:11:42.208 +03:00 [DBG] Connection id "0HNFCS9A818CT" received FIN.
2025-09-06 04:11:42.209 +03:00 [DBG] Connection id "0HNFCS9A818CT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:11:42.209 +03:00 [DBG] Connection id "0HNFCS9A818CT" disconnecting.
2025-09-06 04:11:42.210 +03:00 [DBG] Connection id "0HNFCS9A818CT" stopped.
2025-09-06 04:11:42.327 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS - null null
2025-09-06 04:11:42.328 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-06 04:11:42.328 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}' with route pattern 'api/setup/databases/{type}/{serverName}' is valid for the request path '/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-06 04:11:42.328 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-06 04:11:42.328 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:42.328 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:42.328 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-06 04:11:42.328 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:42.331 +03:00 [INF] Fetching databases for server DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:11:42.334 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-06 04:11:42.334 +03:00 [DBG] Connected to server DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:11:42.737 +03:00 [INF] Found 8 databases on DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:11:42.741 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-06 04:11:42.741 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:42.741 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:42.741 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS - 200 null application/json; charset=utf-8 413.7324ms
2025-09-06 04:11:44.755 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/setup/profile - null null
2025-09-06 04:11:44.755 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-06 04:11:44.755 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:11:44.755 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:44.755 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:44.755 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:11:44.755 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:44.755 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/setup/profile - 204 null null 0.9372ms
2025-09-06 04:11:44.757 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 205
2025-09-06 04:11:44.757 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-06 04:11:44.757 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-06 04:11:44.757 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:44.757 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:44.757 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-06 04:11:44.758 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:44.768 +03:00 [DBG] Connection id "0HNFCS9A818CU", Request id "0HNFCS9A818CU:00000008": started reading request body.
2025-09-06 04:11:44.768 +03:00 [DBG] Connection id "0HNFCS9A818CU", Request id "0HNFCS9A818CU:00000008": done reading request body.
2025-09-06 04:11:44.778 +03:00 [INF] Creating profile for provider "SqlServer"
2025-09-06 04:11:44.778 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=LearningTopicDB)
2025-09-06 04:11:44.824 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=LearningTopicDB)
2025-09-06 04:11:44.829 +03:00 [DBG] Saved secret profile-273b4dd6-ac00-4d5e-9589-6a99a760b4fc for provider "SqlServer"
2025-09-06 04:11:44.829 +03:00 [DBG] Generated profile name SqlServer - LearningTopicDB with cache dir C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer
2025-09-06 04:11:44.832 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Any(p => p.DatabaseName.Equals(__profile_DatabaseName_0))'
2025-09-06 04:11:44.837 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:11:44.841 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:44.841 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:44.841 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:44.841 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.841 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:44.841 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:44.841 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:44.841 +03:00 [DBG] Executing DbCommand [Parameters=[@__profile_DatabaseName_0='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-06 04:11:44.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__profile_DatabaseName_0='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-06 04:11:44.842 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.842 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:44.842 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.842 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:44.862 +03:00 [DBG] 'ContextDB' generated a value for the property 'Profile.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:44.883 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:44.886 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:11:44.896 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:11:44.899 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:11:44.900 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:11:44.900 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:11:44.933 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:44.934 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.935 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:44.935 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:44.936 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:44.936 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 15), @p4='?' (Size = 27), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-06 04:11:44.939 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 15), @p4='?' (Size = 27), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-06 04:11:44.941 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.941 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:11:44.942 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.942 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:44.946 +03:00 [DBG] An entity of type 'Profile' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:44.947 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:11:44.947 +03:00 [INF] Profile created successfully with Id "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:44.948 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-06 04:11:44.948 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:44.948 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:44.948 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:44.948 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:44.949 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 200 null application/json; charset=utf-8 191.7817ms
2025-09-06 04:11:44.951 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:11:44.951 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:11:44.951 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:11:44.951 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:44.951 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:44.951 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:44.951 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:44.951 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:44.951 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:11:44.954 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:44.954 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:44.954 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:44.954 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.954 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:44.954 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:44.954 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:44.954 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:11:44.954 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:11:44.954 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:44.957 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:44.957 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.957 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-06 04:11:44.957 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:44.957 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:44.959 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:11:44.959 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:44.959 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:44.959 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:44.959 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:44.959 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 8.3877ms
2025-09-06 04:11:45.000 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:11:45.000 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:11:45.000 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:11:45.000 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:11:45.000 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:45.000 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:45.000 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:11:45.002 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:45.003 +03:00 [DBG] Connection id "0HNFCS9A818CV" accepted.
2025-09-06 04:11:45.003 +03:00 [DBG] Connection id "0HNFCS9A818CV" started.
2025-09-06 04:11:45.006 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:11:45.007 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:11:45.007 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:11:45.007 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:45.007 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:45.007 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:45.007 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:45.008 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:45.009 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-06 04:11:45.009 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-06 04:11:45.022 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:11:45.026 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:45.026 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:45.026 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:45.026 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:45.026 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.026 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.026 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.026 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:45.026 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.026 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.026 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.026 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.026 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.027 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:45.027 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:45.027 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.027 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.027 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.027 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.027 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:45.028 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.028 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.028 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:11:45.028 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:45.028 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.028 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.028 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.028 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.029 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:45.029 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:45.029 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.029 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.029 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.029 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.030 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:45.030 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:45.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.030 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.030 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.030 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.030 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.030 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.030 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.030 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:45.030 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:45.030 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.030 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.030 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.030 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.032 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:45.033 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:45.033 +03:00 [DBG] Connection id "0HNFCS9A818CV" completed keep alive response.
2025-09-06 04:11:45.033 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:45.033 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.033 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.033 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 27.0963ms
2025-09-06 04:11:45.034 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:11:45.035 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:11:45.035 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:11:45.035 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:45.035 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:45.035 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:45.035 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:45.036 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:45.037 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:45.037 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:45.037 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.037 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.037 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:45.037 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.037 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.037 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.038 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.038 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:45.038 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.038 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:45.038 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.038 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.039 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:45.039 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.039 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.039 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:45.039 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.039 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:45.039 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.040 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:45.040 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.040 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:45.040 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:45.040 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.040 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:45.040 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:45.040 +03:00 [DBG] Connection id "0HNFCS9A818CV" completed keep alive response.
2025-09-06 04:11:45.040 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:45.040 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.040 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 6.4726ms
2025-09-06 04:11:45.135 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:45.136 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:11:45.137 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:11:45.169 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:11:45.172 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:11:45.172 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:45.172 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:45.172 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:45.172 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:45.172 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 172.7239ms
2025-09-06 04:11:45.173 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:11:45.174 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:11:45.174 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:11:45.174 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:11:45.174 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:45.174 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:45.174 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:11:45.175 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:45.176 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:11:45.176 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:45.176 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:45.176 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 2.4502ms
2025-09-06 04:11:55.009 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - null null
2025-09-06 04:11:55.009 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:11:55.009 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:11:55.009 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:55.009 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:55.009 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:11:55.010 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:55.010 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 204 null null 0.4213ms
2025-09-06 04:11:55.010 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - application/json 188
2025-09-06 04:11:55.010 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:11:55.010 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:11:55.010 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:11:55.011 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:55.011 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:55.011 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:11:55.012 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:55.019 +03:00 [DBG] Connection id "0HNFCS9A818CU", Request id "0HNFCS9A818CU:0000000D": started reading request body.
2025-09-06 04:11:55.019 +03:00 [DBG] Connection id "0HNFCS9A818CU", Request id "0HNFCS9A818CU:0000000D": done reading request body.
2025-09-06 04:11:55.024 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:55.024 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:55.024 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:55.024 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.025 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:55.025 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:55.025 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:55.025 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:55.025 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:55.025 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:55.025 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.025 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:55.025 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.025 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:55.026 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:55.026 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:55.026 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.026 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:55.026 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:55.026 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:55.026 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:55.026 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:55.027 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.027 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:55.027 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.027 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:55.027 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:55.027 +03:00 [INF] Executing SQL for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", Mode="ReadOnly"
2025-09-06 04:11:55.033 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/LearningTopicDB (Mode="ReadOnly")
2025-09-06 04:11:55.033 +03:00 [DBG] SQL: select * from categories
2025-09-06 04:11:55.034 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=LearningTopicDB)
2025-09-06 04:11:55.034 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:11:55.043 +03:00 [ERR] SQL execution failed after 8 ms: Invalid object name 'categories'.
2025-09-06 04:11:55.044 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:55.045 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.045 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:55.045 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:55.045 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:55.045 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:55.045 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:55.045 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.045 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:55.045 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.045 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:55.058 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:55.059 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:55.059 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:11:55.066 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:55.069 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:11:55.069 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:11:55.069 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:11:55.069 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:11:55.070 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:55.070 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.070 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:55.070 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:55.070 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:55.070 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 153), @p3='?' (Size = 24), @p4='?' (DbType = DateTime), @p5='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-06 04:11:55.075 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 153), @p3='?' (Size = 24), @p4='?' (DbType = DateTime), @p5='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-06 04:11:55.075 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.075 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:55.075 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:55.075 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:55.075 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:55.076 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:11:55.079 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-06T01:11:55.0492852Z","$type":"QueryAddedEvent"}
2025-09-06 04:11:55.080 +03:00 [INF] Saved query to DB for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:55.081 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:11:55.082 +03:00 [ERR] An unhandled exception has occurred while executing the request.
NaturalToQuery.Core.Exceptions.DbExecutionException: Error executing SQL command.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'categories'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at NaturalToQuery.Infrastructure.Providers.SqlServerDbProvider.ExecuteQuery(DbConnection conn, String sql, IDictionary`2 parameters, CancellationToken ct, Stopwatch sw) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Infrastructure\Providers\SqlServerDbProvider.cs:line 793
   at NaturalToQuery.Infrastructure.Providers.SqlServerDbProvider.ExecuteSqlCommand(ProviderConnectionConfig config, String sql, CancellationToken ct, IDictionary`2 parameters) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Infrastructure\Providers\SqlServerDbProvider.cs:line 756
ClientConnectionId:4e6cbe6f-0b9d-4881-a0ef-707f4aa44934
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at NaturalToQuery.Infrastructure.Providers.SqlServerDbProvider.ExecuteSqlCommand(ProviderConnectionConfig config, String sql, CancellationToken ct, IDictionary`2 parameters) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Infrastructure\Providers\SqlServerDbProvider.cs:line 777
   at NaturalToQuery.Infrastructure.Providers.SqlServerDbProvider.ExecuteAsync(ProviderConnectionConfig config, String sql, String userQuery, IDictionary`2 parameters, ExecutionMode mode, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Infrastructure\Providers\SqlServerDbProvider.cs:line 267
   at NaturalToQuery.Infrastructure.Providers.SqlServerDbProvider.ExecuteAsync(ProviderConnectionConfig config, String sql, String userQuery, IDictionary`2 parameters, ExecutionMode mode, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Infrastructure\Providers\SqlServerDbProvider.cs:line 272
   at NaturalToQuery.Application.Services.ProfileDbService.ExecuteAsync(Guid profileId, String sql, String userQuery, IDictionary`2 parameters, ExecutionMode mode, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\ProfileDbService.cs:line 32
   at NaturalToQuery.Application.Services.QueryOrchestrationService.ExecuteQueryAsync(Guid profileId, String sql, String userQuery, IDictionary`2 parameters, ExecutionMode mode, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\QueryOrchestrationService.cs:line 76
   at NaturalToQuery.Api.Controllers.Query.ExecuteQuery.HandleAsync(ExecuteQueryRequest req, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\Query\ExecuteQuery.cs:line 48
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-06 04:11:55.094 +03:00 [ERR] Error occurred.
2025-09-06 04:11:55.096 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:55.097 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:55.097 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:55.097 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:55.097 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 500 null application/json; charset=utf-8 86.5756ms
2025-09-06 04:11:56.100 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:11:56.100 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:11:56.100 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:11:56.100 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:56.100 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:11:56.100 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:11:56.100 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:56.100 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:11:56.101 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:11:56.101 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:11:56.101 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:56.101 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:56.101 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:56.101 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:56.101 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:56.101 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:56.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:56.101 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:56.102 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:11:56.102 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:56.102 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:11:56.102 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:56.102 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:56.102 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:56.103 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:56.103 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:56.103 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:11:56.103 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:56.103 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:11:56.103 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:56.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:11:56.104 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:56.104 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:11:56.104 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:11:56.104 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:56.104 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:11:56.105 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:11:56.105 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:11:56.105 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:11:56.105 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:11:56.105 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:11:56.105 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 5.2764ms
2025-09-06 04:12:01.156 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - null null
2025-09-06 04:12:01.156 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:12:01.156 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:12:01.156 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:12:01.156 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:12:01.156 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:12:01.156 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:12:01.156 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 204 null null 0.32ms
2025-09-06 04:12:01.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - application/json 184
2025-09-06 04:12:01.157 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:12:01.157 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:12:01.157 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:12:01.157 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:12:01.157 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:12:01.157 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:12:01.158 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:12:01.158 +03:00 [DBG] Connection id "0HNFCS9A818CU", Request id "0HNFCS9A818CU:00000010": started reading request body.
2025-09-06 04:12:01.158 +03:00 [DBG] Connection id "0HNFCS9A818CU", Request id "0HNFCS9A818CU:00000010": done reading request body.
2025-09-06 04:12:01.158 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:12:01.158 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:12:01.159 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:12:01.159 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.159 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:12:01.159 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:01.159 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:01.159 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:01.159 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:01.159 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:01.159 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:01.159 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.159 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:12:01.159 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.159 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:12:01.160 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:12:01.160 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:12:01.160 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.160 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:12:01.160 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:01.160 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:01.160 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:01.160 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:01.160 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.160 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:12:01.160 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.160 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:12:01.161 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:12:01.161 +03:00 [INF] Executing SQL for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", Mode="ReadOnly"
2025-09-06 04:12:01.161 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/LearningTopicDB (Mode="ReadOnly")
2025-09-06 04:12:01.161 +03:00 [DBG] SQL: select * from topics
2025-09-06 04:12:01.161 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=LearningTopicDB)
2025-09-06 04:12:01.161 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:12:01.172 +03:00 [INF] Query execution finished in 11 ms, returned 2 rows
2025-09-06 04:12:01.173 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:12:01.173 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.173 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:12:01.173 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:01.173 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:01.173 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:01.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:01.173 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.173 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:12:01.173 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.173 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:12:01.178 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:01.178 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:01.178 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:12:01.178 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:01.178 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:12:01.178 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:12:01.178 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:12:01.178 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:12:01.178 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:12:01.178 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.178 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:12:01.178 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:01.178 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:01.178 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 307), @p3='?' (Size = 20), @p4='?' (DbType = DateTime), @p5='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-06 04:12:01.186 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 307), @p3='?' (Size = 20), @p4='?' (DbType = DateTime), @p5='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-06 04:12:01.186 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.186 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:12:01.186 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:01.186 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:12:01.186 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:01.186 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:12:01.187 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-06T01:12:01.1777263Z","$type":"QueryAddedEvent"}
2025-09-06 04:12:01.187 +03:00 [INF] Saved query to DB for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:12:01.190 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:12:01.190 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:12:01.190 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:12:01.190 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:12:01.190 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:12:01.190 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 200 null application/json; charset=utf-8 33.5708ms
2025-09-06 04:12:02.194 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:12:02.194 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:12:02.194 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:12:02.194 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:12:02.194 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:12:02.194 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:12:02.194 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:12:02.194 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:12:02.194 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:12:02.195 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:12:02.195 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:12:02.195 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:02.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:12:02.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:02.195 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:02.195 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:02.195 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:02.195 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:02.195 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:02.195 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:12:02.195 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:02.195 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:12:02.195 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:02.195 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:12:02.195 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:12:02.195 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:12:02.196 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:02.196 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:12:02.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:02.196 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:12:02.196 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:02.196 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:12:02.196 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:02.196 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:12:02.196 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:12:02.196 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:12:02.196 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:12:02.196 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:12:02.196 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:12:02.196 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:12:02.196 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:12:02.196 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:12:02.196 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 2.9337ms
2025-09-06 04:12:09.595 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:12:09.595 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:12:09.595 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:12:09.596 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:12:09.596 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:12:09.596 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:12:09.596 +03:00 [INF] Api health check sent.
2025-09-06 04:12:09.596 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:12:09.596 +03:00 [DBG] Connection id "0HNFCS9A818CU" completed keep alive response.
2025-09-06 04:12:09.596 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5647ms
2025-09-06 04:14:01.717 +03:00 [INF] This is a test log to file!
2025-09-06 04:14:01.855 +03:00 [INF] Shared Kernal configured successfully.
2025-09-06 04:14:01.858 +03:00 [INF] API configured successfully.
2025-09-06 04:14:01.908 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-06 04:14:01.945 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-06 04:14:02.346 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-06 04:14:02.402 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:02.418 +03:00 [INF] Registered 23 endpoints in 632 milliseconds.
2025-09-06 04:14:02.423 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:02.459 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:02.535 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:02.543 +03:00 [DBG] Created DbConnection. (7ms).
2025-09-06 04:14:02.545 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:02.547 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:02.549 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-06 04:14:02.550 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:02.556 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:02.558 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:02.560 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:02.560 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:02.562 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:02.563 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-06 04:14:02.566 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:14:02.570 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-06 04:14:02.571 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-06 04:14:02.578 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:14:02.598 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:14:02.602 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:14:02.602 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:02.602 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:02.603 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:14:02.602311+00:00');
SELECT changes();
2025-09-06 04:14:02.607 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:14:02.602311+00:00');
SELECT changes();
2025-09-06 04:14:02.710 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:14:02.713 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:14:02.714 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:14:02.714 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:14:02.715 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:14:02.715 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:14:02.715 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:14:02.716 +03:00 [DBG] Committing transaction.
2025-09-06 04:14:02.717 +03:00 [DBG] Committed transaction.
2025-09-06 04:14:02.718 +03:00 [DBG] Disposing transaction.
2025-09-06 04:14:02.720 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:14:02.720 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:14:02.721 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:02.721 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:02.721 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:02.722 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:02.722 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:02.722 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:02.722 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:14:02.722 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:02.722 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:02.722 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:14:02.722 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:14:02.724 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:02.724 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:02.724 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:02.724 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:14:02.725 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:14:02.728 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:02.729 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:14:02.731 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-06 04:14:02.732 +03:00 [DBG] Committing transaction.
2025-09-06 04:14:02.732 +03:00 [DBG] Committed transaction.
2025-09-06 04:14:02.732 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:14:02.732 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:02.732 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:02.732 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:14:02.737 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:14:02.737 +03:00 [DBG] Disposing transaction.
2025-09-06 04:14:02.737 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:02.739 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-06 04:14:02.740 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:02.740 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:02.740 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:02.740 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:14:02.740 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:14:02.757 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-06 04:14:02.771 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-06 04:14:02.773 +03:00 [DBG] Hosting starting
2025-09-06 04:14:02.837 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-06 04:14:02.839 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-06 04:14:02.853 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-06 04:14:02.854 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-06 04:14:02.854 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-06 04:14:02.854 +03:00 [INF] Hosting environment: Development
2025-09-06 04:14:02.854 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-06 04:14:02.854 +03:00 [DBG] Hosting started
2025-09-06 04:14:02.914 +03:00 [DBG] Connection id "0HNFCSALD4709" accepted.
2025-09-06 04:14:02.914 +03:00 [DBG] Connection id "0HNFCSALD4709" started.
2025-09-06 04:14:02.939 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:14:02.987 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:14:02.987 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.008 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:03.009 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:03.011 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-06 04:14:03.013 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.029 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:03.049 +03:00 [INF] Getting all users
2025-09-06 04:14:03.073 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-06 04:14:03.122 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-06 04:14:03.358 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-06 04:14:03.395 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:03.395 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:03.400 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.402 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.402 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:03.402 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.402 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.403 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:14:03.405 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:14:03.420 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.421 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 15ms reading results.
2025-09-06 04:14:03.423 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.423 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.477 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.478 +03:00 [DBG] Connection id "0HNFCSALD4709" completed keep alive response.
2025-09-06 04:14:03.479 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:03.481 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.483 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-06 04:14:03.485 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 546.7011ms
2025-09-06 04:14:03.496 +03:00 [DBG] Connection id "0HNFCSALD470A" accepted.
2025-09-06 04:14:03.496 +03:00 [DBG] Connection id "0HNFCSALD470A" started.
2025-09-06 04:14:03.496 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:14:03.496 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:14:03.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:14:03.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:14:03.498 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.498 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:14:03.498 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.501 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:03.501 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:03.501 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:03.501 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:03.502 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.502 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.503 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:03.503 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:03.503 +03:00 [INF] Getting all users
2025-09-06 04:14:03.524 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:03.525 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:03.525 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.525 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.525 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:03.525 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.525 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.525 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:14:03.526 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:14:03.527 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.527 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:03.527 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.527 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.529 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.529 +03:00 [DBG] Connection id "0HNFCSALD4709" completed keep alive response.
2025-09-06 04:14:03.529 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:03.530 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.530 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.531 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 34.1922ms
2025-09-06 04:14:03.533 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:14:03.548 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-06 04:14:03.557 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-06 04:14:03.656 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:14:03.685 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:03.685 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:03.685 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.685 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.686 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:03.686 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.687 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-06 04:14:03.690 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:14:03.698 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:14:03.777 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:03.826 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:03.860 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.861 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 160ms reading results.
2025-09-06 04:14:03.861 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.861 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.864 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.865 +03:00 [DBG] Connection id "0HNFCSALD470A" completed keep alive response.
2025-09-06 04:14:03.865 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:03.865 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.865 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.865 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 368.5142ms
2025-09-06 04:14:03.866 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:14:03.866 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:14:03.867 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:14:03.867 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.870 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:03.871 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:03.873 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.877 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:03.878 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:14:03.880 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:03.880 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:03.880 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.880 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.880 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:03.880 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.880 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.880 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:14:03.881 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:14:03.881 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:03.882 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:03.882 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.882 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:14:03.883 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.883 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.883 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.883 +03:00 [DBG] Connection id "0HNFCSALD4709" completed keep alive response.
2025-09-06 04:14:03.883 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:03.883 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.883 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.883 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 17.621ms
2025-09-06 04:14:03.907 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:14:03.907 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:14:03.908 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.908 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:03.908 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:03.908 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.909 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:03.910 +03:00 [INF] Getting all users
2025-09-06 04:14:03.910 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:03.910 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:03.910 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.910 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.910 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:03.910 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.911 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.911 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:14:03.911 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:14:03.911 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.911 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:03.912 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.912 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.912 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:14:03.912 +03:00 [DBG] Connection id "0HNFCSALD4709" completed keep alive response.
2025-09-06 04:14:03.912 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:03.912 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.912 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.912 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 5.2646ms
2025-09-06 04:14:03.939 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:14:03.940 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:14:03.940 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:14:03.940 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.940 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:03.940 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:03.940 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.940 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:03.941 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:14:03.941 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:03.942 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:03.942 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.942 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.942 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:03.942 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.942 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:03.942 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:14:03.942 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:14:03.943 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:03.943 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:03.943 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.943 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:03.943 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:03.943 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.943 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:03.943 +03:00 [DBG] Connection id "0HNFCSALD4709" completed keep alive response.
2025-09-06 04:14:03.943 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:03.943 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:03.943 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:03.943 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 3.941ms
2025-09-06 04:14:07.142 +03:00 [INF] This is a test log to file!
2025-09-06 04:14:07.261 +03:00 [INF] Shared Kernal configured successfully.
2025-09-06 04:14:07.263 +03:00 [INF] API configured successfully.
2025-09-06 04:14:07.310 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-06 04:14:07.345 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-06 04:14:07.665 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-06 04:14:07.726 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:07.744 +03:00 [INF] Registered 23 endpoints in 543 milliseconds.
2025-09-06 04:14:07.748 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:07.788 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:07.862 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:07.872 +03:00 [DBG] Created DbConnection. (8ms).
2025-09-06 04:14:07.874 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:07.876 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:07.878 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-06 04:14:07.879 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:07.885 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:07.887 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:07.890 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:07.890 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:07.891 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:07.892 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-06 04:14:07.896 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:14:07.899 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-06 04:14:07.900 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-09-06 04:14:07.903 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:14:07.921 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:14:07.922 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:14:07.922 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:07.922 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:07.922 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:14:07.9226637+00:00');
SELECT changes();
2025-09-06 04:14:07.927 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:14:07.9226637+00:00');
SELECT changes();
2025-09-06 04:14:07.961 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:14:07.963 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:14:07.964 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:14:07.964 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:14:07.964 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:14:07.965 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:14:07.965 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:14:07.966 +03:00 [DBG] Committing transaction.
2025-09-06 04:14:07.966 +03:00 [DBG] Committed transaction.
2025-09-06 04:14:07.967 +03:00 [DBG] Disposing transaction.
2025-09-06 04:14:07.968 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:14:07.968 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:14:07.969 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:07.969 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:07.969 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:07.970 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:07.970 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:07.970 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:07.970 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:14:07.970 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:07.970 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:07.970 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:14:07.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:14:07.971 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:07.971 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:07.971 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:07.971 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:14:07.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:14:07.974 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:07.975 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:14:07.977 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-06 04:14:07.977 +03:00 [DBG] Committing transaction.
2025-09-06 04:14:07.977 +03:00 [DBG] Committed transaction.
2025-09-06 04:14:07.977 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:14:07.978 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:07.978 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:14:07.978 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:14:07.980 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:14:07.980 +03:00 [DBG] Disposing transaction.
2025-09-06 04:14:07.981 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:07.983 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-06 04:14:07.983 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:07.983 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:07.983 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:07.984 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:14:07.984 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:14:08.001 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-06 04:14:08.012 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-06 04:14:08.013 +03:00 [DBG] Hosting starting
2025-09-06 04:14:08.052 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-06 04:14:08.053 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-06 04:14:08.062 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-06 04:14:08.063 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-06 04:14:08.063 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-06 04:14:08.063 +03:00 [INF] Hosting environment: Development
2025-09-06 04:14:08.063 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-06 04:14:08.064 +03:00 [DBG] Hosting started
2025-09-06 04:14:11.167 +03:00 [DBG] Connection id "0HNFCSANRQQB2" accepted.
2025-09-06 04:14:11.168 +03:00 [DBG] Connection id "0HNFCSANRQQB2" started.
2025-09-06 04:14:11.197 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:14:11.234 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:14:11.235 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:14:11.249 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-06 04:14:11.252 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:14:11.279 +03:00 [INF] Api health check sent.
2025-09-06 04:14:11.280 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:14:11.280 +03:00 [DBG] Connection id "0HNFCSANRQQB2" completed keep alive response.
2025-09-06 04:14:11.281 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 86.1347ms
2025-09-06 04:14:11.295 +03:00 [DBG] Connection id "0HNFCSANRQQB3" accepted.
2025-09-06 04:14:11.295 +03:00 [DBG] Connection id "0HNFCSANRQQB3" started.
2025-09-06 04:14:11.296 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:14:11.297 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:14:11.298 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:14:11.298 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:11.301 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:11.301 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:11.303 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:11.316 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:11.341 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:14:11.389 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-06 04:14:11.418 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-06 04:14:11.582 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:14:11.606 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:11.606 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:11.607 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.608 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.608 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:11.608 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.609 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-06 04:14:11.611 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:14:11.615 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:14:11.642 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.670 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.690 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.690 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 74ms reading results.
2025-09-06 04:14:11.691 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.692 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.708 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:14:11.709 +03:00 [DBG] Connection id "0HNFCSANRQQB3" completed keep alive response.
2025-09-06 04:14:11.710 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:11.712 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.712 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.713 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 416.6318ms
2025-09-06 04:14:11.831 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:14:11.831 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:14:11.831 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:14:11.831 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:11.832 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:11.832 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:11.833 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:11.836 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:11.839 +03:00 [DBG] Connection id "0HNFCSANRQQB4" accepted.
2025-09-06 04:14:11.839 +03:00 [DBG] Connection id "0HNFCSANRQQB4" started.
2025-09-06 04:14:11.840 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:14:11.841 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:11.841 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:11.841 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:11.842 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:11.842 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:11.842 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:11.843 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:11.847 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-06 04:14:11.848 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-06 04:14:11.864 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:14:11.868 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:11.868 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:11.868 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:11.868 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:11.868 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.868 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.868 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.868 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:11.868 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.869 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.869 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.869 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.869 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:11.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.869 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.869 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.869 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.869 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.870 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.881 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.881 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.888 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.888 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.888 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.888 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.888 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 19ms reading results.
2025-09-06 04:14:11.888 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 18ms reading results.
2025-09-06 04:14:11.889 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.889 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.889 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.889 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.890 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:11.891 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.891 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.891 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:11.891 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.891 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.891 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.891 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.892 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.892 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:11.892 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.892 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.899 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:11.900 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.900 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.900 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:11.900 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.900 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.900 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.901 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.901 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.901 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:11.901 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.901 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.903 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:11.903 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:11.904 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:11.904 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:11.905 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:11.905 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.905 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.905 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 65.3459ms
2025-09-06 04:14:11.907 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:14:11.908 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:11.908 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:11.908 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:11.908 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:11.908 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:11.908 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:11.909 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:11.910 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:14:11.911 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:11.911 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:11.911 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.911 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:14:11.911 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.911 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:11.911 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.912 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.912 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.912 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.912 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.912 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.912 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:11.913 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.913 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:11.913 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.913 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.913 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:11.913 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.913 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.913 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:11.914 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.914 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:11.914 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.914 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:11.914 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.914 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:11.914 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:11.914 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.915 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:11.915 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:11.915 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:11.915 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:11.915 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:11.915 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:11.915 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 8.5257ms
2025-09-06 04:14:12.025 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:14:12.029 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.030 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:14:12.030 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:14:12.031 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:14:12.031 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.031 +03:00 [DBG] Connection id "0HNFCSANRQQB3" completed keep alive response.
2025-09-06 04:14:12.031 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:12.031 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:12.031 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:12.031 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.031 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:12.031 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:12.032 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 200.7865ms
2025-09-06 04:14:12.032 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:12.033 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.033 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:12.033 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:12.033 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 3.0884ms
2025-09-06 04:14:12.034 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:14:12.035 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:14:12.035 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:14:12.035 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.035 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:12.035 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:12.035 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.036 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:12.037 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.037 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:12.037 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:12.037 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 2.8191ms
2025-09-06 04:14:12.038 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:14:12.038 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:14:12.039 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:14:12.039 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.039 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:12.039 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:12.039 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.040 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:12.040 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:14:12.040 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:12.040 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:12.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 1.9904ms
2025-09-06 04:14:12.843 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:14:12.843 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:14:12.843 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:14:12.843 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:12.843 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:12.844 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:14:12.844 +03:00 [INF] Api health check sent.
2025-09-06 04:14:12.845 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:14:12.845 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:12.845 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 2.1184ms
2025-09-06 04:14:15.292 +03:00 [DBG] Connection id "0HNFCSANRQQB2" received FIN.
2025-09-06 04:14:15.292 +03:00 [DBG] Connection id "0HNFCSANRQQB2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:14:15.292 +03:00 [DBG] Connection id "0HNFCSANRQQB2" disconnecting.
2025-09-06 04:14:15.293 +03:00 [DBG] Connection id "0HNFCSANRQQB2" stopped.
2025-09-06 04:14:21.030 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - null null
2025-09-06 04:14:21.031 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:14:21.031 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:14:21.031 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:21.031 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:21.031 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:14:21.032 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:21.032 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 204 null null 1.0945ms
2025-09-06 04:14:21.034 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - application/json 184
2025-09-06 04:14:21.034 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:14:21.035 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:14:21.035 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:14:21.035 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:21.035 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:21.035 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:14:21.044 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:21.055 +03:00 [DBG] Connection id "0HNFCSANRQQB4", Request id "0HNFCSANRQQB4:00000008": started reading request body.
2025-09-06 04:14:21.055 +03:00 [DBG] Connection id "0HNFCSANRQQB4", Request id "0HNFCSANRQQB4:00000008": done reading request body.
2025-09-06 04:14:21.067 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:21.067 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:21.067 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:21.067 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.067 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:21.067 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:21.067 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:21.067 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:21.067 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:21.068 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:21.068 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:21.068 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:21.068 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.068 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:21.068 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.068 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:21.069 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:21.069 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:21.069 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.069 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:21.069 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:21.069 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:21.069 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:21.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:21.070 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.070 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:21.070 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.070 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:21.070 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:21.070 +03:00 [INF] Executing SQL for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", Mode="ReadOnly"
2025-09-06 04:14:21.075 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/LearningTopicDB (Mode="ReadOnly")
2025-09-06 04:14:21.075 +03:00 [DBG] SQL: select * from topics
2025-09-06 04:14:21.077 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=LearningTopicDB)
2025-09-06 04:14:21.492 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:14:21.557 +03:00 [INF] Query execution finished in 480 ms, returned 2 rows
2025-09-06 04:14:21.561 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:21.562 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.562 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:21.562 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:21.562 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:21.562 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:21.562 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:21.562 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.562 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:21.562 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:21.562 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:21.574 +03:00 [INF] Query not saved due to profile rules for profile "98591f58-e603-4225-9d96-30c0805d6cbe", Query already existed
2025-09-06 04:14:21.577 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:14:21.577 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:21.577 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:21.577 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:21.577 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:21.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 200 null application/json; charset=utf-8 543.3057ms
2025-09-06 04:14:22.580 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:14:22.580 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:22.580 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:22.580 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:22.580 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:22.580 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:22.580 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:22.581 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:22.581 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:22.581 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:22.581 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:22.582 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:22.582 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:22.582 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:22.582 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:22.582 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:22.582 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:22.582 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:22.582 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:22.582 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:22.582 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:22.582 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:22.582 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:22.582 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:22.582 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:22.583 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:22.583 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:22.583 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:22.583 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:22.583 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:22.583 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:22.583 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:22.583 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:22.583 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:22.583 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:22.583 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:22.583 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:22.584 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:22.584 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:22.584 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:22.584 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:22.584 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:22.584 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 3.7422ms
2025-09-06 04:14:39.824 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:14:39.824 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:39.824 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:39.824 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:39.824 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:39.825 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:39.825 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:39.825 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:39.826 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:39.826 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:39.826 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:39.826 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:39.826 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:39.826 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:39.826 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:39.826 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:39.826 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:39.827 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:39.827 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:39.827 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:39.827 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:39.827 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:39.827 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:39.827 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:39.827 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:39.827 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:39.827 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:39.827 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:39.828 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:39.828 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:39.828 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:39.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:39.828 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:39.828 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:39.828 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:39.828 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:39.829 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:39.829 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:39.830 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:39.830 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:39.830 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:39.830 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:39.830 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 5.7789ms
2025-09-06 04:14:43.548 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:14:43.548 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:14:43.548 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:14:43.548 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:43.548 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:43.548 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:14:43.549 +03:00 [INF] Api health check sent.
2025-09-06 04:14:43.549 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:14:43.549 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:43.549 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6682ms
2025-09-06 04:14:44.564 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:14:44.564 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:44.564 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:14:44.564 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:44.565 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:14:44.565 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:14:44.565 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:44.565 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:14:44.566 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:14:44.566 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:14:44.566 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:44.566 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:44.566 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:44.566 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:44.566 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:44.567 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:44.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:44.567 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:44.567 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:44.567 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:14:44.568 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:44.568 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:44.568 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:44.568 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:44.568 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:44.568 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:44.568 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:44.568 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:14:44.568 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:44.568 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:14:44.568 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:44.568 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:14:44.568 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:44.569 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:14:44.569 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:14:44.569 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:44.569 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:14:44.569 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:14:44.569 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:14:44.569 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:14:44.569 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:14:44.569 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:14:44.569 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 5.0015ms
2025-09-06 04:15:13.548 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:15:13.548 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:15:13.548 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:15:13.548 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:15:13.548 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:15:13.548 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:15:13.549 +03:00 [INF] Api health check sent.
2025-09-06 04:15:13.549 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:15:13.549 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:15:13.549 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6983ms
2025-09-06 04:15:43.554 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:15:43.554 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:15:43.554 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:15:43.554 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:15:43.554 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:15:43.554 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:15:43.554 +03:00 [INF] Api health check sent.
2025-09-06 04:15:43.554 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:15:43.554 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:15:43.554 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5407ms
2025-09-06 04:16:13.549 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:16:13.549 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:16:13.549 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:16:13.549 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:16:13.550 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:16:13.550 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:16:13.550 +03:00 [INF] Api health check sent.
2025-09-06 04:16:13.550 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:16:13.550 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:16:13.550 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.557ms
2025-09-06 04:16:23.131 +03:00 [DBG] Connection id "0HNFCSANRQQB3" disconnecting.
2025-09-06 04:16:23.131 +03:00 [DBG] Connection id "0HNFCSANRQQB3" stopped.
2025-09-06 04:16:23.131 +03:00 [DBG] Connection id "0HNFCSANRQQB3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:16:25.603 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:16:25.603 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:16:25.604 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:16:25.604 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:25.604 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:16:25.604 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:16:25.604 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:25.605 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:16:25.605 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:16:25.605 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:16:25.605 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:25.606 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:25.606 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:16:25.606 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:25.606 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:25.606 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:25.606 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:25.607 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:25.607 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:25.607 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:25.607 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:25.607 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:16:25.607 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:25.607 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:25.607 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:16:25.608 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:25.608 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:25.608 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:16:25.608 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:25.608 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:25.608 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:25.608 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:25.608 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:25.608 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:16:25.608 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:25.608 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:25.609 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:16:25.609 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:25.609 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:16:25.609 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:16:25.609 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:25.609 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:25.609 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 5.7031ms
2025-09-06 04:16:26.593 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:16:26.593 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:16:26.593 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:16:26.593 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:26.593 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:16:26.593 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:16:26.594 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:26.594 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:16:26.595 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:16:26.595 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:16:26.595 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:26.595 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:26.595 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:16:26.595 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:26.595 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:26.595 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:26.596 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:26.596 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:26.596 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:26.596 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:26.596 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:26.596 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:16:26.597 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:26.597 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:26.597 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:16:26.597 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:26.597 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:26.597 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:16:26.597 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:26.597 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:26.597 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:26.598 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:26.598 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:26.598 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:16:26.598 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:26.598 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:26.598 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:16:26.599 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:26.599 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:16:26.599 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:16:26.599 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:26.599 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:26.599 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 5.6323ms
2025-09-06 04:16:36.585 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:16:36.585 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:16:36.585 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:16:36.585 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:36.585 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:16:36.585 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:16:36.585 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:36.586 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:16:36.586 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:16:36.586 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:16:36.586 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:36.586 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:36.586 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:16:36.586 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:36.586 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:36.586 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:36.587 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:36.587 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:36.587 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:36.587 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:16:36.587 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:36.587 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:16:36.587 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:36.587 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:36.587 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:16:36.588 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:36.588 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:36.588 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:16:36.588 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:36.588 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:16:36.588 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:36.588 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:16:36.588 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:36.588 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:16:36.588 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:16:36.588 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:36.588 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:16:36.589 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:16:36.589 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:16:36.589 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:16:36.589 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:16:36.589 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:16:36.589 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 3.8316ms
2025-09-06 04:16:43.549 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:16:43.549 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:16:43.549 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:16:43.549 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:16:43.549 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:16:43.549 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:16:43.549 +03:00 [INF] Api health check sent.
2025-09-06 04:16:43.549 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:16:43.549 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:16:43.549 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4715ms
2025-09-06 04:17:13.549 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:17:13.549 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:17:13.549 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:17:13.549 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:17:13.549 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:17:13.549 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:17:13.550 +03:00 [INF] Api health check sent.
2025-09-06 04:17:13.550 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:17:13.550 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:17:13.550 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4815ms
2025-09-06 04:17:43.548 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:17:43.548 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:17:43.548 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:17:43.548 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:17:43.548 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:17:43.548 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:17:43.548 +03:00 [INF] Api health check sent.
2025-09-06 04:17:43.548 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:17:43.548 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:17:43.548 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5572ms
2025-09-06 04:17:45.587 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:17:45.587 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:17:45.587 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:17:45.587 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:45.587 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:17:45.587 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:17:45.587 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:45.588 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:17:45.589 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:17:45.589 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:17:45.589 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:45.589 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:45.589 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:17:45.589 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:45.589 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:45.589 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:45.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:45.590 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:45.590 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:45.590 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:45.590 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:45.590 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:17:45.590 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:45.590 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:45.590 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:17:45.591 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:45.591 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:45.591 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:17:45.591 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:45.591 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:45.591 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:45.591 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:45.591 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:45.591 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:17:45.591 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:45.591 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:45.592 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:17:45.592 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:45.592 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:17:45.592 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:17:45.592 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:45.592 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:45.592 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 5.1901ms
2025-09-06 04:17:47.589 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:17:47.589 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:17:47.589 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:17:47.589 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:47.589 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:17:47.589 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:17:47.589 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:47.589 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:17:47.590 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:17:47.590 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:17:47.590 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:47.590 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:47.590 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:17:47.590 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:47.590 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:47.590 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:47.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:47.590 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:47.590 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:47.590 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:47.591 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:47.591 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:17:47.591 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:47.591 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:47.591 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:17:47.591 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:47.591 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:47.591 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:17:47.591 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:47.591 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:47.591 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:47.591 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:47.591 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:47.591 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:17:47.591 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:47.591 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:47.592 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:17:47.592 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:47.592 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:17:47.592 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:17:47.592 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:47.592 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:47.592 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 3.5501ms
2025-09-06 04:17:58.568 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:17:58.568 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:17:58.569 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:17:58.569 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:58.569 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:17:58.569 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:17:58.569 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:58.570 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:17:58.570 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:17:58.570 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:17:58.570 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:58.570 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:58.570 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:17:58.570 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:58.570 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:58.570 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:58.571 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:58.571 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:58.571 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:58.571 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:17:58.571 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:58.571 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:17:58.571 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:58.571 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:58.571 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:17:58.572 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:58.572 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:58.572 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:17:58.572 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:58.572 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:17:58.572 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:58.572 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:17:58.573 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:58.573 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:17:58.573 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:17:58.573 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:58.574 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:17:58.574 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:17:58.574 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:17:58.574 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:17:58.574 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:17:58.574 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:17:58.575 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 6.1813ms
2025-09-06 04:18:00.560 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:18:00.560 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:00.560 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:00.560 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:00.560 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:00.560 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:00.560 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:00.560 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:00.561 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:00.561 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:00.561 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:00.561 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:00.561 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:00.561 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:00.561 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:00.561 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:00.561 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:00.561 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:00.561 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:00.561 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:00.561 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:00.561 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:00.561 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:00.561 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:00.561 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:00.562 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:00.562 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:00.562 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:00.562 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:00.562 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:00.562 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:00.562 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:00.562 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:00.562 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:00.562 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:00.562 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:00.562 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:00.562 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:00.562 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:18:00.562 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:00.562 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:00.562 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:00.562 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 2.7257ms
2025-09-06 04:18:08.260 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:18:08.260 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:08.260 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:08.260 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:08.260 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:08.260 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:08.261 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:08.261 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:08.262 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:08.262 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:08.262 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:08.262 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:08.262 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:08.262 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:08.262 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:08.262 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:08.263 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:08.263 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:08.263 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:08.263 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:08.263 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:08.263 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:08.263 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:08.263 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:08.263 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:08.264 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:08.264 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:08.264 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:08.264 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:08.264 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:08.264 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:08.264 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:08.265 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:08.265 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:08.265 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:08.265 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:08.265 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:08.265 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:08.265 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:18:08.266 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:08.266 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:08.266 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:08.266 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 5.8717ms
2025-09-06 04:18:11.708 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:18:11.708 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:18:11.708 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.709 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:11.709 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:11.709 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.709 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:11.710 +03:00 [INF] Getting all users
2025-09-06 04:18:11.713 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-06 04:18:11.713 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-06 04:18:11.725 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-06 04:18:11.727 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:11.727 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:11.727 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.727 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.727 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:11.727 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.727 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.727 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:18:11.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:18:11.729 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.730 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:18:11.730 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.730 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.731 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.731 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:18:11.731 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:11.731 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.731 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.731 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 22.5584ms
2025-09-06 04:18:11.732 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:18:11.732 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:18:11.732 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.732 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:11.732 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:11.732 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.732 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:11.732 +03:00 [INF] Getting all users
2025-09-06 04:18:11.732 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:11.732 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:11.732 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.732 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.732 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:11.732 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.732 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.732 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:18:11.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:18:11.733 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.733 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:11.733 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.733 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.733 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.733 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:18:11.733 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:11.733 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.733 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.733 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 1.3323ms
2025-09-06 04:18:11.745 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:18:11.745 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:18:11.745 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:18:11.745 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.745 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:11.745 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:11.746 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.746 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:11.746 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:18:11.746 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:11.746 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:11.746 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.746 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.746 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:11.746 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.746 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.746 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:18:11.747 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:18:11.747 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:11.747 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:11.747 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.747 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:11.747 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.747 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.747 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.747 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:18:11.747 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:11.747 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.747 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.747 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 1.8334ms
2025-09-06 04:18:11.748 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:18:11.748 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:18:11.748 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:18:11.748 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.748 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:11.748 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:11.748 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.748 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:11.749 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:18:11.749 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:11.749 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:11.749 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.749 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.749 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:11.749 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.749 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.749 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:18:11.749 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:18:11.749 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:11.749 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:11.749 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.749 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:11.749 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.749 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.750 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.750 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:18:11.750 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:11.750 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.750 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.750 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 1.8196ms
2025-09-06 04:18:11.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-06 04:18:11.763 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-06 04:18:11.763 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.763 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:11.763 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:11.763 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.764 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:11.764 +03:00 [INF] Getting all users
2025-09-06 04:18:11.764 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:11.764 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:11.764 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.764 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.764 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:11.764 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.764 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.764 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:18:11.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-06 04:18:11.764 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.764 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:11.764 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.764 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.764 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-06 04:18:11.764 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:18:11.764 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:11.764 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.764 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.764 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 1.47ms
2025-09-06 04:18:11.776 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:18:11.776 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:18:11.776 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:18:11.776 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.776 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:11.776 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:11.776 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.777 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:11.777 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:18:11.777 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:11.777 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:11.777 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.777 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.777 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:11.777 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.777 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:11.777 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:18:11.777 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:18:11.777 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:11.777 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:11.777 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.777 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:11.777 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:11.777 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.778 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:11.778 +03:00 [DBG] Connection id "0HNFCSANRQQB4" completed keep alive response.
2025-09-06 04:18:11.778 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:11.778 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:11.778 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:11.778 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 1.8579ms
2025-09-06 04:18:14.991 +03:00 [INF] This is a test log to file!
2025-09-06 04:18:15.130 +03:00 [INF] Shared Kernal configured successfully.
2025-09-06 04:18:15.132 +03:00 [INF] API configured successfully.
2025-09-06 04:18:15.192 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-06 04:18:15.249 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-06 04:18:15.649 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-06 04:18:15.729 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:15.752 +03:00 [INF] Registered 23 endpoints in 688 milliseconds.
2025-09-06 04:18:15.758 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:15.806 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:15.895 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:15.904 +03:00 [DBG] Created DbConnection. (7ms).
2025-09-06 04:18:15.906 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:15.910 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:15.912 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-06 04:18:15.913 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:15.921 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:15.923 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:15.928 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:15.928 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:15.929 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:15.930 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-06 04:18:15.935 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:18:15.940 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-06 04:18:15.941 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-06 04:18:15.947 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:18:15.970 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-06 04:18:15.971 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:18:15.971 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:18:15.971 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:18:15.971 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:18:15.9715399+00:00');
SELECT changes();
2025-09-06 04:18:15.976 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-06 01:18:15.9715399+00:00');
SELECT changes();
2025-09-06 04:18:16.017 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:18:16.019 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:18:16.019 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-06 04:18:16.019 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:18:16.020 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-06 04:18:16.020 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:18:16.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-06 04:18:16.021 +03:00 [DBG] Committing transaction.
2025-09-06 04:18:16.021 +03:00 [DBG] Committed transaction.
2025-09-06 04:18:16.023 +03:00 [DBG] Disposing transaction.
2025-09-06 04:18:16.024 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-06 04:18:16.025 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-06 04:18:16.026 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:16.026 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:16.026 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:16.026 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:16.026 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:16.026 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:16.026 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:18:16.026 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:18:16.027 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:18:16.027 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:18:16.027 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-06 04:18:16.029 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:16.029 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:16.029 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:16.030 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:18:16.031 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-06 04:18:16.033 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:16.034 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:18:16.037 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-06 04:18:16.038 +03:00 [DBG] Committing transaction.
2025-09-06 04:18:16.038 +03:00 [DBG] Committed transaction.
2025-09-06 04:18:16.038 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-06 04:18:16.038 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:18:16.038 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-06 04:18:16.038 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:18:16.040 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-06 04:18:16.041 +03:00 [DBG] Disposing transaction.
2025-09-06 04:18:16.042 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:16.044 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-06 04:18:16.044 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:16.044 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:16.044 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:16.044 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:18:16.044 +03:00 [INF] Infrastructure configured successfully.
2025-09-06 04:18:16.063 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-06 04:18:16.075 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-06 04:18:16.076 +03:00 [DBG] Hosting starting
2025-09-06 04:18:16.121 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-06 04:18:16.122 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-06 04:18:16.134 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-06 04:18:16.134 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-06 04:18:16.134 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-06 04:18:16.134 +03:00 [INF] Hosting environment: Development
2025-09-06 04:18:16.134 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-06 04:18:16.134 +03:00 [DBG] Hosting started
2025-09-06 04:18:18.822 +03:00 [DBG] Connection id "0HNFCSD1LL871" accepted.
2025-09-06 04:18:18.823 +03:00 [DBG] Connection id "0HNFCSD1LL871" started.
2025-09-06 04:18:18.839 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:18:18.870 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:18:18.870 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:18:18.883 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-06 04:18:18.885 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:18:18.907 +03:00 [INF] Api health check sent.
2025-09-06 04:18:18.909 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:18:18.909 +03:00 [DBG] Connection id "0HNFCSD1LL871" completed keep alive response.
2025-09-06 04:18:18.910 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 71.6342ms
2025-09-06 04:18:18.912 +03:00 [DBG] Connection id "0HNFCSD1LL872" accepted.
2025-09-06 04:18:18.912 +03:00 [DBG] Connection id "0HNFCSD1LL872" started.
2025-09-06 04:18:18.914 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - null null
2025-09-06 04:18:18.915 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:18:18.915 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d'
2025-09-06 04:18:18.915 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:18.916 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:18.917 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:18.917 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:18.927 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:18.946 +03:00 [INF] Getting user by ID: "3f6ff5e0-5e9a-4167-a94a-4715887aa04d"
2025-09-06 04:18:18.978 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-06 04:18:19.006 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-06 04:18:19.154 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:18:19.174 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:19.174 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:19.175 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.176 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.176 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:19.176 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.177 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.178 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:18:19.182 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:18:19.205 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.231 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.247 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.247 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 64ms reading results.
2025-09-06 04:18:19.249 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.249 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.264 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-06 04:18:19.264 +03:00 [DBG] Connection id "0HNFCSD1LL872" completed keep alive response.
2025-09-06 04:18:19.265 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:19.267 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.268 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.268 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d - 200 null application/json; charset=utf-8 354.2719ms
2025-09-06 04:18:19.324 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:18:19.324 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:18:19.324 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:18:19.324 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.325 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:19.325 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:19.326 +03:00 [DBG] Connection id "0HNFCSD1LL873" accepted.
2025-09-06 04:18:19.326 +03:00 [DBG] Connection id "0HNFCSD1LL873" started.
2025-09-06 04:18:19.326 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:18:19.326 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.326 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:19.327 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:19.327 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:19.327 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:19.327 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:19.327 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:19.328 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:19.329 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:19.333 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-06 04:18:19.334 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-06 04:18:19.348 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-06 04:18:19.351 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:19.351 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:19.351 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:19.351 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:19.352 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.352 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.352 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.352 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:19.352 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.352 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.352 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.352 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.352 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:19.352 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.352 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.352 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.352 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.353 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.353 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.353 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.365 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.365 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.370 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.371 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.371 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 18ms reading results.
2025-09-06 04:18:19.371 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.371 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.372 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.372 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.372 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 19ms reading results.
2025-09-06 04:18:19.372 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.372 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.373 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:19.374 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.374 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.375 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:19.375 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.375 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.375 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.376 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.376 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:19.376 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.376 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.384 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:19.384 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:19.384 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.385 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.385 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:19.385 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.385 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.385 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.385 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.386 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.386 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:19.386 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.386 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.387 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:19.387 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:19.387 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:19.387 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:19.387 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.387 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.387 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 61.1541ms
2025-09-06 04:18:19.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:18:19.390 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:19.390 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:19.390 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:19.390 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:19.390 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:19.391 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:19.392 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:19.393 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:19.393 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:19.393 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.394 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.394 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:19.394 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.394 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.394 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.395 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.395 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.395 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:19.395 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.395 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:18:19.396 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.396 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.396 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:18:19.396 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:19.396 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.396 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.396 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:19.396 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.397 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:19.397 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:19.397 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.397 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:19.397 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:18:19.398 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:19.398 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.398 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:19.399 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:19.399 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:19.399 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:19.399 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.399 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.399 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 10.0679ms
2025-09-06 04:18:19.459 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:18:19.463 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.464 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:18:19.465 +03:00 [DBG] Connection id "0HNFCSD1LL872" completed keep alive response.
2025-09-06 04:18:19.465 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:18:19.465 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:19.465 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:18:19.465 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:19.465 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.465 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:19.465 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 141.4111ms
2025-09-06 04:18:19.465 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:19.465 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:19.465 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.466 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:19.466 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.467 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:19.467 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:19.467 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 3.007ms
2025-09-06 04:18:19.468 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:18:19.468 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:18:19.468 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:18:19.468 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.468 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:19.468 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:19.468 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.469 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:19.469 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.469 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:19.469 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:19.469 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 1.7995ms
2025-09-06 04:18:19.471 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:18:19.471 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:18:19.471 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:18:19.471 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.471 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:19.471 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:19.472 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.472 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:19.473 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:18:19.473 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:19.473 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:19.473 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 2.3096ms
2025-09-06 04:18:20.328 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:18:20.328 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:18:20.328 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:18:20.328 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:20.328 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:20.328 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:18:20.329 +03:00 [INF] Api health check sent.
2025-09-06 04:18:20.329 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:18:20.329 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:20.329 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.3805ms
2025-09-06 04:18:22.910 +03:00 [DBG] Connection id "0HNFCSD1LL871" received FIN.
2025-09-06 04:18:22.910 +03:00 [DBG] Connection id "0HNFCSD1LL871" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:18:22.911 +03:00 [DBG] Connection id "0HNFCSD1LL871" disconnecting.
2025-09-06 04:18:22.912 +03:00 [DBG] Connection id "0HNFCSD1LL871" stopped.
2025-09-06 04:18:29.967 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - null null
2025-09-06 04:18:29.968 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:18:29.968 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:18:29.968 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:29.968 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:29.968 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:18:29.968 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:29.969 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 204 null null 1.0919ms
2025-09-06 04:18:29.970 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - application/json 184
2025-09-06 04:18:29.970 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:18:29.970 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:18:29.970 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:18:29.970 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:29.970 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:29.970 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:18:29.980 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:29.994 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000008": started reading request body.
2025-09-06 04:18:29.994 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000008": done reading request body.
2025-09-06 04:18:30.010 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:30.011 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:30.011 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:30.011 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.011 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:30.011 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:30.011 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:30.011 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:30.011 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:30.011 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:30.012 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:30.012 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:30.012 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.012 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:30.012 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.012 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:30.013 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:30.013 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:30.013 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.013 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:30.013 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:30.013 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:30.013 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:30.013 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:30.013 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.013 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:30.014 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.014 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:30.014 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:30.014 +03:00 [INF] Executing SQL for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", Mode="ReadOnly"
2025-09-06 04:18:30.020 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/LearningTopicDB (Mode="ReadOnly")
2025-09-06 04:18:30.020 +03:00 [DBG] SQL: select * from topics
2025-09-06 04:18:30.021 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=LearningTopicDB)
2025-09-06 04:18:30.238 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:18:30.279 +03:00 [INF] Query execution finished in 258 ms, returned 2 rows
2025-09-06 04:18:30.283 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:30.283 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.283 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:30.284 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:30.284 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:30.284 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:30.284 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:30.284 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.284 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:30.284 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:30.284 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:30.294 +03:00 [INF] Query not saved due to profile rules for profile "98591f58-e603-4225-9d96-30c0805d6cbe", Query already existed
2025-09-06 04:18:30.298 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:18:30.298 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:30.298 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:30.298 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:30.298 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:30.298 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 200 null application/json; charset=utf-8 328.4876ms
2025-09-06 04:18:31.301 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:18:31.301 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:31.301 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:31.301 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:31.301 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:31.301 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:31.302 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:31.302 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:31.303 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:31.303 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:31.303 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:31.303 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:31.303 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:31.303 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:31.303 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:31.303 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:31.303 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:31.304 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:31.304 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:31.304 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:31.304 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:31.304 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:31.304 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:31.304 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:31.304 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:31.304 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:31.304 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:31.304 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:31.304 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:31.304 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:31.304 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:31.305 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:31.305 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:31.305 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:31.305 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:31.305 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:31.305 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:31.305 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:31.305 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:31.305 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:31.305 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:31.305 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:31.305 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 4.2995ms
2025-09-06 04:18:39.746 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:18:39.747 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:39.747 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:18:39.747 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:39.747 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:39.747 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:39.747 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:39.748 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:39.748 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:39.748 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:39.749 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:39.749 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:39.749 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:39.749 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:39.749 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:39.749 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:39.750 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:39.750 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:39.750 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:39.750 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:39.751 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:39.751 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:39.751 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:39.751 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:39.751 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:39.751 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:39.751 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:39.751 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:39.751 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:39.751 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:39.751 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:39.752 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:39.752 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:39.752 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:39.752 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:39.752 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:39.752 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:39.753 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:18:39.753 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:39.753 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:39.753 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:39.753 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:39.753 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 6.6757ms
2025-09-06 04:18:50.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:18:50.332 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:18:50.332 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:18:50.332 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:50.332 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:50.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:18:50.333 +03:00 [INF] Api health check sent.
2025-09-06 04:18:50.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:18:50.333 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:50.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5049ms
2025-09-06 04:18:53.756 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-06 04:18:53.756 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-06 04:18:53.756 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:53.756 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:53.756 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:53.756 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:53.756 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:53.758 +03:00 [INF] Listing all profiles
2025-09-06 04:18:53.760 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-06 04:18:53.761 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-06 04:18:53.782 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-06 04:18:53.784 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:53.785 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:53.785 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:53.785 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.785 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:53.785 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:53.785 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:53.785 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-06 04:18:53.785 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-06 04:18:53.787 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.787 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-06 04:18:53.787 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.787 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:53.787 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:53.787 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:53.787 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.787 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:53.787 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:53.787 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:53.787 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:53.788 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:53.788 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:53.788 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:53.788 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:53.788 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.788 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:53.788 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.788 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:53.788 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:53.789 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:53.789 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:53.789 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:53.789 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:53.790 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:53.790 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 33.979ms
2025-09-06 04:18:53.792 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-06 04:18:53.793 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-06 04:18:53.793 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:53.793 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:53.793 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:53.793 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:53.794 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:53.794 +03:00 [INF] Listing all profiles
2025-09-06 04:18:53.795 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:53.795 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:53.795 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:53.795 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.795 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:53.795 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:53.795 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:53.795 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-06 04:18:53.795 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-06 04:18:53.795 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.795 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:53.796 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.796 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:53.796 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:53.796 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:53.796 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.796 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:53.796 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:53.796 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:53.796 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:53.796 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:53.797 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:53.797 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:53.797 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:53.797 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.797 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:53.797 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:53.797 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:53.798 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:53.798 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:53.798 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:53.798 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:53.798 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:53.798 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:53.798 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 6.4794ms
2025-09-06 04:18:55.817 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-06 04:18:55.817 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-06 04:18:55.817 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:55.817 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:55.817 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:55.817 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:55.818 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:55.818 +03:00 [INF] Listing all profiles
2025-09-06 04:18:55.818 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:55.818 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:55.818 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:55.818 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.818 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:55.818 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:55.818 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:55.818 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-06 04:18:55.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-06 04:18:55.819 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.819 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:55.819 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.819 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:55.819 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:55.819 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:55.819 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.819 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:55.819 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:55.819 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:55.819 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:55.819 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:55.819 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:55.820 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:55.820 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:55.820 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.820 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:55.820 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.820 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:55.820 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:55.820 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:55.820 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:55.820 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:55.820 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:55.820 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:55.820 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 3.5524ms
2025-09-06 04:18:55.821 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-06 04:18:55.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-06 04:18:55.822 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:55.822 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:18:55.822 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:18:55.822 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:55.822 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:18:55.823 +03:00 [INF] Listing all profiles
2025-09-06 04:18:55.823 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:18:55.823 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:18:55.823 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:55.823 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.823 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:55.823 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:55.823 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:55.823 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-06 04:18:55.823 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-06 04:18:55.823 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.823 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:55.823 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.823 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:55.823 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:55.824 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:55.824 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.824 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:18:55.824 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:55.824 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:18:55.824 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:55.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:18:55.824 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:55.824 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:55.824 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:18:55.824 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.824 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:18:55.824 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:18:55.824 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:55.825 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:18:55.825 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-06 04:18:55.825 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:18:55.825 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:18:55.825 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:18:55.825 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:18:55.825 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 3.9665ms
2025-09-06 04:19:20.548 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:19:20.548 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:19:20.548 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:19:20.548 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:19:20.548 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:19:20.548 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:19:20.548 +03:00 [INF] Api health check sent.
2025-09-06 04:19:20.548 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:19:20.548 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:19:20.548 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6704ms
2025-09-06 04:19:50.549 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:19:50.549 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:19:50.549 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:19:50.549 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:19:50.549 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:19:50.549 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:19:50.550 +03:00 [INF] Api health check sent.
2025-09-06 04:19:50.550 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:19:50.550 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:19:50.550 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5134ms
2025-09-06 04:20:20.551 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:20:20.551 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:20:20.552 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:20:20.552 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:20:20.552 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:20:20.552 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:20:20.552 +03:00 [INF] Api health check sent.
2025-09-06 04:20:20.552 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:20:20.552 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:20:20.552 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4722ms
2025-09-06 04:20:30.193 +03:00 [DBG] Connection id "0HNFCSD1LL872" disconnecting.
2025-09-06 04:20:30.193 +03:00 [DBG] Connection id "0HNFCSD1LL872" stopped.
2025-09-06 04:20:30.193 +03:00 [DBG] Connection id "0HNFCSD1LL872" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:20:50.549 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:20:50.549 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:20:50.549 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:20:50.549 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:20:50.549 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:20:50.549 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:20:50.550 +03:00 [INF] Api health check sent.
2025-09-06 04:20:50.550 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:20:50.550 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:20:50.550 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4927ms
2025-09-06 04:21:02.991 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:21:02.991 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:21:02.991 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:21:02.991 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:02.991 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:02.991 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:21:02.991 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:02.992 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.6052ms
2025-09-06 04:21:02.992 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 81
2025-09-06 04:21:02.992 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:21:02.992 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:21:02.992 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:21:02.993 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:02.993 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:02.993 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:21:02.993 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:21:02.995 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000015": started reading request body.
2025-09-06 04:21:02.995 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000015": done reading request body.
2025-09-06 04:21:02.998 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:21:02.998 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:21:02.998 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:21:02.998 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:02.998 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:21:02.998 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:21:02.998 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:21:02.998 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:21:02.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:21:02.999 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:21:02.999 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:21:02.999 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:02.999 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:21:02.999 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:02.999 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:21:03.008 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:21:03.011 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:21:03.025 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:21:03.028 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:21:03.028 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:21:03.028 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:21:03.063 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:21:03.063 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:03.064 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:21:03.064 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:21:03.065 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-06 04:21:03.066 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:21:03.067 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:21:03.072 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:03.073 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 5ms reading results.
2025-09-06 04:21:03.073 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:03.073 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:21:03.075 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:21:03.076 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:21:03.080 +03:00 [INF] AI mode changed to "Local" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:21:02.9999871Z"
2025-09-06 04:21:03.081 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:21:03.082 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:03.082 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:21:03.082 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:21:03.082 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:21:03.082 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 89.3707ms
2025-09-06 04:21:03.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:21:03.159 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:21:03.159 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:03.159 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:03.159 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:03.159 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:03.164 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:21:03.165 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:21:03.238 +03:00 [INF] Received HTTP response headers after 71.694ms - 200
2025-09-06 04:21:03.239 +03:00 [INF] End processing HTTP request after 75.6672ms - 200
2025-09-06 04:21:03.241 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:03.241 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:03.241 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 82.7097ms
2025-09-06 04:21:03.244 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:21:03.244 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:21:03.244 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:21:03.244 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:21:03.244 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:03.244 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:03.244 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:03.244 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:03.245 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:03.245 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:03.245 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 1.8519ms
2025-09-06 04:21:03.588 +03:00 [DBG] Connection id "0HNFCSD1LL874" accepted.
2025-09-06 04:21:03.588 +03:00 [DBG] Connection id "0HNFCSD1LL874" started.
2025-09-06 04:21:03.588 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:21:03.588 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:21:03.588 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:21:03.588 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:21:03.588 +03:00 [INF] Api health check sent.
2025-09-06 04:21:03.588 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:21:03.588 +03:00 [DBG] Connection id "0HNFCSD1LL874" completed keep alive response.
2025-09-06 04:21:03.588 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4245ms
2025-09-06 04:21:04.594 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:21:04.594 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:21:04.594 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:21:04.594 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:04.594 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:04.594 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:21:04.594 +03:00 [INF] Api health check sent.
2025-09-06 04:21:04.594 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:21:04.594 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:04.595 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7164ms
2025-09-06 04:21:04.597 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:21:04.597 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:21:04.597 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:04.597 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:04.597 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:04.597 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:04.598 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:21:04.598 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:21:04.642 +03:00 [INF] Received HTTP response headers after 43.3173ms - 200
2025-09-06 04:21:04.642 +03:00 [INF] End processing HTTP request after 43.4864ms - 200
2025-09-06 04:21:04.642 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:04.642 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:04.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 44.7334ms
2025-09-06 04:21:04.646 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:21:04.646 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:21:04.646 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:21:04.646 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:21:04.646 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:04.646 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:04.646 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:04.646 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:04.646 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:04.646 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:04.646 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.41ms
2025-09-06 04:21:07.591 +03:00 [DBG] Connection id "0HNFCSD1LL874" received FIN.
2025-09-06 04:21:07.591 +03:00 [DBG] Connection id "0HNFCSD1LL874" disconnecting.
2025-09-06 04:21:07.591 +03:00 [DBG] Connection id "0HNFCSD1LL874" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:21:07.593 +03:00 [DBG] Connection id "0HNFCSD1LL874" stopped.
2025-09-06 04:21:20.334 +03:00 [DBG] Connection id "0HNFCSD1LL875" accepted.
2025-09-06 04:21:20.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:21:20.335 +03:00 [DBG] Connection id "0HNFCSD1LL875" started.
2025-09-06 04:21:20.335 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:21:20.335 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:20.335 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:21:20.335 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:21:20.335 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:20.335 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:21:20.335 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:20.335 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:20.335 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:20.335 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:20.335 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:21:20.335 +03:00 [INF] Api health check sent.
2025-09-06 04:21:20.335 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:21:20.335 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:21:20.335 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:21:20.335 +03:00 [DBG] Connection id "0HNFCSD1LL875" completed keep alive response.
2025-09-06 04:21:20.335 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4042ms
2025-09-06 04:21:20.336 +03:00 [INF] Received HTTP response headers after 0.9727ms - 200
2025-09-06 04:21:20.336 +03:00 [INF] End processing HTTP request after 1.1646ms - 200
2025-09-06 04:21:20.336 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:21:20.336 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:20.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 1.9779ms
2025-09-06 04:21:20.396 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:21:20.396 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:21:20.396 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:21:20.396 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:21:20.396 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:20.396 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:20.396 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:20.396 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:20.396 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:21:20.396 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:20.396 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.4978ms
2025-09-06 04:21:50.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:21:50.335 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:21:50.335 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:21:50.335 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:50.335 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:50.335 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:21:50.335 +03:00 [INF] Api health check sent.
2025-09-06 04:21:50.335 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:21:50.335 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:50.335 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4465ms
2025-09-06 04:21:50.988 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:21:50.988 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:21:50.988 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:21:50.988 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:50.988 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:50.988 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:21:50.988 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:50.989 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.2985ms
2025-09-06 04:21:50.989 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 136
2025-09-06 04:21:50.989 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:21:50.989 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:21:50.989 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:21:50.990 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:21:50.990 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:21:50.990 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:21:50.990 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:21:50.990 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000001F": started reading request body.
2025-09-06 04:21:50.990 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000001F": done reading request body.
2025-09-06 04:21:50.990 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:21:50.990 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:21:50.990 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:21:50.990 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:50.990 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:21:50.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:21:50.991 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:21:50.991 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:21:50.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:21:50.991 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:21:50.991 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:21:50.991 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:50.991 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:21:50.991 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:50.991 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:21:50.991 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:21:50.991 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:21:50.991 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:21:50.992 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:21:50.992 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:21:50.992 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:21:50.992 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:21:50.992 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:50.992 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:21:50.992 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:21:50.992 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:21:50.992 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:21:50.992 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:21:50.996 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:50.996 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-06 04:21:50.996 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:21:50.996 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:21:50.997 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:21:50.997 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:21:50.997 +03:00 [INF] AI mode changed to "Groq" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:21:50.9916483Z"
2025-09-06 04:21:50.998 +03:00 [INF] API key changed for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:21:50.9917714Z"
2025-09-06 04:21:50.998 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:21:50.998 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:21:50.998 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:21:50.998 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:21:50.998 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:21:50.998 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 8.912ms
2025-09-06 04:21:51.575 +03:00 [DBG] Connection id "0HNFCSD1LL876" accepted.
2025-09-06 04:21:51.575 +03:00 [DBG] Connection id "0HNFCSD1LL876" started.
2025-09-06 04:21:51.575 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:21:51.575 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:21:51.575 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:21:51.575 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:21:51.575 +03:00 [INF] Api health check sent.
2025-09-06 04:21:51.575 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:21:51.575 +03:00 [DBG] Connection id "0HNFCSD1LL876" completed keep alive response.
2025-09-06 04:21:51.575 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2823ms
2025-09-06 04:21:55.577 +03:00 [DBG] Connection id "0HNFCSD1LL876" received FIN.
2025-09-06 04:21:55.577 +03:00 [DBG] Connection id "0HNFCSD1LL876" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:21:55.577 +03:00 [DBG] Connection id "0HNFCSD1LL876" disconnecting.
2025-09-06 04:21:55.579 +03:00 [DBG] Connection id "0HNFCSD1LL876" stopped.
2025-09-06 04:22:00.391 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:22:00.391 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:00.391 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:22:00.391 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:00.391 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:00.391 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:22:00.391 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:00.391 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.4842ms
2025-09-06 04:22:00.393 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 81
2025-09-06 04:22:00.393 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:00.393 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:00.393 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:00.393 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:00.393 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:00.393 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:00.393 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:22:00.393 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000021": started reading request body.
2025-09-06 04:22:00.393 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000021": done reading request body.
2025-09-06 04:22:00.394 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:22:00.394 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:22:00.394 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:00.394 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:00.394 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:00.394 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:00.394 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:00.394 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:00.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:00.404 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:00.404 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:00.404 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:00.404 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 9ms reading results.
2025-09-06 04:22:00.404 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:00.404 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:00.404 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:00.404 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:22:00.404 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:22:00.404 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:22:00.404 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:22:00.404 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:22:00.404 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:00.404 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:00.404 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:00.404 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:00.404 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:00.404 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:22:00.404 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:22:00.408 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:00.408 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-06 04:22:00.408 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:00.408 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:00.408 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:00.408 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:22:00.408 +03:00 [INF] AI mode changed to "Local" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:22:00.4042733Z"
2025-09-06 04:22:00.409 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:00.409 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:00.409 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:22:00.409 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:00.409 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:00.409 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 16.217ms
2025-09-06 04:22:00.508 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:22:00.508 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:22:00.508 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:22:00.508 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:00.508 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:00.508 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:22:00.508 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:22:00.508 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:22:00.509 +03:00 [INF] Received HTTP response headers after 0.7565ms - 200
2025-09-06 04:22:00.509 +03:00 [INF] End processing HTTP request after 0.9057ms - 200
2025-09-06 04:22:00.509 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:22:00.510 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:00.510 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 1.472ms
2025-09-06 04:22:00.515 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:22:00.515 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:22:00.516 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:22:00.516 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:22:00.516 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:22:00.516 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:00.516 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:00.516 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:22:00.516 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:22:00.516 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:00.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.5313ms
2025-09-06 04:22:00.962 +03:00 [DBG] Connection id "0HNFCSD1LL877" accepted.
2025-09-06 04:22:00.962 +03:00 [DBG] Connection id "0HNFCSD1LL877" started.
2025-09-06 04:22:00.962 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:22:00.962 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:22:00.962 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:22:00.962 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:22:00.963 +03:00 [INF] Api health check sent.
2025-09-06 04:22:00.963 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:22:00.963 +03:00 [DBG] Connection id "0HNFCSD1LL877" completed keep alive response.
2025-09-06 04:22:00.963 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4929ms
2025-09-06 04:22:01.968 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:22:01.968 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:22:01.968 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:22:01.968 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:01.968 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:01.968 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:22:01.969 +03:00 [INF] Api health check sent.
2025-09-06 04:22:01.969 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:22:01.969 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:01.969 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7656ms
2025-09-06 04:22:01.972 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:22:01.972 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:22:01.972 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:22:01.972 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:01.972 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:01.972 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:22:01.973 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:22:01.973 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:22:01.973 +03:00 [INF] Received HTTP response headers after 0.386ms - 200
2025-09-06 04:22:01.973 +03:00 [INF] End processing HTTP request after 0.5058ms - 200
2025-09-06 04:22:01.973 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:22:01.973 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:01.973 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 0.9236ms
2025-09-06 04:22:01.976 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:22:01.976 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:22:01.976 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:22:01.976 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:22:01.976 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:22:01.976 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:01.976 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:01.976 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:22:01.977 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:22:01.977 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:01.977 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.8712ms
2025-09-06 04:22:04.964 +03:00 [DBG] Connection id "0HNFCSD1LL877" received FIN.
2025-09-06 04:22:04.964 +03:00 [DBG] Connection id "0HNFCSD1LL877" disconnecting.
2025-09-06 04:22:04.964 +03:00 [DBG] Connection id "0HNFCSD1LL877" stopped.
2025-09-06 04:22:04.964 +03:00 [DBG] Connection id "0HNFCSD1LL877" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:22:12.056 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:22:12.056 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:12.056 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:22:12.057 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:12.057 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:12.057 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:22:12.057 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:12.057 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.4693ms
2025-09-06 04:22:12.058 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 136
2025-09-06 04:22:12.058 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:12.058 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:12.058 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:12.058 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:12.058 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:12.058 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:12.058 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:22:12.059 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000028": started reading request body.
2025-09-06 04:22:12.059 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000028": done reading request body.
2025-09-06 04:22:12.059 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:22:12.059 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:22:12.059 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:12.059 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:12.059 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:12.059 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:12.059 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:12.059 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:12.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:12.059 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:12.060 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:12.060 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:12.060 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:12.060 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:12.060 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:12.060 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:12.060 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:22:12.060 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:22:12.060 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:22:12.060 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:22:12.060 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:22:12.060 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:12.060 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:12.060 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:12.060 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:12.060 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:12.060 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:22:12.061 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:22:12.063 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:12.063 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:22:12.063 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:12.063 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:12.063 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:12.063 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:22:12.063 +03:00 [INF] AI mode changed to "Groq" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:22:12.0602092Z"
2025-09-06 04:22:12.064 +03:00 [INF] API key changed for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:22:12.0602108Z"
2025-09-06 04:22:12.064 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:12.064 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:12.064 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:22:12.064 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:12.064 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:12.065 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 6.5692ms
2025-09-06 04:22:12.636 +03:00 [DBG] Connection id "0HNFCSD1LL878" accepted.
2025-09-06 04:22:12.636 +03:00 [DBG] Connection id "0HNFCSD1LL878" started.
2025-09-06 04:22:12.636 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:22:12.636 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:22:12.636 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:22:12.636 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:22:12.636 +03:00 [INF] Api health check sent.
2025-09-06 04:22:12.636 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:22:12.636 +03:00 [DBG] Connection id "0HNFCSD1LL878" completed keep alive response.
2025-09-06 04:22:12.636 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4198ms
2025-09-06 04:22:16.638 +03:00 [DBG] Connection id "0HNFCSD1LL878" received FIN.
2025-09-06 04:22:16.638 +03:00 [DBG] Connection id "0HNFCSD1LL878" disconnecting.
2025-09-06 04:22:16.638 +03:00 [DBG] Connection id "0HNFCSD1LL878" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:22:16.639 +03:00 [DBG] Connection id "0HNFCSD1LL878" stopped.
2025-09-06 04:22:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:22:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:22:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:22:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:22:20.333 +03:00 [INF] Api health check sent.
2025-09-06 04:22:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:22:20.334 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:20.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3404ms
2025-09-06 04:22:23.289 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:22:23.289 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:22:23.289 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:22:23.289 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:23.289 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:23.289 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:22:23.289 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:23.289 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.2213ms
2025-09-06 04:22:23.290 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 164
2025-09-06 04:22:23.290 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:22:23.290 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:22:23.290 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:22:23.290 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:23.290 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:23.290 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:22:23.290 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:22:23.292 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000002B": started reading request body.
2025-09-06 04:22:23.292 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000002B": done reading request body.
2025-09-06 04:22:23.295 +03:00 [INF] Converting NL to SQL for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:23.295 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:22:23.295 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:22:23.295 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:23.295 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.295 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:23.295 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:23.295 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:23.295 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:23.295 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:23.295 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:23.296 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:23.296 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.296 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:23.296 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.296 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:23.296 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:23.296 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.296 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:23.296 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:23.296 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:23.296 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:23.296 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:23.296 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:23.297 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:23.297 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.297 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:23.297 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.297 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:23.297 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:23.297 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:23.297 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.297 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:23.297 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:23.297 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:23.297 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:23.298 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:23.298 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.298 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:23.298 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:23.298 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:23.298 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:23.298 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:22:23.298 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:22:23.300 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:22:23.317 +03:00 [INF] Groq API key configured for HttpClient
2025-09-06 04:22:23.317 +03:00 [INF] Converting natural language to SQL. User query: show me all the products
2025-09-06 04:22:23.318 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-06 04:22:23.318 +03:00 [DBG] Generated prompt with 6 messages
2025-09-06 04:22:23.327 +03:00 [DBG] Request payload prepared for LLM API
2025-09-06 04:22:24.253 +03:00 [INF] LLM API responded with status: "OK"
2025-09-06 04:22:24.257 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-06 04:22:24.258 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:22:24.259 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:24.259 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:22:24.259 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:24.259 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:24.259 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 969.0561ms
2025-09-06 04:22:36.259 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:22:36.259 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:22:36.259 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:22:36.259 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:36.259 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:36.259 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:22:36.259 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:36.259 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.2407ms
2025-09-06 04:22:36.260 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 162
2025-09-06 04:22:36.261 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:22:36.261 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:22:36.261 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:22:36.261 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:36.261 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:36.261 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:22:36.261 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:22:36.261 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000002D": started reading request body.
2025-09-06 04:22:36.261 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000002D": done reading request body.
2025-09-06 04:22:36.261 +03:00 [INF] Converting NL to SQL for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:36.261 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:22:36.262 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:22:36.262 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:36.262 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.262 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:36.262 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:36.262 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:36.262 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:36.262 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:36.262 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:36.262 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:36.262 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.262 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:36.262 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.262 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:36.262 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:36.262 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.262 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:36.262 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:36.262 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:36.262 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:36.262 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:36.263 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:36.263 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:36.263 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.263 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:36.263 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.263 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:36.263 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:36.263 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:36.263 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.263 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:36.263 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:36.263 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:36.263 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:36.263 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:36.263 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.263 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:36.263 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:36.263 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:36.264 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:36.264 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:22:36.264 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:22:36.264 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:22:36.265 +03:00 [INF] Groq API key configured for HttpClient
2025-09-06 04:22:36.265 +03:00 [INF] Converting natural language to SQL. User query: show me all the topics
2025-09-06 04:22:36.265 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-06 04:22:36.265 +03:00 [DBG] Generated prompt with 6 messages
2025-09-06 04:22:36.265 +03:00 [DBG] Request payload prepared for LLM API
2025-09-06 04:22:36.825 +03:00 [INF] LLM API responded with status: "OK"
2025-09-06 04:22:36.825 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-06 04:22:36.825 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:22:36.825 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:36.825 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:22:36.825 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:36.825 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:36.825 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 564.5373ms
2025-09-06 04:22:39.193 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - null null
2025-09-06 04:22:39.193 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:22:39.193 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:22:39.193 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:39.193 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:39.193 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:22:39.193 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:39.193 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 204 null null 0.1895ms
2025-09-06 04:22:39.194 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - application/json 203
2025-09-06 04:22:39.194 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:22:39.194 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:22:39.194 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:22:39.194 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:39.194 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:39.194 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:22:39.195 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:22:39.195 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000002F": started reading request body.
2025-09-06 04:22:39.195 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000002F": done reading request body.
2025-09-06 04:22:39.195 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:22:39.195 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:22:39.195 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:39.195 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:39.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:39.195 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:39.195 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:39.195 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:39.195 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:39.196 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:39.196 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:39.196 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.196 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:39.196 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.196 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:39.196 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:39.196 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:39.196 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.196 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:39.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:39.196 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:39.196 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:39.196 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:39.196 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.196 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:39.196 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.196 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:39.197 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:39.197 +03:00 [INF] Executing SQL for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", Mode="ReadOnly"
2025-09-06 04:22:39.197 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/LearningTopicDB (Mode="ReadOnly")
2025-09-06 04:22:39.197 +03:00 [DBG] SQL: SELECT * FROM Topics;
2025-09-06 04:22:39.197 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=LearningTopicDB)
2025-09-06 04:22:39.197 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:22:39.205 +03:00 [INF] Query execution finished in 8 ms, returned 2 rows
2025-09-06 04:22:39.206 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:39.206 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.206 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:39.206 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:39.206 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:39.206 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:39.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:39.206 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.206 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:39.206 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.206 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:39.221 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:39.222 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:39.223 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:22:39.228 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:39.231 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:22:39.231 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:22:39.231 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:22:39.231 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:22:39.239 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:39.239 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.239 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:39.239 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:39.239 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:39.239 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 306), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-06 04:22:39.242 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 306), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-06 04:22:39.242 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.242 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:39.242 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:39.242 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:39.242 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:39.242 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:22:39.244 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-06T01:22:39.2086276Z","$type":"QueryAddedEvent"}
2025-09-06 04:22:39.245 +03:00 [INF] Saved query to DB for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:39.245 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:22:39.245 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:39.245 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:22:39.245 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:39.245 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:39.245 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 200 null application/json; charset=utf-8 51.166ms
2025-09-06 04:22:40.248 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:22:40.248 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:22:40.248 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:22:40.248 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:22:40.248 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:40.248 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:40.248 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:22:40.249 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:22:40.249 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:22:40.249 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:22:40.249 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:40.249 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:40.249 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:40.249 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:40.249 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:40.249 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:40.249 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:40.250 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:40.250 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:40.250 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:40.250 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:40.250 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:40.250 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:40.250 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:40.250 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:40.250 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:40.250 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:40.250 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:40.250 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:40.250 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:40.250 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:40.250 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:40.250 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:22:40.250 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:40.250 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:40.250 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:40.250 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:40.251 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:22:40.251 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:22:40.251 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:40.251 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:22:40.251 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:40.251 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:40.251 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 2.7803ms
2025-09-06 04:22:46.381 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:22:46.381 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:46.381 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:22:46.381 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:46.381 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:46.381 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:22:46.381 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:46.381 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.3207ms
2025-09-06 04:22:46.382 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 81
2025-09-06 04:22:46.382 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:46.382 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:22:46.382 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:46.382 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:46.382 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:46.382 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:46.383 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:22:46.383 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000032": started reading request body.
2025-09-06 04:22:46.383 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000032": done reading request body.
2025-09-06 04:22:46.383 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:22:46.383 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:22:46.383 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:46.383 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:46.383 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:46.383 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:46.383 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:46.383 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:46.383 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:22:46.383 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:46.384 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:46.384 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:46.384 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:22:46.384 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:46.384 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:46.384 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:46.384 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:22:46.384 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:22:46.384 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:22:46.384 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:22:46.384 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:22:46.384 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:46.384 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:46.384 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:22:46.384 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:46.384 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:22:46.384 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:22:46.384 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:22:46.387 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:46.387 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:22:46.387 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:22:46.387 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:46.387 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:22:46.387 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:22:46.387 +03:00 [INF] AI mode changed to "Basic" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:22:46.3842269Z"
2025-09-06 04:22:46.388 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:22:46.388 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:46.388 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:22:46.388 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:22:46.388 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:22:46.388 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 5.6367ms
2025-09-06 04:22:46.957 +03:00 [DBG] Connection id "0HNFCSD1LL879" accepted.
2025-09-06 04:22:46.957 +03:00 [DBG] Connection id "0HNFCSD1LL879" started.
2025-09-06 04:22:46.957 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:22:46.957 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:22:46.957 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:22:46.957 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:22:46.957 +03:00 [INF] Api health check sent.
2025-09-06 04:22:46.957 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:22:46.957 +03:00 [DBG] Connection id "0HNFCSD1LL879" completed keep alive response.
2025-09-06 04:22:46.957 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2285ms
2025-09-06 04:22:50.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:22:50.334 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:22:50.334 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:22:50.334 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:22:50.334 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:22:50.334 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:22:50.334 +03:00 [INF] Api health check sent.
2025-09-06 04:22:50.334 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:22:50.334 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:22:50.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3121ms
2025-09-06 04:22:50.960 +03:00 [DBG] Connection id "0HNFCSD1LL879" received FIN.
2025-09-06 04:22:50.960 +03:00 [DBG] Connection id "0HNFCSD1LL879" disconnecting.
2025-09-06 04:22:50.960 +03:00 [DBG] Connection id "0HNFCSD1LL879" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:22:50.961 +03:00 [DBG] Connection id "0HNFCSD1LL879" stopped.
2025-09-06 04:23:03.164 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client ''
2025-09-06 04:23:13.165 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:23:13.167 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0121ms - processed: 0 items - remaining: 1 items
2025-09-06 04:23:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:23:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:23:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:23:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:23:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:23:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:23:20.333 +03:00 [INF] Api health check sent.
2025-09-06 04:23:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:23:20.333 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:23:20.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3296ms
2025-09-06 04:23:23.168 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:23:23.168 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-09-06 04:23:32.285 +03:00 [DBG] Connection id "0HNFCSD1LL875" disconnecting.
2025-09-06 04:23:32.285 +03:00 [DBG] Connection id "0HNFCSD1LL875" stopped.
2025-09-06 04:23:32.286 +03:00 [DBG] Connection id "0HNFCSD1LL875" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:23:33.169 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:23:33.169 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-09-06 04:23:43.170 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:23:43.170 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-09-06 04:23:50.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:23:50.334 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:23:50.334 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:23:50.334 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:23:50.334 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:23:50.334 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:23:50.334 +03:00 [INF] Api health check sent.
2025-09-06 04:23:50.334 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:23:50.334 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:23:50.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2921ms
2025-09-06 04:23:53.169 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:23:53.169 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-09-06 04:24:03.169 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:24:03.170 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-09-06 04:24:13.169 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:24:13.169 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-09-06 04:24:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:24:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:24:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:24:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:24:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:24:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:24:20.333 +03:00 [INF] Api health check sent.
2025-09-06 04:24:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:24:20.333 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:24:20.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3522ms
2025-09-06 04:24:23.169 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:24:23.169 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-09-06 04:24:33.169 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:24:33.169 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-09-06 04:24:38.670 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:24:38.670 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:24:38.670 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:24:38.670 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.670 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:24:38.670 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:24:38.670 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.670 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:24:38.671 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:24:38.671 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:24:38.671 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:24:38.671 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:38.671 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:24:38.671 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:24:38.671 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:24:38.671 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:24:38.671 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:24:38.671 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:24:38.671 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:24:38.671 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:24:38.671 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:24:38.672 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:38.672 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:24:38.672 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:38.672 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:24:38.672 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:24:38.672 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:24:38.672 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:38.672 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:24:38.672 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:24:38.672 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:24:38.672 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:24:38.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:24:38.672 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:38.672 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:24:38.672 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:38.672 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:24:38.673 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:24:38.673 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:24:38.673 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:24:38.674 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:24:38.674 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.674 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:24:38.674 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:24:38.674 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:24:38.674 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:24:38.674 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 4.5573ms
2025-09-06 04:24:38.675 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:24:38.675 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:24:38.675 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:24:38.675 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.675 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:24:38.675 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:24:38.675 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.676 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:24:38.676 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.676 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:24:38.676 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:24:38.676 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 0.7512ms
2025-09-06 04:24:38.677 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:24:38.677 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:24:38.677 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:24:38.677 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.677 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:24:38.677 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:24:38.677 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.678 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:24:38.678 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.678 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:24:38.678 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:24:38.678 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 1.1275ms
2025-09-06 04:24:38.679 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:24:38.680 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:24:38.680 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:24:38.680 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.680 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:24:38.680 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:24:38.680 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.680 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:24:38.680 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:24:38.680 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:24:38.680 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:24:38.681 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 1.0583ms
2025-09-06 04:24:43.170 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:24:43.170 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-09-06 04:24:48.383 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:24:48.384 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:24:48.384 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:24:48.384 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:24:48.384 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:24:48.384 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:24:48.384 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:24:48.384 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.3371ms
2025-09-06 04:24:48.385 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 136
2025-09-06 04:24:48.385 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:24:48.385 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:24:48.385 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:24:48.385 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:24:48.385 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:24:48.385 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:24:48.385 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:24:48.385 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000003C": started reading request body.
2025-09-06 04:24:48.385 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000003C": done reading request body.
2025-09-06 04:24:48.386 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:24:48.386 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:24:48.386 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:24:48.386 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:48.386 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:24:48.386 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:24:48.386 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:24:48.386 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:24:48.386 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:24:48.386 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:24:48.386 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:24:48.386 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:48.386 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:24:48.386 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:48.386 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:24:48.387 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:24:48.387 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:24:48.387 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:24:48.387 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:24:48.387 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:24:48.387 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:24:48.387 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:24:48.387 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:48.387 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:24:48.387 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:24:48.387 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:24:48.387 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:24:48.387 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:24:48.390 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:48.390 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:24:48.390 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:24:48.390 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:24:48.390 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:24:48.390 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:24:48.390 +03:00 [INF] AI mode changed to "Groq" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:24:48.3869797Z"
2025-09-06 04:24:48.390 +03:00 [INF] API key changed for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:24:48.3869824Z"
2025-09-06 04:24:48.391 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:24:48.391 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:24:48.391 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:24:48.391 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:24:48.391 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:24:48.391 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 6.1553ms
2025-09-06 04:24:49.142 +03:00 [DBG] Connection id "0HNFCSD1LL87A" accepted.
2025-09-06 04:24:49.142 +03:00 [DBG] Connection id "0HNFCSD1LL87A" started.
2025-09-06 04:24:49.143 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:24:49.143 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:24:49.143 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:24:49.143 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:24:49.143 +03:00 [INF] Api health check sent.
2025-09-06 04:24:49.143 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:24:49.143 +03:00 [DBG] Connection id "0HNFCSD1LL87A" completed keep alive response.
2025-09-06 04:24:49.143 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.451ms
2025-09-06 04:24:50.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:24:50.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:24:50.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:24:50.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:24:50.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:24:50.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:24:50.333 +03:00 [INF] Api health check sent.
2025-09-06 04:24:50.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:24:50.333 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:24:50.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2982ms
2025-09-06 04:24:53.145 +03:00 [DBG] Connection id "0HNFCSD1LL87A" received FIN.
2025-09-06 04:24:53.145 +03:00 [DBG] Connection id "0HNFCSD1LL87A" disconnecting.
2025-09-06 04:24:53.145 +03:00 [DBG] Connection id "0HNFCSD1LL87A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:24:53.147 +03:00 [DBG] Connection id "0HNFCSD1LL87A" stopped.
2025-09-06 04:24:53.170 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:24:53.170 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-09-06 04:25:03.171 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:25:03.171 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2025-09-06 04:25:13.171 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:25:13.171 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-09-06 04:25:15.520 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:25:15.520 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:25:15.520 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:25:15.520 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:15.520 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:15.520 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:25:15.521 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:15.521 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.2213ms
2025-09-06 04:25:15.521 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 81
2025-09-06 04:25:15.522 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:25:15.522 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:25:15.522 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:25:15.522 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:15.522 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:15.522 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:25:15.522 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:25:15.522 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000003F": started reading request body.
2025-09-06 04:25:15.522 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000003F": done reading request body.
2025-09-06 04:25:15.523 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:25:15.523 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:25:15.523 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:25:15.523 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:15.523 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:25:15.523 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:25:15.523 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:25:15.523 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:25:15.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:25:15.523 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:25:15.523 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:25:15.524 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:15.524 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:25:15.524 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:15.524 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:25:15.524 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:25:15.524 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:25:15.524 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:25:15.524 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:25:15.524 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:25:15.524 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:25:15.524 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:25:15.524 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:15.524 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:25:15.524 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:25:15.524 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:25:15.524 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:25:15.525 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:25:15.527 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:15.527 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:25:15.527 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:15.527 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:25:15.527 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:25:15.527 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:25:15.527 +03:00 [INF] AI mode changed to "Basic" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:25:15.5241721Z"
2025-09-06 04:25:15.527 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:25:15.527 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:15.527 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:25:15.528 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:25:15.528 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:25:15.528 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 6.096ms
2025-09-06 04:25:16.164 +03:00 [DBG] Connection id "0HNFCSD1LL87B" accepted.
2025-09-06 04:25:16.164 +03:00 [DBG] Connection id "0HNFCSD1LL87B" started.
2025-09-06 04:25:16.164 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:25:16.164 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:25:16.164 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:25:16.164 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:25:16.164 +03:00 [INF] Api health check sent.
2025-09-06 04:25:16.164 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:25:16.164 +03:00 [DBG] Connection id "0HNFCSD1LL87B" completed keep alive response.
2025-09-06 04:25:16.164 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2615ms
2025-09-06 04:25:20.166 +03:00 [DBG] Connection id "0HNFCSD1LL87B" received FIN.
2025-09-06 04:25:20.166 +03:00 [DBG] Connection id "0HNFCSD1LL87B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:25:20.166 +03:00 [DBG] Connection id "0HNFCSD1LL87B" disconnecting.
2025-09-06 04:25:20.166 +03:00 [DBG] Connection id "0HNFCSD1LL87B" stopped.
2025-09-06 04:25:20.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:25:20.332 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:25:20.332 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:25:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:25:20.333 +03:00 [INF] Api health check sent.
2025-09-06 04:25:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:25:20.333 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:20.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3059ms
2025-09-06 04:25:23.171 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:25:23.171 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-09-06 04:25:24.036 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:25:24.036 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:25:24.036 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:25:24.036 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:24.036 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:24.036 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:25:24.036 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:24.036 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.2892ms
2025-09-06 04:25:24.037 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 81
2025-09-06 04:25:24.037 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:25:24.037 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:25:24.037 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:25:24.037 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:24.037 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:24.037 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:25:24.038 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:25:24.038 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000042": started reading request body.
2025-09-06 04:25:24.038 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:00000042": done reading request body.
2025-09-06 04:25:24.038 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:25:24.038 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:25:24.038 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:25:24.039 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:24.039 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:25:24.039 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:25:24.039 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:25:24.039 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:25:24.039 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:25:24.039 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:25:24.039 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:25:24.039 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:24.039 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:25:24.039 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:24.039 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:25:24.039 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:25:24.039 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:25:24.039 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:25:24.039 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:25:24.039 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:25:24.039 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:25:24.040 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:25:24.040 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:24.040 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:25:24.040 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:25:24.040 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:25:24.040 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:25:24.040 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:25:24.043 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:24.043 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:25:24.043 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:25:24.043 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:25:24.043 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:25:24.043 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:25:24.043 +03:00 [INF] AI mode changed to "Local" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:25:24.0397663Z"
2025-09-06 04:25:24.043 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:25:24.043 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:24.043 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:25:24.043 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:25:24.043 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:25:24.044 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 6.4406ms
2025-09-06 04:25:24.301 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:25:24.301 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:25:24.301 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:24.301 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:24.301 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:24.301 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:24.302 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:25:24.302 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:25:24.304 +03:00 [INF] Received HTTP response headers after 2.2383ms - 200
2025-09-06 04:25:24.304 +03:00 [INF] End processing HTTP request after 2.4272ms - 200
2025-09-06 04:25:24.304 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:24.304 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:24.304 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 3.555ms
2025-09-06 04:25:24.310 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:25:24.310 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:25:24.310 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:25:24.311 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:25:24.311 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:24.311 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:24.311 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:24.311 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:24.311 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:24.311 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:24.311 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.8998ms
2025-09-06 04:25:24.674 +03:00 [DBG] Connection id "0HNFCSD1LL87C" accepted.
2025-09-06 04:25:24.674 +03:00 [DBG] Connection id "0HNFCSD1LL87C" started.
2025-09-06 04:25:24.674 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:25:24.674 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:25:24.674 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:25:24.674 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:25:24.674 +03:00 [INF] Api health check sent.
2025-09-06 04:25:24.674 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:25:24.674 +03:00 [DBG] Connection id "0HNFCSD1LL87C" completed keep alive response.
2025-09-06 04:25:24.674 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.398ms
2025-09-06 04:25:25.678 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:25:25.678 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:25:25.678 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:25:25.678 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:25.678 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:25.678 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:25:25.678 +03:00 [INF] Api health check sent.
2025-09-06 04:25:25.678 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:25:25.678 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:25.678 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3599ms
2025-09-06 04:25:25.680 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:25:25.681 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:25:25.681 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:25.681 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:25.681 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:25.681 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:25.681 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:25:25.681 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:25:25.681 +03:00 [INF] Received HTTP response headers after 0.6043ms - 200
2025-09-06 04:25:25.682 +03:00 [INF] End processing HTTP request after 0.7537ms - 200
2025-09-06 04:25:25.682 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:25.682 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:25.682 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 1.2062ms
2025-09-06 04:25:25.684 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:25:25.684 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:25:25.684 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:25:25.684 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:25:25.684 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:25.684 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:25.684 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:25.684 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:25.685 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:25.685 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:25.685 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.6472ms
2025-09-06 04:25:28.676 +03:00 [DBG] Connection id "0HNFCSD1LL87C" received FIN.
2025-09-06 04:25:28.676 +03:00 [DBG] Connection id "0HNFCSD1LL87C" disconnecting.
2025-09-06 04:25:28.676 +03:00 [DBG] Connection id "0HNFCSD1LL87C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:25:28.677 +03:00 [DBG] Connection id "0HNFCSD1LL87C" stopped.
2025-09-06 04:25:33.172 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:25:33.172 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-09-06 04:25:43.172 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:25:43.172 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-09-06 04:25:50.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:25:50.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:25:50.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:25:50.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:50.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:50.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:25:50.334 +03:00 [INF] Api health check sent.
2025-09-06 04:25:50.334 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:25:50.334 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:50.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.336ms
2025-09-06 04:25:53.172 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:25:53.172 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-09-06 04:25:58.922 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:25:58.922 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:25:58.922 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:25:58.922 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:58.922 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:58.922 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:25:58.922 +03:00 [INF] Api health check sent.
2025-09-06 04:25:58.922 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:25:58.922 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:58.923 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2755ms
2025-09-06 04:25:58.923 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:25:58.924 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:25:58.924 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:25:58.924 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:58.924 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:58.924 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:25:58.924 +03:00 [INF] Api health check sent.
2025-09-06 04:25:58.924 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:25:58.924 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:58.924 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2905ms
2025-09-06 04:25:58.925 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:25:58.925 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:25:58.925 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:58.925 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:58.925 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:58.925 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:58.925 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:25:58.926 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:25:58.926 +03:00 [INF] Received HTTP response headers after 0.4845ms - 200
2025-09-06 04:25:58.926 +03:00 [INF] End processing HTTP request after 0.6842ms - 200
2025-09-06 04:25:58.926 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:58.926 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:58.926 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 1.1992ms
2025-09-06 04:25:58.927 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:25:58.927 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:25:58.927 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:58.927 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:58.927 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:58.927 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:58.927 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:25:58.927 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:25:58.932 +03:00 [DBG] Connection id "0HNFCSD1LL87D" accepted.
2025-09-06 04:25:58.932 +03:00 [DBG] Connection id "0HNFCSD1LL87D" started.
2025-09-06 04:25:58.932 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:25:58.932 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:25:58.932 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:25:58.932 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:25:58.932 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:58.932 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:58.932 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:58.932 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:58.932 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:58.932 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:25:58.932 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3022ms
2025-09-06 04:25:58.947 +03:00 [INF] Received HTTP response headers after 19.2865ms - 200
2025-09-06 04:25:58.947 +03:00 [INF] End processing HTTP request after 19.4623ms - 200
2025-09-06 04:25:58.947 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:25:58.947 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:58.947 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 19.9471ms
2025-09-06 04:25:59.003 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:25:59.004 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:25:59.004 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:25:59.004 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:25:59.004 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:59.004 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:25:59.004 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:25:59.004 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:59.004 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:25:59.004 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:25:59.004 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3526ms
2025-09-06 04:26:03.173 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:26:03.174 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-09-06 04:26:03.936 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:26:03.936 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:26:03.936 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:26:03.936 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:26:03.936 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:26:03.936 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:26:03.936 +03:00 [DBG] Connection id "0HNFCSD1LL873" completed keep alive response.
2025-09-06 04:26:03.936 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.3563ms
2025-09-06 04:26:03.937 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 171
2025-09-06 04:26:03.937 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:26:03.937 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:26:03.937 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:26:03.937 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:26:03.937 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:26:03.937 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:26:03.937 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:26:03.937 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000004F": started reading request body.
2025-09-06 04:26:03.937 +03:00 [DBG] Connection id "0HNFCSD1LL873", Request id "0HNFCSD1LL873:0000004F": done reading request body.
2025-09-06 04:26:03.938 +03:00 [INF] Converting NL to SQL for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:26:03.938 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:26:03.938 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:26:03.938 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:26:03.938 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.938 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:26:03.938 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:26:03.938 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:26:03.938 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:26:03.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:26:03.938 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:26:03.938 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:26:03.938 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.938 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:26:03.938 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.938 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:26:03.938 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:26:03.938 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.938 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:26:03.938 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:26:03.938 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:26:03.938 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:26:03.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:26:03.939 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:26:03.939 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:26:03.939 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:26:03.939 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.939 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:26:03.939 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.939 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:26:03.939 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:26:03.939 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:26:03.939 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.939 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:26:03.939 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:26:03.939 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:26:03.939 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:26:03.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:26:03.940 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.940 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:26:03.940 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:26:03.940 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:26:03.940 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:26:03.940 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:26:03.940 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:26:03.941 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:26:03.941 +03:00 [INF] Local LLM is configured
2025-09-06 04:26:03.941 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-06 04:26:03.941 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-06 04:26:03.941 +03:00 [DBG] Generated prompt with 6 messages
2025-09-06 04:26:03.941 +03:00 [DBG] Request payload prepared for LLM API
2025-09-06 04:26:13.173 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:26:13.173 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0695ms - processed: 1 items - remaining: 0 items
2025-09-06 04:26:20.334 +03:00 [DBG] Connection id "0HNFCSD1LL87E" accepted.
2025-09-06 04:26:20.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:26:20.334 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:26:20.334 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:26:20.334 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:26:20.334 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:26:20.334 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:26:20.334 +03:00 [DBG] Connection id "0HNFCSD1LL87E" started.
2025-09-06 04:26:20.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:26:20.334 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:26:20.334 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:26:20.334 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:26:20.334 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:26:20.334 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:26:20.334 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:26:20.334 +03:00 [INF] Api health check sent.
2025-09-06 04:26:20.334 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:26:20.334 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:26:20.334 +03:00 [DBG] Connection id "0HNFCSD1LL87E" completed keep alive response.
2025-09-06 04:26:20.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2391ms
2025-09-06 04:26:20.335 +03:00 [INF] Received HTTP response headers after 0.5404ms - 200
2025-09-06 04:26:20.335 +03:00 [INF] End processing HTTP request after 0.9167ms - 200
2025-09-06 04:26:20.335 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:26:20.335 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:26:20.335 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 1.4077ms
2025-09-06 04:26:20.337 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:26:20.337 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:26:20.337 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:26:20.337 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:26:20.337 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:26:20.337 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:26:20.337 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:26:20.338 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:26:20.338 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:26:20.338 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:26:20.338 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.279ms
2025-09-06 04:26:33.937 +03:00 [DBG] Connection id "0HNFCSD1LL873" received FIN.
2025-09-06 04:26:33.937 +03:00 [DBG] Connection id "0HNFCSD1LL873" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:26:33.937 +03:00 [DBG] Connection id "0HNFCSD1LL873" disconnecting.
2025-09-06 04:26:33.941 +03:00 [INF] LLM API request was cancelled
2025-09-06 04:26:33.942 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:26:33.942 +03:00 [DBG] The request was aborted by the client.
2025-09-06 04:26:33.943 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:26:33.943 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:26:33.943 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:26:33.943 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 499 null null 30006.0966ms
2025-09-06 04:26:33.943 +03:00 [DBG] Connection id "0HNFCSD1LL873" stopped.
2025-09-06 04:26:50.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:26:50.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:26:50.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:26:50.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:26:50.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:26:50.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:26:50.333 +03:00 [INF] Api health check sent.
2025-09-06 04:26:50.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:26:50.333 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:26:50.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3143ms
2025-09-06 04:27:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:27:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:27:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:27:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:27:20.334 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:27:20.334 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:27:20.334 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:27:20.334 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:27:20.334 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:27:20.334 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:27:20.334 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:27:20.334 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:27:20.334 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:27:20.334 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:27:20.334 +03:00 [INF] Api health check sent.
2025-09-06 04:27:20.334 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:27:20.334 +03:00 [DBG] Connection id "0HNFCSD1LL87E" completed keep alive response.
2025-09-06 04:27:20.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.523ms
2025-09-06 04:27:20.334 +03:00 [INF] Received HTTP response headers after 0.4413ms - 200
2025-09-06 04:27:20.334 +03:00 [INF] End processing HTTP request after 0.6386ms - 200
2025-09-06 04:27:20.334 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:27:20.334 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:27:20.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 1.0998ms
2025-09-06 04:27:20.378 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:27:20.378 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:27:20.378 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:27:20.378 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:27:20.378 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:27:20.378 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:27:20.378 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:27:20.378 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:27:20.378 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:27:20.378 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:27:20.378 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3466ms
2025-09-06 04:27:24.302 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client ''
2025-09-06 04:27:34.303 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:27:34.303 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-09-06 04:27:44.302 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:27:44.302 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-09-06 04:27:50.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:27:50.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:27:50.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:27:50.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:27:50.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:27:50.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:27:50.333 +03:00 [INF] Api health check sent.
2025-09-06 04:27:50.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:27:50.333 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:27:50.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2509ms
2025-09-06 04:27:54.303 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:27:54.303 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-09-06 04:28:04.303 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:28:04.303 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-09-06 04:28:14.304 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:28:14.304 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-09-06 04:28:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:28:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:28:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:28:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:28:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:28:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:28:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:28:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:28:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:28:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:28:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:28:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:28:20.333 +03:00 [INF] Api health check sent.
2025-09-06 04:28:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:28:20.333 +03:00 [DBG] Connection id "0HNFCSD1LL87E" completed keep alive response.
2025-09-06 04:28:20.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5468ms
2025-09-06 04:28:20.333 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:28:20.334 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:28:20.366 +03:00 [INF] Received HTTP response headers after 32.7153ms - 200
2025-09-06 04:28:20.366 +03:00 [INF] End processing HTTP request after 32.8607ms - 200
2025-09-06 04:28:20.366 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:28:20.367 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:28:20.367 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 33.7281ms
2025-09-06 04:28:20.380 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:28:20.380 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:28:20.380 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:28:20.380 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:28:20.380 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:28:20.380 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:28:20.380 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:28:20.380 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:28:20.380 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:28:20.380 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:28:20.380 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.5881ms
2025-09-06 04:28:24.305 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:28:24.305 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-09-06 04:28:34.306 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:28:34.306 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-09-06 04:28:44.306 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:28:44.306 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-09-06 04:28:50.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:28:50.334 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:28:50.334 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:28:50.334 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:28:50.334 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:28:50.334 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:28:50.334 +03:00 [INF] Api health check sent.
2025-09-06 04:28:50.334 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:28:50.334 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:28:50.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2454ms
2025-09-06 04:28:54.307 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:28:54.307 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-09-06 04:29:04.308 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:29:04.308 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-09-06 04:29:14.309 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:29:14.309 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-09-06 04:29:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:29:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:29:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:29:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:29:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:29:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:29:20.333 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:29:20.333 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:29:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:29:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:29:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:29:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:29:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:29:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:29:20.333 +03:00 [INF] Api health check sent.
2025-09-06 04:29:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:29:20.333 +03:00 [DBG] Connection id "0HNFCSD1LL87E" completed keep alive response.
2025-09-06 04:29:20.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2082ms
2025-09-06 04:29:20.333 +03:00 [INF] Received HTTP response headers after 0.505ms - 200
2025-09-06 04:29:20.333 +03:00 [INF] End processing HTTP request after 0.6144ms - 200
2025-09-06 04:29:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:29:20.334 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:29:20.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 0.952ms
2025-09-06 04:29:20.336 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:29:20.336 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:29:20.336 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:29:20.336 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:29:20.336 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:29:20.336 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:29:20.336 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:29:20.336 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:29:20.336 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:29:20.336 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:29:20.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.2646ms
2025-09-06 04:29:24.310 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:29:24.310 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-09-06 04:29:34.311 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:29:34.312 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-09-06 04:29:39.326 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:29:39.326 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:29:39.326 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:29:39.326 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:29:39.326 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:29:39.326 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:29:39.326 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:29:39.326 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.1684ms
2025-09-06 04:29:39.327 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 171
2025-09-06 04:29:39.327 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:29:39.327 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:29:39.327 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:29:39.327 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:29:39.327 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:29:39.327 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:29:39.327 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:29:39.327 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:0000000E": started reading request body.
2025-09-06 04:29:39.327 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:0000000E": done reading request body.
2025-09-06 04:29:39.328 +03:00 [INF] Converting NL to SQL for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:29:39.328 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:29:39.328 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:29:39.328 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:29:39.328 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.328 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:29:39.328 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:29:39.328 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:29:39.328 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:29:39.328 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:29:39.328 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:29:39.328 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:29:39.328 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.329 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:29:39.329 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.329 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:29:39.329 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:29:39.329 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.329 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:29:39.329 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:29:39.329 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:29:39.329 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:29:39.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:29:39.329 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:29:39.329 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:29:39.329 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:29:39.329 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.329 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:29:39.329 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.329 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:29:39.329 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:29:39.330 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:29:39.330 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.330 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:29:39.330 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:29:39.330 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:29:39.330 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:29:39.330 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:29:39.330 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.330 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:29:39.330 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:29:39.330 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:29:39.330 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:29:39.330 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:29:39.330 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:29:39.331 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:29:39.332 +03:00 [INF] Local LLM is configured
2025-09-06 04:29:39.332 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-06 04:29:39.332 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-06 04:29:39.332 +03:00 [DBG] Generated prompt with 6 messages
2025-09-06 04:29:39.332 +03:00 [DBG] Request payload prepared for LLM API
2025-09-06 04:29:44.312 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:29:44.312 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-09-06 04:29:50.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:29:50.332 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:29:50.332 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:29:50.332 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:29:50.332 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:29:50.332 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:29:50.332 +03:00 [INF] Api health check sent.
2025-09-06 04:29:50.332 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:29:50.332 +03:00 [DBG] Connection id "0HNFCSD1LL87E" completed keep alive response.
2025-09-06 04:29:50.332 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2627ms
2025-09-06 04:29:54.312 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:29:54.312 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-09-06 04:30:04.312 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:30:04.312 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-09-06 04:30:08.810 +03:00 [INF] LLM API responded with status: "OK"
2025-09-06 04:30:08.912 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-06 04:30:08.912 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:08.912 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:08.912 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:08.912 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:30:08.912 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:30:08.912 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 29585.1105ms
2025-09-06 04:30:14.313 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-09-06 04:30:14.313 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-09-06 04:30:16.314 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:30:16.314 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:16.314 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:30:16.314 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:16.314 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:16.314 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:30:16.314 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:16.314 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.2186ms
2025-09-06 04:30:16.315 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 171
2025-09-06 04:30:16.315 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:16.315 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:16.315 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:16.315 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:16.315 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:16.315 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:16.315 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:30:16.315 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000010": started reading request body.
2025-09-06 04:30:16.315 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000010": done reading request body.
2025-09-06 04:30:16.315 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:16.315 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:16.315 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:16.315 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 0.8161ms
2025-09-06 04:30:20.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:30:20.332 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:30:20.332 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:30:20.332 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:20.332 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:20.332 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:30:20.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:30:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:30:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:30:20.333 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:30:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:20.333 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:30:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:30:20.333 +03:00 [INF] Api health check sent.
2025-09-06 04:30:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:30:20.333 +03:00 [DBG] Connection id "0HNFCSD1LL87E" completed keep alive response.
2025-09-06 04:30:20.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.235ms
2025-09-06 04:30:20.333 +03:00 [INF] Received HTTP response headers after 0.4079ms - 200
2025-09-06 04:30:20.333 +03:00 [INF] End processing HTTP request after 0.5138ms - 200
2025-09-06 04:30:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:30:20.333 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:20.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 0.9736ms
2025-09-06 04:30:20.333 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client ''
2025-09-06 04:30:20.336 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:30:20.336 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:30:20.336 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:30:20.336 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:30:20.336 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:30:20.336 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:20.336 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:20.336 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:30:20.336 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:30:20.336 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:20.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.2461ms
2025-09-06 04:30:23.428 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:30:23.428 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:23.428 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:30:23.428 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:23.428 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:23.428 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:30:23.428 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:23.428 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.1965ms
2025-09-06 04:30:23.429 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 171
2025-09-06 04:30:23.429 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:23.429 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:23.429 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:23.429 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:23.429 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:23.429 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:23.429 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:30:23.429 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000014": started reading request body.
2025-09-06 04:30:23.430 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000014": done reading request body.
2025-09-06 04:30:23.430 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:23.430 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:23.430 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:23.430 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 0.9364ms
2025-09-06 04:30:24.313 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:30:24.314 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-09-06 04:30:26.024 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 171
2025-09-06 04:30:26.024 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:26.024 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:26.024 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:26.024 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:26.024 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:26.024 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:26.025 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:30:26.025 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000015": started reading request body.
2025-09-06 04:30:26.025 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000015": done reading request body.
2025-09-06 04:30:26.025 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:26.025 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:26.025 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:26.025 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 1.0379ms
2025-09-06 04:30:34.313 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:30:34.313 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-09-06 04:30:44.313 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:30:44.313 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-09-06 04:30:46.558 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:30:46.558 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:46.558 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:30:46.558 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:46.559 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:46.559 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:30:46.559 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:46.559 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.2764ms
2025-09-06 04:30:46.559 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 171
2025-09-06 04:30:46.559 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:46.560 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:30:46.560 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:46.560 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:46.560 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:46.560 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:46.560 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:30:46.560 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000017": started reading request body.
2025-09-06 04:30:46.560 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000017": done reading request body.
2025-09-06 04:30:46.560 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:30:46.560 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:46.560 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:46.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 0.8681ms
2025-09-06 04:30:50.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:30:50.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:30:50.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:30:50.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:50.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:50.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:30:50.334 +03:00 [INF] Api health check sent.
2025-09-06 04:30:50.334 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:30:50.334 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:50.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2446ms
2025-09-06 04:30:54.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:30:54.314 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-09-06 04:30:59.079 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:30:59.079 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:30:59.079 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:30:59.079 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.079 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:59.079 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:59.079 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.080 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:30:59.080 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:30:59.080 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:30:59.080 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:30:59.080 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:30:59.080 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:30:59.080 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:30:59.080 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:30:59.080 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:30:59.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:30:59.081 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:30:59.081 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:30:59.081 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:30:59.081 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:30:59.081 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:30:59.081 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:30:59.081 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:30:59.081 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:30:59.081 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:30:59.082 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:30:59.082 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:30:59.082 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:30:59.082 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:30:59.082 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:30:59.082 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:30:59.082 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:30:59.082 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:30:59.082 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:30:59.082 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:30:59.082 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:30:59.083 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:30:59.083 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:30:59.083 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:30:59.084 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:30:59.084 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.084 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:59.084 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:59.084 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:30:59.084 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:30:59.084 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 5.5347ms
2025-09-06 04:30:59.085 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:30:59.085 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:30:59.085 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:30:59.085 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.086 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:59.086 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:59.086 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.086 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:30:59.086 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.086 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:59.086 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:59.086 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 0.9117ms
2025-09-06 04:30:59.090 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:30:59.090 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:30:59.090 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:30:59.090 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.090 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:59.090 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:59.090 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.092 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:30:59.092 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.092 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:59.092 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:59.092 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 2.1715ms
2025-09-06 04:30:59.093 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - null null
2025-09-06 04:30:59.094 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:30:59.094 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema'
2025-09-06 04:30:59.094 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.094 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:30:59.094 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:30:59.094 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.094 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:30:59.094 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-06 04:30:59.094 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:30:59.094 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:30:59.094 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/schema - 200 null application/json; charset=utf-8 1.0406ms
2025-09-06 04:31:04.315 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:31:04.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-09-06 04:31:14.315 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:31:14.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-09-06 04:31:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:31:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:31:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:31:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:31:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:31:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:31:20.333 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:31:20.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:31:20.333 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:31:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:31:20.333 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:31:20.333 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:31:20.333 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:31:20.333 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:31:20.333 +03:00 [INF] Api health check sent.
2025-09-06 04:31:20.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:31:20.333 +03:00 [DBG] Connection id "0HNFCSD1LL87E" completed keep alive response.
2025-09-06 04:31:20.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3931ms
2025-09-06 04:31:20.335 +03:00 [INF] Received HTTP response headers after 2.0287ms - 200
2025-09-06 04:31:20.335 +03:00 [INF] End processing HTTP request after 2.2201ms - 200
2025-09-06 04:31:20.335 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:31:20.335 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:31:20.335 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 2.6803ms
2025-09-06 04:31:20.425 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:31:20.425 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:31:20.425 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:31:20.425 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:31:20.425 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:31:20.425 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:31:20.425 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:31:20.425 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:31:20.425 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:31:20.425 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:31:20.425 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.2799ms
2025-09-06 04:31:24.316 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:31:24.316 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.005ms - processed: 0 items - remaining: 2 items
2025-09-06 04:31:32.367 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:31:32.367 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:31:32.367 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:31:32.367 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:31:32.367 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:31:32.367 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:31:32.367 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:31:32.367 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.2136ms
2025-09-06 04:31:32.368 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 136
2025-09-06 04:31:32.368 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:31:32.368 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:31:32.368 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:31:32.368 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:31:32.368 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:31:32.368 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:31:32.369 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:31:32.369 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000020": started reading request body.
2025-09-06 04:31:32.369 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000020": done reading request body.
2025-09-06 04:31:32.370 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:31:32.370 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:31:32.370 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:31:32.370 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:31:32.370 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:31:32.370 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:31:32.370 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:31:32.370 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:31:32.370 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:31:32.370 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:31:32.370 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:31:32.370 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:31:32.371 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:31:32.371 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:31:32.371 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:31:32.371 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:31:32.371 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:31:32.371 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:31:32.371 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:31:32.371 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:31:32.371 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:31:32.371 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:31:32.371 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:31:32.371 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:31:32.371 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:31:32.372 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:31:32.372 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:31:32.372 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:31:32.375 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:31:32.375 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-06 04:31:32.375 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:31:32.375 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:31:32.375 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:31:32.375 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:31:32.375 +03:00 [INF] AI mode changed to "Groq" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:31:32.3711168Z"
2025-09-06 04:31:32.376 +03:00 [INF] API key changed for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:31:32.3711196Z"
2025-09-06 04:31:32.376 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:31:32.376 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:31:32.376 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:31:32.376 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:31:32.376 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:31:32.376 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 7.626ms
2025-09-06 04:31:33.050 +03:00 [DBG] Connection id "0HNFCSD1LL87F" accepted.
2025-09-06 04:31:33.050 +03:00 [DBG] Connection id "0HNFCSD1LL87F" started.
2025-09-06 04:31:33.050 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:31:33.050 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:31:33.050 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:31:33.050 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:31:33.050 +03:00 [INF] Api health check sent.
2025-09-06 04:31:33.050 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:31:33.050 +03:00 [DBG] Connection id "0HNFCSD1LL87F" completed keep alive response.
2025-09-06 04:31:33.050 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2484ms
2025-09-06 04:31:34.317 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:31:34.317 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-09-06 04:31:36.796 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:31:36.796 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:31:36.796 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:31:36.796 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:31:36.796 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:31:36.796 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:31:36.796 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:31:36.796 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.1647ms
2025-09-06 04:31:36.797 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 171
2025-09-06 04:31:36.797 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:31:36.797 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:31:36.797 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:31:36.797 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:31:36.797 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:31:36.797 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:31:36.797 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:31:36.798 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000022": started reading request body.
2025-09-06 04:31:36.798 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000022": done reading request body.
2025-09-06 04:31:36.798 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:31:36.798 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:31:36.798 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:31:36.798 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 0.992ms
2025-09-06 04:31:37.053 +03:00 [DBG] Connection id "0HNFCSD1LL87F" received FIN.
2025-09-06 04:31:37.054 +03:00 [DBG] Connection id "0HNFCSD1LL87F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:31:37.054 +03:00 [DBG] Connection id "0HNFCSD1LL87F" disconnecting.
2025-09-06 04:31:37.054 +03:00 [DBG] Connection id "0HNFCSD1LL87F" stopped.
2025-09-06 04:31:44.318 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:31:44.318 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-09-06 04:31:50.559 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:31:50.559 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:31:50.559 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:31:50.559 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:31:50.559 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:31:50.559 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:31:50.559 +03:00 [INF] Api health check sent.
2025-09-06 04:31:50.559 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:31:50.559 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:31:50.559 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2695ms
2025-09-06 04:31:54.319 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:31:54.319 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-09-06 04:32:00.974 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:32:00.974 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:00.974 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:32:00.974 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:00.974 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:00.974 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:32:00.974 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:00.974 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.2048ms
2025-09-06 04:32:00.975 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 179
2025-09-06 04:32:00.975 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:00.975 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:00.975 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:00.975 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:00.975 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:00.975 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:00.976 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:00.976 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000025": started reading request body.
2025-09-06 04:32:00.976 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000025": done reading request body.
2025-09-06 04:32:00.976 +03:00 [INF] Converting NL to SQL for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:00.976 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:32:00.976 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:32:00.976 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:00.976 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.976 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:00.976 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:00.976 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:00.977 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:32:00.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:32:00.977 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:00.977 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:00.977 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.977 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:00.977 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.977 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:00.977 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:00.977 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.977 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:00.977 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:00.977 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:00.977 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:00.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:00.977 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:00.977 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:00.978 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:00.978 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.978 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:00.978 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.978 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:00.978 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:00.978 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:00.978 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.978 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:00.978 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:00.978 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:00.978 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:00.978 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:00.978 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.978 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:00.978 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:00.978 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:00.979 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:00.979 +03:00 [DBG] Fetching schema for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", ForceRefresh=false
2025-09-06 04:32:00.979 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB (ForceRefresh=false)
2025-09-06 04:32:00.979 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|LearningTopicDB from cache file
2025-09-06 04:32:00.980 +03:00 [INF] Groq API key configured for HttpClient
2025-09-06 04:32:00.980 +03:00 [INF] Converting natural language to SQL. User query: show me all the columns in the database
2025-09-06 04:32:00.980 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-06 04:32:00.980 +03:00 [DBG] Generated prompt with 6 messages
2025-09-06 04:32:00.980 +03:00 [DBG] Request payload prepared for LLM API
2025-09-06 04:32:01.523 +03:00 [INF] LLM API responded with status: "OK"
2025-09-06 04:32:01.524 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-06 04:32:01.524 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:01.524 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:01.524 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:01.524 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:01.524 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:01.524 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 548.7009ms
2025-09-06 04:32:04.320 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:32:04.320 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-09-06 04:32:14.320 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:32:14.320 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-09-06 04:32:20.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:32:20.332 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:32:20.332 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:32:20.332 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:20.332 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:20.332 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:32:20.332 +03:00 [INF] Api health check sent.
2025-09-06 04:32:20.332 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:32:20.332 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:20.332 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2912ms
2025-09-06 04:32:20.919 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:32:20.919 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:20.919 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:32:20.919 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:20.919 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:20.919 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:32:20.919 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:20.919 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.2662ms
2025-09-06 04:32:20.920 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 179
2025-09-06 04:32:20.920 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:20.920 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:20.920 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:20.920 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:20.920 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:20.920 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:20.921 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:20.921 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000028": started reading request body.
2025-09-06 04:32:20.921 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000028": done reading request body.
2025-09-06 04:32:20.921 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:20.921 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:20.921 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:20.921 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 0.9559ms
2025-09-06 04:32:24.320 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:32:24.320 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 2 items
2025-09-06 04:32:25.241 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - null null
2025-09-06 04:32:25.241 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:32:25.241 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:32:25.241 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:25.241 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:25.241 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:32:25.241 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:25.241 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 204 null null 0.2315ms
2025-09-06 04:32:25.242 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - application/json 220
2025-09-06 04:32:25.242 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:32:25.242 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:32:25.242 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:32:25.242 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:25.242 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:25.242 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:32:25.243 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:25.243 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:0000002A": started reading request body.
2025-09-06 04:32:25.243 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:0000002A": done reading request body.
2025-09-06 04:32:25.244 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:32:25.244 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:32:25.244 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:25.244 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.244 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:25.244 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:25.244 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:25.244 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:25.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:25.244 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:25.244 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:25.244 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:25.244 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:25.244 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.245 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:25.245 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.245 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:25.245 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:25.245 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:25.245 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.245 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:25.245 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:25.245 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:25.245 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:25.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:25.245 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.245 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:25.245 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.245 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:25.246 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:25.246 +03:00 [INF] Executing SQL for Profile "98591f58-e603-4225-9d96-30c0805d6cbe", Mode="ReadOnly"
2025-09-06 04:32:25.246 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/LearningTopicDB (Mode="ReadOnly")
2025-09-06 04:32:25.246 +03:00 [DBG] SQL: SELECT * FROM Topics;
2025-09-06 04:32:25.246 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=LearningTopicDB)
2025-09-06 04:32:25.395 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-06 04:32:25.405 +03:00 [INF] Query execution finished in 158 ms, returned 2 rows
2025-09-06 04:32:25.405 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:25.406 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.406 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:25.406 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:25.406 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:25.406 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:25.406 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:25.406 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.406 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:25.406 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.406 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:25.409 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:25.409 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:25.409 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:32:25.409 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:25.409 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:32:25.409 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:32:25.409 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:32:25.409 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:32:25.410 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:25.410 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.410 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:25.410 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:25.410 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:25.410 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 308), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (Size = 39)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-06 04:32:25.417 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 308), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (Size = 39)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-06 04:32:25.417 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.417 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:25.417 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:25.417 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:25.417 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:25.417 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:32:25.418 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-06T01:32:25.4088388Z","$type":"QueryAddedEvent"}
2025-09-06 04:32:25.418 +03:00 [INF] Saved query to DB for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:25.418 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:32:25.418 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:25.418 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:25.418 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:25.418 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:25.418 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 200 null application/json; charset=utf-8 176.2107ms
2025-09-06 04:32:26.422 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:32:26.422 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:32:26.422 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:32:26.422 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:32:26.422 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:26.422 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:26.422 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:32:26.423 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:26.423 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:32:26.423 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:32:26.423 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:26.423 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:26.423 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:26.423 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:26.423 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:26.423 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:26.423 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:26.423 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:26.424 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:26.424 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:26.424 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:26.424 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:26.424 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:26.424 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:26.424 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:26.424 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:26.424 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:26.424 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:26.424 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:26.424 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:26.424 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:26.424 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:26.424 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:26.424 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:26.424 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:26.424 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:26.424 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:26.424 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:26.425 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:26.425 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:32:26.425 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:26.425 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:26.425 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:26.425 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:26.425 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 2.6195ms
2025-09-06 04:32:30.949 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:32:30.949 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:30.949 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:32:30.949 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:30.949 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:30.949 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:32:30.949 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:30.949 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.1919ms
2025-09-06 04:32:30.950 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 81
2025-09-06 04:32:30.950 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:30.950 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:30.950 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:30.950 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:30.950 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:30.950 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:30.951 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:30.951 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:0000002D": started reading request body.
2025-09-06 04:32:30.951 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:0000002D": done reading request body.
2025-09-06 04:32:30.951 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:32:30.951 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:32:30.951 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:30.951 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:30.951 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:30.951 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:30.951 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:30.951 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:32:30.951 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:32:30.952 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:30.952 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:30.952 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:30.952 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:30.952 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:30.952 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:30.952 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:30.952 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:32:30.952 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:32:30.952 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:32:30.952 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:32:30.952 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:32:30.952 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:30.952 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:30.953 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:30.953 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:30.953 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:30.953 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:32:30.953 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:32:30.959 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:30.959 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 6ms reading results.
2025-09-06 04:32:30.959 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:30.959 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:30.959 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:30.959 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:32:30.959 +03:00 [INF] AI mode changed to "Local" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:32:30.9523442Z"
2025-09-06 04:32:30.959 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:30.959 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:30.959 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:30.960 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:30.960 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:30.960 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 9.5901ms
2025-09-06 04:32:31.282 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:32:31.282 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:32:31.282 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:31.282 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:31.282 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:31.282 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:31.282 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:32:31.282 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:32:31.284 +03:00 [INF] Received HTTP response headers after 2.1208ms - 200
2025-09-06 04:32:31.284 +03:00 [INF] End processing HTTP request after 2.2805ms - 200
2025-09-06 04:32:31.284 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:31.285 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:31.285 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 2.7829ms
2025-09-06 04:32:31.295 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:32:31.295 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:32:31.295 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:32:31.295 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:32:31.295 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:31.295 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:31.295 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:31.295 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:31.295 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:31.295 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:31.295 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.4076ms
2025-09-06 04:32:31.634 +03:00 [DBG] Connection id "0HNFCSD1LL87G" accepted.
2025-09-06 04:32:31.634 +03:00 [DBG] Connection id "0HNFCSD1LL87G" started.
2025-09-06 04:32:31.634 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:32:31.634 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:32:31.634 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:32:31.634 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:32:31.634 +03:00 [INF] Api health check sent.
2025-09-06 04:32:31.634 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:32:31.634 +03:00 [DBG] Connection id "0HNFCSD1LL87G" completed keep alive response.
2025-09-06 04:32:31.635 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2107ms
2025-09-06 04:32:32.639 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:32:32.639 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:32:32.639 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:32:32.639 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:32.639 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:32.639 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:32:32.639 +03:00 [INF] Api health check sent.
2025-09-06 04:32:32.639 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:32:32.639 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:32.639 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2085ms
2025-09-06 04:32:32.641 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:32:32.641 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:32:32.641 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:32.641 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:32.641 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:32.641 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:32.642 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:32:32.642 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:32:32.642 +03:00 [INF] Received HTTP response headers after 0.3775ms - 200
2025-09-06 04:32:32.642 +03:00 [INF] End processing HTTP request after 0.5415ms - 200
2025-09-06 04:32:32.642 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:32.642 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:32.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 0.9466ms
2025-09-06 04:32:32.644 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:32:32.644 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:32:32.644 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:32:32.644 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:32:32.644 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:32.644 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:32.644 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:32.644 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:32.644 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:32.644 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:32.644 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.2367ms
2025-09-06 04:32:34.321 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:32:34.321 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-09-06 04:32:35.636 +03:00 [DBG] Connection id "0HNFCSD1LL87G" received FIN.
2025-09-06 04:32:35.636 +03:00 [DBG] Connection id "0HNFCSD1LL87G" disconnecting.
2025-09-06 04:32:35.636 +03:00 [DBG] Connection id "0HNFCSD1LL87G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:32:35.638 +03:00 [DBG] Connection id "0HNFCSD1LL87G" stopped.
2025-09-06 04:32:36.256 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - null null
2025-09-06 04:32:36.256 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:36.256 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:32:36.256 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:36.256 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:36.256 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:32:36.256 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:36.256 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 204 null null 0.1974ms
2025-09-06 04:32:36.257 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - application/json 179
2025-09-06 04:32:36.257 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:36.257 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert'
2025-09-06 04:32:36.257 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:36.257 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:36.257 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:36.257 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:36.257 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:36.257 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000034": started reading request body.
2025-09-06 04:32:36.257 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000034": done reading request body.
2025-09-06 04:32:36.257 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-06 04:32:36.257 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:36.257 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:36.257 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/convert - 200 null application/json; charset=utf-8 0.7569ms
2025-09-06 04:32:40.510 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:32:40.510 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:40.510 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:32:40.510 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:40.510 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:40.510 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:32:40.510 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:40.510 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.2852ms
2025-09-06 04:32:40.511 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 81
2025-09-06 04:32:40.511 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:40.511 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:40.511 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:40.512 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:40.512 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:40.512 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:40.512 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:40.512 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000036": started reading request body.
2025-09-06 04:32:40.512 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000036": done reading request body.
2025-09-06 04:32:40.512 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:32:40.512 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:32:40.512 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:40.512 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:40.512 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:40.512 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:40.512 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:40.512 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:32:40.512 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:32:40.513 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:40.513 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:40.513 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:40.513 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:40.513 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:40.513 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:40.513 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:40.513 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:32:40.513 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:32:40.513 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:32:40.513 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:32:40.513 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:32:40.513 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:40.513 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:40.513 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:40.513 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:40.513 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:40.513 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:32:40.514 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:32:40.517 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:40.517 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-06 04:32:40.517 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:40.517 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:40.517 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:40.517 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:32:40.517 +03:00 [INF] AI mode changed to "Basic" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:32:40.5132623Z"
2025-09-06 04:32:40.517 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:40.517 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:40.517 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:40.517 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:40.517 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:40.517 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 6.1178ms
2025-09-06 04:32:41.197 +03:00 [DBG] Connection id "0HNFCSD1LL87H" accepted.
2025-09-06 04:32:41.197 +03:00 [DBG] Connection id "0HNFCSD1LL87H" started.
2025-09-06 04:32:41.197 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:32:41.197 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:32:41.197 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:32:41.197 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:32:41.197 +03:00 [INF] Api health check sent.
2025-09-06 04:32:41.197 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:32:41.197 +03:00 [DBG] Connection id "0HNFCSD1LL87H" completed keep alive response.
2025-09-06 04:32:41.197 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2397ms
2025-09-06 04:32:44.062 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - null null
2025-09-06 04:32:44.063 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:32:44.063 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:32:44.063 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:44.063 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:44.063 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:32:44.063 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:44.063 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 204 null null 0.2678ms
2025-09-06 04:32:44.064 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - application/json 220
2025-09-06 04:32:44.064 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:32:44.064 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute'
2025-09-06 04:32:44.064 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:32:44.064 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:44.064 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:44.064 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:32:44.064 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:44.064 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000038": started reading request body.
2025-09-06 04:32:44.064 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:00000038": done reading request body.
2025-09-06 04:32:44.065 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-06 04:32:44.065 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:44.065 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:44.065 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/98591f58-e603-4225-9d96-30c0805d6cbe/execute - 200 null application/json; charset=utf-8 1.1358ms
2025-09-06 04:32:44.321 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:32:44.321 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-09-06 04:32:45.143 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - null null
2025-09-06 04:32:45.144 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:32:45.144 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe'
2025-09-06 04:32:45.144 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:32:45.144 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:45.144 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:45.144 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:32:45.144 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:45.144 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:32:45.144 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:32:45.144 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:45.144 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:45.144 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:45.144 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:45.144 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:45.144 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:45.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:45.145 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:45.145 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:45.145 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:45.145 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:45.145 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:45.145 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:45.145 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:45.145 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:45.145 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:45.145 +03:00 [INF] Fetching connection string for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:45.145 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:45.145 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:45.145 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:45.145 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:45.145 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:45.145 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:45.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-06 04:32:45.145 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:45.145 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:45.146 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:45.146 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:45.146 +03:00 [DBG] Fetched secret for profile "98591f58-e603-4225-9d96-30c0805d6cbe"
2025-09-06 04:32:45.146 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-06 04:32:45.146 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:45.146 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:45.146 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:45.146 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:45.146 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/98591f58-e603-4225-9d96-30c0805d6cbe - 200 null application/json; charset=utf-8 2.707ms
2025-09-06 04:32:45.199 +03:00 [DBG] Connection id "0HNFCSD1LL87H" received FIN.
2025-09-06 04:32:45.199 +03:00 [DBG] Connection id "0HNFCSD1LL87H" disconnecting.
2025-09-06 04:32:45.199 +03:00 [DBG] Connection id "0HNFCSD1LL87H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:32:45.201 +03:00 [DBG] Connection id "0HNFCSD1LL87H" stopped.
2025-09-06 04:32:50.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:32:50.335 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:32:50.335 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:32:50.335 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:50.335 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:50.335 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:32:50.335 +03:00 [INF] Api health check sent.
2025-09-06 04:32:50.335 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:32:50.335 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:50.335 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2713ms
2025-09-06 04:32:51.107 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - null null
2025-09-06 04:32:51.107 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:51.107 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-06 04:32:51.107 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:51.107 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:51.107 +03:00 [DBG] The request is a preflight request.
2025-09-06 04:32:51.107 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:51.107 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 204 null null 0.2576ms
2025-09-06 04:32:51.108 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - application/json 81
2025-09-06 04:32:51.108 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:51.108 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode'
2025-09-06 04:32:51.108 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:51.108 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:51.108 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:51.108 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:51.108 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-06 04:32:51.109 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:0000003C": started reading request body.
2025-09-06 04:32:51.109 +03:00 [DBG] Connection id "0HNFCSD1LL87D", Request id "0HNFCSD1LL87D:0000003C": done reading request body.
2025-09-06 04:32:51.109 +03:00 [DBG] Creating DbConnection.
2025-09-06 04:32:51.109 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-06 04:32:51.109 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:51.109 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:51.109 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:51.109 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:51.109 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:51.109 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:32:51.109 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-06 04:32:51.109 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:51.110 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:51.110 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:51.110 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-06 04:32:51.110 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:51.110 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:51.110 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:51.110 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:32:51.110 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:32:51.110 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-06 04:32:51.110 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-06 04:32:51.110 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-06 04:32:51.110 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:51.110 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:51.110 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-06 04:32:51.110 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:51.110 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-06 04:32:51.110 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:32:51.111 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-06 04:32:51.113 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:51.113 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-06 04:32:51.113 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-06 04:32:51.113 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:51.114 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-06 04:32:51.114 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-06 04:32:51.114 +03:00 [INF] AI mode changed to "Local" for user "3f6ff5e0-5e9a-4167-a94a-4715887aa04d" at "2025-09-06T01:32:51.1102266Z"
2025-09-06 04:32:51.114 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-06 04:32:51.114 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:51.114 +03:00 [DBG] 'ContextDB' disposed.
2025-09-06 04:32:51.114 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-06 04:32:51.114 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-06 04:32:51.114 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/3f6ff5e0-5e9a-4167-a94a-4715887aa04d/aimode - 200 null application/json; charset=utf-8 6.6281ms
2025-09-06 04:32:51.465 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:32:51.465 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:32:51.465 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:51.465 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:51.465 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:51.465 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:51.465 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:32:51.465 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:32:51.465 +03:00 [INF] Received HTTP response headers after 0.3372ms - 200
2025-09-06 04:32:51.465 +03:00 [INF] End processing HTTP request after 0.4463ms - 200
2025-09-06 04:32:51.466 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:51.466 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:51.466 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 0.7614ms
2025-09-06 04:32:51.510 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:32:51.510 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:32:51.510 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:32:51.510 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:32:51.510 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:51.510 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:51.510 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:51.510 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:51.510 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:51.510 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:51.510 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.2234ms
2025-09-06 04:32:51.855 +03:00 [DBG] Connection id "0HNFCSD1LL87I" accepted.
2025-09-06 04:32:51.855 +03:00 [DBG] Connection id "0HNFCSD1LL87I" started.
2025-09-06 04:32:51.856 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:32:51.856 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:32:51.856 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:32:51.856 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:32:51.856 +03:00 [INF] Api health check sent.
2025-09-06 04:32:51.856 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:32:51.856 +03:00 [DBG] Connection id "0HNFCSD1LL87I" completed keep alive response.
2025-09-06 04:32:51.856 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2506ms
2025-09-06 04:32:52.864 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-06 04:32:52.865 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-06 04:32:52.865 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-06 04:32:52.865 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:52.865 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:52.865 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-06 04:32:52.865 +03:00 [INF] Api health check sent.
2025-09-06 04:32:52.865 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-06 04:32:52.865 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:52.865 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4238ms
2025-09-06 04:32:52.869 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health/localllm - null null
2025-09-06 04:32:52.869 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health/localllm'
2025-09-06 04:32:52.869 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:52.869 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:52.869 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:52.869 +03:00 [INF] Executing endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:52.869 +03:00 [INF] Start processing HTTP request GET http://localhost:11434/
2025-09-06 04:32:52.869 +03:00 [INF] Sending HTTP request GET http://localhost:11434/
2025-09-06 04:32:52.870 +03:00 [INF] Received HTTP response headers after 0.3319ms - 200
2025-09-06 04:32:52.870 +03:00 [INF] End processing HTTP request after 0.4514ms - 200
2025-09-06 04:32:52.870 +03:00 [INF] Executed endpoint 'HTTP: GET api/health/localllm'
2025-09-06 04:32:52.870 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:52.870 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health/localllm - 200 null application/json; charset=utf-8 0.8616ms
2025-09-06 04:32:52.872 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-06 04:32:52.872 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-06 04:32:52.872 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:32:52.872 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-06 04:32:52.872 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:52.872 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-06 04:32:52.872 +03:00 [INF] CORS policy execution successful.
2025-09-06 04:32:52.872 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:52.873 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-06 04:32:52.873 +03:00 [DBG] Connection id "0HNFCSD1LL87D" completed keep alive response.
2025-09-06 04:32:52.873 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3407ms
2025-09-06 04:32:54.321 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-09-06 04:32:54.321 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-09-06 04:32:55.858 +03:00 [DBG] Connection id "0HNFCSD1LL87I" received FIN.
2025-09-06 04:32:55.858 +03:00 [DBG] Connection id "0HNFCSD1LL87I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-06 04:32:55.858 +03:00 [DBG] Connection id "0HNFCSD1LL87I" disconnecting.
2025-09-06 04:32:55.858 +03:00 [DBG] Connection id "0HNFCSD1LL87I" stopped.
