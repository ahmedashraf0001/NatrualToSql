2025-09-16 22:03:15.042 +03:00 [INF] This is a test log to file!
2025-09-16 22:03:15.197 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:03:15.200 +03:00 [INF] API configured successfully.
2025-09-16 22:03:15.245 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:03:15.281 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:03:15.582 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:03:15.637 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:03:15.654 +03:00 [INF] Registered 23 endpoints in 521 milliseconds.
2025-09-16 22:03:15.658 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:03:15.693 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:03:15.759 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:03:15.767 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 22:03:15.770 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:03:15.772 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:03:15.773 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:03:15.774 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:03:15.781 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:03:15.783 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:03:15.785 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:03:15.786 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:03:15.787 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:03:15.788 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:03:15.791 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:03:15.795 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 22:03:15.795 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-16 22:03:15.799 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:03:15.820 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:03:15.821 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:03:15.821 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:03:15.821 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:03:15.821 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:03:15.8213865+00:00');
SELECT changes();
2025-09-16 22:03:15.833 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:03:15.8213865+00:00');
SELECT changes();
2025-09-16 22:03:15.870 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:03:15.872 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:03:15.873 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:03:15.873 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:03:15.873 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:03:15.874 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:03:15.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:03:15.875 +03:00 [DBG] Committing transaction.
2025-09-16 22:03:15.875 +03:00 [DBG] Committed transaction.
2025-09-16 22:03:15.876 +03:00 [DBG] Disposing transaction.
2025-09-16 22:03:15.877 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:03:15.878 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:03:15.879 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:03:15.879 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:03:15.879 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:03:15.879 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:03:15.879 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:03:15.879 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:03:15.879 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:03:15.879 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:03:15.879 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:03:15.879 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:03:15.880 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:03:15.880 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:03:15.881 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:03:15.881 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:03:15.881 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:03:15.881 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:03:15.883 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:03:15.884 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:03:15.887 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:03:15.887 +03:00 [DBG] Committing transaction.
2025-09-16 22:03:15.887 +03:00 [DBG] Committed transaction.
2025-09-16 22:03:15.887 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:03:15.887 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:03:15.887 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:03:15.887 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:03:15.890 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:03:15.890 +03:00 [DBG] Disposing transaction.
2025-09-16 22:03:15.891 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:03:15.893 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:03:15.893 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:03:15.893 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:03:15.893 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:03:15.893 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:03:15.893 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:03:15.906 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:03:15.916 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:03:15.917 +03:00 [DBG] Hosting starting
2025-09-16 22:03:15.953 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:03:15.954 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:03:15.970 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-09-16 22:06:23.247 +03:00 [INF] This is a test log to file!
2025-09-16 22:06:23.385 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:06:23.387 +03:00 [INF] API configured successfully.
2025-09-16 22:06:23.436 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:06:23.474 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:06:23.778 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:06:23.833 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:23.850 +03:00 [INF] Registered 23 endpoints in 532 milliseconds.
2025-09-16 22:06:23.854 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:23.890 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:23.958 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:23.966 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 22:06:23.968 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:23.970 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:23.972 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-16 22:06:23.973 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:23.979 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:23.981 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:23.984 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:23.984 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:23.985 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:23.986 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:06:23.989 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:06:23.993 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 22:06:23.993 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-16 22:06:23.997 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:06:24.013 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:06:24.014 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:06:24.014 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:24.014 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:24.014 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:06:24.0144167+00:00');
SELECT changes();
2025-09-16 22:06:24.019 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:06:24.0144167+00:00');
SELECT changes();
2025-09-16 22:06:24.055 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:06:24.057 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:06:24.058 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:06:24.058 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:06:24.058 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:06:24.058 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:06:24.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:06:24.059 +03:00 [DBG] Committing transaction.
2025-09-16 22:06:24.060 +03:00 [DBG] Committed transaction.
2025-09-16 22:06:24.060 +03:00 [DBG] Disposing transaction.
2025-09-16 22:06:24.062 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:06:24.062 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:06:24.063 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:24.063 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:24.063 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:24.064 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:24.064 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:24.064 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:24.064 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:06:24.064 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:24.064 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:24.064 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:06:24.064 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:06:24.065 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:24.065 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:24.065 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:24.065 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:06:24.066 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:06:24.068 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:24.069 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:06:24.072 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:06:24.072 +03:00 [DBG] Committing transaction.
2025-09-16 22:06:24.072 +03:00 [DBG] Committed transaction.
2025-09-16 22:06:24.072 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:06:24.072 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:24.072 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:24.072 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:06:24.075 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:06:24.076 +03:00 [DBG] Disposing transaction.
2025-09-16 22:06:24.076 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:24.079 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:06:24.079 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:24.079 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:24.079 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:24.079 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:06:24.080 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:06:24.093 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:06:24.103 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:06:24.104 +03:00 [DBG] Hosting starting
2025-09-16 22:06:24.141 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:06:24.142 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:06:24.153 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-09-16 22:06:45.719 +03:00 [INF] This is a test log to file!
2025-09-16 22:06:45.920 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:06:45.924 +03:00 [INF] API configured successfully.
2025-09-16 22:06:45.985 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:06:46.026 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:06:46.562 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:06:46.623 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:46.642 +03:00 [INF] Registered 23 endpoints in 828 milliseconds.
2025-09-16 22:06:46.647 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:46.690 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:46.772 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:46.780 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 22:06:46.782 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:46.785 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:46.787 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:06:46.788 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:46.795 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:46.797 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:46.800 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:46.800 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:46.802 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:46.803 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:06:46.806 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:06:46.810 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 22:06:46.811 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-16 22:06:46.816 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:06:46.842 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:06:46.844 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:06:46.844 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:46.844 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:46.844 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:06:46.8439987+00:00');
SELECT changes();
2025-09-16 22:06:46.849 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:06:46.8439987+00:00');
SELECT changes();
2025-09-16 22:06:46.893 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:06:46.895 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:06:46.896 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:06:46.896 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:06:46.896 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:06:46.896 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:06:46.897 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:06:46.899 +03:00 [DBG] Committing transaction.
2025-09-16 22:06:46.899 +03:00 [DBG] Committed transaction.
2025-09-16 22:06:46.900 +03:00 [DBG] Disposing transaction.
2025-09-16 22:06:46.901 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:06:46.901 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:06:46.902 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:46.902 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:46.902 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:46.902 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:46.903 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:46.903 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:46.903 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:06:46.903 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:46.903 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:46.903 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:06:46.903 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:06:46.905 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:46.905 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:46.905 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:46.906 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:06:46.906 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:06:46.909 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:46.910 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:06:46.913 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:06:46.913 +03:00 [DBG] Committing transaction.
2025-09-16 22:06:46.913 +03:00 [DBG] Committed transaction.
2025-09-16 22:06:46.913 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:06:46.913 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:46.913 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:06:46.913 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:06:46.916 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:06:46.916 +03:00 [DBG] Disposing transaction.
2025-09-16 22:06:46.917 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:46.919 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:06:46.920 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:46.920 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:46.920 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:46.920 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:06:46.920 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:06:46.937 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:06:46.950 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:06:46.952 +03:00 [DBG] Hosting starting
2025-09-16 22:06:46.994 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:06:46.996 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:06:47.005 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:06:47.005 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:06:47.005 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:06:47.005 +03:00 [INF] Hosting environment: Development
2025-09-16 22:06:47.005 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:06:47.005 +03:00 [DBG] Hosting started
2025-09-16 22:06:47.190 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" accepted.
2025-09-16 22:06:47.191 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" started.
2025-09-16 22:06:47.223 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:06:47.231 +03:00 [DBG] Connection id "0HNFLAGNGPIVP" accepted.
2025-09-16 22:06:47.231 +03:00 [DBG] Connection id "0HNFLAGNGPIVP" started.
2025-09-16 22:06:47.268 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:06:47.269 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.291 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:47.291 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:47.293 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 22:06:47.296 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.310 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:47.340 +03:00 [INF] Getting all users
2025-09-16 22:06:47.374 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 22:06:47.425 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:06:47.636 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:06:47.659 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:47.659 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:47.660 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.662 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.662 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:47.662 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.662 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.662 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:06:47.665 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:06:47.678 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.678 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 13ms reading results.
2025-09-16 22:06:47.680 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.680 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.736 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.736 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:47.738 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:47.740 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.740 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.741 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 520.0207ms
2025-09-16 22:06:47.748 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:06:47.750 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:06:47.750 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.751 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:47.751 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:47.752 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.753 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:47.753 +03:00 [INF] Getting all users
2025-09-16 22:06:47.755 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:47.755 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:47.755 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.755 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.755 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:47.755 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.756 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.756 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:06:47.756 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:06:47.756 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.756 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:47.756 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.756 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.757 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.757 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:47.757 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:47.757 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.757 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.757 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 9.0317ms
2025-09-16 22:06:47.765 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:06:47.765 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:47.766 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:47.766 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:47.768 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:47.768 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:47.769 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:47.771 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:47.796 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:06:47.803 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:06:47.807 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:06:47.834 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:06:47.843 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:47.843 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:47.843 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.843 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.843 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:47.843 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.844 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.846 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:47.849 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:47.876 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:47.900 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:47.924 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.924 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 75ms reading results.
2025-09-16 22:06:47.924 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.924 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.926 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:47.926 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:06:47.926 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:47.926 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:47.926 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:47.926 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:47.926 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.926 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.926 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:47.926 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 161.3674ms
2025-09-16 22:06:47.927 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:47.927 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:47.927 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:47.928 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:47.928 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:06:47.929 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:47.929 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:47.929 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.929 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.929 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:47.929 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.929 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.929 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:47.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:47.930 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:47.930 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:47.930 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.930 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:47.930 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.930 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.930 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:47.931 +03:00 [DBG] Connection id "0HNFLAGNGPIVP" completed keep alive response.
2025-09-16 22:06:47.931 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:47.931 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.931 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.931 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.6678ms
2025-09-16 22:06:47.984 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:06:47.984 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:06:47.984 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.985 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:47.985 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:47.985 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.985 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:47.986 +03:00 [INF] Getting all users
2025-09-16 22:06:47.986 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:47.986 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:47.986 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.986 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.986 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:47.986 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.986 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:47.986 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:06:47.987 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:06:47.987 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.987 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:47.987 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:47.987 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.987 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:06:47.987 +03:00 [DBG] Connection id "0HNFLAGNGPIVP" completed keep alive response.
2025-09-16 22:06:47.987 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:47.987 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:47.987 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:47.988 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 3.2464ms
2025-09-16 22:06:48.001 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:06:48.002 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:48.002 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:48.002 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:48.002 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:48.002 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:48.002 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:48.003 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:48.004 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:06:48.004 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:48.004 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:48.004 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:48.004 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:48.004 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:48.004 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:48.004 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:48.005 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:48.005 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:48.005 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:48.005 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:48.005 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:48.005 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:48.005 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:48.005 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:48.006 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:48.006 +03:00 [DBG] Connection id "0HNFLAGNGPIVP" completed keep alive response.
2025-09-16 22:06:48.007 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:48.007 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:48.007 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:48.007 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 6.0074ms
2025-09-16 22:06:48.065 +03:00 [DBG] Connection id "0HNFLAGNGPIVQ" accepted.
2025-09-16 22:06:48.065 +03:00 [DBG] Connection id "0HNFLAGNGPIVQ" started.
2025-09-16 22:06:48.068 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:06:48.068 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:06:48.068 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:06:48.068 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:06:48.071 +03:00 [INF] Api health check sent.
2025-09-16 22:06:48.071 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:06:48.071 +03:00 [DBG] Connection id "0HNFLAGNGPIVQ" completed keep alive response.
2025-09-16 22:06:48.071 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 3.1774ms
2025-09-16 22:06:52.079 +03:00 [DBG] Connection id "0HNFLAGNGPIVQ" received FIN.
2025-09-16 22:06:52.080 +03:00 [DBG] Connection id "0HNFLAGNGPIVQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:06:52.081 +03:00 [DBG] Connection id "0HNFLAGNGPIVQ" disconnecting.
2025-09-16 22:06:52.081 +03:00 [DBG] Connection id "0HNFLAGNGPIVQ" stopped.
2025-09-16 22:06:52.084 +03:00 [DBG] Connection id "0HNFLAGNGPIVR" accepted.
2025-09-16 22:06:52.084 +03:00 [DBG] Connection id "0HNFLAGNGPIVR" started.
2025-09-16 22:06:52.084 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:06:52.084 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:06:52.084 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:06:52.084 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:06:52.086 +03:00 [INF] Api health check sent.
2025-09-16 22:06:52.086 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:06:52.086 +03:00 [DBG] Connection id "0HNFLAGNGPIVR" completed keep alive response.
2025-09-16 22:06:52.086 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.9556ms
2025-09-16 22:06:52.090 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:06:52.091 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:52.091 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:52.091 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:52.091 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:52.091 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:52.092 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:52.093 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:52.093 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:06:52.093 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:52.093 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:52.093 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.094 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.094 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:52.094 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.094 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.094 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:52.094 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:52.094 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:52.094 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:52.095 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.095 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:52.095 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.095 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.095 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:52.095 +03:00 [DBG] Connection id "0HNFLAGNGPIVP" completed keep alive response.
2025-09-16 22:06:52.095 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:52.095 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.095 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.095 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.9046ms
2025-09-16 22:06:52.098 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:06:52.098 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:52.098 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:06:52.098 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:52.098 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:52.099 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:52.099 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:52.100 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:52.100 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:06:52.101 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:52.101 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:52.101 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.101 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.101 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:52.101 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.101 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.101 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:52.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:06:52.102 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:52.102 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:52.102 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.102 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:52.102 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.102 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.103 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:06:52.103 +03:00 [DBG] Connection id "0HNFLAGNGPIVP" completed keep alive response.
2025-09-16 22:06:52.103 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:52.103 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.103 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.103 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.129ms
2025-09-16 22:06:52.174 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:06:52.174 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:06:52.175 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:06:52.175 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.175 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:52.175 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:52.175 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.177 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:06:52.177 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:06:52.178 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:06:52.178 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:06:52.178 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:52.178 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:52.178 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:06:52.178 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:52.179 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:52.183 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:06:52.185 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:06:52.201 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:06:52.205 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:52.205 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:52.205 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:52.205 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:52.205 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.205 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.205 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.205 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:52.205 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.205 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.206 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.206 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.206 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:52.206 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.207 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:52.206 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.207 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 22:06:52.208 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.209 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.209 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:52.209 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.209 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.209 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:52.209 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:06:52.209 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.209 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.209 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.209 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.211 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:06:52.211 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.212 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.212 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:52.212 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.212 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.213 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.213 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.213 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.214 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:52.214 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.214 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.218 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:06:52.219 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.219 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.220 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:52.220 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.220 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.220 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.220 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:06:52.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.220 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.220 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:52.221 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.221 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.221 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:06:52.221 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:52.221 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:52.221 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.221 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.221 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 44.2672ms
2025-09-16 22:06:52.221 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:06:52.222 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:06:52.223 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:06:52.223 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:06:52.223 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:06:52.223 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:52.223 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:52.223 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:06:52.224 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:52.225 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:06:52.226 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:06:52.226 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.226 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.226 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:52.226 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.226 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.226 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.227 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.227 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:06:52.227 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.227 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:52.227 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.227 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.228 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:06:52.228 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.228 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.228 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:06:52.228 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.228 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:06:52.228 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.229 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:06:52.229 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:06:52.229 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.229 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:06:52.229 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:06:52.229 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.229 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:06:52.230 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:06:52.230 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:52.230 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:52.230 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.230 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.231 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:06:52.231 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 8.7509ms
2025-09-16 22:06:52.307 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:06:52.315 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.316 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:06:52.317 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:06:52.317 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:06:52.317 +03:00 [DBG] Connection id "0HNFLAGNGPIVP" completed keep alive response.
2025-09-16 22:06:52.317 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.317 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:52.317 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:52.317 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:06:52.317 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:52.317 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:06:52.317 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.318 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 143.2123ms
2025-09-16 22:06:52.318 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:52.319 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.319 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:52.319 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:52.319 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 3.2637ms
2025-09-16 22:06:52.320 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:06:52.320 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:06:52.320 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:06:52.320 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.320 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:52.320 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:52.320 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.322 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:52.322 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.323 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:52.323 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:52.323 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.935ms
2025-09-16 22:06:52.324 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:06:52.324 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:06:52.324 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:06:52.324 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.324 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:52.324 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:52.324 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.325 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:06:52.325 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:06:52.325 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:52.325 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:06:52.325 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.5434ms
2025-09-16 22:06:53.180 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:06:53.180 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:06:53.180 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:06:53.180 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:06:53.180 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:06:53.181 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:06:53.181 +03:00 [INF] Api health check sent.
2025-09-16 22:06:53.181 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:06:53.181 +03:00 [DBG] Connection id "0HNFLAGNGPIVO" completed keep alive response.
2025-09-16 22:06:53.181 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.8185ms
2025-09-16 22:06:56.088 +03:00 [DBG] Connection id "0HNFLAGNGPIVR" received FIN.
2025-09-16 22:06:56.088 +03:00 [DBG] Connection id "0HNFLAGNGPIVR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:06:56.088 +03:00 [DBG] Connection id "0HNFLAGNGPIVR" disconnecting.
2025-09-16 22:06:56.089 +03:00 [DBG] Connection id "0HNFLAGNGPIVR" stopped.
2025-09-16 22:07:32.913 +03:00 [INF] This is a test log to file!
2025-09-16 22:07:33.103 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:07:33.106 +03:00 [INF] API configured successfully.
2025-09-16 22:07:33.158 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:07:33.197 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:07:33.602 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:07:33.659 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:07:33.679 +03:00 [INF] Registered 23 endpoints in 662 milliseconds.
2025-09-16 22:07:33.684 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:07:33.722 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:07:33.797 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:07:33.806 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 22:07:33.807 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:07:33.809 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:07:33.811 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:07:33.812 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:07:33.819 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:07:33.821 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:07:33.824 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:07:33.824 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:07:33.825 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:07:33.826 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:07:33.829 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:07:33.833 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-16 22:07:33.834 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-16 22:07:33.838 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:07:33.857 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:07:33.859 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:07:33.859 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:07:33.859 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:07:33.859 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:07:33.8588512+00:00');
SELECT changes();
2025-09-16 22:07:33.863 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:07:33.8588512+00:00');
SELECT changes();
2025-09-16 22:07:33.901 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:07:33.903 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:07:33.904 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:07:33.904 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:07:33.905 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:07:33.905 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:07:33.905 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:07:33.906 +03:00 [DBG] Committing transaction.
2025-09-16 22:07:33.907 +03:00 [DBG] Committed transaction.
2025-09-16 22:07:33.908 +03:00 [DBG] Disposing transaction.
2025-09-16 22:07:33.909 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:07:33.909 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:07:33.910 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:07:33.910 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:07:33.910 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:07:33.911 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:07:33.911 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:07:33.911 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:07:33.911 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:07:33.911 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:07:33.911 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:07:33.911 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:07:33.911 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:07:33.912 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:07:33.912 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:07:33.912 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:07:33.913 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:07:33.913 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:07:33.915 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:07:33.916 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:07:33.918 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:07:33.918 +03:00 [DBG] Committing transaction.
2025-09-16 22:07:33.919 +03:00 [DBG] Committed transaction.
2025-09-16 22:07:33.919 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:07:33.919 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:07:33.919 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:07:33.919 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:07:33.922 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:07:33.922 +03:00 [DBG] Disposing transaction.
2025-09-16 22:07:33.923 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:07:33.924 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-16 22:07:33.925 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:07:33.925 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:07:33.925 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:07:33.925 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:07:33.925 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:07:33.938 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:07:33.949 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:07:33.949 +03:00 [DBG] Hosting starting
2025-09-16 22:07:33.989 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:07:33.990 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:07:34.000 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:07:34.000 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:07:34.001 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:07:34.001 +03:00 [INF] Hosting environment: Development
2025-09-16 22:07:34.001 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:07:34.001 +03:00 [DBG] Hosting started
2025-09-16 22:08:18.506 +03:00 [INF] This is a test log to file!
2025-09-16 22:08:18.681 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:08:18.684 +03:00 [INF] API configured successfully.
2025-09-16 22:08:18.738 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:08:18.778 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:08:19.169 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:08:19.235 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:08:19.252 +03:00 [INF] Registered 23 endpoints in 642 milliseconds.
2025-09-16 22:08:19.256 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:08:19.293 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:08:19.364 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:08:19.372 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 22:08:19.373 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:08:19.376 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:08:19.377 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:08:19.378 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:08:19.385 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:08:19.387 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:08:19.389 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:08:19.389 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:08:19.391 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:08:19.392 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:08:19.395 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:08:19.398 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 22:08:19.399 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-16 22:08:19.403 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:08:19.421 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:08:19.423 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:08:19.423 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:08:19.423 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:08:19.423 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:08:19.4228354+00:00');
SELECT changes();
2025-09-16 22:08:19.428 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:08:19.4228354+00:00');
SELECT changes();
2025-09-16 22:08:19.466 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:08:19.469 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:08:19.470 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:08:19.470 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:08:19.470 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:08:19.470 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:08:19.471 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:08:19.472 +03:00 [DBG] Committing transaction.
2025-09-16 22:08:19.473 +03:00 [DBG] Committed transaction.
2025-09-16 22:08:19.474 +03:00 [DBG] Disposing transaction.
2025-09-16 22:08:19.475 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:08:19.475 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:08:19.476 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:08:19.476 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:08:19.476 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:08:19.476 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:08:19.476 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:08:19.476 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:08:19.476 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:08:19.477 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:08:19.477 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:08:19.477 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:08:19.477 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:08:19.479 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:08:19.479 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:08:19.479 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:08:19.479 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:08:19.480 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:08:19.482 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:08:19.484 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:08:19.488 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:08:19.488 +03:00 [DBG] Committing transaction.
2025-09-16 22:08:19.488 +03:00 [DBG] Committed transaction.
2025-09-16 22:08:19.488 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:08:19.488 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:08:19.488 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:08:19.488 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:08:19.496 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:08:19.496 +03:00 [DBG] Disposing transaction.
2025-09-16 22:08:19.497 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:08:19.499 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:08:19.499 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:08:19.499 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:08:19.499 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:08:19.499 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:08:19.499 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:08:19.512 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:08:19.523 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:08:19.524 +03:00 [DBG] Hosting starting
2025-09-16 22:08:19.560 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:08:19.561 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:08:19.570 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:08:19.570 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:08:19.570 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:08:19.570 +03:00 [INF] Hosting environment: Development
2025-09-16 22:08:19.570 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:08:19.570 +03:00 [DBG] Hosting started
2025-09-16 22:11:29.270 +03:00 [INF] This is a test log to file!
2025-09-16 22:11:29.544 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:11:29.547 +03:00 [INF] API configured successfully.
2025-09-16 22:11:29.610 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:11:29.666 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:11:30.226 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:11:30.341 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:11:30.370 +03:00 [INF] Registered 23 endpoints in 987 milliseconds.
2025-09-16 22:11:30.377 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:11:30.421 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:11:30.512 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:11:30.521 +03:00 [DBG] Created DbConnection. (7ms).
2025-09-16 22:11:30.523 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:11:30.526 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:11:30.527 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:11:30.528 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:11:30.535 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:11:30.537 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:11:30.539 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:11:30.539 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:11:30.541 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:11:30.542 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:11:30.544 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:11:30.548 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 22:11:30.548 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-16 22:11:30.553 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:11:30.573 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:11:30.575 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:11:30.575 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:11:30.575 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:11:30.575 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:11:30.57477+00:00');
SELECT changes();
2025-09-16 22:11:30.585 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:11:30.57477+00:00');
SELECT changes();
2025-09-16 22:11:30.623 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:11:30.624 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:11:30.625 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:11:30.625 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:11:30.626 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:11:30.626 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:11:30.626 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:11:30.627 +03:00 [DBG] Committing transaction.
2025-09-16 22:11:30.627 +03:00 [DBG] Committed transaction.
2025-09-16 22:11:30.628 +03:00 [DBG] Disposing transaction.
2025-09-16 22:11:30.629 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:11:30.629 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:11:30.630 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:11:30.630 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:11:30.630 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:11:30.631 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:11:30.631 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:11:30.631 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:11:30.631 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:11:30.631 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:11:30.631 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:11:30.631 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:11:30.632 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:11:30.633 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:11:30.633 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:11:30.633 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:11:30.633 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:11:30.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:11:30.635 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:11:30.636 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:11:30.638 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:11:30.639 +03:00 [DBG] Committing transaction.
2025-09-16 22:11:30.639 +03:00 [DBG] Committed transaction.
2025-09-16 22:11:30.639 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:11:30.639 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:11:30.639 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:11:30.639 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:11:30.641 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:11:30.642 +03:00 [DBG] Disposing transaction.
2025-09-16 22:11:30.643 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:11:30.645 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:11:30.645 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:11:30.645 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:11:30.645 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:11:30.645 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:11:30.645 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:11:30.659 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:11:30.671 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:11:30.671 +03:00 [DBG] Hosting starting
2025-09-16 22:11:30.714 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:11:30.715 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:11:30.726 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:11:30.726 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:11:30.726 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:11:30.726 +03:00 [INF] Hosting environment: Development
2025-09-16 22:11:30.726 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:11:30.727 +03:00 [DBG] Hosting started
2025-09-16 22:11:59.114 +03:00 [INF] This is a test log to file!
2025-09-16 22:11:59.319 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:11:59.322 +03:00 [INF] API configured successfully.
2025-09-16 22:11:59.384 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:11:59.433 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:11:59.882 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:11:59.950 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:11:59.971 +03:00 [INF] Registered 23 endpoints in 746 milliseconds.
2025-09-16 22:11:59.975 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:00.025 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:00.105 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:00.113 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 22:12:00.114 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:00.117 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:00.119 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:12:00.120 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:00.126 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:00.129 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:00.131 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:00.131 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:00.133 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:00.134 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:12:00.137 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:12:00.141 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 22:12:00.142 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-16 22:12:00.146 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:12:00.168 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:12:00.171 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:12:00.171 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:12:00.171 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:12:00.171 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:12:00.1707923+00:00');
SELECT changes();
2025-09-16 22:12:00.177 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:12:00.1707923+00:00');
SELECT changes();
2025-09-16 22:12:00.223 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:12:00.226 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:12:00.227 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:12:00.227 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:12:00.227 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:12:00.227 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:12:00.228 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:12:00.228 +03:00 [DBG] Committing transaction.
2025-09-16 22:12:00.229 +03:00 [DBG] Committed transaction.
2025-09-16 22:12:00.230 +03:00 [DBG] Disposing transaction.
2025-09-16 22:12:00.232 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:12:00.232 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:12:00.233 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:00.233 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:00.233 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:00.233 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:00.234 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:00.234 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:00.234 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:12:00.234 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:12:00.234 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:12:00.234 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:12:00.234 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:12:00.235 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:00.235 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:00.235 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:00.235 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:12:00.236 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:12:00.238 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:00.239 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:12:00.241 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:12:00.242 +03:00 [DBG] Committing transaction.
2025-09-16 22:12:00.242 +03:00 [DBG] Committed transaction.
2025-09-16 22:12:00.242 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:12:00.242 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:12:00.242 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:12:00.242 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:12:00.245 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:12:00.246 +03:00 [DBG] Disposing transaction.
2025-09-16 22:12:00.246 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:00.249 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:12:00.249 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:00.249 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:00.250 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:00.250 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:12:00.250 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:12:00.264 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:12:00.277 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:12:00.279 +03:00 [DBG] Hosting starting
2025-09-16 22:12:00.330 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:12:00.331 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:12:00.342 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:12:00.342 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:12:00.342 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:12:00.343 +03:00 [INF] Hosting environment: Development
2025-09-16 22:12:00.343 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:12:00.343 +03:00 [DBG] Hosting started
2025-09-16 22:12:00.387 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" accepted.
2025-09-16 22:12:00.388 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" started.
2025-09-16 22:12:00.407 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:12:00.435 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" accepted.
2025-09-16 22:12:00.436 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" started.
2025-09-16 22:12:00.456 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:12:00.457 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:00.480 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:00.480 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:00.481 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 22:12:00.484 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:00.500 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:00.522 +03:00 [INF] Getting all users
2025-09-16 22:12:00.553 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 22:12:00.634 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:12:00.976 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:12:01.000 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:01.000 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:01.002 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.004 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.004 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:01.004 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.004 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.005 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:12:01.007 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:12:01.026 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.027 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 19ms reading results.
2025-09-16 22:12:01.028 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.028 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.065 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:01.066 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:12:01.068 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:01.069 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:12:01.070 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:12:01.070 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.070 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:01.070 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.072 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:01.072 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:01.073 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:01.074 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:01.074 +03:00 [INF] Getting all users
2025-09-16 22:12:01.071 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 666.3556ms
2025-09-16 22:12:01.077 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:01.077 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:01.078 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.078 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.078 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:01.078 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.078 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.078 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:12:01.079 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:12:01.079 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.079 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:01.079 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.079 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.080 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:01.080 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:01.080 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:01.080 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.081 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.081 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 11.8558ms
2025-09-16 22:12:01.091 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:12:01.091 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:01.092 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:01.092 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.094 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:01.094 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:01.095 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.097 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:01.123 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:12:01.131 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:12:01.136 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:12:01.181 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:12:01.192 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:01.192 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:01.192 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.192 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.192 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:01.192 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.213 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-16 22:12:01.216 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:01.225 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:01.274 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:01.312 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:01.335 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.335 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 109ms reading results.
2025-09-16 22:12:01.335 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.335 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.338 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:12:01.338 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.338 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:01.338 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:01.338 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:01.338 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:01.338 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.339 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.339 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.339 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 248.713ms
2025-09-16 22:12:01.339 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:01.339 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:01.340 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.341 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:01.341 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:12:01.342 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:01.342 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:01.342 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.342 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.342 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:01.342 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.342 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.342 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:01.343 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:01.343 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:01.343 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:01.344 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.344 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:01.344 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.344 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.344 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.344 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:12:01.344 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:01.344 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.344 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.344 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 6.4459ms
2025-09-16 22:12:01.396 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:12:01.397 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:12:01.397 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:01.397 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:01.397 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:01.397 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:01.398 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:01.398 +03:00 [INF] Getting all users
2025-09-16 22:12:01.399 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:01.399 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:01.399 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.399 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.399 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:01.400 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.400 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.400 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:12:01.402 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:12:01.403 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.403 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:01.403 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.403 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.404 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:12:01.404 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:12:01.404 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:01.404 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.404 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.404 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 7.7651ms
2025-09-16 22:12:01.431 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:12:01.431 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:01.431 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:01.431 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.431 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:01.431 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:01.432 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.432 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:01.433 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:12:01.433 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:01.433 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:01.433 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.433 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.433 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:01.433 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.433 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:01.433 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:01.434 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:01.434 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:01.434 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:01.434 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.435 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:01.435 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:01.435 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.435 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:01.435 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:12:01.435 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:01.435 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:01.435 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:01.436 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.813ms
2025-09-16 22:12:01.538 +03:00 [DBG] Connection id "0HNFLAJKRLKQF" accepted.
2025-09-16 22:12:01.538 +03:00 [DBG] Connection id "0HNFLAJKRLKQF" started.
2025-09-16 22:12:01.538 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:12:01.538 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:12:01.538 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:12:01.539 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:12:01.543 +03:00 [INF] Api health check sent.
2025-09-16 22:12:01.543 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:12:01.543 +03:00 [DBG] Connection id "0HNFLAJKRLKQF" completed keep alive response.
2025-09-16 22:12:01.543 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 5.157ms
2025-09-16 22:12:05.553 +03:00 [DBG] Connection id "0HNFLAJKRLKQF" received FIN.
2025-09-16 22:12:05.553 +03:00 [DBG] Connection id "0HNFLAJKRLKQF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:12:05.553 +03:00 [DBG] Connection id "0HNFLAJKRLKQF" disconnecting.
2025-09-16 22:12:05.554 +03:00 [DBG] Connection id "0HNFLAJKRLKQF" stopped.
2025-09-16 22:12:05.560 +03:00 [DBG] Connection id "0HNFLAJKRLKQG" accepted.
2025-09-16 22:12:05.560 +03:00 [DBG] Connection id "0HNFLAJKRLKQG" started.
2025-09-16 22:12:05.560 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:12:05.560 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:12:05.560 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:12:05.561 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:12:05.561 +03:00 [INF] Api health check sent.
2025-09-16 22:12:05.561 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:12:05.561 +03:00 [DBG] Connection id "0HNFLAJKRLKQG" completed keep alive response.
2025-09-16 22:12:05.561 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.8914ms
2025-09-16 22:12:05.565 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:12:05.565 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:05.565 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:05.565 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:05.565 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:05.566 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:05.566 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:05.566 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:05.567 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:12:05.567 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:05.567 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:05.567 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.567 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.567 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:05.567 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.568 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.568 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:05.568 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:05.568 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:05.568 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:05.568 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.568 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:05.569 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.569 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.569 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:05.569 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:12:05.570 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:05.570 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.570 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.570 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.1163ms
2025-09-16 22:12:05.574 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:12:05.574 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:05.575 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:05.575 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:05.575 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:05.575 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:05.575 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:05.576 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:05.577 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:12:05.577 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:05.577 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:05.577 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.578 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.578 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:05.578 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.578 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.578 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:05.578 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:05.578 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:05.578 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:05.579 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.579 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:05.579 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.579 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.579 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:05.579 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:12:05.579 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:05.579 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.579 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.579 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.7432ms
2025-09-16 22:12:05.646 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:12:05.646 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:12:05.646 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:12:05.646 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.646 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:05.646 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:05.646 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.647 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:12:05.648 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:12:05.649 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:12:05.649 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:12:05.649 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:05.649 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:05.649 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:12:05.650 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:05.650 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:05.655 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:12:05.656 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:12:05.674 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:12:05.679 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:05.679 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:05.679 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:05.679 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:05.679 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.679 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.679 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.679 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:05.679 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.680 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.680 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.680 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.680 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.680 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:05.680 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:05.680 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.680 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.681 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.682 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:05.682 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.682 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.682 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:12:05.682 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:05.682 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.682 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.682 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.682 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.683 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:12:05.684 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.684 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.685 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:05.685 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.685 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.685 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.685 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.686 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.686 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:05.686 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.686 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.691 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:12:05.692 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.692 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.692 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:05.692 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.692 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.692 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.693 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:12:05.693 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.693 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.693 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:05.693 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:12:05.693 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.693 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:05.693 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.693 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:05.693 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.693 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.694 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 46.1429ms
2025-09-16 22:12:05.694 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:12:05.694 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:12:05.695 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:12:05.695 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:12:05.695 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:12:05.695 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:05.695 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:05.695 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:12:05.696 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:05.697 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:05.697 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:05.698 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.698 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.698 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:05.698 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.698 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.698 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.699 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:05.699 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.699 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:05.699 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.699 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.699 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:12:05.700 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.700 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.700 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:05.700 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.700 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:05.700 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.700 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:12:05.700 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:12:05.701 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.701 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:05.701 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:05.701 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.701 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:12:05.701 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:12:05.701 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:05.701 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:12:05.701 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:05.702 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.702 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 7.4746ms
2025-09-16 22:12:05.774 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:12:05.780 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.781 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:12:05.781 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:05.781 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:05.781 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:05.781 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 135.8107ms
2025-09-16 22:12:05.782 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:12:05.783 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:12:05.783 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:12:05.783 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.784 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:05.784 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:05.784 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.785 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:05.785 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.785 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:05.785 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:05.786 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 3.7056ms
2025-09-16 22:12:05.788 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:12:05.789 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:12:05.789 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:12:05.789 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.789 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:05.789 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:05.789 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.790 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:05.791 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.791 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:05.791 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:05.791 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.4687ms
2025-09-16 22:12:05.792 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:12:05.793 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:12:05.793 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:12:05.793 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.793 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:05.793 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:05.793 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.794 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:05.795 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:12:05.795 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:05.796 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:05.796 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 3.1415ms
2025-09-16 22:12:06.651 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:12:06.652 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:12:06.652 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:12:06.652 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:06.652 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:06.652 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:12:06.652 +03:00 [INF] Api health check sent.
2025-09-16 22:12:06.652 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:12:06.652 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:06.652 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7596ms
2025-09-16 22:12:09.562 +03:00 [DBG] Connection id "0HNFLAJKRLKQG" received FIN.
2025-09-16 22:12:09.563 +03:00 [DBG] Connection id "0HNFLAJKRLKQG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:12:09.563 +03:00 [DBG] Connection id "0HNFLAJKRLKQG" disconnecting.
2025-09-16 22:12:09.563 +03:00 [DBG] Connection id "0HNFLAJKRLKQG" stopped.
2025-09-16 22:12:22.740 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:12:22.740 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:22.740 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:12:22.740 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:22.740 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:22.740 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:12:22.741 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:22.741 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 1.254ms
2025-09-16 22:12:22.742 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 136
2025-09-16 22:12:22.743 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:22.743 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:22.743 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:22.743 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:22.743 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:22.743 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:22.752 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:22.757 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000000A": started reading request body.
2025-09-16 22:12:22.758 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000000A": done reading request body.
2025-09-16 22:12:22.767 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:22.767 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:22.767 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:22.767 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.767 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:22.767 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:22.767 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:22.768 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:22.768 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:22.768 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:22.768 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:22.768 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.768 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:22.769 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.769 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:22.777 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:22.779 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:12:22.803 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:12:22.807 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:12:22.808 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:12:22.808 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:12:22.845 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:22.846 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.846 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:22.846 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:22.847 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:22.848 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:12:22.849 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:12:22.856 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.856 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 7ms reading results.
2025-09-16 22:12:22.857 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.857 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:22.858 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:22.859 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:12:22.863 +03:00 [INF] AI mode changed to "Groq" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:12:22.7695610Z"
2025-09-16 22:12:22.864 +03:00 [INF] API key changed for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:12:22.7698138Z"
2025-09-16 22:12:22.864 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:22.864 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:22.864 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:22.865 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:22.865 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:22.865 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 122.2784ms
2025-09-16 22:12:22.867 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:12:22.868 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:22.868 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:22.868 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:22.868 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:22.868 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:22.868 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:22.869 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:22.869 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:12:22.870 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:22.870 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:22.870 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:22.870 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.870 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:22.870 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:22.870 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:22.870 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:22.870 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:22.870 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:22.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:22.871 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.871 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:22.871 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:22.871 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:22.871 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:22.871 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:22.871 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:22.871 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:22.871 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:22.871 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.8824ms
2025-09-16 22:12:23.380 +03:00 [DBG] Connection id "0HNFLAJKRLKQH" accepted.
2025-09-16 22:12:23.380 +03:00 [DBG] Connection id "0HNFLAJKRLKQH" started.
2025-09-16 22:12:23.380 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:12:23.381 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:12:23.381 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:12:23.381 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:12:23.381 +03:00 [INF] Api health check sent.
2025-09-16 22:12:23.381 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:12:23.381 +03:00 [DBG] Connection id "0HNFLAJKRLKQH" completed keep alive response.
2025-09-16 22:12:23.382 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.9931ms
2025-09-16 22:12:27.383 +03:00 [DBG] Connection id "0HNFLAJKRLKQH" received FIN.
2025-09-16 22:12:27.383 +03:00 [DBG] Connection id "0HNFLAJKRLKQH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:12:27.383 +03:00 [DBG] Connection id "0HNFLAJKRLKQH" disconnecting.
2025-09-16 22:12:27.383 +03:00 [DBG] Connection id "0HNFLAJKRLKQH" stopped.
2025-09-16 22:12:36.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:12:36.657 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:12:36.657 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:12:36.657 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:36.657 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:36.657 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:12:36.658 +03:00 [INF] Api health check sent.
2025-09-16 22:12:36.658 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:12:36.658 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:36.658 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.4086ms
2025-09-16 22:12:45.953 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:12:45.953 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:45.953 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:12:45.953 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:45.953 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:45.953 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:12:45.953 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:45.953 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 0.3984ms
2025-09-16 22:12:45.954 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 81
2025-09-16 22:12:45.954 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:45.954 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:45.954 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:45.954 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:45.954 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:45.954 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:45.955 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:45.955 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000000E": started reading request body.
2025-09-16 22:12:45.955 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000000E": done reading request body.
2025-09-16 22:12:45.956 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:45.956 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:45.956 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:45.956 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:45.956 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:45.956 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:45.956 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:45.956 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:45.957 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:45.957 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:45.957 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:45.958 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:45.958 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:45.958 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:45.958 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:45.958 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:45.958 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:12:45.958 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:12:45.958 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:12:45.958 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:12:45.958 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:12:45.959 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:45.959 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:45.959 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:45.959 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:45.959 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:45.959 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:12:45.959 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:12:45.962 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:45.962 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-16 22:12:45.962 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:45.963 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:45.963 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:45.963 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:12:45.963 +03:00 [INF] AI mode changed to "Local" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:12:45.9582915Z"
2025-09-16 22:12:45.964 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:45.964 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:45.964 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:45.964 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:45.964 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:45.964 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 10.4699ms
2025-09-16 22:12:46.021 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:12:46.021 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:46.021 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:46.021 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:46.021 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:46.021 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:46.021 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:46.022 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:46.022 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:12:46.023 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:46.023 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:46.023 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:46.023 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:46.023 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:46.023 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:46.023 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:46.023 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:46.024 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:46.024 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:46.024 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:46.024 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:46.024 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:46.024 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:46.024 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:46.024 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:46.024 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:46.025 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:46.025 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:46.025 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:46.025 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.7319ms
2025-09-16 22:12:46.379 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:12:46.379 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:12:46.379 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:12:46.379 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:12:46.379 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:12:46.379 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:46.379 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:46.379 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:12:46.381 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:12:46.381 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:46.381 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 2.4824ms
2025-09-16 22:12:46.530 +03:00 [DBG] Connection id "0HNFLAJKRLKQI" accepted.
2025-09-16 22:12:46.530 +03:00 [DBG] Connection id "0HNFLAJKRLKQI" started.
2025-09-16 22:12:46.530 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:12:46.530 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:12:46.530 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:12:46.530 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:12:46.530 +03:00 [INF] Api health check sent.
2025-09-16 22:12:46.530 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:12:46.530 +03:00 [DBG] Connection id "0HNFLAJKRLKQI" completed keep alive response.
2025-09-16 22:12:46.530 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2946ms
2025-09-16 22:12:47.537 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:12:47.537 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:12:47.537 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:12:47.537 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:47.537 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:47.537 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:12:47.537 +03:00 [INF] Api health check sent.
2025-09-16 22:12:47.537 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:12:47.537 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:47.537 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4445ms
2025-09-16 22:12:47.796 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:12:47.796 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:12:47.796 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:12:47.796 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:12:47.796 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:12:47.796 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:47.796 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:47.797 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:12:47.797 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:12:47.797 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:47.797 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.4052ms
2025-09-16 22:12:50.531 +03:00 [DBG] Connection id "0HNFLAJKRLKQI" received FIN.
2025-09-16 22:12:50.531 +03:00 [DBG] Connection id "0HNFLAJKRLKQI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:12:50.532 +03:00 [DBG] Connection id "0HNFLAJKRLKQI" disconnecting.
2025-09-16 22:12:50.532 +03:00 [DBG] Connection id "0HNFLAJKRLKQI" stopped.
2025-09-16 22:12:51.403 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:12:51.403 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:51.403 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:12:51.403 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:51.403 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:51.403 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:12:51.403 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:51.403 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 0.3869ms
2025-09-16 22:12:51.404 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 136
2025-09-16 22:12:51.404 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:51.405 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:12:51.405 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:51.405 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:51.405 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:51.405 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:51.406 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:51.406 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:00000014": started reading request body.
2025-09-16 22:12:51.406 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:00000014": done reading request body.
2025-09-16 22:12:51.406 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:51.406 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:51.406 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:51.406 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.406 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:51.406 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:51.406 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:51.406 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:51.407 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:51.407 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:51.407 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:51.407 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.407 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:51.407 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.407 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:51.407 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:51.407 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:12:51.407 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:12:51.407 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:12:51.407 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:12:51.407 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:12:51.408 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:51.408 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.408 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:51.408 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:51.408 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:51.408 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:12:51.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:12:51.444 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.444 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 35ms reading results.
2025-09-16 22:12:51.444 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.444 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:51.444 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:51.444 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:12:51.444 +03:00 [INF] AI mode changed to "Groq" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:12:51.4076133Z"
2025-09-16 22:12:51.444 +03:00 [INF] API key changed for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:12:51.4076142Z"
2025-09-16 22:12:51.444 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:12:51.444 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:51.444 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:51.445 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:51.445 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:51.445 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 40.2813ms
2025-09-16 22:12:51.469 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:12:51.469 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:51.469 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:12:51.469 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:51.469 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:12:51.469 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:12:51.469 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:51.470 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:12:51.470 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:12:51.470 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:12:51.470 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:12:51.470 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:51.471 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.471 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:12:51.471 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:51.471 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:12:51.471 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:51.471 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:12:51.472 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:51.472 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:12:51.472 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.472 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:12:51.472 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:12:51.472 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:51.472 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:12:51.472 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:12:51.473 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:12:51.473 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:12:51.473 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:12:51.473 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.6861ms
2025-09-16 22:12:51.978 +03:00 [DBG] Connection id "0HNFLAJKRLKQJ" accepted.
2025-09-16 22:12:51.978 +03:00 [DBG] Connection id "0HNFLAJKRLKQJ" started.
2025-09-16 22:12:51.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:12:51.978 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:12:51.978 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:12:51.978 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:12:51.978 +03:00 [INF] Api health check sent.
2025-09-16 22:12:51.978 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:12:51.978 +03:00 [DBG] Connection id "0HNFLAJKRLKQJ" completed keep alive response.
2025-09-16 22:12:51.978 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2938ms
2025-09-16 22:12:55.979 +03:00 [DBG] Connection id "0HNFLAJKRLKQJ" received FIN.
2025-09-16 22:12:55.979 +03:00 [DBG] Connection id "0HNFLAJKRLKQJ" disconnecting.
2025-09-16 22:12:55.979 +03:00 [DBG] Connection id "0HNFLAJKRLKQJ" stopped.
2025-09-16 22:12:55.979 +03:00 [DBG] Connection id "0HNFLAJKRLKQJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:13:06.656 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:13:06.656 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:13:06.656 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:13:06.656 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:06.656 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:06.656 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:13:06.656 +03:00 [INF] Api health check sent.
2025-09-16 22:13:06.656 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:13:06.656 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:06.656 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4104ms
2025-09-16 22:13:09.070 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:13:09.070 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:13:09.070 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:13:09.070 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:09.070 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:09.070 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:13:09.070 +03:00 [INF] Api health check sent.
2025-09-16 22:13:09.070 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:13:09.070 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:09.070 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5255ms
2025-09-16 22:13:09.072 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:13:09.072 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:13:09.072 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:13:09.072 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:09.072 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:09.072 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:13:09.072 +03:00 [INF] Api health check sent.
2025-09-16 22:13:09.072 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:13:09.072 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:09.072 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6713ms
2025-09-16 22:13:09.077 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:13:09.077 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:13:09.077 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:13:09.077 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:09.077 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:09.077 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:13:09.078 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:13:09.080 +03:00 [INF] Listing all profiles
2025-09-16 22:13:09.081 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 22:13:09.081 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:13:09.093 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:13:09.095 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:13:09.095 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:13:09.096 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.096 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.096 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.096 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.096 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.096 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:13:09.096 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:13:09.097 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.098 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:13:09.098 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.098 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.098 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.098 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.098 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.098 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.098 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.098 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.098 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.099 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.099 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:09.099 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.099 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:09.099 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.099 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.099 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.100 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:13:09.100 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:09.100 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:13:09.100 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.100 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.100 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 23.4912ms
2025-09-16 22:13:09.101 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:13:09.103 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:13:09.103 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:13:09.103 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:09.103 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:09.103 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:13:09.103 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:13:09.103 +03:00 [INF] Listing all profiles
2025-09-16 22:13:09.103 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:13:09.104 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:13:09.104 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:13:09.104 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:09.104 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:09.104 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:13:09.104 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:13:09.104 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:13:09.104 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2809ms
2025-09-16 22:13:09.104 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:13:09.104 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.104 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.104 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.104 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.104 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.104 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:13:09.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:13:09.104 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.104 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:09.104 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.104 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.105 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.105 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:13:09.105 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:13:09.105 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.105 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:13:09.105 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.105 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:13:09.105 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.105 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.105 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.105 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:09.105 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:09.105 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.105 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:13:09.105 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.106 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:09.106 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.106 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:09.106 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.106 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.106 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.107 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:13:09.107 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:13:09.107 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:09.107 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:13:09.107 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.107 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.107 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 6.0332ms
2025-09-16 22:13:09.110 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:13:09.110 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:13:09.110 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:13:09.110 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:13:09.110 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:09.110 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:09.110 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:13:09.111 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:13:09.114 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000001B": started reading request body.
2025-09-16 22:13:09.114 +03:00 [DBG] Connection id "0HNFLAJKRLKQD", Request id "0HNFLAJKRLKQD:00000009": started reading request body.
2025-09-16 22:13:09.114 +03:00 [DBG] Connection id "0HNFLAJKRLKQD", Request id "0HNFLAJKRLKQD:00000009": done reading request body.
2025-09-16 22:13:09.114 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000001B": done reading request body.
2025-09-16 22:13:09.131 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.131 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.131 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:13:09.131 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:13:09.132 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:13:09.132 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:13:09.132 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.132 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.132 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.132 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.132 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.132 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.132 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.132 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.132 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:13:09.132 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:13:09.132 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:13:09.132 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:13:09.133 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:09.133 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:09.133 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:09.133 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:09.134 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.134 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.134 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:13:09.134 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:09.134 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.134 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.134 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.134 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.134 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.134 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.134 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.134 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.134 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.134 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.134 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.134 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.134 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.134 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.135 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.135 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.135 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.135 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.135 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:09.135 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:09.135 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.135 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.135 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.135 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.136 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.136 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.136 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.136 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.136 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.136 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.136 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.136 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:09.136 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.136 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.136 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.136 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:09.136 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.136 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.136 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.148 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:13:09.148 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.148 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.148 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:09.148 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:09.148 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.148 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:09.149 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.149 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.149 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.149 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:13:09.149 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:13:09.149 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:13:09.149 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:13:09.149 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:13:09.151 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:13:09.151 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:13:09.191 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:13:09.191 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:13:09.192 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:13:09.192 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:13:09.193 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:13:09.193 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:13:09.193 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:13:09.193 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:13:09.201 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:13:09.201 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:13:09.938 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:13:09.941 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:13:09.943 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:13:09.943 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:13:09.946 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:13:09.946 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:13:09.946 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" completed keep alive response.
2025-09-16 22:13:09.946 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:09.946 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:13:09.946 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:13:09.946 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.946 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:09.946 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.946 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:09.946 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 841.674ms
2025-09-16 22:13:09.946 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 836.4687ms
2025-09-16 22:13:15.883 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:13:15.884 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:13:15.884 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:13:15.884 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:15.884 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:15.884 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:13:15.884 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:15.884 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 0.3951ms
2025-09-16 22:13:15.885 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 81
2025-09-16 22:13:15.885 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:13:15.885 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:13:15.885 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:13:15.885 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:15.885 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:15.885 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:13:15.886 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:13:15.886 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000001D": started reading request body.
2025-09-16 22:13:15.886 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000001D": done reading request body.
2025-09-16 22:13:15.886 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:13:15.886 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:13:15.886 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:15.886 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.886 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:15.886 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:15.886 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:15.886 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:13:15.886 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:13:15.887 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:15.887 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:15.887 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.887 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:15.887 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.887 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:15.887 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:15.887 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:13:15.887 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:13:15.887 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:13:15.887 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:13:15.887 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:13:15.887 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:15.887 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.887 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:15.887 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:15.887 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:15.887 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:13:15.887 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:13:15.891 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.891 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-16 22:13:15.891 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.891 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:15.891 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:15.891 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:13:15.891 +03:00 [INF] AI mode changed to "Basic" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:13:15.8872704Z"
2025-09-16 22:13:15.892 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:13:15.892 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:15.892 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:13:15.892 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:15.892 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:15.892 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 6.9628ms
2025-09-16 22:13:15.941 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:13:15.941 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:13:15.941 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:13:15.941 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:13:15.941 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:15.941 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:15.941 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:13:15.941 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:13:15.941 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:13:15.942 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:13:15.942 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:13:15.942 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:15.942 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.942 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:13:15.942 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:15.942 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:13:15.942 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:13:15.942 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:13:15.943 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:15.943 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:13:15.943 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.943 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:13:15.943 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:13:15.943 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:15.943 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:13:15.943 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:15.943 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:13:15.943 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:13:15.943 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:13:15.943 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 2.7468ms
2025-09-16 22:13:16.450 +03:00 [DBG] Connection id "0HNFLAJKRLKQK" accepted.
2025-09-16 22:13:16.450 +03:00 [DBG] Connection id "0HNFLAJKRLKQK" started.
2025-09-16 22:13:16.450 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:13:16.450 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:13:16.450 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:13:16.450 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:13:16.450 +03:00 [INF] Api health check sent.
2025-09-16 22:13:16.450 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:13:16.450 +03:00 [DBG] Connection id "0HNFLAJKRLKQK" completed keep alive response.
2025-09-16 22:13:16.450 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2787ms
2025-09-16 22:13:20.453 +03:00 [DBG] Connection id "0HNFLAJKRLKQK" received FIN.
2025-09-16 22:13:20.453 +03:00 [DBG] Connection id "0HNFLAJKRLKQK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:13:20.453 +03:00 [DBG] Connection id "0HNFLAJKRLKQK" disconnecting.
2025-09-16 22:13:20.453 +03:00 [DBG] Connection id "0HNFLAJKRLKQK" stopped.
2025-09-16 22:13:36.656 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:13:36.656 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:13:36.656 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:13:36.656 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:13:36.656 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:13:36.656 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:13:36.656 +03:00 [INF] Api health check sent.
2025-09-16 22:13:36.656 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:13:36.656 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:13:36.656 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3601ms
2025-09-16 22:14:06.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:14:06.657 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:14:06.657 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:14:06.657 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:14:06.657 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:14:06.658 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:14:06.659 +03:00 [INF] Api health check sent.
2025-09-16 22:14:06.659 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:14:06.659 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:14:06.659 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 2.0133ms
2025-09-16 22:14:36.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:14:36.657 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:14:36.657 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:14:36.657 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:14:36.657 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:14:36.657 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:14:36.657 +03:00 [INF] Api health check sent.
2025-09-16 22:14:36.658 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:14:36.658 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:14:36.658 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.8278ms
2025-09-16 22:15:06.656 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:15:06.656 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:15:06.656 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:15:06.656 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:15:06.656 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:15:06.656 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:15:06.657 +03:00 [INF] Api health check sent.
2025-09-16 22:15:06.657 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:15:06.657 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:15:06.657 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5908ms
2025-09-16 22:15:20.427 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" disconnecting.
2025-09-16 22:15:20.427 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" stopped.
2025-09-16 22:15:20.427 +03:00 [DBG] Connection id "0HNFLAJKRLKQD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:15:36.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:15:36.658 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:15:36.658 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:15:36.658 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:15:36.658 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:15:36.658 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:15:36.658 +03:00 [INF] Api health check sent.
2025-09-16 22:15:36.658 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:15:36.658 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:15:36.658 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4918ms
2025-09-16 22:16:06.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:16:06.657 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:16:06.657 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:16:06.657 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:16:06.657 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:16:06.657 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:16:06.657 +03:00 [INF] Api health check sent.
2025-09-16 22:16:06.657 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:16:06.657 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:16:06.657 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.364ms
2025-09-16 22:16:36.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:16:36.657 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:16:36.657 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:16:36.657 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:16:36.657 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:16:36.657 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:16:36.657 +03:00 [INF] Api health check sent.
2025-09-16 22:16:36.657 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:16:36.657 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:16:36.657 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3788ms
2025-09-16 22:17:06.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:17:06.657 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:17:06.657 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:17:06.657 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:17:06.657 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:17:06.657 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:17:06.657 +03:00 [INF] Api health check sent.
2025-09-16 22:17:06.657 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:17:06.657 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:17:06.657 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3606ms
2025-09-16 22:17:36.656 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:17:36.656 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:17:36.656 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:17:36.656 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:17:36.656 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:17:36.656 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:17:36.657 +03:00 [INF] Api health check sent.
2025-09-16 22:17:36.657 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:17:36.657 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:17:36.657 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4744ms
2025-09-16 22:18:06.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:06.657 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:06.657 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:06.657 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:06.657 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:06.657 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:06.657 +03:00 [INF] Api health check sent.
2025-09-16 22:18:06.657 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:06.657 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:06.657 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3824ms
2025-09-16 22:18:28.097 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:18:28.097 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:18:28.097 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:18:28.097 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:28.097 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:28.097 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:18:28.097 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:28.097 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 0.3432ms
2025-09-16 22:18:28.098 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 81
2025-09-16 22:18:28.098 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:18:28.098 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:18:28.098 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:18:28.098 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:28.098 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:28.098 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:18:28.099 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:28.099 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000002A": started reading request body.
2025-09-16 22:18:28.099 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000002A": done reading request body.
2025-09-16 22:18:28.100 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:28.100 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:28.100 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:28.100 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.100 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:28.100 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:28.100 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:28.100 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:28.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:28.101 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:28.102 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:28.102 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.102 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:28.102 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.102 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:28.102 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:28.102 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:18:28.103 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:18:28.103 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:18:28.103 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:18:28.103 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:18:28.103 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:28.103 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.103 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:28.103 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:28.103 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:28.103 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:18:28.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:18:28.106 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.107 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-16 22:18:28.107 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.107 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:28.107 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:28.107 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:18:28.107 +03:00 [INF] AI mode changed to "Local" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:18:28.1028756Z"
2025-09-16 22:18:28.107 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:18:28.107 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:28.107 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:28.107 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:28.107 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:28.107 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 9.3967ms
2025-09-16 22:18:28.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:18:28.158 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:18:28.158 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:18:28.158 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:18:28.159 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:28.159 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:28.159 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:18:28.159 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:28.159 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:18:28.160 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:28.160 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:28.160 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:28.160 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.160 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:28.160 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:28.160 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:28.160 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:28.160 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:28.160 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:28.161 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:28.161 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.161 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:28.161 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:28.161 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:28.161 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:18:28.161 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:28.161 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:28.161 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:28.161 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:28.161 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 2.7763ms
2025-09-16 22:18:28.474 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:18:28.474 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:18:28.474 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:18:28.474 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:18:28.474 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:18:28.474 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:28.474 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:28.474 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:18:28.475 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:18:28.475 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:28.475 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.4021ms
2025-09-16 22:18:28.668 +03:00 [DBG] Connection id "0HNFLAJKRLKQL" accepted.
2025-09-16 22:18:28.668 +03:00 [DBG] Connection id "0HNFLAJKRLKQL" started.
2025-09-16 22:18:28.668 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:28.668 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:28.668 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:28.668 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:28.669 +03:00 [INF] Api health check sent.
2025-09-16 22:18:28.669 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:28.669 +03:00 [DBG] Connection id "0HNFLAJKRLKQL" completed keep alive response.
2025-09-16 22:18:28.669 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2089ms
2025-09-16 22:18:29.676 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:29.676 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:29.676 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:29.676 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:29.676 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:29.676 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:29.676 +03:00 [INF] Api health check sent.
2025-09-16 22:18:29.676 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:29.676 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:29.676 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3321ms
2025-09-16 22:18:29.935 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:18:29.935 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:18:29.935 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:18:29.935 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:18:29.935 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:18:29.935 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:29.935 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:29.935 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:18:29.935 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:18:29.935 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:29.935 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3813ms
2025-09-16 22:18:31.681 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 136
2025-09-16 22:18:31.681 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:18:31.681 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:18:31.681 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:18:31.681 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:31.681 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:31.681 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:18:31.682 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:31.682 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000002F": started reading request body.
2025-09-16 22:18:31.682 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:0000002F": done reading request body.
2025-09-16 22:18:31.683 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:31.683 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:31.683 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:31.683 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.683 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:31.683 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:31.683 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:31.683 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:31.683 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:31.683 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:31.683 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:31.684 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.684 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:31.684 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.684 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:31.684 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:31.684 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:18:31.684 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:18:31.684 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:18:31.684 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:18:31.684 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:18:31.684 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:31.684 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.684 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:31.684 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:31.684 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:31.684 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:18:31.684 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:18:31.691 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.691 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 6ms reading results.
2025-09-16 22:18:31.691 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.691 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:31.691 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:31.691 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:18:31.692 +03:00 [INF] AI mode changed to "Groq" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:18:31.6841598Z"
2025-09-16 22:18:31.692 +03:00 [INF] API key changed for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:18:31.6841606Z"
2025-09-16 22:18:31.692 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:18:31.692 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:31.692 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:31.692 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:31.692 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:31.692 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 10.6334ms
2025-09-16 22:18:31.739 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:18:31.739 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:18:31.739 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:18:31.739 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:18:31.739 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:31.739 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:31.740 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:18:31.740 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:31.740 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:18:31.740 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:31.741 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:31.741 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:31.741 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.741 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:31.741 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:31.741 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:31.741 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:31.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:31.741 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:31.741 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:31.741 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.741 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:31.741 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:31.741 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:31.741 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:18:31.741 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:31.741 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:31.741 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:31.741 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:31.741 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 2.2038ms
2025-09-16 22:18:32.244 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:32.244 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:32.244 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:32.244 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:32.244 +03:00 [INF] Api health check sent.
2025-09-16 22:18:32.244 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:32.244 +03:00 [DBG] Connection id "0HNFLAJKRLKQL" completed keep alive response.
2025-09-16 22:18:32.244 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2831ms
2025-09-16 22:18:36.245 +03:00 [DBG] Connection id "0HNFLAJKRLKQL" received FIN.
2025-09-16 22:18:36.245 +03:00 [DBG] Connection id "0HNFLAJKRLKQL" disconnecting.
2025-09-16 22:18:36.245 +03:00 [DBG] Connection id "0HNFLAJKRLKQL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:18:36.246 +03:00 [DBG] Connection id "0HNFLAJKRLKQL" stopped.
2025-09-16 22:18:36.655 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:36.655 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:36.655 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:36.655 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:36.655 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:36.655 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:36.655 +03:00 [INF] Api health check sent.
2025-09-16 22:18:36.655 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:36.655 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:36.655 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2373ms
2025-09-16 22:18:38.185 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:38.185 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:38.185 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:38.185 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:38.185 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:38.185 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:38.185 +03:00 [INF] Api health check sent.
2025-09-16 22:18:38.186 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:38.186 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:38.186 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7625ms
2025-09-16 22:18:38.187 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:38.187 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:38.187 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:38.187 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:38.187 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:38.187 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:38.187 +03:00 [INF] Api health check sent.
2025-09-16 22:18:38.187 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:38.187 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:38.187 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3077ms
2025-09-16 22:18:38.190 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:18:38.190 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:18:38.190 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:38.190 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:38.190 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:38.190 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:38.191 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:38.191 +03:00 [INF] Listing all profiles
2025-09-16 22:18:38.191 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:38.191 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:38.191 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.191 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.191 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.191 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.191 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.191 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:38.192 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:38.192 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.192 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.192 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.192 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.192 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.193 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.193 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.193 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.193 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.193 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.193 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.193 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.193 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:38.193 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.193 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.193 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.193 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.194 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.194 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:38.194 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:38.194 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:38.194 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.194 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.194 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 3.7279ms
2025-09-16 22:18:38.195 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:18:38.195 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:18:38.195 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:38.195 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:38.195 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:38.195 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:38.195 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:38.196 +03:00 [INF] Listing all profiles
2025-09-16 22:18:38.196 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:38.196 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:38.196 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.196 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.196 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.196 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.196 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:38.196 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:38.196 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.196 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.196 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.196 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.196 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.197 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.197 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.197 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.197 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.197 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.197 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.197 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.197 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" accepted.
2025-09-16 22:18:38.197 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" started.
2025-09-16 22:18:38.197 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:38.197 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:18:38.197 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.197 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:38.198 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.198 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:18:38.198 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.198 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.198 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:38.198 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:38.198 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:18:38.198 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:38.198 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.4191ms
2025-09-16 22:18:38.198 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.198 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:38.198 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:38.198 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:38.198 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.198 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.198 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 3.4513ms
2025-09-16 22:18:38.199 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:18:38.199 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:38.199 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:38.199 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:38.199 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:38.199 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:38.199 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:38.200 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:38.200 +03:00 [DBG] Connection id "0HNFLAJKRLKQM", Request id "0HNFLAJKRLKQM:00000002": started reading request body.
2025-09-16 22:18:38.200 +03:00 [DBG] Connection id "0HNFLAJKRLKQM", Request id "0HNFLAJKRLKQM:00000002": done reading request body.
2025-09-16 22:18:38.200 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.200 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:38.201 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:38.201 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.201 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:18:38.201 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.201 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.201 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.201 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:38.201 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.201 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:38.201 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:38.201 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:38.201 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:38.201 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:38.201 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:38.201 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:38.201 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:38.201 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:38.201 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:38.201 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.201 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.201 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.201 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:00000036": started reading request body.
2025-09-16 22:18:38.201 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:00000036": done reading request body.
2025-09-16 22:18:38.201 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.202 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.202 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.202 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.202 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:38.202 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.202 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.202 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:38.202 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.202 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.202 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.202 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.202 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.202 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.202 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.202 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:38.202 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.202 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:18:38.202 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.202 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.202 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.202 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:38.202 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.203 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:38.203 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.203 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.203 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.203 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.203 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.204 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.204 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.204 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.204 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.204 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.204 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.204 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.204 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.204 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.204 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.204 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.204 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.204 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.204 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.205 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.205 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.205 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.205 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.205 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.205 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.205 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.205 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.205 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.205 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.205 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.205 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.205 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:38.205 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.205 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:18:38.205 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:18:38.205 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:38.205 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:38.206 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.206 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:38.206 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:38.206 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.206 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:38.207 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:18:38.207 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:18:38.207 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:18:38.207 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:18:38.208 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:18:38.208 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:18:38.208 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:18:38.208 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:18:38.208 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:18:38.208 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:18:38.208 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:18:38.208 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:18:38.209 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:18:38.209 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:18:38.860 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:18:38.860 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:18:38.860 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:38.860 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:38.860 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:38.860 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.860 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.860 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 659.7244ms
2025-09-16 22:18:38.867 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:18:38.867 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:18:38.868 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:38.868 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:38.868 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:38.868 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:38.868 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:38.868 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 668.9057ms
2025-09-16 22:18:43.702 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:43.702 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:43.702 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:43.702 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:43.702 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:43.702 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:43.702 +03:00 [INF] Api health check sent.
2025-09-16 22:18:43.702 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:43.702 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:43.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5001ms
2025-09-16 22:18:43.703 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:43.704 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:43.704 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:43.704 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:43.704 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:43.704 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:43.704 +03:00 [INF] Api health check sent.
2025-09-16 22:18:43.704 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:43.704 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:43.704 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3062ms
2025-09-16 22:18:43.705 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:18:43.705 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:18:43.705 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:43.705 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:43.705 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:43.705 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:43.706 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:43.706 +03:00 [INF] Listing all profiles
2025-09-16 22:18:43.706 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:43.706 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:43.706 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:43.706 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.706 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:43.706 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:43.706 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:43.706 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:43.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:43.707 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.707 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:43.707 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.707 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:43.707 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:43.708 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:43.708 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.708 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:43.708 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:43.708 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:43.708 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:43.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:43.709 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:43.709 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.709 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:43.709 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.709 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:43.709 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:43.710 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:43.710 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:43.710 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:43.710 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:43.710 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:43.710 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 4.6534ms
2025-09-16 22:18:43.710 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:18:43.711 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:18:43.711 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:43.711 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:43.711 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:43.711 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:43.711 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:43.711 +03:00 [INF] Listing all profiles
2025-09-16 22:18:43.711 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:43.711 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:43.711 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:43.712 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.712 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:43.712 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:43.712 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:43.712 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:43.712 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:43.712 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:18:43.712 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:43.712 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:18:43.712 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:43.712 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:43.712 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:18:43.712 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:43.712 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.712 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2406ms
2025-09-16 22:18:43.712 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:43.712 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.712 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:43.712 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:43.713 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:43.713 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.713 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:43.713 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:43.713 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:43.713 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:43.713 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:18:43.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:43.714 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:43.714 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:43.714 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:43.714 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:43.714 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:43.714 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:43.714 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:43.714 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.714 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:43.714 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:43.714 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:43.714 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:43.714 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:43.714 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:00000038": started reading request body.
2025-09-16 22:18:43.714 +03:00 [DBG] Connection id "0HNFLAJKRLKQE", Request id "0HNFLAJKRLKQE:00000038": done reading request body.
2025-09-16 22:18:43.715 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:43.715 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:43.715 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:43.715 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:43.715 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:43.715 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 4.2034ms
2025-09-16 22:18:43.715 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:43.715 +03:00 [DBG] Connection id "0HNFLAJKRLKQE" completed keep alive response.
2025-09-16 22:18:43.715 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:43.715 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.3656ms
2025-09-16 22:18:43.717 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:18:43.717 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:43.717 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:43.717 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:43.717 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:43.717 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:43.717 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:43.717 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:43.718 +03:00 [DBG] Connection id "0HNFLAJKRLKQM", Request id "0HNFLAJKRLKQM:00000007": started reading request body.
2025-09-16 22:18:43.718 +03:00 [DBG] Connection id "0HNFLAJKRLKQM", Request id "0HNFLAJKRLKQM:00000007": done reading request body.
2025-09-16 22:18:43.718 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:43.718 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:43.718 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:43.718 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.02ms
2025-09-16 22:18:45.794 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:45.794 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:45.795 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:45.795 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:45.795 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:45.795 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:45.795 +03:00 [INF] Api health check sent.
2025-09-16 22:18:45.795 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:45.795 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:45.795 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2302ms
2025-09-16 22:18:45.799 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:18:45.799 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:18:45.799 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:45.799 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:45.799 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:45.799 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:45.800 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:45.800 +03:00 [INF] Listing all profiles
2025-09-16 22:18:45.800 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:45.800 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:45.800 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:45.800 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:45.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:45.800 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:45.800 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:45.800 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:45.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:45.801 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:45.801 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:45.801 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:45.801 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:45.801 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:45.801 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:45.801 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:45.801 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:45.801 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:45.801 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:45.801 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:45.801 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:45.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:45.801 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:45.801 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:45.801 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:45.801 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:45.802 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:45.802 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:45.802 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:45.802 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:45.802 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:45.802 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:45.802 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 2.6861ms
2025-09-16 22:18:45.804 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:18:45.804 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:45.804 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:45.804 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:45.804 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:45.804 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:45.804 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:45.805 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:45.805 +03:00 [DBG] Connection id "0HNFLAJKRLKQM", Request id "0HNFLAJKRLKQM:0000000A": started reading request body.
2025-09-16 22:18:45.805 +03:00 [DBG] Connection id "0HNFLAJKRLKQM", Request id "0HNFLAJKRLKQM:0000000A": done reading request body.
2025-09-16 22:18:45.805 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:45.805 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:45.805 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:45.805 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.224ms
2025-09-16 22:18:46.695 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:18:46.695 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:18:46.695 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:18:46.695 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:46.695 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:46.695 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:18:46.695 +03:00 [INF] Api health check sent.
2025-09-16 22:18:46.695 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:18:46.695 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:46.695 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3353ms
2025-09-16 22:18:46.698 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:18:46.698 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:18:46.698 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:46.698 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:46.698 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:46.698 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:46.698 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:46.698 +03:00 [INF] Listing all profiles
2025-09-16 22:18:46.699 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:18:46.699 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:18:46.699 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:46.699 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:46.699 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:46.699 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:46.699 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:46.699 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:46.699 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:18:46.699 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:46.699 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:46.699 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:46.699 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:46.699 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:46.699 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:46.699 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:46.699 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:18:46.699 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:46.699 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:18:46.699 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:46.700 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:18:46.700 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:18:46.700 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:46.700 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:18:46.700 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:18:46.700 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:46.700 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:18:46.701 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:18:46.701 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:46.701 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:46.701 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:18:46.701 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:18:46.701 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 2.7375ms
2025-09-16 22:18:46.703 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:18:46.703 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:46.703 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:18:46.703 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:46.703 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:18:46.703 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:18:46.703 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:46.704 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:18:46.704 +03:00 [DBG] Connection id "0HNFLAJKRLKQM", Request id "0HNFLAJKRLKQM:0000000D": started reading request body.
2025-09-16 22:18:46.704 +03:00 [DBG] Connection id "0HNFLAJKRLKQM", Request id "0HNFLAJKRLKQM:0000000D": done reading request body.
2025-09-16 22:18:46.704 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:18:46.704 +03:00 [DBG] Connection id "0HNFLAJKRLKQM" completed keep alive response.
2025-09-16 22:18:46.704 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:18:46.704 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 0.7989ms
2025-09-16 22:19:10.449 +03:00 [INF] This is a test log to file!
2025-09-16 22:19:10.703 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:19:10.715 +03:00 [INF] API configured successfully.
2025-09-16 22:19:10.814 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:19:10.897 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:19:11.822 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:19:11.921 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:11.957 +03:00 [INF] Registered 23 endpoints in 1,390 milliseconds.
2025-09-16 22:19:11.965 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:12.021 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:12.113 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:12.124 +03:00 [DBG] Created DbConnection. (8ms).
2025-09-16 22:19:12.126 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:12.130 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:12.132 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-16 22:19:12.133 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:12.142 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:12.145 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:12.148 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:12.148 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:12.150 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:12.152 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:19:12.156 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:19:12.162 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-16 22:19:12.163 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-16 22:19:12.169 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:19:12.192 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:19:12.194 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:19:12.194 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:19:12.194 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:19:12.194 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:19:12.1937864+00:00');
SELECT changes();
2025-09-16 22:19:12.201 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:19:12.1937864+00:00');
SELECT changes();
2025-09-16 22:19:12.259 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:19:12.262 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:19:12.264 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:19:12.264 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:19:12.264 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:19:12.265 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:19:12.265 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:19:12.267 +03:00 [DBG] Committing transaction.
2025-09-16 22:19:12.268 +03:00 [DBG] Committed transaction.
2025-09-16 22:19:12.269 +03:00 [DBG] Disposing transaction.
2025-09-16 22:19:12.271 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:19:12.271 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:19:12.273 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:12.273 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:12.273 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:12.274 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:12.274 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:12.274 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:12.274 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:19:12.274 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:19:12.274 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:19:12.274 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:19:12.274 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:19:12.276 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:12.276 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:12.276 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:12.283 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:19:12.284 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:19:12.288 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:12.290 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-16 22:19:12.296 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:19:12.296 +03:00 [DBG] Committing transaction.
2025-09-16 22:19:12.296 +03:00 [DBG] Committed transaction.
2025-09-16 22:19:12.297 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:19:12.297 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:19:12.297 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:19:12.297 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:19:12.301 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:19:12.301 +03:00 [DBG] Disposing transaction.
2025-09-16 22:19:12.303 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:12.306 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (3ms).
2025-09-16 22:19:12.307 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:12.307 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:12.307 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:12.307 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:19:12.307 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:19:12.332 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:19:12.363 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:19:12.364 +03:00 [DBG] Hosting starting
2025-09-16 22:19:12.448 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:19:12.449 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:19:12.465 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:19:12.466 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:19:12.466 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:19:12.466 +03:00 [INF] Hosting environment: Development
2025-09-16 22:19:12.466 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:19:12.466 +03:00 [DBG] Hosting started
2025-09-16 22:19:12.668 +03:00 [DBG] Connection id "0HNFLANLM76T5" accepted.
2025-09-16 22:19:12.668 +03:00 [DBG] Connection id "0HNFLANLM76T5" started.
2025-09-16 22:19:12.697 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:19:12.721 +03:00 [DBG] Connection id "0HNFLANLM76T6" accepted.
2025-09-16 22:19:12.722 +03:00 [DBG] Connection id "0HNFLANLM76T6" started.
2025-09-16 22:19:12.738 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:19:12.738 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:12.758 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:12.758 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:12.760 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 22:19:12.763 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:12.778 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:12.802 +03:00 [INF] Getting all users
2025-09-16 22:19:12.836 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 22:19:12.916 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:19:13.155 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:19:13.175 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:13.175 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:13.176 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.178 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.178 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:13.178 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.178 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.178 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:19:13.180 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:19:13.193 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.193 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 12ms reading results.
2025-09-16 22:19:13.195 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.195 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.232 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:13.233 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:13.234 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:13.235 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:19:13.236 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:19:13.236 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:13.236 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.237 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.237 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:13.237 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:13.238 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:13.239 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:13.240 +03:00 [INF] Getting all users
2025-09-16 22:19:13.238 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 542.0193ms
2025-09-16 22:19:13.242 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:19:13.242 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:13.243 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:13.243 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:13.243 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.243 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.243 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:13.243 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:13.243 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.243 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.243 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.243 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:19:13.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:19:13.244 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.244 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:13.244 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.244 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.244 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:13.245 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:13.245 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:13.245 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:19:13.245 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:13.245 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.246 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.246 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.246 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 11.1969ms
2025-09-16 22:19:13.247 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:13.263 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:19:13.269 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:19:13.273 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:19:13.303 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:19:13.309 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:13.309 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:13.310 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.310 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.310 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:13.310 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.311 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.313 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:13.316 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:13.348 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:13.374 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:13.387 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.387 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 71ms reading results.
2025-09-16 22:19:13.387 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.387 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:19:13.389 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:13.389 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.389 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:13.390 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:13.390 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.390 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:13.390 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.390 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.390 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:13.390 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:13.390 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 147.8476ms
2025-09-16 22:19:13.390 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.391 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:13.392 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:19:13.393 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:13.393 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:13.393 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.393 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.393 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:13.393 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.393 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.393 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:13.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:13.394 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:13.394 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:13.394 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.394 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:13.395 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.395 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.395 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.395 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:19:13.395 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:13.395 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.395 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.395 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.8916ms
2025-09-16 22:19:13.435 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:19:13.435 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:19:13.435 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:13.435 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:13.435 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:13.435 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:13.436 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:13.436 +03:00 [INF] Getting all users
2025-09-16 22:19:13.436 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:13.437 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:13.437 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.437 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.437 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:13.437 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.437 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.437 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:19:13.437 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:19:13.437 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.438 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:13.438 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.438 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.438 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:19:13.439 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:19:13.439 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:13.439 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.439 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.439 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 4.6869ms
2025-09-16 22:19:13.478 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:19:13.478 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:13.478 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:13.478 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.479 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:13.479 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:13.479 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.479 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:13.491 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:19:13.491 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:13.491 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:13.491 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.491 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.491 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:13.491 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.491 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:13.491 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:13.492 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:13.492 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:13.492 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:13.492 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.492 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:13.492 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:13.492 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.492 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:13.493 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:19:13.493 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:13.493 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:13.493 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:13.493 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 14.6605ms
2025-09-16 22:19:13.567 +03:00 [DBG] Connection id "0HNFLANLM76T7" accepted.
2025-09-16 22:19:13.567 +03:00 [DBG] Connection id "0HNFLANLM76T7" started.
2025-09-16 22:19:13.570 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:19:13.570 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:19:13.570 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:19:13.570 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:19:13.573 +03:00 [INF] Api health check sent.
2025-09-16 22:19:13.574 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:19:13.574 +03:00 [DBG] Connection id "0HNFLANLM76T7" completed keep alive response.
2025-09-16 22:19:13.574 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 4.0462ms
2025-09-16 22:19:17.585 +03:00 [DBG] Connection id "0HNFLANLM76T7" received FIN.
2025-09-16 22:19:17.586 +03:00 [DBG] Connection id "0HNFLANLM76T7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:19:17.586 +03:00 [DBG] Connection id "0HNFLANLM76T7" disconnecting.
2025-09-16 22:19:17.587 +03:00 [DBG] Connection id "0HNFLANLM76T7" stopped.
2025-09-16 22:19:17.977 +03:00 [DBG] Connection id "0HNFLANLM76T8" accepted.
2025-09-16 22:19:17.978 +03:00 [DBG] Connection id "0HNFLANLM76T8" started.
2025-09-16 22:19:17.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:19:17.978 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:19:17.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:19:17.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:19:17.979 +03:00 [INF] Api health check sent.
2025-09-16 22:19:17.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:19:17.980 +03:00 [DBG] Connection id "0HNFLANLM76T8" completed keep alive response.
2025-09-16 22:19:17.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.8523ms
2025-09-16 22:19:17.996 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:19:17.996 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:17.996 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:17.996 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:17.997 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:17.997 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:17.997 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:17.998 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:17.998 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:19:17.998 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:17.998 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:17.998 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:17.999 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:17.999 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:17.999 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:17.999 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:17.999 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:17.999 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:17.999 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:17.999 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:18.000 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.000 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:18.000 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.000 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.000 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:18.000 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:19:18.000 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:18.000 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.000 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.000 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.2602ms
2025-09-16 22:19:18.003 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:19:18.003 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:18.003 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:19:18.004 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:18.004 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:18.004 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:18.004 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:18.005 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:18.005 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:19:18.006 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:18.006 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:18.006 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.006 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.006 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:18.006 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.006 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.006 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:18.007 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:18.007 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:18.007 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:18.007 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.007 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:18.008 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.008 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.008 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:19:18.008 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:19:18.008 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:18.008 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.008 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.008 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.0389ms
2025-09-16 22:19:18.149 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:19:18.149 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:18.150 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:18.150 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.150 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:18.150 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:18.150 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.152 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:18.157 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:19:18.158 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:18.158 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:18.158 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:18.159 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:18.159 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:18.159 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:18.160 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:18.162 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:19:18.163 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:19:18.179 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:19:18.182 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:18.182 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:18.183 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:18.183 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.183 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:18.183 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.183 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.183 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:18.183 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.183 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.183 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.183 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.183 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:18.183 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.183 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.183 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.183 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:18.183 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.184 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.184 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:18.185 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.185 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.185 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:19:18.185 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:19:18.185 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.185 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.185 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.185 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.187 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:18.187 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.187 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.187 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:18.188 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.188 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.188 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.188 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.188 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.188 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:18.188 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.188 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.193 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:18.194 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:18.194 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.194 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.194 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:18.194 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.194 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:18.194 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.194 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:18.194 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:18.194 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.194 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.194 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.194 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 37.0947ms
2025-09-16 22:19:18.195 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.195 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.195 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:18.195 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.195 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.195 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:19:18.196 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:18.196 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:18.196 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:18.197 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:18.197 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:18.197 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:18.197 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:18.198 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:18.199 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:18.199 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:18.199 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.199 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.199 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:18.199 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.199 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.199 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.200 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.200 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:18.200 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.200 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:18.200 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.200 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.200 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:18.201 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.201 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.201 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:18.201 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.201 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:18.201 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.201 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:18.202 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.202 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:18.202 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:18.202 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.202 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:18.202 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:18.203 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:18.203 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:18.203 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.203 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.203 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 7.4056ms
2025-09-16 22:19:18.203 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:19:18.205 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:19:18.265 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:19:18.271 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.271 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:19:18.272 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:18.272 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:18.272 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.272 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:19:18.272 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:18.272 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:18.272 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:18.272 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:18.272 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.272 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:18.272 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 122.9964ms
2025-09-16 22:19:18.273 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:18.273 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.273 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:18.273 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:18.273 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.4997ms
2025-09-16 22:19:18.274 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:19:18.274 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:18.274 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:18.274 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.275 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:18.275 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:18.275 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.276 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:18.276 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.277 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:18.277 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:18.277 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.4824ms
2025-09-16 22:19:18.279 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:19:18.279 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:18.279 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:18.279 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.279 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:18.279 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:18.279 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.280 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:18.280 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:18.280 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:18.280 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:18.280 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.4693ms
2025-09-16 22:19:19.985 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:19:19.985 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:19:19.985 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:19:19.986 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:19.986 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:19.986 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:19:19.986 +03:00 [INF] Api health check sent.
2025-09-16 22:19:19.986 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:19:19.987 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:19.987 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.6555ms
2025-09-16 22:19:20.030 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:19:20.030 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:19:20.031 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:19:20.031 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:20.031 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:20.031 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:19:20.040 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:20.042 +03:00 [INF] Listing all profiles
2025-09-16 22:19:20.044 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 22:19:20.044 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:19:20.058 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:19:20.062 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:20.062 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:20.062 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:20.062 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.062 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:20.062 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.062 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.062 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:19:20.063 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:19:20.065 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.065 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:19:20.065 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.065 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:20.065 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:20.066 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:20.066 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.066 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:20.066 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.066 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.067 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:20.067 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:20.067 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:20.068 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.068 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:20.068 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.068 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:20.068 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:20.069 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:19:20.070 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:20.070 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:20.070 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:20.070 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:20.070 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 39.6644ms
2025-09-16 22:19:20.074 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:19:20.075 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:19:20.075 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:19:20.076 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:20.076 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:20.076 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:19:20.078 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:20.078 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 3.9322ms
2025-09-16 22:19:20.081 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:19:20.084 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:19:20.085 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:19:20.085 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:19:20.086 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:20.086 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:20.086 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:19:20.088 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:20.098 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000000B": started reading request body.
2025-09-16 22:19:20.098 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000000B": done reading request body.
2025-09-16 22:19:20.111 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:20.112 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:20.112 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:20.112 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:20.113 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.113 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:20.113 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.113 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.113 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:20.113 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:19:20.113 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:20.114 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:20.114 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.114 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:20.114 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.114 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:20.115 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:20.115 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:20.115 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.115 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.115 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:20.115 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:20.115 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.116 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:20.116 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.116 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:20.116 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:20.117 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:20.117 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.117 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:20.117 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.117 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:20.117 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:20.118 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:20.118 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.118 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:20.119 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:20.119 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:20.119 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:20.120 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:19:20.120 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:19:20.122 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:19:20.143 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:19:20.144 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:19:20.145 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:19:20.145 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:19:20.152 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:19:20.895 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:19:20.900 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:19:20.902 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:19:20.902 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:20.902 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:20.902 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:20.902 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:20.902 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 820.6854ms
2025-09-16 22:19:21.981 +03:00 [DBG] Connection id "0HNFLANLM76T8" received FIN.
2025-09-16 22:19:21.981 +03:00 [DBG] Connection id "0HNFLANLM76T8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:19:21.981 +03:00 [DBG] Connection id "0HNFLANLM76T8" disconnecting.
2025-09-16 22:19:21.981 +03:00 [DBG] Connection id "0HNFLANLM76T8" stopped.
2025-09-16 22:19:31.875 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:19:31.875 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:31.875 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:31.875 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:31.875 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:31.875 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:31.875 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:31.876 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:31.877 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:31.877 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:31.877 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:31.877 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.1968ms
2025-09-16 22:19:31.878 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:19:31.878 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:31.878 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:19:31.878 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:31.878 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:31.878 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:31.878 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:31.879 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:31.879 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:19:31.879 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:31.879 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:31.879 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 0.9755ms
2025-09-16 22:19:34.398 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:19:34.398 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:34.398 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:34.398 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:34.399 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:34.399 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:34.399 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:34.399 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:34.400 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:34.400 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:34.400 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:34.400 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.400 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:34.400 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:34.400 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:34.400 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:34.400 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:34.400 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:34.400 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.400 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:34.400 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.400 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:34.400 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:34.401 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:34.401 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.401 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:34.401 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:34.401 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:34.401 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:34.401 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:34.401 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.401 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:34.401 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.401 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:34.402 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:34.402 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:34.402 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:34.402 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:34.402 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:34.402 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:34.402 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.5361ms
2025-09-16 22:19:34.403 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:19:34.403 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:34.403 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:34.403 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:34.403 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:34.403 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:34.403 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:34.404 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:34.404 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:34.404 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:34.404 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:34.405 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.405 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:34.405 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:34.405 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:34.405 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:34.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:34.405 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:34.405 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.405 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:34.405 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.405 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:34.405 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:34.405 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:34.406 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.406 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:34.406 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:34.406 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:34.406 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:34.406 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:34.406 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.406 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:34.406 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:34.406 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:34.406 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:34.406 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:34.407 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:34.407 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:34.407 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:34.407 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:34.407 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.6748ms
2025-09-16 22:19:36.784 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:19:36.784 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:36.784 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:36.784 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:36.784 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:36.784 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:36.784 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:36.785 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:36.785 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:36.785 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:36.786 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:36.786 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.786 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:36.786 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:36.786 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:36.786 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:36.786 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:36.786 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:36.786 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.786 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:36.786 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.786 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:36.786 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:36.787 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:36.787 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.787 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:36.787 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:36.787 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:36.787 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:36.787 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:36.787 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.787 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:36.787 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.787 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:36.787 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:36.788 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:36.788 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:36.788 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:36.788 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:36.788 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:36.788 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 4.1294ms
2025-09-16 22:19:36.789 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:19:36.789 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:36.789 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:36.789 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:36.789 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:36.789 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:36.789 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:36.790 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:36.790 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:36.790 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:36.790 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:36.791 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.791 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:36.791 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:36.791 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:36.791 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:36.791 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:36.791 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:36.791 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.792 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:36.792 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.792 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:36.792 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:36.792 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:36.792 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.792 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:36.792 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:36.792 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:36.792 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:36.792 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:36.792 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.792 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:36.792 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:36.793 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:36.793 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:36.793 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:36.793 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:36.793 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:36.793 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:36.793 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:36.793 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 4.4204ms
2025-09-16 22:19:37.863 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:19:37.863 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:37.863 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:37.863 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:37.864 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:37.864 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:37.864 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:37.864 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:37.865 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:37.865 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:37.865 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:37.865 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:37.865 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:37.865 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:37.865 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:37.865 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:37.865 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:37.865 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.865 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:37.865 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.865 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:37.865 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:37.866 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:37.866 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.866 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:37.866 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:37.866 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:37.866 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:37.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:37.866 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.866 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:37.866 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.866 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:37.866 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:37.867 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:37.867 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:37.867 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:37.867 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:37.867 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:37.867 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.4006ms
2025-09-16 22:19:37.868 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:19:37.868 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:37.868 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:19:37.868 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:37.868 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:37.868 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:37.868 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:37.868 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:19:37.869 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:19:37.869 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:19:37.869 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:37.869 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.869 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:37.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:37.869 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:37.869 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:37.869 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:37.870 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:19:37.870 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.870 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:37.870 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.870 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:37.870 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:37.870 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:37.870 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.870 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:19:37.870 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:37.870 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:19:37.870 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:37.870 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:19:37.871 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.871 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:19:37.871 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:19:37.871 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:37.871 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:19:37.871 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:19:37.871 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:37.871 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:19:37.871 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:19:37.871 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:19:37.871 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.4397ms
2025-09-16 22:19:50.906 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:19:50.906 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:19:50.906 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:19:50.906 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:19:50.906 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:19:50.906 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:19:50.906 +03:00 [INF] Api health check sent.
2025-09-16 22:19:50.906 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:19:50.907 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:19:50.907 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4149ms
2025-09-16 22:20:02.263 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:20:02.263 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:02.263 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:20:02.263 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:02.263 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:02.263 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:20:02.264 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:02.264 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.6488ms
2025-09-16 22:20:02.265 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:20:02.265 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:02.265 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:02.265 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:02.265 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:02.265 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:02.265 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:02.265 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:02.265 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000016": started reading request body.
2025-09-16 22:20:02.265 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000016": done reading request body.
2025-09-16 22:20:02.266 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:20:02.266 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:20:02.266 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:20:02.266 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:02.266 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.266 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:02.266 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:02.266 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:02.266 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:20:02.266 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:20:02.266 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:02.266 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:02.266 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.266 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:02.266 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.267 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:02.267 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:02.267 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.267 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:02.267 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:02.267 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:02.267 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:02.267 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:02.267 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.267 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:02.267 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.267 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:02.268 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:20:02.268 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:02.268 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.268 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:02.268 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:02.268 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:02.268 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:02.268 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:02.269 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.269 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:02.269 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:02.269 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:02.269 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:20:02.269 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:20:02.269 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:20:02.270 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:20:02.270 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:20:02.270 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 22:20:02.270 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:20:02.270 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:20:02.270 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:20:03.033 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:20:03.034 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:20:03.034 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:03.034 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:03.034 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:03.034 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:03.034 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:03.034 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 769.3497ms
2025-09-16 22:20:10.635 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:20:10.635 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:10.635 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:20:10.635 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:10.635 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:10.636 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:20:10.636 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:10.636 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2548ms
2025-09-16 22:20:10.637 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:20:10.637 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:10.637 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:10.637 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:10.637 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:10.637 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:10.637 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:10.637 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:10.637 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000018": started reading request body.
2025-09-16 22:20:10.637 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000018": done reading request body.
2025-09-16 22:20:10.637 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:10.637 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:10.637 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:10.637 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 0.9266ms
2025-09-16 22:20:13.388 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:20:13.388 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:20:13.388 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:20:13.388 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:13.388 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:13.397 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:20:13.397 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:13.397 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 9.5509ms
2025-09-16 22:20:13.398 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 272
2025-09-16 22:20:13.398 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:20:13.398 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:20:13.398 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:20:13.398 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:13.398 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:13.398 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:20:13.399 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:13.407 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000001A": started reading request body.
2025-09-16 22:20:13.407 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000001A": done reading request body.
2025-09-16 22:20:13.412 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:20:13.412 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:20:13.413 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:13.413 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.413 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:13.413 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:13.413 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:13.413 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:13.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:13.413 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:13.413 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.413 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:13.413 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.413 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:13.413 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:20:13.414 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:13.414 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.414 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:13.414 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:13.414 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:13.414 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:13.414 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:13.415 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.415 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:13.415 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.415 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:13.415 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:20:13.415 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 22:20:13.423 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 22:20:13.423 +03:00 [DBG] SQL: SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE';
2025-09-16 22:20:13.427 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:20:13.649 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 22:20:13.721 +03:00 [INF] Query execution finished in 296 ms, returned 3 rows
2025-09-16 22:20:13.725 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:13.725 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.725 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:13.725 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:13.725 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:13.725 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:13.726 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:13.726 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.726 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:13.726 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.726 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:13.762 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:13.765 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:13.768 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:20:13.787 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:13.790 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:20:13.794 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:20:13.794 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:20:13.794 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:20:13.830 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:13.830 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.830 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:13.830 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:13.830 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:13.831 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 177), @p3='?' (Size = 81), @p4='?' (DbType = DateTime), @p5='?' (Size = 31)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:20:13.839 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 177), @p3='?' (Size = 81), @p4='?' (DbType = DateTime), @p5='?' (Size = 31)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:20:13.841 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.841 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:20:13.841 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:13.842 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:13.847 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:13.848 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:20:13.850 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-16T19:20:13.7342841Z","$type":"QueryAddedEvent"}
2025-09-16 22:20:13.852 +03:00 [INF] Saved query to DB for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:20:13.854 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:20:13.854 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:13.854 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:13.854 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:13.854 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:13.854 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 455.8814ms
2025-09-16 22:20:14.857 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:20:14.857 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:20:14.857 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:20:14.857 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:20:14.857 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:14.857 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:14.857 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:20:14.858 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:14.858 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:20:14.858 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:20:14.858 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:14.858 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:14.858 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:14.858 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:14.858 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:14.858 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:14.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:14.859 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:14.859 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:14.859 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:14.859 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:20:14.859 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:14.859 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:14.859 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:20:14.860 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:14.860 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:14.860 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:14.860 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:14.860 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:14.860 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:14.860 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:20:14.860 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:14.860 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:14.860 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:14.860 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:14.860 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:20:14.861 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:20:14.861 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:14.861 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:14.861 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:14.861 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:14.861 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 4.423ms
2025-09-16 22:20:20.906 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:20:20.906 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:20:20.906 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:20:20.906 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:20.906 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:20.906 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:20:20.907 +03:00 [INF] Api health check sent.
2025-09-16 22:20:20.907 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:20:20.907 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:20.907 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3594ms
2025-09-16 22:20:44.570 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:20:44.570 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:20:44.570 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:20:44.570 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:44.570 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:44.570 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:20:44.570 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:44.570 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 0.4022ms
2025-09-16 22:20:44.571 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 81
2025-09-16 22:20:44.572 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:20:44.572 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:20:44.572 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:20:44.572 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:44.572 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:44.572 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:20:44.572 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:44.574 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000001E": started reading request body.
2025-09-16 22:20:44.574 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000001E": done reading request body.
2025-09-16 22:20:44.576 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:20:44.577 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:20:44.577 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:44.577 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.577 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:44.577 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:44.577 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:44.577 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:20:44.577 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:20:44.577 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:44.577 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:44.578 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.578 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:44.578 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.578 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:44.579 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:44.579 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:20:44.580 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:20:44.580 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:20:44.580 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:20:44.581 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:20:44.585 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:44.585 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.586 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:44.586 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:44.586 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:44.586 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:20:44.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:20:44.591 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.591 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-16 22:20:44.591 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.591 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:44.592 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:44.592 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:20:44.593 +03:00 [INF] AI mode changed to "Local" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:20:44.5783927Z"
2025-09-16 22:20:44.593 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:20:44.593 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:44.593 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:44.593 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:44.593 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:44.593 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 21.63ms
2025-09-16 22:20:44.640 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:20:44.640 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:20:44.640 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:20:44.640 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:20:44.640 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:44.640 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:44.640 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:20:44.640 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:44.640 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:20:44.641 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:20:44.641 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:20:44.641 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:44.641 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.641 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:20:44.641 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:44.641 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:20:44.641 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:20:44.641 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:20:44.641 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:44.641 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:20:44.641 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.641 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:20:44.641 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:20:44.641 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:44.642 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:20:44.642 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:44.642 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:44.642 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:20:44.642 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:20:44.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 2.1749ms
2025-09-16 22:20:44.950 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:20:44.950 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:20:44.950 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:20:44.950 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:20:44.950 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:20:44.950 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:44.950 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:44.950 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:20:44.952 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:20:44.952 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:44.952 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 1.5243ms
2025-09-16 22:20:45.145 +03:00 [DBG] Connection id "0HNFLANLM76T9" accepted.
2025-09-16 22:20:45.146 +03:00 [DBG] Connection id "0HNFLANLM76T9" started.
2025-09-16 22:20:45.146 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:20:45.146 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:20:45.146 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:20:45.146 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:20:45.146 +03:00 [INF] Api health check sent.
2025-09-16 22:20:45.146 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:20:45.146 +03:00 [DBG] Connection id "0HNFLANLM76T9" completed keep alive response.
2025-09-16 22:20:45.146 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3995ms
2025-09-16 22:20:46.155 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:20:46.156 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:20:46.156 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:20:46.156 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:46.156 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:46.156 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:20:46.156 +03:00 [INF] Api health check sent.
2025-09-16 22:20:46.156 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:20:46.156 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:46.156 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4725ms
2025-09-16 22:20:46.406 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:20:46.406 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:20:46.406 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:20:46.406 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:20:46.406 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:20:46.406 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:46.406 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:46.406 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:20:46.406 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:20:46.407 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:46.407 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.7291ms
2025-09-16 22:20:49.148 +03:00 [DBG] Connection id "0HNFLANLM76T9" received FIN.
2025-09-16 22:20:49.148 +03:00 [DBG] Connection id "0HNFLANLM76T9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:20:49.148 +03:00 [DBG] Connection id "0HNFLANLM76T9" disconnecting.
2025-09-16 22:20:49.149 +03:00 [DBG] Connection id "0HNFLANLM76T9" stopped.
2025-09-16 22:20:50.906 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:20:50.906 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:20:50.906 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:20:50.906 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:50.906 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:50.906 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:20:50.906 +03:00 [INF] Api health check sent.
2025-09-16 22:20:50.906 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:20:50.906 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:50.906 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4081ms
2025-09-16 22:20:52.860 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:20:52.860 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:52.860 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:20:52.860 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:52.861 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:52.861 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:20:52.861 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:52.861 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2147ms
2025-09-16 22:20:52.861 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:20:52.862 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:52.862 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:52.862 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:52.862 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:52.862 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:52.862 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:52.862 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:52.862 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000025": started reading request body.
2025-09-16 22:20:52.862 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000025": done reading request body.
2025-09-16 22:20:52.862 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:52.862 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:52.863 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:52.863 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.0833ms
2025-09-16 22:20:56.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:20:56.609 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:56.610 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:20:56.610 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:56.610 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:56.610 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:56.610 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:56.610 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:56.610 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000026": started reading request body.
2025-09-16 22:20:56.610 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000026": done reading request body.
2025-09-16 22:20:56.610 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:20:56.611 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:56.611 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:56.611 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.1869ms
2025-09-16 22:20:59.341 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:20:59.341 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:20:59.341 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:20:59.341 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:59.341 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:59.341 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:20:59.341 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:59.341 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.1997ms
2025-09-16 22:20:59.342 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 272
2025-09-16 22:20:59.342 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:20:59.342 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:20:59.342 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:20:59.342 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:20:59.342 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:20:59.342 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:20:59.343 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:20:59.343 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000028": started reading request body.
2025-09-16 22:20:59.343 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000028": done reading request body.
2025-09-16 22:20:59.343 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:20:59.343 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:20:59.343 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:20:59.343 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 0.9831ms
2025-09-16 22:21:00.364 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:21:00.364 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:21:00.364 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:21:00.364 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:21:00.364 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:00.364 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:00.364 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:21:00.365 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:00.365 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:00.365 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:00.365 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:00.365 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:00.365 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:00.365 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:00.365 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:00.365 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:21:00.366 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:21:00.366 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:00.366 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:00.366 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:00.366 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:00.366 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:00.366 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:00.366 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:21:00.367 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:00.367 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:00.367 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:00.367 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:00.367 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:00.367 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:21:00.367 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:21:00.367 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:00.367 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:00.367 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:00.367 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:00.368 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:21:00.368 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:21:00.368 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:00.368 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:00.368 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:00.368 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:00.368 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.9893ms
2025-09-16 22:21:14.094 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:21:14.094 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:14.094 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:21:14.094 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:14.094 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:14.094 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:21:14.094 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:14.094 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.4807ms
2025-09-16 22:21:14.095 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 157
2025-09-16 22:21:14.095 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:14.095 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:14.095 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:14.095 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:14.095 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:14.095 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:14.096 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:14.096 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000002B": started reading request body.
2025-09-16 22:21:14.096 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000002B": done reading request body.
2025-09-16 22:21:14.096 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:21:14.096 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:14.096 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:14.096 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:14.096 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.096 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:14.096 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:14.096 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:14.096 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:14.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:14.097 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:14.097 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:14.097 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.097 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:14.097 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.097 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:14.098 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:14.098 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.098 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:14.098 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:14.098 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:14.098 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:21:14.098 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:21:14.098 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:14.098 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.098 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:14.098 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.098 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:14.099 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:21:14.099 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:14.099 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.099 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:14.099 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:14.099 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:14.099 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:21:14.099 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:21:14.099 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.099 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:14.099 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:14.099 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:14.099 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:21:14.100 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:21:14.100 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:21:14.100 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:21:14.100 +03:00 [INF] Local LLM is configured
2025-09-16 22:21:14.100 +03:00 [INF] Converting natural language to SQL. User query: show all products
2025-09-16 22:21:14.100 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:21:14.100 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:21:14.101 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:21:20.908 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:21:20.908 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:21:20.908 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:21:20.908 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:20.908 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:20.908 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:21:20.908 +03:00 [INF] Api health check sent.
2025-09-16 22:21:20.909 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:21:20.909 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:21:20.909 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3834ms
2025-09-16 22:21:21.144 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:21:21.144 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:21:21.144 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:21:21.144 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:21:21.144 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:21:21.145 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:21.145 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:21.145 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:21:21.145 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:21:21.145 +03:00 [DBG] Connection id "0HNFLANLM76T6" completed keep alive response.
2025-09-16 22:21:21.145 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3553ms
2025-09-16 22:21:26.328 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:21:26.334 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:21:26.335 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:26.335 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:26.335 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:26.335 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:26.335 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:26.335 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 12239.8215ms
2025-09-16 22:21:33.513 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:21:33.513 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:33.513 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:21:33.513 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:33.513 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:33.514 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:21:33.514 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:33.514 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.4194ms
2025-09-16 22:21:33.515 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:21:33.515 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:33.515 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:33.515 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:33.515 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:33.515 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:33.515 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:33.515 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:33.516 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000002D": started reading request body.
2025-09-16 22:21:33.516 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000002D": done reading request body.
2025-09-16 22:21:33.516 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:33.516 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:33.516 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:33.516 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.6016ms
2025-09-16 22:21:42.244 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:21:42.244 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:21:42.244 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:21:42.244 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:42.244 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:42.244 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:21:42.244 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:42.244 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 0.2397ms
2025-09-16 22:21:42.245 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 136
2025-09-16 22:21:42.245 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:21:42.245 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:21:42.245 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:21:42.245 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:42.245 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:42.245 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:21:42.245 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:42.246 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000002F": started reading request body.
2025-09-16 22:21:42.246 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:0000002F": done reading request body.
2025-09-16 22:21:42.246 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:42.246 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:42.246 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:42.246 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.246 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:42.246 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:42.246 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:42.246 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:42.246 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:42.246 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:42.247 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:42.247 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.247 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:42.247 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.247 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:42.247 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:42.247 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:21:42.247 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:21:42.247 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:21:42.247 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:21:42.247 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:21:42.247 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:42.247 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.247 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:42.247 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:42.247 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:42.248 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:21:42.248 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:21:42.252 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.252 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-16 22:21:42.252 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.252 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:42.252 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:42.252 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:21:42.253 +03:00 [INF] AI mode changed to "Groq" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:21:42.2471925Z"
2025-09-16 22:21:42.254 +03:00 [INF] API key changed for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:21:42.2473413Z"
2025-09-16 22:21:42.254 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:21:42.254 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:42.254 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:42.254 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:42.254 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:42.255 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 9.7105ms
2025-09-16 22:21:42.307 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:21:42.307 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:21:42.307 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:21:42.307 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:42.307 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:42.307 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:42.307 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:42.307 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:42.308 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:21:42.308 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:42.308 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:42.308 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:42.308 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.308 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:42.308 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:42.308 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:42.308 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:42.308 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:42.308 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:42.308 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:42.308 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.308 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:42.308 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:42.308 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:42.309 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:42.309 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:42.309 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:42.309 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:42.309 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:42.309 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 1.9098ms
2025-09-16 22:21:42.815 +03:00 [DBG] Connection id "0HNFLANLM76TA" accepted.
2025-09-16 22:21:42.815 +03:00 [DBG] Connection id "0HNFLANLM76TA" started.
2025-09-16 22:21:42.815 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:21:42.815 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:21:42.815 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:21:42.816 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:21:42.816 +03:00 [INF] Api health check sent.
2025-09-16 22:21:42.816 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:21:42.816 +03:00 [DBG] Connection id "0HNFLANLM76TA" completed keep alive response.
2025-09-16 22:21:42.816 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.291ms
2025-09-16 22:21:46.817 +03:00 [DBG] Connection id "0HNFLANLM76TA" received FIN.
2025-09-16 22:21:46.817 +03:00 [DBG] Connection id "0HNFLANLM76TA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:21:46.817 +03:00 [DBG] Connection id "0HNFLANLM76TA" disconnecting.
2025-09-16 22:21:46.817 +03:00 [DBG] Connection id "0HNFLANLM76TA" stopped.
2025-09-16 22:21:50.158 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:21:50.158 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:50.158 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:21:50.158 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:50.158 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:50.158 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:21:50.158 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:50.158 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3891ms
2025-09-16 22:21:50.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:21:50.159 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:50.159 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:21:50.159 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:50.159 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:50.159 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:50.159 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:50.160 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:50.160 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000032": started reading request body.
2025-09-16 22:21:50.160 +03:00 [DBG] Connection id "0HNFLANLM76T5", Request id "0HNFLANLM76T5:00000032": done reading request body.
2025-09-16 22:21:50.160 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:21:50.160 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:50.160 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:50.160 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.0009ms
2025-09-16 22:21:50.906 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:21:50.906 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:21:50.906 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:21:50.906 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:50.906 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:50.906 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:21:50.906 +03:00 [INF] Api health check sent.
2025-09-16 22:21:50.906 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:21:50.906 +03:00 [DBG] Connection id "0HNFLANLM76T5" completed keep alive response.
2025-09-16 22:21:50.907 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3504ms
2025-09-16 22:21:56.693 +03:00 [INF] This is a test log to file!
2025-09-16 22:21:56.894 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:21:56.897 +03:00 [INF] API configured successfully.
2025-09-16 22:21:56.955 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:21:57.001 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:21:57.439 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:21:57.501 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:57.521 +03:00 [INF] Registered 23 endpoints in 719 milliseconds.
2025-09-16 22:21:57.526 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:57.567 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:57.648 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:57.657 +03:00 [DBG] Created DbConnection. (8ms).
2025-09-16 22:21:57.659 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:57.663 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:57.664 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:21:57.665 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:57.672 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:57.676 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:57.680 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:57.680 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:57.682 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:57.683 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:21:57.687 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:21:57.690 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 22:21:57.692 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-16 22:21:57.696 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:21:57.721 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:21:57.724 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:21:57.724 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:21:57.724 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:21:57.724 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:21:57.7240582+00:00');
SELECT changes();
2025-09-16 22:21:57.733 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:21:57.7240582+00:00');
SELECT changes();
2025-09-16 22:21:57.780 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:21:57.783 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:21:57.784 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:21:57.784 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:21:57.784 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:21:57.784 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:21:57.785 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:21:57.785 +03:00 [DBG] Committing transaction.
2025-09-16 22:21:57.786 +03:00 [DBG] Committed transaction.
2025-09-16 22:21:57.787 +03:00 [DBG] Disposing transaction.
2025-09-16 22:21:57.788 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:21:57.788 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:21:57.789 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:57.789 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:57.790 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:57.790 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:57.790 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:57.790 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:57.790 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:21:57.790 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:21:57.790 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:21:57.790 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:21:57.790 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:21:57.791 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:57.791 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:57.791 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:57.792 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:21:57.792 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:21:57.795 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:57.796 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:21:57.798 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:21:57.798 +03:00 [DBG] Committing transaction.
2025-09-16 22:21:57.798 +03:00 [DBG] Committed transaction.
2025-09-16 22:21:57.798 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:21:57.798 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:21:57.798 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:21:57.798 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:21:57.802 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:21:57.802 +03:00 [DBG] Disposing transaction.
2025-09-16 22:21:57.803 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:57.806 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:21:57.806 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:57.806 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:57.806 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:57.806 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:21:57.806 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:21:57.822 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:21:57.837 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:21:57.839 +03:00 [DBG] Hosting starting
2025-09-16 22:21:57.890 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:21:57.891 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:21:57.902 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:21:57.903 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:21:57.903 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:21:57.903 +03:00 [INF] Hosting environment: Development
2025-09-16 22:21:57.903 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:21:57.904 +03:00 [DBG] Hosting started
2025-09-16 22:21:57.946 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" accepted.
2025-09-16 22:21:57.947 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" started.
2025-09-16 22:21:57.969 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:21:57.991 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" accepted.
2025-09-16 22:21:57.992 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" started.
2025-09-16 22:21:58.013 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:21:58.014 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.032 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:58.032 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:58.033 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 22:21:58.035 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.049 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:58.067 +03:00 [INF] Getting all users
2025-09-16 22:21:58.096 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 22:21:58.170 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:21:58.414 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:21:58.432 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:58.433 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:58.433 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.434 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.434 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:58.434 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.434 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.435 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:21:58.436 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:21:58.448 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.449 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 12ms reading results.
2025-09-16 22:21:58.450 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.451 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.487 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.487 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:21:58.488 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:58.489 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:21:58.490 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:21:58.490 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.490 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.491 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.492 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:58.492 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:58.492 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.493 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:58.493 +03:00 [INF] Getting all users
2025-09-16 22:21:58.492 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 524.4596ms
2025-09-16 22:21:58.495 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:58.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:21:58.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:21:58.495 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:58.495 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.495 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.495 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:58.495 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.495 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.495 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:21:58.496 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:21:58.496 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:21:58.497 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.496 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.497 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:58.497 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.497 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.498 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.498 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" completed keep alive response.
2025-09-16 22:21:58.498 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:58.498 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.498 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:58.498 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:58.498 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.498 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 9.7297ms
2025-09-16 22:21:58.499 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.500 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:58.520 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:21:58.528 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:21:58.530 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:21:58.565 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:21:58.593 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:58.593 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:58.594 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.594 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.594 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:58.594 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.596 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-16 22:21:58.599 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:58.602 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:58.631 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:58.657 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:58.680 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.680 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 77ms reading results.
2025-09-16 22:21:58.680 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.680 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.681 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.681 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:21:58.682 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:21:58.682 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:21:58.682 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:58.682 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:21:58.682 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.682 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.682 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.682 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 186.8069ms
2025-09-16 22:21:58.682 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:58.682 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:58.682 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.682 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:58.683 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:21:58.683 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:58.683 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:58.683 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.683 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.683 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:58.683 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.683 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.683 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:58.684 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:58.684 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:58.685 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:58.685 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.685 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:21:58.685 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.685 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.686 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.686 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" completed keep alive response.
2025-09-16 22:21:58.686 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:58.686 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.686 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.686 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.3839ms
2025-09-16 22:21:58.732 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:21:58.733 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:21:58.733 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.734 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:58.734 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:58.734 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.735 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:58.736 +03:00 [INF] Getting all users
2025-09-16 22:21:58.736 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:58.736 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:58.736 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.736 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.736 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:58.736 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.736 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.736 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:21:58.737 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:21:58.737 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.738 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:58.738 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.739 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.739 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:21:58.739 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" completed keep alive response.
2025-09-16 22:21:58.739 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:58.740 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.740 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.740 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 8.0744ms
2025-09-16 22:21:58.761 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:21:58.761 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:21:58.761 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:21:58.761 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.761 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:21:58.761 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:21:58.761 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.762 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:21:58.762 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:21:58.763 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:21:58.763 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:21:58.763 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.764 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.764 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:21:58.764 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.764 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:21:58.764 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:58.765 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:21:58.765 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:58.765 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:21:58.765 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.765 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:21:58.765 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:21:58.765 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.766 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:21:58.766 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" completed keep alive response.
2025-09-16 22:21:58.766 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:21:58.766 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:21:58.766 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:21:58.766 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.1299ms
2025-09-16 22:21:58.838 +03:00 [DBG] Connection id "0HNFLAP6UE4OA" accepted.
2025-09-16 22:21:58.838 +03:00 [DBG] Connection id "0HNFLAP6UE4OA" started.
2025-09-16 22:21:58.840 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:21:58.841 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:21:58.841 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:21:58.841 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:21:58.845 +03:00 [INF] Api health check sent.
2025-09-16 22:21:58.845 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:21:58.845 +03:00 [DBG] Connection id "0HNFLAP6UE4OA" completed keep alive response.
2025-09-16 22:21:58.845 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 5.0458ms
2025-09-16 22:22:02.855 +03:00 [DBG] Connection id "0HNFLAP6UE4OA" received FIN.
2025-09-16 22:22:02.855 +03:00 [DBG] Connection id "0HNFLAP6UE4OA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:22:02.856 +03:00 [DBG] Connection id "0HNFLAP6UE4OA" disconnecting.
2025-09-16 22:22:02.857 +03:00 [DBG] Connection id "0HNFLAP6UE4OA" stopped.
2025-09-16 22:22:02.857 +03:00 [DBG] Connection id "0HNFLAP6UE4OB" accepted.
2025-09-16 22:22:02.857 +03:00 [DBG] Connection id "0HNFLAP6UE4OB" started.
2025-09-16 22:22:02.858 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:22:02.858 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:22:02.858 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:22:02.858 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:22:02.858 +03:00 [INF] Api health check sent.
2025-09-16 22:22:02.859 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:22:02.859 +03:00 [DBG] Connection id "0HNFLAP6UE4OB" completed keep alive response.
2025-09-16 22:22:02.859 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.0337ms
2025-09-16 22:22:02.862 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:22:02.862 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:22:02.862 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:22:02.863 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:02.863 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:02.863 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:02.863 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:02.864 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:02.864 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:22:02.864 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:02.864 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:02.864 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:02.864 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.864 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:02.864 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.864 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.865 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:02.865 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:02.865 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:02.865 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:02.865 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.865 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:02.865 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.865 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:02.866 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:02.866 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" completed keep alive response.
2025-09-16 22:22:02.866 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:02.866 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:02.866 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:02.866 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.7311ms
2025-09-16 22:22:02.870 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:22:02.870 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:22:02.870 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:22:02.870 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:02.870 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:02.870 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:02.870 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:02.871 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:02.871 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:22:02.871 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:02.871 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:02.872 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:02.872 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.872 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:02.872 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.872 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.872 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:02.873 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:02.873 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:02.874 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:02.874 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.874 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:22:02.874 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.874 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:02.874 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:02.874 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" completed keep alive response.
2025-09-16 22:22:02.875 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:02.875 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:02.875 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:02.875 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.1405ms
2025-09-16 22:22:02.944 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:22:02.944 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:22:02.944 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:22:02.945 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:02.945 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:02.945 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:02.945 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:02.947 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:22:02.947 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:22:02.947 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:22:02.948 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:22:02.948 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:02.948 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:02.948 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:22:02.948 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:02.948 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:02.953 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:22:02.954 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:22:02.970 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:22:02.974 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:02.974 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:02.974 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:02.974 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:02.974 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:02.974 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:02.974 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.974 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:02.974 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.974 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.974 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:02.974 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.974 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:02.974 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:02.974 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.974 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:02.975 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:02.976 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:02.976 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:02.984 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:02.984 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:02.990 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.990 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.990 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 15ms reading results.
2025-09-16 22:22:02.990 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 14ms reading results.
2025-09-16 22:22:02.990 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.990 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.990 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:02.990 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:02.992 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:02.992 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:02.993 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.993 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:02.993 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.993 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.993 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:02.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:02.994 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.994 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:02.994 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.994 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:02.998 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:02.999 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:02.999 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:02.999 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:02.999 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:02.999 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.000 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:03.000 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:03.001 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:03.001 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.001 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:03.001 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.001 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.002 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:03.002 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:22:03.002 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:03.002 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:03.003 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:03.003 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.003 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 55.9156ms
2025-09-16 22:22:03.003 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:22:03.004 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:22:03.005 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:22:03.005 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:22:03.005 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:03.005 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:03.005 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:22:03.006 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:03.007 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:03.008 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:03.008 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:03.008 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.008 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:03.008 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.008 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.008 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:03.008 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:03.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:03.009 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:03.009 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.009 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:03.009 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.009 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.009 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:22:03.009 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:03.010 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:03.010 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.010 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:03.010 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.010 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.010 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:03.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:03.010 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:22:03.010 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.010 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:03.011 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.011 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.011 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:03.012 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:22:03.012 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:03.012 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:03.012 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:03.012 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.012 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 8.9773ms
2025-09-16 22:22:03.074 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:22:03.079 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.079 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:22:03.080 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" completed keep alive response.
2025-09-16 22:22:03.080 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:03.080 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:03.080 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.080 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:22:03.080 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 135.9251ms
2025-09-16 22:22:03.080 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:22:03.080 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.080 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:03.080 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:03.080 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.081 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:03.082 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.082 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:03.082 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:03.082 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 3.2637ms
2025-09-16 22:22:03.083 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:22:03.083 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:22:03.083 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:22:03.083 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.083 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:03.083 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:03.083 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.084 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:03.085 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.085 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:03.085 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:03.085 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.3848ms
2025-09-16 22:22:03.087 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:22:03.087 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:22:03.087 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:22:03.087 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.087 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:03.087 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:03.087 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.088 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:03.089 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:22:03.089 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:03.089 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:03.089 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.7227ms
2025-09-16 22:22:03.952 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:22:03.952 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:22:03.952 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:22:03.952 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:03.952 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:03.952 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:22:03.953 +03:00 [INF] Api health check sent.
2025-09-16 22:22:03.953 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:22:03.953 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:03.953 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.1055ms
2025-09-16 22:22:03.955 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:22:03.955 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:22:03.955 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:22:03.955 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:03.955 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:03.956 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:22:03.964 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:03.967 +03:00 [INF] Listing all profiles
2025-09-16 22:22:03.969 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 22:22:03.970 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:22:03.986 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:22:03.988 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:03.989 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:03.989 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:03.989 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.989 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:03.989 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.989 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.989 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:22:03.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:22:03.991 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.991 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:22:03.991 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.991 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.991 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:03.991 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:03.991 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.991 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:03.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.991 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:03.991 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:03.992 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:03.992 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:03.992 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:03.992 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.992 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:03.992 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:03.992 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.993 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:03.994 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:22:03.994 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:03.994 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:03.994 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:03.994 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:03.994 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 39.0087ms
2025-09-16 22:22:03.996 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:22:03.997 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:03.997 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:22:03.997 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:03.997 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:03.997 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:22:03.997 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:03.997 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.9921ms
2025-09-16 22:22:03.999 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:22:03.999 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:04.000 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:04.000 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:04.000 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:04.000 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:04.000 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:04.001 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:04.007 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000000B": started reading request body.
2025-09-16 22:22:04.008 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000000B": done reading request body.
2025-09-16 22:22:04.018 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:04.019 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:04.019 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:04.019 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:04.019 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.019 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:04.019 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:04.019 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:04.019 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:04.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:04.020 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:04.020 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:04.020 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.020 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:04.020 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.020 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:04.021 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:04.021 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.021 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:04.021 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:04.021 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:04.021 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:04.021 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:04.022 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:04.022 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.022 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:04.022 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.022 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:04.022 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:04.022 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:04.022 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.023 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:04.023 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:04.023 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:04.023 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:04.023 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:04.023 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.023 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:04.023 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:04.023 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:04.023 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:04.024 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:22:04.024 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:22:04.025 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:22:04.043 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:22:04.043 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:22:04.044 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:22:04.044 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:22:04.050 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:22:04.746 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:22:04.751 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:22:04.753 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:04.753 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:04.754 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:04.754 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:04.754 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:04.754 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 755.0345ms
2025-09-16 22:22:06.861 +03:00 [DBG] Connection id "0HNFLAP6UE4OB" received FIN.
2025-09-16 22:22:06.861 +03:00 [DBG] Connection id "0HNFLAP6UE4OB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:22:06.861 +03:00 [DBG] Connection id "0HNFLAP6UE4OB" disconnecting.
2025-09-16 22:22:06.861 +03:00 [DBG] Connection id "0HNFLAP6UE4OB" stopped.
2025-09-16 22:22:08.844 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:22:08.844 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:08.844 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:08.844 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:08.844 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:08.844 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:08.844 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:08.845 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:08.845 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000000C": started reading request body.
2025-09-16 22:22:08.845 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000000C": done reading request body.
2025-09-16 22:22:08.845 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:08.846 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:08.846 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:08.846 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:08.846 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.846 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:08.846 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:08.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:08.846 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:08.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:08.846 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:08.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:08.846 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.846 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:08.846 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.846 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:08.847 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:08.847 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.847 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:08.847 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:08.847 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:08.847 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:08.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:08.847 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:08.847 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.847 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:08.848 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.848 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:08.848 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:08.849 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:08.849 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.849 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:08.849 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:08.849 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:08.849 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:08.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:08.849 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.849 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:08.849 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:08.849 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:08.850 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:08.850 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:22:08.850 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:22:08.851 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:22:08.851 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:22:08.851 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 22:22:08.851 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:22:08.851 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:22:08.851 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:22:09.622 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:22:09.622 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:22:09.622 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:09.622 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:09.622 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:09.622 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:09.622 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:09.622 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 778.6104ms
2025-09-16 22:22:11.027 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:22:11.027 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:11.027 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:22:11.027 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:11.027 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:11.027 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:22:11.028 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:11.028 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.5595ms
2025-09-16 22:22:11.028 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:22:11.029 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:11.029 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:11.029 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:11.029 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:11.029 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:11.029 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:11.029 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:11.029 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000000E": started reading request body.
2025-09-16 22:22:11.029 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000000E": done reading request body.
2025-09-16 22:22:11.030 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:11.030 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:11.030 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:11.030 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.6629ms
2025-09-16 22:22:19.276 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:22:19.276 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:22:19.276 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:22:19.276 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:19.276 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:19.277 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:22:19.277 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:19.277 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 0.3397ms
2025-09-16 22:22:19.278 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 81
2025-09-16 22:22:19.278 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:22:19.278 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:22:19.278 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:22:19.278 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:19.278 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:19.278 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:22:19.279 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:19.281 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:00000010": started reading request body.
2025-09-16 22:22:19.281 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:00000010": done reading request body.
2025-09-16 22:22:19.284 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:19.284 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:19.284 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:19.284 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.284 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:19.284 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:19.284 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:19.284 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:19.284 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:19.285 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:19.285 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:19.285 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.285 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:19.285 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.285 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:19.291 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:19.294 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:22:19.308 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:22:19.311 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:22:19.311 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:22:19.312 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:22:19.343 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:19.343 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.344 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:19.344 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:19.346 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 22:22:19.346 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:22:19.346 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:22:19.406 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.407 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 60ms reading results.
2025-09-16 22:22:19.407 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.407 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:19.409 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:19.410 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:22:19.413 +03:00 [INF] AI mode changed to "Local" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:22:19.2855937Z"
2025-09-16 22:22:19.413 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:22:19.413 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:19.413 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:19.413 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:19.413 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:19.413 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 135.731ms
2025-09-16 22:22:19.416 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:22:19.416 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:22:19.416 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:22:19.416 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:19.416 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:19.416 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:19.416 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:19.416 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:19.416 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:22:19.417 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:19.417 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:19.417 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:19.417 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.417 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:19.417 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:19.417 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:19.417 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:19.418 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:19.418 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:19.418 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:19.418 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.418 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:19.418 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:19.418 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:19.419 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:22:19.419 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:19.419 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:19.419 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:19.419 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:19.419 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.1263ms
2025-09-16 22:22:19.748 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:22:19.748 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:22:19.748 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:22:19.748 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:22:19.748 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:22:19.748 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:19.748 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:19.749 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:22:19.750 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:22:19.750 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:19.750 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 1.518ms
2025-09-16 22:22:19.924 +03:00 [DBG] Connection id "0HNFLAP6UE4OC" accepted.
2025-09-16 22:22:19.924 +03:00 [DBG] Connection id "0HNFLAP6UE4OC" started.
2025-09-16 22:22:19.924 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:22:19.924 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:22:19.924 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:22:19.924 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:22:19.925 +03:00 [INF] Api health check sent.
2025-09-16 22:22:19.925 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:22:19.925 +03:00 [DBG] Connection id "0HNFLAP6UE4OC" completed keep alive response.
2025-09-16 22:22:19.925 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3332ms
2025-09-16 22:22:20.931 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:22:20.931 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:22:20.931 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:22:20.931 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:20.931 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:20.931 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:22:20.932 +03:00 [INF] Api health check sent.
2025-09-16 22:22:20.932 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:22:20.932 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:20.932 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4733ms
2025-09-16 22:22:21.178 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:22:21.178 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:22:21.178 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:22:21.178 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:22:21.178 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:22:21.178 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:21.178 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:21.179 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:22:21.179 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:22:21.179 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:21.179 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3933ms
2025-09-16 22:22:23.926 +03:00 [DBG] Connection id "0HNFLAP6UE4OC" received FIN.
2025-09-16 22:22:23.927 +03:00 [DBG] Connection id "0HNFLAP6UE4OC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:22:23.927 +03:00 [DBG] Connection id "0HNFLAP6UE4OC" disconnecting.
2025-09-16 22:22:23.927 +03:00 [DBG] Connection id "0HNFLAP6UE4OC" stopped.
2025-09-16 22:22:27.619 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:22:27.619 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:27.619 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:22:27.619 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:27.619 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:27.619 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:22:27.619 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:27.619 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.4958ms
2025-09-16 22:22:27.620 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:22:27.620 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:27.620 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:22:27.620 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:27.620 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:27.620 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:27.620 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:27.629 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:22:27.629 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:00000016": started reading request body.
2025-09-16 22:22:27.629 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:00000016": done reading request body.
2025-09-16 22:22:27.630 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:27.630 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:22:27.630 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:22:27.630 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:27.630 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.630 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:27.630 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:27.630 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:27.630 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:27.631 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:22:27.631 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:27.631 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:27.631 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.631 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:27.631 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.631 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:27.631 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:27.631 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.631 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:27.631 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:27.631 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:27.631 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:27.632 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:27.632 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:22:27.632 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.632 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:27.632 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.632 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:27.632 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:27.632 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:27.632 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.632 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:22:27.632 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:27.632 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:22:27.632 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:27.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:22:27.633 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.633 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:22:27.633 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:22:27.633 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:27.633 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:22:27.633 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:22:27.633 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:22:27.634 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:22:27.634 +03:00 [INF] Local LLM is configured
2025-09-16 22:22:27.634 +03:00 [INF] Converting natural language to SQL. User query: Find products with low inventory
2025-09-16 22:22:27.634 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:22:27.634 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:22:27.636 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:22:34.757 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:22:34.757 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:22:34.757 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:22:34.757 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:22:34.757 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:22:34.758 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:22:34.758 +03:00 [INF] Api health check sent.
2025-09-16 22:22:34.758 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:22:34.758 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" completed keep alive response.
2025-09-16 22:22:34.758 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3767ms
2025-09-16 22:22:38.048 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:22:38.052 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:22:38.058 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:22:38.058 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:22:38.058 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:22:38.058 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:22:38.058 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:22:38.058 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 10438.1895ms
2025-09-16 22:23:04.760 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:23:04.760 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:23:04.760 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:23:04.760 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:04.760 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:04.760 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:23:04.760 +03:00 [INF] Api health check sent.
2025-09-16 22:23:04.760 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:23:04.760 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:23:04.760 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5065ms
2025-09-16 22:23:05.006 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:23:05.006 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:23:05.006 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:23:05.006 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:23:05.006 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:23:05.006 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:05.006 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:05.006 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:23:05.006 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:23:05.006 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:23:05.006 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.4625ms
2025-09-16 22:23:16.519 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:23:16.519 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:16.519 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:23:16.519 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:16.519 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:16.519 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:23:16.519 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:23:16.519 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.4159ms
2025-09-16 22:23:16.520 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 157
2025-09-16 22:23:16.520 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:16.520 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:16.520 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:23:16.520 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:16.520 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:16.520 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:23:16.521 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:23:16.521 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000001A": started reading request body.
2025-09-16 22:23:16.521 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000001A": done reading request body.
2025-09-16 22:23:16.521 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:16.521 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:23:16.522 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:23:16.522 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:16.522 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.522 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:16.522 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:16.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:16.522 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:23:16.522 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:23:16.522 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:16.522 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:16.522 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.522 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:16.522 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.522 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:16.522 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:16.522 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.522 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:16.522 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:16.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:16.522 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:16.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:16.523 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:16.523 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.523 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:16.523 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.523 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:16.523 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:16.523 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:16.523 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.523 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:16.523 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:16.523 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:16.523 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:16.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:16.523 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.523 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:16.523 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:16.523 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:16.524 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:16.524 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:23:16.524 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:23:16.524 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:23:16.525 +03:00 [INF] Local LLM is configured
2025-09-16 22:23:16.525 +03:00 [INF] Converting natural language to SQL. User query: show all products
2025-09-16 22:23:16.525 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:23:16.525 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:23:16.525 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:23:30.021 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:23:30.021 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:23:30.021 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:23:30.021 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:23:30.021 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:23:30.021 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:30.021 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:30.021 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 13500.8785ms
2025-09-16 22:23:34.758 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:23:34.758 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:23:34.758 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:23:34.758 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:34.758 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:34.758 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:23:34.758 +03:00 [INF] Api health check sent.
2025-09-16 22:23:34.758 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:23:34.758 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:23:34.758 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4556ms
2025-09-16 22:23:36.329 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:23:36.329 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:36.329 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:23:36.329 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:36.329 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:36.329 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:23:36.329 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:23:36.329 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.278ms
2025-09-16 22:23:36.330 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:23:36.330 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:36.330 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:36.330 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:23:36.330 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:36.330 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:36.330 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:23:36.330 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:23:36.331 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000001D": started reading request body.
2025-09-16 22:23:36.331 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000001D": done reading request body.
2025-09-16 22:23:36.331 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:36.331 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:23:36.331 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:23:36.331 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:36.331 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.331 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:36.331 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:36.331 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:36.331 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:23:36.332 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:23:36.332 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:36.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:36.332 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.332 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:36.332 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.332 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:36.332 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:36.332 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.332 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:36.332 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:36.332 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:36.332 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:36.333 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:36.333 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:36.333 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.333 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:36.333 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.333 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:36.333 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:36.334 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:36.334 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.334 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:36.334 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:36.334 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:36.334 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:36.334 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:36.334 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.334 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:36.334 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:36.334 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:36.334 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:36.335 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:23:36.335 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:23:36.335 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:23:36.335 +03:00 [INF] Local LLM is configured
2025-09-16 22:23:36.335 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 22:23:36.335 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:23:36.335 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:23:36.335 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:23:50.152 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:23:50.152 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:23:50.153 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:23:50.153 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:23:50.153 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:23:50.153 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:50.153 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:50.153 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 13823.2307ms
2025-09-16 22:23:52.202 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:23:52.202 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:52.202 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:23:52.202 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:52.202 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:52.203 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:23:52.203 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:23:52.203 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2742ms
2025-09-16 22:23:52.204 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:23:52.204 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:52.204 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:23:52.204 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:23:52.204 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:23:52.204 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:23:52.204 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:23:52.204 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:23:52.204 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000001F": started reading request body.
2025-09-16 22:23:52.204 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000001F": done reading request body.
2025-09-16 22:23:52.205 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:52.205 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:23:52.205 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:23:52.205 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:52.205 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.205 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:52.205 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:52.205 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:52.205 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:23:52.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:23:52.205 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:52.206 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:52.206 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.206 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:52.206 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.206 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:52.206 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:52.206 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.206 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:52.206 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:52.206 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:52.206 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:52.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:52.206 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:23:52.206 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.206 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:52.206 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.206 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:52.206 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:52.207 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:23:52.207 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.207 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:23:52.207 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:52.207 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:23:52.207 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:52.207 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:23:52.207 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.207 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:23:52.207 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:23:52.207 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:23:52.207 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:23:52.207 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:23:52.207 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:23:52.208 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:23:52.208 +03:00 [INF] Local LLM is configured
2025-09-16 22:23:52.208 +03:00 [INF] Converting natural language to SQL. User query: Find products with low inventory
2025-09-16 22:23:52.208 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:23:52.208 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:23:52.208 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:24:03.615 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:24:03.615 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:24:03.615 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:24:03.615 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:24:03.615 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:24:03.615 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:24:03.616 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:24:03.616 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 11411.9498ms
2025-09-16 22:24:04.760 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:24:04.760 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:24:04.760 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:24:04.760 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:24:04.760 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:24:04.761 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:24:04.761 +03:00 [INF] Api health check sent.
2025-09-16 22:24:04.761 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:24:04.761 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:24:04.761 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.9001ms
2025-09-16 22:24:04.984 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:24:04.984 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:24:04.984 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:24:04.984 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:24:04.984 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:24:04.985 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:24:04.985 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:24:04.985 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:24:04.985 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:24:04.985 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:24:04.985 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.8798ms
2025-09-16 22:24:34.757 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:24:34.757 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:24:34.757 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:24:34.757 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:24:34.757 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:24:34.757 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:24:34.757 +03:00 [INF] Api health check sent.
2025-09-16 22:24:34.757 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:24:34.757 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:24:34.757 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3273ms
2025-09-16 22:24:44.969 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" disconnecting.
2025-09-16 22:24:44.969 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" stopped.
2025-09-16 22:24:44.969 +03:00 [DBG] Connection id "0HNFLAP6UE4O9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:25:04.761 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:25:04.761 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:25:04.761 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:25:04.761 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:25:04.761 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:25:04.761 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:25:04.761 +03:00 [INF] Api health check sent.
2025-09-16 22:25:04.761 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:25:04.761 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:25:04.761 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5882ms
2025-09-16 22:25:04.983 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:25:04.983 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:25:04.983 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:25:04.983 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:25:04.983 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:25:04.983 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:25:04.983 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:25:04.983 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:25:04.984 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:25:04.984 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:25:04.984 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.5667ms
2025-09-16 22:25:34.759 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:25:34.759 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:25:34.759 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:25:34.759 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:25:34.759 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:25:34.759 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:25:34.759 +03:00 [INF] Api health check sent.
2025-09-16 22:25:34.759 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:25:34.759 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:25:34.759 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5646ms
2025-09-16 22:25:50.182 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:25:50.182 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:25:50.182 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:25:50.182 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:25:50.182 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:25:50.182 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:25:50.182 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:25:50.183 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.5331ms
2025-09-16 22:25:50.184 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:25:50.184 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:25:50.184 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:25:50.184 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:25:50.184 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:25:50.184 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:25:50.184 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:25:50.185 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:25:50.185 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:00000027": started reading request body.
2025-09-16 22:25:50.185 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:00000027": done reading request body.
2025-09-16 22:25:50.185 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:25:50.186 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:25:50.186 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:25:50.186 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:25:50.186 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.186 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:25:50.186 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:25:50.186 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:25:50.186 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:25:50.186 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:25:50.187 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:25:50.187 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:25:50.187 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.187 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:25:50.187 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.187 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:25:50.188 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:25:50.188 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.188 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:25:50.188 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:25:50.188 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:25:50.188 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:25:50.188 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:25:50.189 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:25:50.189 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.189 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:25:50.189 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.189 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:25:50.189 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:25:50.190 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:25:50.190 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.190 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:25:50.190 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:25:50.190 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:25:50.190 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:25:50.191 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:25:50.191 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.191 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:25:50.191 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:25:50.191 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:25:50.191 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:25:50.191 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:25:50.191 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:25:50.192 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:25:50.192 +03:00 [INF] Local LLM is configured
2025-09-16 22:25:50.192 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 22:25:50.192 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:25:50.192 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:25:50.192 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:26:04.760 +03:00 [DBG] Connection id "0HNFLAP6UE4OD" accepted.
2025-09-16 22:26:04.760 +03:00 [DBG] Connection id "0HNFLAP6UE4OD" started.
2025-09-16 22:26:04.761 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:26:04.761 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:26:04.761 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:26:04.761 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:26:04.761 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:26:04.761 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:26:04.761 +03:00 [INF] Api health check sent.
2025-09-16 22:26:04.761 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:26:04.761 +03:00 [DBG] Connection id "0HNFLAP6UE4OD" completed keep alive response.
2025-09-16 22:26:04.761 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3742ms
2025-09-16 22:26:05.011 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:26:05.011 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:26:05.011 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:26:05.011 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:26:05.011 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:26:05.011 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:26:05.011 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:26:05.011 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:26:05.011 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:26:05.011 +03:00 [DBG] Connection id "0HNFLAP6UE4OD" completed keep alive response.
2025-09-16 22:26:05.011 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3756ms
2025-09-16 22:26:08.477 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:26:08.477 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:26:08.477 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:26:08.477 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:26:08.477 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:26:08.477 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:08.477 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:08.477 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 18293.4296ms
2025-09-16 22:26:10.531 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:26:10.532 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:26:10.532 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:26:10.532 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:26:10.532 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:26:10.532 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:26:10.532 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:26:10.532 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2867ms
2025-09-16 22:26:10.533 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 180
2025-09-16 22:26:10.533 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:26:10.533 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:26:10.533 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:26:10.533 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:26:10.533 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:26:10.533 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:26:10.534 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:26:10.534 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:00000029": started reading request body.
2025-09-16 22:26:10.534 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:00000029": done reading request body.
2025-09-16 22:26:10.534 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:26:10.535 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:26:10.535 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:26:10.535 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:10.535 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.535 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:26:10.535 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:10.535 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:10.535 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:26:10.535 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:26:10.535 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:26:10.535 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:26:10.535 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.536 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:26:10.536 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.536 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:10.536 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:10.536 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.536 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:26:10.536 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:10.536 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:10.536 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:26:10.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:26:10.536 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:26:10.536 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.537 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:26:10.537 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.537 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:10.537 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:26:10.537 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:10.537 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.537 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:26:10.537 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:10.537 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:10.537 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:26:10.537 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:26:10.538 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.538 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:26:10.538 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:10.538 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:10.538 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:26:10.538 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:26:10.538 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:26:10.539 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:26:10.539 +03:00 [INF] Local LLM is configured
2025-09-16 22:26:10.539 +03:00 [INF] Converting natural language to SQL. User query: List recent orders with customer details
2025-09-16 22:26:10.539 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:26:10.539 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:26:10.539 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:26:21.616 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:26:21.616 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:26:21.616 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:26:21.616 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:26:21.616 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:26:21.616 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:21.616 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:21.616 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 11083.599ms
2025-09-16 22:26:34.907 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:26:34.907 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:26:34.907 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:26:34.907 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:26:34.907 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:26:34.907 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:26:34.907 +03:00 [INF] Api health check sent.
2025-09-16 22:26:34.907 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:26:34.907 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:26:34.907 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.412ms
2025-09-16 22:26:37.851 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:26:37.851 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:26:37.851 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:26:37.851 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:26:37.851 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:26:37.851 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:26:37.851 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:26:37.851 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2302ms
2025-09-16 22:26:37.852 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:26:37.852 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:26:37.852 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:26:37.852 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:26:37.852 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:26:37.852 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:26:37.852 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:26:37.853 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:26:37.853 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000002C": started reading request body.
2025-09-16 22:26:37.853 +03:00 [DBG] Connection id "0HNFLAP6UE4O8", Request id "0HNFLAP6UE4O8:0000002C": done reading request body.
2025-09-16 22:26:37.853 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:26:37.853 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:26:37.854 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:26:37.854 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:37.854 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.854 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:26:37.854 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:37.854 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:37.854 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:26:37.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:26:37.854 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:26:37.854 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:26:37.855 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.855 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:26:37.855 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.855 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:37.855 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:37.855 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.855 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:26:37.855 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:37.855 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:37.855 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:26:37.855 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:26:37.855 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:26:37.855 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.855 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:26:37.855 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.855 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:37.856 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:26:37.856 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:37.856 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.856 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:26:37.856 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:37.856 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:26:37.856 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:26:37.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:26:37.856 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.856 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:26:37.856 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:26:37.856 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:37.857 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:26:37.857 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:26:37.857 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:26:37.857 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:26:37.857 +03:00 [INF] Local LLM is configured
2025-09-16 22:26:37.857 +03:00 [INF] Converting natural language to SQL. User query: Find products with low inventory
2025-09-16 22:26:37.857 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:26:37.857 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:26:37.858 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:26:49.572 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:26:49.576 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:26:49.576 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:26:49.576 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:26:49.576 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:26:49.576 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:26:49.576 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:26:49.576 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 11723.9549ms
2025-09-16 22:27:04.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:27:04.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:27:04.982 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:27:04.982 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:27:04.983 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:27:04.983 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:27:04.983 +03:00 [INF] Api health check sent.
2025-09-16 22:27:04.983 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:27:04.983 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:27:04.983 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6646ms
2025-09-16 22:27:05.209 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:27:05.209 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:27:05.209 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:27:05.209 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:27:05.209 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:27:05.209 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:27:05.209 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:27:05.209 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:27:05.209 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:27:05.209 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:27:05.209 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3196ms
2025-09-16 22:27:34.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:27:34.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:27:34.982 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:27:34.982 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:27:34.982 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:27:34.982 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:27:34.982 +03:00 [INF] Api health check sent.
2025-09-16 22:27:34.982 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:27:34.983 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:27:34.983 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4906ms
2025-09-16 22:28:04.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:28:04.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:28:04.982 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:28:04.982 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:28:04.982 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:28:04.982 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:28:04.982 +03:00 [INF] Api health check sent.
2025-09-16 22:28:04.982 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:28:04.982 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:28:04.982 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3544ms
2025-09-16 22:28:05.218 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:28:05.218 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:28:05.218 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:28:05.218 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:28:05.218 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:28:05.218 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:28:05.218 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:28:05.218 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:28:05.218 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:28:05.218 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:28:05.218 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3196ms
2025-09-16 22:28:16.080 +03:00 [DBG] Connection id "0HNFLAP6UE4OD" disconnecting.
2025-09-16 22:28:16.080 +03:00 [DBG] Connection id "0HNFLAP6UE4OD" stopped.
2025-09-16 22:28:16.080 +03:00 [DBG] Connection id "0HNFLAP6UE4OD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:28:34.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:28:34.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:28:34.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:28:34.979 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:28:34.979 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:28:34.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:28:34.979 +03:00 [INF] Api health check sent.
2025-09-16 22:28:34.979 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:28:34.979 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:28:34.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4894ms
2025-09-16 22:29:04.981 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:29:04.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:29:04.982 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:29:04.982 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:29:04.982 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:29:04.982 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:29:04.982 +03:00 [INF] Api health check sent.
2025-09-16 22:29:04.982 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:29:04.982 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:29:04.982 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4752ms
2025-09-16 22:29:05.212 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:29:05.212 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:29:05.212 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:29:05.212 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:29:05.212 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:29:05.212 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:29:05.212 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:29:05.212 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:29:05.212 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:29:05.212 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:29:05.212 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3129ms
2025-09-16 22:29:34.980 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:29:34.980 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:29:34.980 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:29:34.980 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:29:34.980 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:29:34.980 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:29:34.980 +03:00 [INF] Api health check sent.
2025-09-16 22:29:34.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:29:34.980 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:29:34.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.617ms
2025-09-16 22:30:35.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:30:35.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:30:35.982 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:30:35.982 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:30:35.982 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:30:35.982 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:30:35.982 +03:00 [INF] Api health check sent.
2025-09-16 22:30:35.982 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:30:35.982 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:30:35.982 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5512ms
2025-09-16 22:30:36.217 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:30:36.217 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:30:36.217 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:30:36.217 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:30:36.217 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:30:36.218 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:30:36.218 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:30:36.218 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:30:36.218 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:30:36.218 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:30:36.218 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3922ms
2025-09-16 22:31:15.029 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:31:15.029 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:31:15.029 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:31:15.029 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:31:15.029 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:31:15.029 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:31:15.029 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:31:15.029 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:31:15.030 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:31:15.030 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:31:15.030 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:31:15.030 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:31:15.030 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:31:15.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:31:15.030 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:31:15.030 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:31:15.031 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:31:15.031 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:31:15.031 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:31:15.031 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:31:15.031 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:31:15.031 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:31:15.031 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:31:15.031 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:31:15.032 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:31:15.032 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:31:15.032 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:31:15.032 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:31:15.032 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:31:15.032 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:31:15.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:31:15.032 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:31:15.032 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:31:15.032 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:31:15.032 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:31:15.033 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:31:15.033 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:31:15.033 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:31:15.033 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:31:15.033 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:31:15.033 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:31:15.033 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 4.4359ms
2025-09-16 22:31:36.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:31:36.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:31:36.982 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:31:36.982 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:31:36.982 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:31:36.983 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:31:36.983 +03:00 [INF] Api health check sent.
2025-09-16 22:31:36.983 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:31:36.983 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:31:36.983 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5402ms
2025-09-16 22:31:37.209 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:31:37.209 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:31:37.209 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:31:37.209 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:31:37.209 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:31:37.209 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:31:37.209 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:31:37.209 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:31:37.209 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:31:37.209 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:31:37.209 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3636ms
2025-09-16 22:32:37.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:32:37.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:32:37.982 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:32:37.982 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:32:37.982 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:32:37.982 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:32:37.982 +03:00 [INF] Api health check sent.
2025-09-16 22:32:37.982 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:32:37.982 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:32:37.982 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4107ms
2025-09-16 22:32:38.198 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:32:38.198 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:32:38.199 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:32:38.199 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:32:38.199 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:32:38.199 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:32:38.199 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:32:38.199 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:32:38.199 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:32:38.199 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:32:38.199 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.264ms
2025-09-16 22:33:38.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:33:38.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:33:38.982 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:33:38.982 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:33:38.982 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:33:38.982 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:33:38.982 +03:00 [INF] Api health check sent.
2025-09-16 22:33:38.982 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:33:38.982 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:33:38.982 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3432ms
2025-09-16 22:33:39.204 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:33:39.204 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:33:39.204 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:33:39.204 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:33:39.204 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:33:39.204 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:33:39.204 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:33:39.204 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:33:39.204 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:33:39.204 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:33:39.204 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.2981ms
2025-09-16 22:34:39.983 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:34:39.983 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:34:39.983 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:34:39.983 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:34:39.983 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:34:39.983 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:34:39.983 +03:00 [INF] Api health check sent.
2025-09-16 22:34:39.983 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:34:39.983 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:34:39.983 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6417ms
2025-09-16 22:34:40.197 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:34:40.197 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:34:40.197 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:34:40.197 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:34:40.197 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:34:40.197 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:34:40.197 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:34:40.197 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:34:40.198 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:34:40.198 +03:00 [DBG] Connection id "0HNFLAP6UE4O8" completed keep alive response.
2025-09-16 22:34:40.198 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.2827ms
2025-09-16 22:34:58.207 +03:00 [INF] This is a test log to file!
2025-09-16 22:34:58.407 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:34:58.410 +03:00 [INF] API configured successfully.
2025-09-16 22:34:58.466 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:34:58.515 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:34:59.010 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:34:59.068 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:34:59.083 +03:00 [INF] Registered 23 endpoints in 771 milliseconds.
2025-09-16 22:34:59.087 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:34:59.120 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:34:59.186 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:34:59.194 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 22:34:59.195 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.198 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:34:59.200 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:34:59.200 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.207 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.210 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.213 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:34:59.213 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.215 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.216 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:34:59.220 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:34:59.224 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-16 22:34:59.225 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-16 22:34:59.229 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:34:59.249 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:34:59.251 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:34:59.251 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:34:59.251 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:34:59.251 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:34:59.2508048+00:00');
SELECT changes();
2025-09-16 22:34:59.256 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:34:59.2508048+00:00');
SELECT changes();
2025-09-16 22:34:59.291 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:34:59.292 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:34:59.293 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:34:59.294 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:34:59.294 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:34:59.294 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:34:59.294 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:34:59.295 +03:00 [DBG] Committing transaction.
2025-09-16 22:34:59.296 +03:00 [DBG] Committed transaction.
2025-09-16 22:34:59.296 +03:00 [DBG] Disposing transaction.
2025-09-16 22:34:59.298 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:34:59.298 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:34:59.299 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:34:59.299 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:34:59.299 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.299 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.299 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.299 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:34:59.300 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:34:59.300 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:34:59.300 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:34:59.300 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:34:59.300 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:34:59.301 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:34:59.301 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:34:59.301 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:34:59.302 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:34:59.302 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:34:59.304 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.305 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:34:59.308 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:34:59.308 +03:00 [DBG] Committing transaction.
2025-09-16 22:34:59.308 +03:00 [DBG] Committed transaction.
2025-09-16 22:34:59.308 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:34:59.308 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:34:59.308 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:34:59.308 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:34:59.311 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:34:59.311 +03:00 [DBG] Disposing transaction.
2025-09-16 22:34:59.312 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.314 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:34:59.314 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:34:59.314 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.315 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:34:59.315 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:34:59.315 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:34:59.328 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:34:59.340 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:34:59.340 +03:00 [DBG] Hosting starting
2025-09-16 22:34:59.376 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:34:59.377 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:34:59.384 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:34:59.384 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:34:59.384 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:34:59.385 +03:00 [INF] Hosting environment: Development
2025-09-16 22:34:59.385 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:34:59.385 +03:00 [DBG] Hosting started
2025-09-16 22:34:59.485 +03:00 [DBG] Connection id "0HNFLB0FROSQF" accepted.
2025-09-16 22:34:59.485 +03:00 [DBG] Connection id "0HNFLB0FROSQF" started.
2025-09-16 22:34:59.500 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:34:59.532 +03:00 [DBG] Connection id "0HNFLB0FROSQG" accepted.
2025-09-16 22:34:59.532 +03:00 [DBG] Connection id "0HNFLB0FROSQG" started.
2025-09-16 22:34:59.532 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:34:59.533 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:34:59.545 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:34:59.545 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:34:59.546 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 22:34:59.548 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:34:59.558 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:34:59.572 +03:00 [INF] Getting all users
2025-09-16 22:34:59.592 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 22:34:59.630 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:34:59.844 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:34:59.866 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:34:59.866 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:34:59.868 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.869 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.869 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:34:59.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:34:59.869 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:34:59.870 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:34:59.872 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:34:59.885 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.886 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 14ms reading results.
2025-09-16 22:34:59.888 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.889 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:34:59.919 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:34:59.919 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:34:59.920 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:34:59.920 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:34:59.921 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:34:59.921 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:34:59.922 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.922 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:34:59.923 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:34:59.923 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:34:59.924 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:34:59.924 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:34:59.925 +03:00 [INF] Getting all users
2025-09-16 22:34:59.927 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:34:59.927 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:34:59.923 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 423.9234ms
2025-09-16 22:34:59.927 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.928 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.928 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:34:59.928 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:34:59.928 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:34:59.928 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:34:59.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:34:59.928 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:34:59.928 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:34:59.928 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.928 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:34:59.928 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.928 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:34:59.929 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:34:59.929 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:34:59.929 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:34:59.929 +03:00 [DBG] Connection id "0HNFLB0FROSQG" completed keep alive response.
2025-09-16 22:34:59.929 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:34:59.929 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.929 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:34:59.929 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 9.1083ms
2025-09-16 22:34:59.930 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:34:59.930 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:34:59.931 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:34:59.932 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:34:59.947 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:34:59.953 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:34:59.956 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:34:59.976 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:34:59.982 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:34:59.982 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:34:59.982 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:34:59.982 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:34:59.983 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:34:59.983 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:34:59.984 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 22:34:59.985 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:34:59.988 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:00.008 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:00.027 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:00.038 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.039 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 50ms reading results.
2025-09-16 22:35:00.039 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.039 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:00.040 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:00.040 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:35:00.040 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:00.040 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:00.040 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:00.040 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:00.040 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:00.041 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:00.041 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:00.041 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 112.5911ms
2025-09-16 22:35:00.041 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:00.041 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:00.041 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:00.041 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:00.042 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:35:00.042 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:00.042 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:00.042 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:00.043 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.043 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:00.043 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:00.043 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:00.043 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:00.043 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:00.043 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:00.043 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:00.044 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.044 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:00.044 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.044 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:00.044 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:00.044 +03:00 [DBG] Connection id "0HNFLB0FROSQG" completed keep alive response.
2025-09-16 22:35:00.044 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:00.044 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:00.044 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:00.044 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.0403ms
2025-09-16 22:35:00.067 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:35:00.067 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:35:00.067 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:35:00.067 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:00.067 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:00.067 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:35:00.068 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:00.068 +03:00 [INF] Getting all users
2025-09-16 22:35:00.068 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:00.069 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:00.069 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:00.069 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.069 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:00.069 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:00.069 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:00.069 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:35:00.069 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:35:00.069 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.069 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:00.069 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.069 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:00.069 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:35:00.070 +03:00 [DBG] Connection id "0HNFLB0FROSQG" completed keep alive response.
2025-09-16 22:35:00.070 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:00.070 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:00.070 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:00.070 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 2.7181ms
2025-09-16 22:35:00.095 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:35:00.095 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:00.095 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:00.096 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:00.096 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:00.096 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:00.096 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:00.096 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:00.096 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:35:00.097 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:00.097 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:00.097 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:00.097 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.097 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:00.097 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:00.097 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:00.097 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:00.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:00.097 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:00.097 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:00.098 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.098 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:00.098 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:00.098 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:00.098 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:00.098 +03:00 [DBG] Connection id "0HNFLB0FROSQG" completed keep alive response.
2025-09-16 22:35:00.098 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:00.098 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:00.098 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:00.098 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.1499ms
2025-09-16 22:35:00.157 +03:00 [DBG] Connection id "0HNFLB0FROSQH" accepted.
2025-09-16 22:35:00.157 +03:00 [DBG] Connection id "0HNFLB0FROSQH" started.
2025-09-16 22:35:00.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:35:00.159 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:35:00.159 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:35:00.159 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:35:00.161 +03:00 [INF] Api health check sent.
2025-09-16 22:35:00.161 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:35:00.161 +03:00 [DBG] Connection id "0HNFLB0FROSQH" completed keep alive response.
2025-09-16 22:35:00.161 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 2.6942ms
2025-09-16 22:35:04.171 +03:00 [DBG] Connection id "0HNFLB0FROSQH" received FIN.
2025-09-16 22:35:04.171 +03:00 [DBG] Connection id "0HNFLB0FROSQH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:35:04.171 +03:00 [DBG] Connection id "0HNFLB0FROSQH" disconnecting.
2025-09-16 22:35:04.172 +03:00 [DBG] Connection id "0HNFLB0FROSQH" stopped.
2025-09-16 22:35:04.978 +03:00 [DBG] Connection id "0HNFLB0FROSQI" accepted.
2025-09-16 22:35:04.978 +03:00 [DBG] Connection id "0HNFLB0FROSQI" started.
2025-09-16 22:35:04.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:35:04.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:35:04.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:35:04.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:35:04.980 +03:00 [INF] Api health check sent.
2025-09-16 22:35:04.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:35:04.980 +03:00 [DBG] Connection id "0HNFLB0FROSQI" completed keep alive response.
2025-09-16 22:35:04.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.4918ms
2025-09-16 22:35:04.997 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:35:04.997 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:04.998 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:04.998 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:04.998 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:04.998 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:04.998 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:04.999 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:04.999 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:35:04.999 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:04.999 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:05.000 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:05.000 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:05.000 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:05.000 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:05.000 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:05.000 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:05.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:05.000 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:05.001 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:05.001 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:05.001 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:05.001 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:05.001 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:05.001 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:05.001 +03:00 [DBG] Connection id "0HNFLB0FROSQG" completed keep alive response.
2025-09-16 22:35:05.001 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:05.002 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:05.002 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:05.002 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.6759ms
2025-09-16 22:35:05.005 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:35:05.005 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:05.005 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:05.005 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:05.005 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:05.005 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:05.005 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:05.006 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:05.006 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:35:05.006 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:05.006 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:05.006 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:05.006 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:05.007 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:05.007 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:05.007 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:05.007 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:05.007 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:05.007 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:05.007 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:05.008 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:05.008 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:05.008 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:05.008 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:05.008 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:05.008 +03:00 [DBG] Connection id "0HNFLB0FROSQG" completed keep alive response.
2025-09-16 22:35:05.008 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:05.009 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:05.009 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:05.009 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.8364ms
2025-09-16 22:35:08.982 +03:00 [DBG] Connection id "0HNFLB0FROSQI" received FIN.
2025-09-16 22:35:08.982 +03:00 [DBG] Connection id "0HNFLB0FROSQI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:35:08.982 +03:00 [DBG] Connection id "0HNFLB0FROSQI" disconnecting.
2025-09-16 22:35:08.983 +03:00 [DBG] Connection id "0HNFLB0FROSQI" stopped.
2025-09-16 22:35:23.105 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:35:23.106 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:35:23.106 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:35:23.106 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.106 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:23.106 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:23.106 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.107 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:35:23.107 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:35:23.108 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:35:23.108 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:35:23.108 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:23.108 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:23.108 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:35:23.109 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:23.109 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:23.115 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:35:23.115 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:35:23.131 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:35:23.135 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:23.135 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:23.135 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:23.135 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.135 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:23.135 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.136 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.136 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:23.136 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.136 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.136 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.136 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.136 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:23.136 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.136 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.136 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.137 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.137 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:23.138 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.138 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:23.146 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:23.146 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:23.152 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.152 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 15ms reading results.
2025-09-16 22:35:23.152 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.152 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.152 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 14ms reading results.
2025-09-16 22:35:23.152 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.152 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.152 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.153 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:35:23.154 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.154 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.154 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:23.154 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.154 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.155 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.155 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.155 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.155 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:23.155 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.155 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.160 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:35:23.160 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:35:23.161 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.161 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.161 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:23.161 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.161 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.161 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.162 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.162 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:35:23.162 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:23.162 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:23.162 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.162 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.162 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.162 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:23.162 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 54.9355ms
2025-09-16 22:35:23.162 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.162 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.163 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:35:23.163 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:35:23.163 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:35:23.163 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:35:23.163 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:35:23.164 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:23.164 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:23.164 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:35:23.164 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:23.165 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:23.166 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:23.166 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.166 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.166 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:23.166 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.166 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.166 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.167 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:23.168 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:23.168 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.168 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:23.168 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.168 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.168 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:35:23.169 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.169 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.169 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:23.169 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.169 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:23.169 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.169 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:35:23.170 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.170 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:23.170 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:23.170 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.170 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:35:23.170 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:35:23.171 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:35:23.171 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:23.171 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:23.171 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.172 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:35:23.172 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.172 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 9.0891ms
2025-09-16 22:35:23.236 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:35:23.241 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.242 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:35:23.243 +03:00 [DBG] Connection id "0HNFLB0FROSQG" completed keep alive response.
2025-09-16 22:35:23.243 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:23.243 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:35:23.243 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:23.243 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:35:23.243 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:23.243 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.243 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 137.7718ms
2025-09-16 22:35:23.243 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:23.243 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:23.243 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.244 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:23.245 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.245 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:23.245 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:23.245 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 3.335ms
2025-09-16 22:35:23.246 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:35:23.246 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:35:23.246 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:35:23.246 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.246 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:23.247 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:23.247 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.247 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:23.247 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.247 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:23.247 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:23.248 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.3312ms
2025-09-16 22:35:23.248 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:35:23.248 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:35:23.249 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:35:23.249 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.249 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:23.249 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:23.249 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.250 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:23.251 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:35:23.251 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:23.251 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:23.251 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.7209ms
2025-09-16 22:35:24.111 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:35:24.111 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:35:24.111 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:35:24.111 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:24.111 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:24.111 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:35:24.111 +03:00 [INF] Api health check sent.
2025-09-16 22:35:24.111 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:35:24.111 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:24.111 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6599ms
2025-09-16 22:35:24.348 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-16 22:35:24.349 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-16 22:35:24.349 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:35:24.349 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-16 22:35:24.349 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:35:24.349 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:24.349 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:24.349 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:35:24.350 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-16 22:35:24.350 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:24.350 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 1.8482ms
2025-09-16 22:35:29.122 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - null null
2025-09-16 22:35:29.122 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:35:29.122 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:35:29.122 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:29.122 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:29.123 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:35:29.123 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:29.123 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 204 null null 1.1875ms
2025-09-16 22:35:29.125 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - application/json 136
2025-09-16 22:35:29.125 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:35:29.125 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode'
2025-09-16 22:35:29.125 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:35:29.125 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:29.125 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:29.125 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:35:29.133 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:29.139 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:0000000B": started reading request body.
2025-09-16 22:35:29.139 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:0000000B": done reading request body.
2025-09-16 22:35:29.147 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:29.147 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:29.147 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:29.147 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.148 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:29.148 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:29.148 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:29.148 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:29.148 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:29.148 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:29.149 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:29.149 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.149 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:29.149 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.149 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:29.156 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:29.158 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:35:29.175 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:35:29.178 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:35:29.179 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:35:29.179 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:35:29.212 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:29.212 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.213 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:29.213 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:29.214 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 22:35:29.214 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:35:29.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-16 22:35:29.220 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.220 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 5ms reading results.
2025-09-16 22:35:29.221 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.221 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:29.222 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:29.223 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:35:29.225 +03:00 [INF] AI mode changed to "Groq" for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:35:29.1499569Z"
2025-09-16 22:35:29.226 +03:00 [INF] API key changed for user "29ceab46-b1e1-4286-8552-c19c78cc9bfc" at "2025-09-16T19:35:29.1500506Z"
2025-09-16 22:35:29.227 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-16 22:35:29.227 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:29.227 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:29.227 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:29.227 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:29.227 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc/aimode - 200 null application/json; charset=utf-8 102.5879ms
2025-09-16 22:35:29.229 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:35:29.230 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:29.230 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:35:29.230 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:29.230 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:29.230 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:29.230 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:29.230 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:35:29.230 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:35:29.231 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:35:29.231 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:35:29.231 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:29.231 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.231 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:35:29.231 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:29.231 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:35:29.231 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:29.231 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:35:29.231 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:29.231 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:35:29.231 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.232 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:35:29.232 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:35:29.232 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:29.232 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:35:29.232 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:29.232 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:35:29.232 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:35:29.232 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:35:29.232 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 2.5311ms
2025-09-16 22:35:29.736 +03:00 [DBG] Connection id "0HNFLB0FROSQJ" accepted.
2025-09-16 22:35:29.736 +03:00 [DBG] Connection id "0HNFLB0FROSQJ" started.
2025-09-16 22:35:29.736 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:35:29.736 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:35:29.736 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:35:29.737 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:35:29.737 +03:00 [INF] Api health check sent.
2025-09-16 22:35:29.737 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:35:29.737 +03:00 [DBG] Connection id "0HNFLB0FROSQJ" completed keep alive response.
2025-09-16 22:35:29.737 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4792ms
2025-09-16 22:35:33.738 +03:00 [DBG] Connection id "0HNFLB0FROSQJ" received FIN.
2025-09-16 22:35:33.738 +03:00 [DBG] Connection id "0HNFLB0FROSQJ" disconnecting.
2025-09-16 22:35:33.739 +03:00 [DBG] Connection id "0HNFLB0FROSQJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:35:33.740 +03:00 [DBG] Connection id "0HNFLB0FROSQJ" stopped.
2025-09-16 22:35:54.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:35:54.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:35:54.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:35:54.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:35:54.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:35:54.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:35:54.356 +03:00 [INF] Api health check sent.
2025-09-16 22:35:54.356 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:35:54.356 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:35:54.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5655ms
2025-09-16 22:36:14.000 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:36:14.000 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:14.000 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:36:14.000 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:14.000 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:14.001 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:36:14.001 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:14.001 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.8427ms
2025-09-16 22:36:14.002 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:36:14.002 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:14.002 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:14.002 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:14.003 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:14.003 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:14.003 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:14.005 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:14.008 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:0000000F": started reading request body.
2025-09-16 22:36:14.008 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:0000000F": done reading request body.
2025-09-16 22:36:14.075 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:14.075 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:36:14.075 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:36:14.075 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:14.075 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.075 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:14.075 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:14.075 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:14.075 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:36:14.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:36:14.076 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:14.076 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:14.076 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.076 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:14.076 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.076 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:14.077 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:14.077 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.077 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:14.077 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:14.077 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:14.077 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:14.077 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:14.078 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:14.078 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.078 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:14.078 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.078 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:14.078 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:14.079 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:14.079 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.079 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:14.079 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:14.079 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:14.079 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:14.080 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:14.080 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.080 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:14.080 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:14.080 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:14.080 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:14.081 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:36:14.081 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:36:14.082 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:36:14.214 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:36:14.215 +03:00 [INF] Converting natural language to SQL. User query: Find products with low inventory
2025-09-16 22:36:14.216 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:36:14.216 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:36:14.232 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:36:15.539 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:36:15.545 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:36:15.550 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:15.550 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:15.550 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:15.550 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:15.550 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:15.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1547.9273ms
2025-09-16 22:36:24.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:36:24.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:36:24.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:36:24.979 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:24.979 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:24.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:36:24.979 +03:00 [INF] Api health check sent.
2025-09-16 22:36:24.979 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:36:24.979 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:24.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.768ms
2025-09-16 22:36:32.990 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:36:32.990 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:32.990 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:36:32.990 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:32.990 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:32.990 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:36:32.990 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:32.990 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.316ms
2025-09-16 22:36:32.991 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:36:32.991 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:32.991 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:32.991 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:32.991 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:32.991 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:32.991 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:32.992 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:32.992 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:00000012": started reading request body.
2025-09-16 22:36:32.992 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:00000012": done reading request body.
2025-09-16 22:36:32.992 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:32.992 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:32.992 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:32.992 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.1744ms
2025-09-16 22:36:39.444 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:36:39.444 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:36:39.444 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:36:39.444 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.444 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:39.444 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:39.445 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.445 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:39.445 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.445 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:39.445 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:39.445 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.1848ms
2025-09-16 22:36:39.446 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:36:39.446 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:36:39.446 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:36:39.446 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.446 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:39.446 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:39.446 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.447 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:39.447 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.448 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:39.448 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:39.448 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.5845ms
2025-09-16 22:36:39.454 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:36:39.454 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:36:39.454 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:36:39.454 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.455 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:39.455 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:39.455 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.456 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:39.456 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.456 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:39.456 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:39.456 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.3002ms
2025-09-16 22:36:39.457 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:36:39.457 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:36:39.457 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:36:39.457 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.458 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:39.458 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:39.458 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.458 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:39.459 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:36:39.459 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:39.459 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:39.459 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.3852ms
2025-09-16 22:36:50.956 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:36:50.956 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:50.956 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:36:50.957 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:50.957 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:50.957 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:36:50.957 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:50.957 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.8311ms
2025-09-16 22:36:50.960 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:36:50.960 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:50.960 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:50.960 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:50.961 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:50.961 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:50.961 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:50.962 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:50.962 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:00000018": started reading request body.
2025-09-16 22:36:50.962 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:00000018": done reading request body.
2025-09-16 22:36:50.963 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:50.963 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:36:50.964 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:36:50.964 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:50.964 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.964 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:50.964 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:50.964 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:50.964 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:36:50.965 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:36:50.965 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:50.965 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:50.966 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.966 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:50.966 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.966 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:50.966 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:50.967 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.967 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:50.967 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:50.967 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:50.967 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:50.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:50.968 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:50.969 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.970 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:36:50.971 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.971 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:50.972 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:50.972 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:50.973 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.973 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:50.973 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:50.973 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:50.973 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:50.973 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:50.973 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.973 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:50.973 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:50.974 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:50.974 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:50.974 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:36:50.974 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:36:50.975 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:36:50.976 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:36:50.976 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 22:36:50.976 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:36:50.976 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:36:50.979 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:36:51.784 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:36:51.786 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:36:51.787 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:51.787 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:51.787 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:51.787 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:51.787 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:51.787 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 826.8671ms
2025-09-16 22:36:54.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:36:54.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:36:54.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:36:54.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:54.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:54.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:36:54.355 +03:00 [INF] Api health check sent.
2025-09-16 22:36:54.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:36:54.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:54.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4484ms
2025-09-16 22:36:55.968 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:36:55.968 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:55.968 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:36:55.968 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:55.968 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:55.968 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:36:55.968 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:55.968 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2831ms
2025-09-16 22:36:55.970 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:36:55.970 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:55.970 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:36:55.970 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:55.970 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:55.970 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:55.970 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:55.970 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:55.971 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:0000001B": started reading request body.
2025-09-16 22:36:55.971 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:0000001B": done reading request body.
2025-09-16 22:36:55.971 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:36:55.971 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:55.971 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:55.971 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.3953ms
2025-09-16 22:36:59.002 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:36:59.002 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:36:59.002 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:36:59.003 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:59.003 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:59.003 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:36:59.003 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:59.003 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.52ms
2025-09-16 22:36:59.004 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 297
2025-09-16 22:36:59.004 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:36:59.007 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:36:59.007 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:36:59.007 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:36:59.007 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:36:59.007 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:36:59.009 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:36:59.025 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:0000001D": started reading request body.
2025-09-16 22:36:59.025 +03:00 [DBG] Connection id "0HNFLB0FROSQF", Request id "0HNFLB0FROSQF:0000001D": done reading request body.
2025-09-16 22:36:59.028 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:36:59.028 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:36:59.029 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:59.029 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.029 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:59.029 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:59.029 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:59.029 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:59.029 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:59.029 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:59.029 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:59.030 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.030 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:59.030 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.030 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:59.030 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:59.030 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:59.030 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.030 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:59.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:59.030 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:59.030 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:59.031 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:59.031 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.031 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:59.031 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.031 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:59.031 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:59.031 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 22:36:59.038 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 22:36:59.038 +03:00 [DBG] SQL: SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA = 'dbo';
2025-09-16 22:36:59.041 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:36:59.250 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 22:36:59.341 +03:00 [INF] Query execution finished in 301 ms, returned 3 rows
2025-09-16 22:36:59.345 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:59.345 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.346 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:59.346 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:59.346 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:59.346 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:59.346 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:36:59.346 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.346 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:59.346 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.346 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:59.371 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:59.372 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:59.373 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:36:59.378 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:59.380 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:36:59.380 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:36:59.380 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:36:59.380 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:36:59.389 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:59.389 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.389 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:36:59.389 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:59.389 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:36:59.389 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 177), @p3='?' (Size = 106), @p4='?' (DbType = DateTime), @p5='?' (Size = 31)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:36:59.393 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 177), @p3='?' (Size = 106), @p4='?' (DbType = DateTime), @p5='?' (Size = 31)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:36:59.393 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.393 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:36:59.393 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:36:59.393 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:59.394 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:36:59.394 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:36:59.396 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-16T19:36:59.3550219Z","$type":"QueryAddedEvent"}
2025-09-16 22:36:59.397 +03:00 [INF] Saved query to DB for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:36:59.399 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:36:59.399 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:36:59.399 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:36:59.399 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:36:59.399 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:36:59.399 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 394.576ms
2025-09-16 22:37:00.404 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:37:00.405 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:37:00.405 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:37:00.405 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:00.405 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:37:00.406 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:37:00.406 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:00.407 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:37:00.409 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:37:00.409 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:37:00.409 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:00.410 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:00.410 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:37:00.412 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:00.413 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-16 22:37:00.413 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:00.414 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:00.414 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:00.414 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:00.414 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:00.415 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:00.415 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:37:00.415 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:00.415 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:00.415 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:37:00.415 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:00.415 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:00.415 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:37:00.415 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:00.415 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:00.415 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:00.416 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:00.416 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:00.416 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:37:00.416 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:00.416 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:00.416 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:37:00.417 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:00.417 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:37:00.417 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:37:00.417 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:00.417 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:00.417 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 13.3853ms
2025-09-16 22:37:19.487 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:37:19.487 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:37:19.487 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:37:19.487 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:19.487 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:37:19.487 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:37:19.487 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:19.488 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:37:19.489 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:37:19.489 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:37:19.489 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:19.489 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:19.489 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:37:19.489 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:19.489 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:19.489 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:19.489 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:19.489 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:19.490 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:19.490 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:19.490 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:19.490 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:37:19.490 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:19.491 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:19.491 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:37:19.491 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:19.491 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:19.491 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:37:19.491 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:19.491 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:19.491 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:19.492 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:19.492 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:19.492 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:37:19.492 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:19.492 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:19.492 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:37:19.493 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:19.493 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:37:19.493 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:37:19.493 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:19.493 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:19.493 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 6.1844ms
2025-09-16 22:37:24.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:37:24.354 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:37:24.354 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:37:24.354 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:37:24.354 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:37:24.354 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:37:24.354 +03:00 [INF] Api health check sent.
2025-09-16 22:37:24.354 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:37:24.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:37:24.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4602ms
2025-09-16 22:37:33.130 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:37:33.130 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:37:33.130 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:37:33.130 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:33.130 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:37:33.130 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:37:33.130 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:33.131 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:37:33.132 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:37:33.132 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:37:33.132 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:33.132 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:33.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:37:33.132 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:33.132 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:33.132 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:33.133 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:33.133 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:33.133 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:33.133 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:37:33.133 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:33.133 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:37:33.133 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:33.133 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:33.133 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:37:33.134 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:33.134 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:33.134 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:37:33.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:33.134 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:37:33.134 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:33.134 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:37:33.134 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:33.134 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:37:33.134 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:37:33.134 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:33.135 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:37:33.139 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:37:33.139 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:37:33.139 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:37:33.139 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:37:33.139 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:37:33.139 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 9.0147ms
2025-09-16 22:37:33.449 +03:00 [DBG] Connection id "0HNFLB0FROSQG" disconnecting.
2025-09-16 22:37:33.449 +03:00 [DBG] Connection id "0HNFLB0FROSQG" stopped.
2025-09-16 22:37:33.450 +03:00 [DBG] Connection id "0HNFLB0FROSQG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:37:54.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:37:54.354 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:37:54.354 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:37:54.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:37:54.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:37:54.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:37:54.355 +03:00 [INF] Api health check sent.
2025-09-16 22:37:54.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:37:54.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:37:54.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5446ms
2025-09-16 22:38:24.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:38:24.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:38:24.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:38:24.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:38:24.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:38:24.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:38:24.355 +03:00 [INF] Api health check sent.
2025-09-16 22:38:24.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:38:24.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:38:24.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4873ms
2025-09-16 22:38:54.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:38:54.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:38:54.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:38:54.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:38:54.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:38:54.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:38:54.356 +03:00 [INF] Api health check sent.
2025-09-16 22:38:54.356 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:38:54.356 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:38:54.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4587ms
2025-09-16 22:39:24.357 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:39:24.357 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:39:24.357 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:39:24.357 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:39:24.357 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:39:24.357 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:39:24.357 +03:00 [INF] Api health check sent.
2025-09-16 22:39:24.357 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:39:24.357 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:39:24.357 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4199ms
2025-09-16 22:39:54.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:39:54.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:39:54.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:39:54.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:39:54.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:39:54.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:39:54.355 +03:00 [INF] Api health check sent.
2025-09-16 22:39:54.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:39:54.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:39:54.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4141ms
2025-09-16 22:40:24.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:40:24.354 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:40:24.354 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:40:24.354 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:40:24.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:40:24.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:40:24.355 +03:00 [INF] Api health check sent.
2025-09-16 22:40:24.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:40:24.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:40:24.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5209ms
2025-09-16 22:40:54.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:40:54.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:40:54.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:40:54.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:40:54.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:40:54.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:40:54.355 +03:00 [INF] Api health check sent.
2025-09-16 22:40:54.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:40:54.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:40:54.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4981ms
2025-09-16 22:41:24.356 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:41:24.356 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:41:24.356 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:41:24.356 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:41:24.356 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:41:24.357 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:41:24.357 +03:00 [INF] Api health check sent.
2025-09-16 22:41:24.357 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:41:24.357 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:41:24.357 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4048ms
2025-09-16 22:41:54.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:41:54.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:41:54.356 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:41:54.356 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:41:54.356 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:41:54.356 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:41:54.356 +03:00 [INF] Api health check sent.
2025-09-16 22:41:54.356 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:41:54.356 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:41:54.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3598ms
2025-09-16 22:42:24.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:42:24.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:42:24.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:42:24.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:42:24.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:42:24.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:42:24.355 +03:00 [INF] Api health check sent.
2025-09-16 22:42:24.356 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:42:24.356 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:42:24.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4567ms
2025-09-16 22:42:54.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:42:54.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:42:54.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:42:54.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:42:54.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:42:54.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:42:54.355 +03:00 [INF] Api health check sent.
2025-09-16 22:42:54.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:42:54.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:42:54.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5492ms
2025-09-16 22:43:24.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:43:24.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:43:24.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:43:24.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:43:24.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:43:24.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:43:24.355 +03:00 [INF] Api health check sent.
2025-09-16 22:43:24.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:43:24.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:43:24.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5047ms
2025-09-16 22:43:54.356 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:43:54.356 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:43:54.356 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:43:54.356 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:43:54.356 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:43:54.356 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:43:54.356 +03:00 [INF] Api health check sent.
2025-09-16 22:43:54.356 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:43:54.356 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:43:54.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4269ms
2025-09-16 22:44:24.356 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:44:24.356 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:44:24.356 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:44:24.356 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:44:24.356 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:44:24.356 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:44:24.356 +03:00 [INF] Api health check sent.
2025-09-16 22:44:24.356 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:44:24.356 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:44:24.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3147ms
2025-09-16 22:44:54.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:44:54.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:44:54.355 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:44:54.355 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:44:54.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:44:54.355 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:44:54.355 +03:00 [INF] Api health check sent.
2025-09-16 22:44:54.355 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:44:54.355 +03:00 [DBG] Connection id "0HNFLB0FROSQF" completed keep alive response.
2025-09-16 22:44:54.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.2922ms
2025-09-16 22:45:10.633 +03:00 [INF] This is a test log to file!
2025-09-16 22:45:10.852 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:45:10.855 +03:00 [INF] API configured successfully.
2025-09-16 22:45:10.924 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:45:10.979 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:45:11.482 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:45:11.545 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:11.569 +03:00 [INF] Registered 23 endpoints in 823 milliseconds.
2025-09-16 22:45:11.575 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:11.627 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:11.762 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:11.776 +03:00 [DBG] Created DbConnection. (10ms).
2025-09-16 22:45:11.779 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:11.784 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:11.787 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-16 22:45:11.788 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:11.798 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:11.800 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:11.805 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:11.805 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:11.807 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:11.809 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:45:11.814 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:45:11.819 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-16 22:45:11.820 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-16 22:45:11.826 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:45:11.848 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:45:11.850 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:45:11.850 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:45:11.850 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:45:11.850 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:45:11.8498177+00:00');
SELECT changes();
2025-09-16 22:45:11.860 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:45:11.8498177+00:00');
SELECT changes();
2025-09-16 22:45:11.911 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:45:11.913 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:45:11.914 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:45:11.914 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:45:11.914 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:45:11.914 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:45:11.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:45:11.915 +03:00 [DBG] Committing transaction.
2025-09-16 22:45:11.917 +03:00 [DBG] Committed transaction.
2025-09-16 22:45:11.918 +03:00 [DBG] Disposing transaction.
2025-09-16 22:45:11.919 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:45:11.919 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:45:11.920 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:11.920 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:11.920 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:11.921 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:11.921 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:11.921 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:11.921 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:45:11.921 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:45:11.921 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:45:11.921 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:45:11.921 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:45:11.923 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:11.923 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:11.923 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:11.923 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:45:11.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:45:11.926 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:11.926 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:45:11.929 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:45:11.930 +03:00 [DBG] Committing transaction.
2025-09-16 22:45:11.930 +03:00 [DBG] Committed transaction.
2025-09-16 22:45:11.930 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:45:11.930 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:45:11.930 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:45:11.930 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:45:11.932 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:45:11.933 +03:00 [DBG] Disposing transaction.
2025-09-16 22:45:11.933 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:11.936 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:45:11.936 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:11.936 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:11.936 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:11.936 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:45:11.937 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:45:11.951 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:45:11.964 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:45:11.966 +03:00 [DBG] Hosting starting
2025-09-16 22:45:12.011 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:45:12.012 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:45:12.027 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:45:12.027 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:45:12.027 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:45:12.028 +03:00 [INF] Hosting environment: Development
2025-09-16 22:45:12.028 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:45:12.028 +03:00 [DBG] Hosting started
2025-09-16 22:45:12.113 +03:00 [DBG] Connection id "0HNFLB66E85NC" accepted.
2025-09-16 22:45:12.114 +03:00 [DBG] Connection id "0HNFLB66E85NC" started.
2025-09-16 22:45:12.139 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:45:12.162 +03:00 [DBG] Connection id "0HNFLB66E85ND" accepted.
2025-09-16 22:45:12.163 +03:00 [DBG] Connection id "0HNFLB66E85ND" started.
2025-09-16 22:45:12.184 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:45:12.185 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.205 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:12.205 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:12.209 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 22:45:12.213 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.229 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:12.252 +03:00 [INF] Getting all users
2025-09-16 22:45:12.288 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 22:45:12.339 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:45:12.561 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:45:12.589 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:12.589 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:12.591 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.592 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.592 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:12.592 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.592 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.593 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:45:12.595 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:45:12.611 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.612 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 16ms reading results.
2025-09-16 22:45:12.614 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.615 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-16 22:45:12.655 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.656 +03:00 [DBG] Connection id "0HNFLB66E85NC" completed keep alive response.
2025-09-16 22:45:12.657 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:12.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:45:12.658 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:45:12.658 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.659 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.659 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.660 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:12.660 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:12.660 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.661 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:12.662 +03:00 [INF] Getting all users
2025-09-16 22:45:12.659 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 522.1349ms
2025-09-16 22:45:12.665 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:12.665 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:12.665 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.665 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.665 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:12.665 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.665 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.665 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:45:12.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:45:12.666 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.666 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:12.666 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.666 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.667 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.667 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:12.667 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:12.668 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.668 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.668 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 10.7717ms
2025-09-16 22:45:12.670 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:45:12.670 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:12.671 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:12.671 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.672 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:12.672 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:12.673 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.674 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:12.701 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:45:12.712 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:45:12.715 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:45:12.759 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:45:12.766 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:12.766 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:12.766 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.766 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.766 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:12.766 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.768 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 22:45:12.770 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:12.774 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:12.803 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:12.829 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:12.846 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.846 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 71ms reading results.
2025-09-16 22:45:12.846 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.846 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.848 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:45:12.848 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:12.848 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:12.848 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.849 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.849 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:12.849 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:12.849 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:12.849 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:12.849 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.849 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.849 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.849 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 179.1815ms
2025-09-16 22:45:12.850 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:12.850 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:45:12.851 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:12.851 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:12.851 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.851 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:12.851 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.851 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.851 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:12.851 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:12.852 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:12.852 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:12.852 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.852 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:12.852 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.852 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.852 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.852 +03:00 [DBG] Connection id "0HNFLB66E85NC" completed keep alive response.
2025-09-16 22:45:12.852 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:12.852 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.852 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.852 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.3919ms
2025-09-16 22:45:12.894 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:45:12.894 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:45:12.894 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.894 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:12.894 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:12.894 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.895 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:12.895 +03:00 [INF] Getting all users
2025-09-16 22:45:12.895 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:12.895 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:12.895 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.895 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.895 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:12.895 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.895 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.895 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:45:12.896 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:45:12.896 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.896 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:12.896 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.896 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.896 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:45:12.896 +03:00 [DBG] Connection id "0HNFLB66E85NC" completed keep alive response.
2025-09-16 22:45:12.896 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:12.896 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.896 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.897 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 2.9566ms
2025-09-16 22:45:12.923 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:45:12.923 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:12.923 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:12.923 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.923 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:12.923 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:12.923 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.924 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:12.924 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:45:12.925 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:12.925 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:12.925 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.925 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.925 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:12.925 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.925 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:12.925 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:12.926 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:12.926 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:12.926 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:12.927 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.927 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:12.927 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:12.927 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.927 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:12.927 +03:00 [DBG] Connection id "0HNFLB66E85NC" completed keep alive response.
2025-09-16 22:45:12.927 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:12.927 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:12.928 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:12.928 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.1579ms
2025-09-16 22:45:12.996 +03:00 [DBG] Connection id "0HNFLB66E85NE" accepted.
2025-09-16 22:45:12.996 +03:00 [DBG] Connection id "0HNFLB66E85NE" started.
2025-09-16 22:45:12.999 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:45:12.999 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:45:12.999 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:45:12.999 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:45:13.002 +03:00 [INF] Api health check sent.
2025-09-16 22:45:13.002 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:45:13.002 +03:00 [DBG] Connection id "0HNFLB66E85NE" completed keep alive response.
2025-09-16 22:45:13.003 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 4.0202ms
2025-09-16 22:45:17.012 +03:00 [DBG] Connection id "0HNFLB66E85NE" received FIN.
2025-09-16 22:45:17.013 +03:00 [DBG] Connection id "0HNFLB66E85NE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:45:17.014 +03:00 [DBG] Connection id "0HNFLB66E85NE" disconnecting.
2025-09-16 22:45:17.015 +03:00 [DBG] Connection id "0HNFLB66E85NE" stopped.
2025-09-16 22:45:17.017 +03:00 [DBG] Connection id "0HNFLB66E85NF" accepted.
2025-09-16 22:45:17.017 +03:00 [DBG] Connection id "0HNFLB66E85NF" started.
2025-09-16 22:45:17.018 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:45:17.018 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:45:17.018 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:45:17.018 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:45:17.018 +03:00 [INF] Api health check sent.
2025-09-16 22:45:17.019 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:45:17.019 +03:00 [DBG] Connection id "0HNFLB66E85NF" completed keep alive response.
2025-09-16 22:45:17.019 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.3396ms
2025-09-16 22:45:17.024 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:45:17.024 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:17.024 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:17.024 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:17.025 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:17.025 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:17.025 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:17.026 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:17.026 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:45:17.026 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:17.027 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:17.027 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.027 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.027 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:17.027 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.027 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.027 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:17.027 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:17.028 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.028 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.028 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.028 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:17.028 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.029 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.029 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:17.029 +03:00 [DBG] Connection id "0HNFLB66E85NC" completed keep alive response.
2025-09-16 22:45:17.029 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:17.029 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.029 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.029 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.2149ms
2025-09-16 22:45:17.034 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:45:17.035 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:17.035 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:45:17.035 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:17.035 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:17.035 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:17.035 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:17.037 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:17.037 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:45:17.039 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:17.039 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:17.039 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.039 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.039 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:17.039 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.040 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.040 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:17.040 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:17.040 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.041 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.041 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.041 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:17.041 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.041 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.042 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:45:17.042 +03:00 [DBG] Connection id "0HNFLB66E85NC" completed keep alive response.
2025-09-16 22:45:17.042 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:17.042 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.042 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.042 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 7.7629ms
2025-09-16 22:45:17.188 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:45:17.188 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:45:17.188 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:45:17.189 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.189 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:17.189 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:17.189 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.191 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:17.195 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:45:17.196 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:45:17.196 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:45:17.196 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:45:17.196 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:17.196 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:17.197 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:45:17.198 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:17.201 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:45:17.203 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:45:17.228 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:45:17.232 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:17.232 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:17.232 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:17.232 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:17.232 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.232 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.232 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.232 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:17.232 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.233 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.233 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.233 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.233 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.233 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:17.233 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.233 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.233 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.233 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.234 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.235 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.248 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.249 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.256 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.256 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.256 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.256 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.256 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 23ms reading results.
2025-09-16 22:45:17.256 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 21ms reading results.
2025-09-16 22:45:17.256 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.256 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.256 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.256 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.258 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:17.258 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.258 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.258 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:17.258 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.258 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.259 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.259 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.259 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.259 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:17.259 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.259 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.265 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:17.266 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.266 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:17.266 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.267 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:17.267 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.267 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.269 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.269 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:45:17.269 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.270 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:17.270 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:17.270 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.270 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.270 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:17.270 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.270 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.270 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 74.8702ms
2025-09-16 22:45:17.270 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.271 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:17.271 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:45:17.272 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:45:17.273 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:45:17.273 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:45:17.273 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:17.273 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:17.273 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:45:17.274 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:17.275 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:17.276 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:17.276 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.276 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.276 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:17.276 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.276 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.276 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.277 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.277 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.277 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.278 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:17.278 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.278 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:45:17.279 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.279 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.280 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:17.282 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.282 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.282 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:17.282 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.282 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:17.282 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.282 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:45:17.283 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:17.283 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.283 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:17.283 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:17.283 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.284 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:17.287 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:45:17.287 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:17.287 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:17.287 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:45:17.288 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.288 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.289 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 17.3552ms
2025-09-16 22:45:17.356 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:45:17.362 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.362 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:45:17.363 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:45:17.363 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:45:17.363 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.363 +03:00 [DBG] Connection id "0HNFLB66E85NC" completed keep alive response.
2025-09-16 22:45:17.363 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:17.364 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:17.364 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:17.364 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:17.364 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.364 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:17.364 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 175.8242ms
2025-09-16 22:45:17.365 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:17.366 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.366 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:17.366 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:17.366 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 3.8008ms
2025-09-16 22:45:17.367 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:45:17.367 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:45:17.367 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:45:17.367 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.367 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:17.367 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:17.367 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.368 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:17.369 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.369 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:17.369 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:17.369 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.22ms
2025-09-16 22:45:17.370 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:45:17.370 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:45:17.370 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:45:17.371 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.371 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:17.371 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:17.371 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.372 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:17.372 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:45:17.373 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:17.373 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:17.373 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.8563ms
2025-09-16 22:45:18.406 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:45:18.406 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:45:18.407 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:45:18.407 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:18.407 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:18.407 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:45:18.408 +03:00 [INF] Api health check sent.
2025-09-16 22:45:18.408 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:45:18.408 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:18.408 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 2.2213ms
2025-09-16 22:45:18.428 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:45:18.429 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:45:18.429 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:45:18.429 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:18.429 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:18.430 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:45:18.458 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:18.493 +03:00 [INF] Listing all profiles
2025-09-16 22:45:18.508 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 22:45:18.511 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:45:18.579 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:45:18.582 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:18.583 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:18.583 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:18.583 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.583 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:18.583 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.583 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.583 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:45:18.583 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:45:18.586 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.586 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:45:18.587 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.587 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:18.588 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:18.589 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:18.589 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.590 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:18.590 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.590 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.590 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:18.591 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:18.591 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:18.592 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:18.592 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:18.592 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.592 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:45:18.592 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.592 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:18.593 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:18.596 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:45:18.596 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:18.597 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:18.597 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:18.597 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:18.597 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 168.4541ms
2025-09-16 22:45:18.617 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:45:18.617 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:45:18.618 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:45:18.618 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:18.618 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:18.618 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:45:18.620 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:18.620 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 3.3133ms
2025-09-16 22:45:18.622 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:45:18.623 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:45:18.623 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:45:18.623 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:45:18.623 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:18.623 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:18.624 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:45:18.626 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:18.651 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000000B": started reading request body.
2025-09-16 22:45:18.651 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000000B": done reading request body.
2025-09-16 22:45:18.675 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:18.676 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:18.677 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:18.677 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:18.677 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.677 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:18.677 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.677 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.677 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:18.678 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:18.678 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:18.679 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:18.679 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.680 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:45:18.680 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.680 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:18.681 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:18.682 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.682 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:18.682 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.682 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.682 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:18.683 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:18.685 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:18.686 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:18.686 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.686 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:45:18.687 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.688 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-16 22:45:18.690 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:18.691 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:18.691 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.692 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:18.692 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.692 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:18.692 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:18.692 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:18.693 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.693 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:18.693 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:18.693 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:18.694 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:18.694 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:45:18.694 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:45:18.696 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:45:18.729 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:45:18.730 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:45:18.732 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:45:18.732 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:45:18.739 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:45:19.447 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:45:19.453 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:45:19.455 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:45:19.455 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:19.455 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:19.455 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:19.455 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:19.455 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 832.8588ms
2025-09-16 22:45:21.021 +03:00 [DBG] Connection id "0HNFLB66E85NF" received FIN.
2025-09-16 22:45:21.021 +03:00 [DBG] Connection id "0HNFLB66E85NF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:45:21.021 +03:00 [DBG] Connection id "0HNFLB66E85NF" disconnecting.
2025-09-16 22:45:21.021 +03:00 [DBG] Connection id "0HNFLB66E85NF" stopped.
2025-09-16 22:45:49.516 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:45:49.516 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:45:49.516 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:45:49.517 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:49.517 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:49.517 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:45:49.518 +03:00 [INF] Api health check sent.
2025-09-16 22:45:49.518 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:45:49.518 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:49.518 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.7416ms
2025-09-16 22:45:58.369 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:45:58.369 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:45:58.369 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:45:58.369 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:58.369 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:58.369 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:45:58.369 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:58.369 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.4798ms
2025-09-16 22:45:58.370 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:45:58.370 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:45:58.371 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:45:58.371 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:45:58.371 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:45:58.371 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:45:58.371 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:45:58.371 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:45:58.371 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000000E": started reading request body.
2025-09-16 22:45:58.372 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000000E": done reading request body.
2025-09-16 22:45:58.372 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:58.372 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:45:58.372 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:45:58.372 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:58.372 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.372 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:58.372 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:58.372 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:58.373 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:58.373 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:45:58.373 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:58.373 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:58.373 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.373 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:58.373 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.373 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:58.373 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:58.373 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.373 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:58.373 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:58.373 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:58.373 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:58.374 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:58.374 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:58.374 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:45:58.374 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.374 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:58.374 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.374 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:58.374 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:58.375 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:58.375 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.375 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:45:58.375 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:58.375 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:45:58.375 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:58.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:45:58.375 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.376 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:45:58.376 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:45:58.376 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:58.376 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:45:58.376 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:45:58.376 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:45:58.377 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:45:58.378 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:45:58.378 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 22:45:58.378 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:45:58.378 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:45:58.378 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:45:59.233 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:45:59.233 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:45:59.233 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:45:59.233 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:45:59.233 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:45:59.233 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:45:59.233 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:45:59.233 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 862.7552ms
2025-09-16 22:46:03.782 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:46:03.782 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:03.782 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:46:03.783 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:03.783 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:03.783 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:46:03.783 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:03.783 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.7722ms
2025-09-16 22:46:03.784 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:46:03.784 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:03.784 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:03.784 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:03.784 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:03.784 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:03.784 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:03.785 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:46:03.785 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000010": started reading request body.
2025-09-16 22:46:03.785 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000010": done reading request body.
2025-09-16 22:46:03.785 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:03.786 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:03.786 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:46:03.786 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.491ms
2025-09-16 22:46:10.563 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:46:10.563 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:10.563 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:46:10.563 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:10.563 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:10.563 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:46:10.563 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:10.563 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3034ms
2025-09-16 22:46:10.564 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:46:10.564 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:10.564 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:10.564 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:10.565 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:10.565 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:10.565 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:10.565 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:46:10.565 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000012": started reading request body.
2025-09-16 22:46:10.565 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000012": done reading request body.
2025-09-16 22:46:10.566 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:10.566 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:46:10.566 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:46:10.566 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:10.566 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.566 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:10.566 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:10.566 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:10.566 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:46:10.567 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:46:10.567 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:10.567 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:10.567 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.567 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:10.567 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.567 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:10.567 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:10.568 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.568 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:10.568 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:10.568 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:10.568 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:10.568 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:10.568 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:10.568 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:10.568 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.568 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:10.568 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.568 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:10.568 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:10.569 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:10.569 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.569 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:10.569 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:10.569 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:10.569 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:10.569 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:10.569 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.569 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:10.569 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:10.569 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:10.570 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:10.570 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:46:10.570 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:46:10.570 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:46:10.571 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:46:10.571 +03:00 [INF] Converting natural language to SQL. User query: Find products with low inventory
2025-09-16 22:46:10.571 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:46:10.571 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:46:10.571 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:46:11.422 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:46:11.423 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:46:11.424 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:11.424 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:11.424 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:46:11.424 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:11.424 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:11.424 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 859.8866ms
2025-09-16 22:46:13.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:46:13.600 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:13.600 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:13.600 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:13.600 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:13.600 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:13.600 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:13.601 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:46:13.601 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000013": started reading request body.
2025-09-16 22:46:13.601 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000013": done reading request body.
2025-09-16 22:46:13.601 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:13.601 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:13.601 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:46:13.601 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.3924ms
2025-09-16 22:46:19.515 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:46:19.515 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:46:19.515 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:46:19.515 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:19.515 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:19.515 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:46:19.515 +03:00 [INF] Api health check sent.
2025-09-16 22:46:19.515 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:46:19.515 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:19.515 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7994ms
2025-09-16 22:46:20.392 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:46:20.393 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:46:20.393 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:46:20.393 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:20.393 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:20.393 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:46:20.393 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:20.393 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.4315ms
2025-09-16 22:46:20.394 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 261
2025-09-16 22:46:20.394 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:46:20.394 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:46:20.394 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:46:20.394 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:20.394 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:20.395 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:46:20.395 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:46:20.404 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000016": started reading request body.
2025-09-16 22:46:20.404 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000016": done reading request body.
2025-09-16 22:46:20.411 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:46:20.412 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:46:20.412 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:20.412 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.412 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:20.412 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:20.412 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:20.412 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:20.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:20.413 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:20.413 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:20.413 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:20.413 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.413 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:20.413 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.413 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:20.414 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:20.414 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:20.414 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.414 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:20.414 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:20.414 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:20.414 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:20.414 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:20.414 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.415 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:20.415 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.415 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:20.415 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:20.415 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 22:46:20.422 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 22:46:20.422 +03:00 [DBG] SQL: SELECT P.* FROM Products P WHERE P.StockQuantity < @param1;
2025-09-16 22:46:20.424 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:46:20.591 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 22:46:20.660 +03:00 [INF] Query execution finished in 236 ms, returned 0 rows
2025-09-16 22:46:20.665 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:20.665 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.665 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:20.665 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:20.665 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:20.665 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:20.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:20.666 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.666 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:20.666 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.666 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:20.688 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:20.690 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:20.693 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:46:20.710 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:20.713 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:46:20.716 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:46:20.717 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:46:20.717 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:46:20.755 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:20.755 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.756 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:20.756 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:20.756 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:20.756 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 160), @p3='?' (Size = 59), @p4='?' (DbType = DateTime), @p5='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:46:20.760 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 160), @p3='?' (Size = 59), @p4='?' (DbType = DateTime), @p5='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:46:20.762 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.762 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:46:20.762 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:20.762 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:20.767 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:20.768 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:46:20.772 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-16T19:46:20.6710958Z","$type":"QueryAddedEvent"}
2025-09-16 22:46:20.773 +03:00 [INF] Saved query to DB for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:20.774 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:46:20.774 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:20.774 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:46:20.774 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:20.774 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:20.774 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 380.1644ms
2025-09-16 22:46:21.780 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:46:21.780 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:46:21.780 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:46:21.780 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:46:21.780 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:21.780 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:21.781 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:46:21.781 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:46:21.782 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:46:21.782 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:46:21.782 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:21.782 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:21.782 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:21.782 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:21.782 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:21.782 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:21.782 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:21.783 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:21.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:21.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:21.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:21.784 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:21.784 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:46:21.784 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:21.784 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:21.784 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:21.784 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:21.784 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:21.785 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:21.785 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:21.785 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:21.785 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:21.785 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:21.785 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:21.785 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:21.785 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:21.785 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:21.786 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:21.786 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:46:21.786 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:21.786 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:46:21.786 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:21.786 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:21.786 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 6.446ms
2025-09-16 22:46:49.516 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:46:49.516 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:46:49.516 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:46:49.516 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:49.516 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:49.516 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:46:49.517 +03:00 [INF] Api health check sent.
2025-09-16 22:46:49.517 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:46:49.517 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:49.517 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5119ms
2025-09-16 22:46:53.096 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:46:53.096 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:53.096 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:46:53.096 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:53.096 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:53.096 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:46:53.096 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:53.096 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3325ms
2025-09-16 22:46:53.097 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:46:53.097 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:53.097 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:46:53.097 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:53.097 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:53.097 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:53.098 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:53.098 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:46:53.098 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000001A": started reading request body.
2025-09-16 22:46:53.098 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000001A": done reading request body.
2025-09-16 22:46:53.098 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:46:53.098 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:53.098 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:46:53.098 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.1482ms
2025-09-16 22:46:54.479 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:46:54.479 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:46:54.479 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:46:54.479 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:54.479 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:54.479 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:46:54.479 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:54.479 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.2391ms
2025-09-16 22:46:54.480 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 261
2025-09-16 22:46:54.480 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:46:54.480 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:46:54.480 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:46:54.480 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:54.480 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:54.480 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:46:54.480 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:46:54.481 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000001C": started reading request body.
2025-09-16 22:46:54.481 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000001C": done reading request body.
2025-09-16 22:46:54.481 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:46:54.481 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:54.481 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:46:54.481 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 0.9706ms
2025-09-16 22:46:55.558 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:46:55.558 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:46:55.558 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:46:55.558 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:46:55.558 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:46:55.558 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:46:55.558 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:46:55.559 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:46:55.559 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:46:55.559 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:46:55.559 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:55.559 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:55.559 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:55.559 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:55.559 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:55.559 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:55.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:55.559 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:55.560 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:55.560 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:55.560 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:46:55.560 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:55.560 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:55.560 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:55.560 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:55.560 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:55.560 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:55.560 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:55.560 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:46:55.560 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:55.560 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:46:55.560 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:55.560 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:46:55.560 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:55.560 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:46:55.560 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:46:55.560 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:55.561 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:46:55.561 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:46:55.561 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:46:55.561 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:46:55.561 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:46:55.561 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:46:55.561 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.3438ms
2025-09-16 22:47:00.594 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:47:00.594 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:47:00.594 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:47:00.594 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.594 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:00.595 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:00.595 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.595 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:00.595 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.595 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:00.595 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:00.595 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.3114ms
2025-09-16 22:47:00.596 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:47:00.596 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:47:00.597 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:47:00.597 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.597 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:00.597 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:00.597 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.597 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:00.597 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.597 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:00.597 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:00.597 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 0.9971ms
2025-09-16 22:47:00.603 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:47:00.603 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:47:00.603 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:47:00.603 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.603 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:00.603 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:00.604 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.605 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:00.605 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.605 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:00.605 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:00.606 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.4833ms
2025-09-16 22:47:00.607 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:47:00.607 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:47:00.607 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:47:00.607 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.607 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:00.607 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:00.607 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.608 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:00.608 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:47:00.608 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:00.608 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:00.608 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.6446ms
2025-09-16 22:47:19.515 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:47:19.515 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:47:19.515 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:47:19.515 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:19.515 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:19.515 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:47:19.515 +03:00 [INF] Api health check sent.
2025-09-16 22:47:19.515 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:47:19.515 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:19.515 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5069ms
2025-09-16 22:47:28.091 +03:00 [DBG] Connection id "0HNFLB66E85NC" disconnecting.
2025-09-16 22:47:28.091 +03:00 [DBG] Connection id "0HNFLB66E85NC" stopped.
2025-09-16 22:47:28.092 +03:00 [DBG] Connection id "0HNFLB66E85NC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:47:35.962 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:47:35.962 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:35.962 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:47:35.962 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:35.962 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:35.962 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:47:35.962 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:35.962 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3553ms
2025-09-16 22:47:35.963 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:47:35.963 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:35.963 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:35.963 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:35.963 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:35.963 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:35.963 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:35.964 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:35.964 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000024": started reading request body.
2025-09-16 22:47:35.964 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000024": done reading request body.
2025-09-16 22:47:35.964 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:35.964 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:47:35.964 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:47:35.964 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:35.965 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.965 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:35.965 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:35.965 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:35.965 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:47:35.965 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:47:35.965 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:35.965 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:35.965 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.965 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:35.965 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.965 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:35.965 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:35.965 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.965 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:35.965 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:35.965 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:35.965 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:35.965 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:35.966 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:35.966 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:35.966 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:35.966 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.966 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:35.966 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.966 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:35.966 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:35.966 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:35.966 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.966 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:35.966 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:35.966 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:35.966 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:35.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:35.966 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.966 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:35.966 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:35.966 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:35.967 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:35.967 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:47:35.967 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:47:35.967 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:47:35.967 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:47:35.967 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 22:47:35.967 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:47:35.967 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:47:35.968 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:47:36.735 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:47:36.735 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:47:36.735 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:36.735 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:36.735 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:36.735 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:36.735 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:36.735 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 772.042ms
2025-09-16 22:47:49.515 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:47:49.515 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:47:49.515 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:47:49.515 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:49.515 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:49.515 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:47:49.516 +03:00 [INF] Api health check sent.
2025-09-16 22:47:49.516 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:47:49.516 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:49.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.8033ms
2025-09-16 22:47:49.576 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:47:49.576 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:49.576 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:47:49.576 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:49.576 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:49.576 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:47:49.576 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:49.576 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3708ms
2025-09-16 22:47:49.577 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 157
2025-09-16 22:47:49.577 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:49.577 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:49.577 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:49.577 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:49.577 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:49.577 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:49.578 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:49.578 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000027": started reading request body.
2025-09-16 22:47:49.578 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000027": done reading request body.
2025-09-16 22:47:49.578 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:49.579 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:47:49.579 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:47:49.579 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:49.579 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.579 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:49.579 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:49.579 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:49.579 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:47:49.580 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:47:49.580 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:49.580 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:49.580 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.580 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:49.580 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.580 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:49.581 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:49.581 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.581 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:49.581 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:49.581 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:49.581 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:49.581 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:49.582 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:49.582 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:49.582 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:49.582 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.582 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:49.582 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.582 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:49.582 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:49.583 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:49.583 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.583 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:49.583 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:49.583 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:49.583 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:49.583 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:49.583 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.583 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:49.583 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:49.583 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:49.584 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:49.584 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:47:49.584 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:47:49.585 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:47:49.585 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:47:49.585 +03:00 [INF] Converting natural language to SQL. User query: show all products
2025-09-16 22:47:49.585 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:47:49.585 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:47:49.586 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:47:50.369 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:47:50.369 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:47:50.369 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:50.369 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:50.369 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:50.369 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:50.369 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:50.369 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 792.4348ms
2025-09-16 22:47:52.757 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:47:52.757 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:47:52.757 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:47:52.758 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:52.758 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:52.758 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:47:52.758 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:52.758 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.2266ms
2025-09-16 22:47:52.758 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 310
2025-09-16 22:47:52.759 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:47:52.759 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:47:52.759 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:47:52.759 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:52.759 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:52.759 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:47:52.759 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:52.759 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000029": started reading request body.
2025-09-16 22:47:52.759 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:00000029": done reading request body.
2025-09-16 22:47:52.760 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:47:52.760 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:47:52.760 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:52.760 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.760 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:52.760 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:52.760 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:52.760 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:52.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:52.760 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:52.760 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:52.760 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:52.760 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:52.760 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.760 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:52.760 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.760 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:52.760 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:52.761 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:52.761 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.761 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:52.761 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:52.761 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:52.761 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:52.761 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:52.761 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.761 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:52.761 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.761 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:52.761 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:52.762 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 22:47:52.764 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 22:47:52.764 +03:00 [DBG] SQL: SELECT P.Id, P.Name, P.Price, P.StockQuantity, C.Name AS CategoryName FROM Products P INNER JOIN Categories C ON P.CategoryId = C.Id;
2025-09-16 22:47:52.764 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:47:52.764 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 22:47:52.823 +03:00 [INF] Query execution finished in 59 ms, returned 19 rows
2025-09-16 22:47:52.824 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:52.824 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.824 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:52.824 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:52.824 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:52.824 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:52.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:52.825 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.825 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:52.825 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.825 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:52.833 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:52.833 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:52.833 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:47:52.833 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:52.833 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:47:52.833 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:47:52.833 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:47:52.834 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:47:52.835 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:52.835 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.835 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:52.835 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:52.835 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:52.835 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 1625), @p3='?' (Size = 133), @p4='?' (DbType = DateTime), @p5='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:47:52.840 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 1625), @p3='?' (Size = 133), @p4='?' (DbType = DateTime), @p5='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:47:52.840 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.840 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:52.840 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:52.841 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:52.841 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:52.841 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:47:52.842 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-16T19:47:52.8325414Z","$type":"QueryAddedEvent"}
2025-09-16 22:47:52.843 +03:00 [INF] Saved query to DB for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:52.844 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:47:52.844 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:52.844 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:52.844 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:52.844 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:52.844 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 85.5472ms
2025-09-16 22:47:53.847 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:47:53.847 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:47:53.847 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:47:53.847 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:47:53.848 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:53.848 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:53.848 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:47:53.848 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:53.848 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:47:53.848 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:47:53.848 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:53.848 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:53.848 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:53.848 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:53.848 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:53.848 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:53.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:53.849 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:53.849 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:53.849 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:53.849 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:53.849 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:47:53.849 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:53.849 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:53.849 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:53.849 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:53.849 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:53.849 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:53.849 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:53.849 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:47:53.849 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:53.849 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:47:53.849 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:53.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:47:53.849 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:53.849 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:47:53.849 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:47:53.849 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:53.850 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:47:53.850 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:47:53.851 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:53.851 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:53.851 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:47:53.851 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:47:53.851 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.207ms
2025-09-16 22:47:58.604 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:47:58.604 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:58.604 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:47:58.604 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:58.604 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:58.604 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:47:58.604 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:58.604 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3563ms
2025-09-16 22:47:58.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 22:47:58.605 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:58.605 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:47:58.605 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:58.605 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:47:58.605 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:47:58.605 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:58.606 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:47:58.606 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000002C": started reading request body.
2025-09-16 22:47:58.606 +03:00 [DBG] Connection id "0HNFLB66E85ND", Request id "0HNFLB66E85ND:0000002C": done reading request body.
2025-09-16 22:47:58.606 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:47:58.606 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:47:58.606 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:47:58.606 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.0748ms
2025-09-16 22:48:16.999 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:48:16.999 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:48:16.999 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:48:16.999 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:48:16.999 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:48:16.999 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:48:16.999 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:48:17.000 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:48:17.000 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:48:17.000 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:48:17.000 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:48:17.000 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:48:17.000 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:48:17.000 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:48:17.000 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:48:17.000 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:48:17.001 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:48:17.001 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:48:17.001 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:48:17.001 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:48:17.001 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:48:17.001 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:48:17.002 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:48:17.002 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:48:17.002 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:48:17.002 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:48:17.002 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:48:17.002 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:48:17.002 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:48:17.002 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:48:17.002 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:48:17.002 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:48:17.002 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:48:17.003 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:48:17.003 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:48:17.003 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:48:17.003 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:48:17.003 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:48:17.003 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:48:17.004 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:48:17.004 +03:00 [DBG] Connection id "0HNFLB66E85ND" completed keep alive response.
2025-09-16 22:48:17.004 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:48:17.004 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:48:17.004 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:48:17.004 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 4.8072ms
2025-09-16 22:49:56.523 +03:00 [INF] This is a test log to file!
2025-09-16 22:49:56.943 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:49:56.947 +03:00 [INF] API configured successfully.
2025-09-16 22:49:57.050 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:49:57.126 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:49:57.624 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:49:57.690 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:49:57.715 +03:00 [INF] Registered 23 endpoints in 924 milliseconds.
2025-09-16 22:49:57.721 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:49:57.772 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:49:57.965 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:57.987 +03:00 [DBG] Created DbConnection. (19ms).
2025-09-16 22:49:57.991 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:57.998 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:58.002 +03:00 [DBG] Created DbConnection. (3ms).
2025-09-16 22:49:58.005 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:58.029 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:58.034 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:58.039 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:58.039 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:58.041 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:58.044 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:49:58.052 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:49:58.059 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (5ms).
2025-09-16 22:49:58.060 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (10ms).
2025-09-16 22:49:58.072 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:49:58.107 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:49:58.109 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:49:58.109 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:49:58.109 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:49:58.109 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:49:58.1087656+00:00');
SELECT changes();
2025-09-16 22:49:58.116 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:49:58.1087656+00:00');
SELECT changes();
2025-09-16 22:49:58.171 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:49:58.174 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:49:58.176 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:49:58.176 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:49:58.177 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-16 22:49:58.178 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:49:58.180 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:49:58.181 +03:00 [DBG] Committing transaction.
2025-09-16 22:49:58.184 +03:00 [DBG] Committed transaction.
2025-09-16 22:49:58.185 +03:00 [DBG] Disposing transaction.
2025-09-16 22:49:58.188 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:49:58.188 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:49:58.191 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:58.191 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:49:58.191 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:58.192 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:58.192 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:58.192 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:58.192 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:49:58.193 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:49:58.193 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:49:58.193 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:49:58.193 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:49:58.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:49:58.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:58.195 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:58.196 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:49:58.197 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:49:58.200 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:58.201 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:49:58.205 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:49:58.205 +03:00 [DBG] Committing transaction.
2025-09-16 22:49:58.205 +03:00 [DBG] Committed transaction.
2025-09-16 22:49:58.205 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:49:58.205 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:49:58.205 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:49:58.205 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:49:58.210 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:49:58.210 +03:00 [DBG] Disposing transaction.
2025-09-16 22:49:58.211 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:58.216 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (5ms).
2025-09-16 22:49:58.216 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:49:58.216 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:58.216 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:58.216 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:49:58.217 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:49:58.241 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:49:58.259 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:49:58.260 +03:00 [DBG] Hosting starting
2025-09-16 22:49:58.390 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:49:58.392 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:49:58.412 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:49:58.412 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:49:58.412 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:49:58.416 +03:00 [INF] Hosting environment: Development
2025-09-16 22:49:58.416 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:49:58.416 +03:00 [DBG] Hosting started
2025-09-16 22:49:58.513 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" accepted.
2025-09-16 22:49:58.514 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" started.
2025-09-16 22:49:58.545 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:49:58.553 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" accepted.
2025-09-16 22:49:58.554 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" started.
2025-09-16 22:49:58.614 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:49:58.615 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:58.638 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:49:58.639 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:49:58.640 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 22:49:58.643 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:58.660 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:49:58.678 +03:00 [INF] Getting all users
2025-09-16 22:49:58.708 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 22:49:58.759 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:49:58.959 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:49:58.980 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:58.980 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:49:58.981 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:58.983 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:58.983 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:49:58.983 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:58.983 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:58.984 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:49:58.986 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:49:59.000 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.001 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 14ms reading results.
2025-09-16 22:49:59.003 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.004 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.037 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:59.037 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:49:59.038 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:49:59.039 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:49:59.040 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:49:59.040 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.040 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:59.040 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.041 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:49:59.041 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:49:59.041 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:59.042 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:49:59.042 +03:00 [INF] Getting all users
2025-09-16 22:49:59.041 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 497.0075ms
2025-09-16 22:49:59.046 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:49:59.046 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:49:59.046 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:59.046 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:49:59.046 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.046 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.047 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:49:59.047 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.047 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.047 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:49:59.047 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:49:59.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:49:59.047 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.047 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.047 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:49:59.047 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.047 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.048 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:59.048 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:49:59.048 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" completed keep alive response.
2025-09-16 22:49:59.048 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:49:59.048 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:49:59.048 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.048 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.048 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 9.6916ms
2025-09-16 22:49:59.049 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.050 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:49:59.074 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:49:59.082 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:49:59.088 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:49:59.117 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:49:59.125 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:59.125 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:49:59.125 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.125 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.125 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:49:59.125 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.127 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 22:49:59.128 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:49:59.132 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:49:59.161 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:49:59.186 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:49:59.202 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.202 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 69ms reading results.
2025-09-16 22:49:59.202 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.203 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.205 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:49:59.205 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:49:59.205 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:49:59.205 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.205 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.205 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:49:59.205 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:49:59.205 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:49:59.205 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:49:59.205 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.205 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.205 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.205 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 159.398ms
2025-09-16 22:49:59.206 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:49:59.207 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:49:59.208 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:59.208 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:49:59.208 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.208 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.208 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:49:59.209 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.209 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.209 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:49:59.210 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:49:59.210 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:49:59.210 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:49:59.210 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.211 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:49:59.211 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.211 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.211 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.211 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" completed keep alive response.
2025-09-16 22:49:59.211 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:49:59.211 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.211 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.211 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 6.4501ms
2025-09-16 22:49:59.261 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:49:59.261 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:49:59.261 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:59.261 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:49:59.261 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:49:59.261 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:59.262 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:49:59.262 +03:00 [INF] Getting all users
2025-09-16 22:49:59.263 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:59.263 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:49:59.263 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.263 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.263 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:49:59.263 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.263 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.263 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:49:59.264 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:49:59.264 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.264 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:49:59.264 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.264 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.264 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:49:59.264 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" completed keep alive response.
2025-09-16 22:49:59.264 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:49:59.264 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.264 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.265 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 3.8182ms
2025-09-16 22:49:59.288 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:49:59.288 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:49:59.288 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:49:59.288 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.289 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:49:59.289 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:49:59.289 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.289 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:49:59.289 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:49:59.290 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:49:59.290 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:49:59.290 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.290 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.290 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:49:59.290 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.290 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:49:59.290 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:49:59.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:49:59.291 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:49:59.291 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:49:59.292 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.292 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:49:59.292 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:49:59.292 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.292 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:49:59.292 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" completed keep alive response.
2025-09-16 22:49:59.292 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:49:59.292 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:49:59.292 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:49:59.292 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.0365ms
2025-09-16 22:49:59.348 +03:00 [DBG] Connection id "0HNFLB8RPIFJ3" accepted.
2025-09-16 22:49:59.348 +03:00 [DBG] Connection id "0HNFLB8RPIFJ3" started.
2025-09-16 22:49:59.350 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:49:59.350 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:49:59.350 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:49:59.350 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:49:59.354 +03:00 [INF] Api health check sent.
2025-09-16 22:49:59.354 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:49:59.354 +03:00 [DBG] Connection id "0HNFLB8RPIFJ3" completed keep alive response.
2025-09-16 22:49:59.354 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 4.3646ms
2025-09-16 22:50:03.365 +03:00 [DBG] Connection id "0HNFLB8RPIFJ3" received FIN.
2025-09-16 22:50:03.366 +03:00 [DBG] Connection id "0HNFLB8RPIFJ3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:50:03.366 +03:00 [DBG] Connection id "0HNFLB8RPIFJ3" disconnecting.
2025-09-16 22:50:03.368 +03:00 [DBG] Connection id "0HNFLB8RPIFJ3" stopped.
2025-09-16 22:50:03.399 +03:00 [DBG] Connection id "0HNFLB8RPIFJ4" accepted.
2025-09-16 22:50:03.400 +03:00 [DBG] Connection id "0HNFLB8RPIFJ4" started.
2025-09-16 22:50:03.400 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:50:03.400 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:50:03.400 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:50:03.401 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:50:03.402 +03:00 [INF] Api health check sent.
2025-09-16 22:50:03.402 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:50:03.402 +03:00 [DBG] Connection id "0HNFLB8RPIFJ4" completed keep alive response.
2025-09-16 22:50:03.402 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 2.3057ms
2025-09-16 22:50:03.406 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:50:03.407 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:50:03.407 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:50:03.407 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:50:03.407 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:03.407 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:03.408 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:50:03.409 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:03.409 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:50:03.410 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:03.410 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:03.410 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.410 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.410 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:03.410 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.410 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.410 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:50:03.410 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:50:03.411 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.411 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.411 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.411 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:03.411 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.411 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.412 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:50:03.412 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" completed keep alive response.
2025-09-16 22:50:03.412 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:03.412 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.412 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.412 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.8738ms
2025-09-16 22:50:03.438 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:50:03.438 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:50:03.438 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:50:03.438 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:50:03.439 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:03.439 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:03.439 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:50:03.440 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:03.440 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:50:03.440 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:03.441 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:03.441 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.441 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.441 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:03.441 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.441 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.441 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:50:03.441 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:50:03.442 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.442 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.442 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.442 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:03.442 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.442 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.443 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:50:03.443 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" completed keep alive response.
2025-09-16 22:50:03.444 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:03.444 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.444 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.444 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 6.3747ms
2025-09-16 22:50:03.639 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:50:03.639 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:50:03.639 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:50:03.639 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:03.639 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:03.639 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:03.640 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:03.643 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:03.651 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:50:03.652 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:50:03.652 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:50:03.653 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:03.653 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:03.653 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:03.653 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:03.654 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:03.659 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:50:03.660 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:50:03.687 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:50:03.690 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:03.690 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:03.690 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:03.690 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:03.691 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.691 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.691 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.691 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:03.691 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.691 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.691 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.692 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.692 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.692 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.692 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:03.693 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.693 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.693 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.694 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.695 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.710 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.710 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.719 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.719 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.719 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.719 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.719 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.719 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.720 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.720 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.720 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 27ms reading results.
2025-09-16 22:50:03.720 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 25ms reading results.
2025-09-16 22:50:03.720 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.720 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.720 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.720 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.722 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:03.723 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.724 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.724 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:03.724 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.724 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.724 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.726 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.727 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.727 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:03.728 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.729 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.731 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:03.732 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.732 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.732 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:03.732 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.732 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.732 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.733 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.733 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:03.734 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.734 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.755 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:03.763 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:03.783 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:50:03.785 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:50:03.809 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:03.810 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:03.810 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:03.810 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.810 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.811 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 159.9613ms
2025-09-16 22:50:03.846 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:50:03.848 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:50:03.848 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:50:03.848 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:03.849 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:03.850 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:03.850 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:03.866 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:03.869 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:03.869 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:03.870 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.870 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.870 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:03.870 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.870 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.871 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.872 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.872 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.875 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.876 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.876 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.876 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:03.876 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.877 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-16 22:50:03.877 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.877 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.877 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:03.878 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.878 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.878 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:03.878 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.878 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:03.878 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:03.879 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.879 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:03.879 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:03.879 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.880 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:03.880 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:03.880 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:03.880 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:03.880 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:03.881 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:03.881 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 34.304ms
2025-09-16 22:50:04.024 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:50:04.039 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.043 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:50:04.045 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:50:04.045 +03:00 [DBG] Connection id "0HNFLB8RPIFJ2" completed keep alive response.
2025-09-16 22:50:04.045 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:50:04.045 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:04.045 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.045 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:04.045 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:04.045 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 406.6779ms
2025-09-16 22:50:04.046 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:04.046 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:04.046 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.047 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:04.048 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.048 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:04.048 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:04.048 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 5.2321ms
2025-09-16 22:50:04.058 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:50:04.058 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:50:04.058 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:50:04.058 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.059 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:04.059 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:04.059 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.060 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:04.062 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.062 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:04.062 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:04.062 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 4.1524ms
2025-09-16 22:50:04.065 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:50:04.066 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:50:04.066 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:50:04.066 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.066 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:04.066 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:04.068 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.070 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:04.070 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:50:04.070 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:04.071 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:04.071 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 5.3804ms
2025-09-16 22:50:04.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:50:04.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:50:04.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:50:04.979 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:04.979 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:04.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:50:04.979 +03:00 [INF] Api health check sent.
2025-09-16 22:50:04.979 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:50:04.979 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:04.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.889ms
2025-09-16 22:50:05.042 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:50:05.044 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:50:05.045 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:50:05.046 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:05.047 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:05.047 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:50:05.049 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:05.053 +03:00 [INF] Listing all profiles
2025-09-16 22:50:05.060 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 22:50:05.061 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:50:05.082 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:50:05.085 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:05.086 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:05.086 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:05.086 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.086 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:05.086 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.086 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.086 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:50:05.087 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:50:05.089 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.089 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:50:05.089 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.089 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:05.090 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:05.090 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:05.090 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.090 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:05.090 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.091 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.091 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:05.092 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:05.092 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.093 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.093 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.093 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.094 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.094 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.094 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:50:05.094 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.094 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:05.095 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:05.097 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:50:05.097 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:05.097 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:05.097 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:05.097 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:05.098 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 55.4953ms
2025-09-16 22:50:05.105 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:50:05.105 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:50:05.105 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:50:05.105 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:05.105 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:05.106 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:50:05.106 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:05.106 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 1.2617ms
2025-09-16 22:50:05.108 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:50:05.109 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:50:05.109 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:50:05.109 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:50:05.109 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:05.109 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:05.109 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:50:05.113 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:05.125 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1", Request id "0HNFLB8RPIFJ1:0000000B": started reading request body.
2025-09-16 22:50:05.126 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1", Request id "0HNFLB8RPIFJ1:0000000B": done reading request body.
2025-09-16 22:50:05.155 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:05.156 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:05.157 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:05.157 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:05.157 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.157 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:05.157 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.157 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.158 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:50:05.162 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:50:05.163 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.163 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.163 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.163 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:05.167 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.167 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:05.169 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:05.169 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.182 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:05.183 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.183 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.183 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:05.187 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:05.189 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.189 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.190 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.192 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:05.192 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.192 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 5ms reading results.
2025-09-16 22:50:05.192 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.192 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:05.193 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:05.195 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:05.199 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.199 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:05.199 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.200 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:05.202 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:05.211 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:05.211 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.212 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:05.212 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:05.214 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-16 22:50:05.215 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:05.215 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:50:05.215 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:50:05.219 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:50:05.290 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:50:05.292 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:50:05.295 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:50:05.295 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:50:05.312 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:50:06.045 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:50:06.052 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:50:06.055 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:50:06.055 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:06.056 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:06.056 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:06.056 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:06.056 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 947.9621ms
2025-09-16 22:50:07.405 +03:00 [DBG] Connection id "0HNFLB8RPIFJ4" received FIN.
2025-09-16 22:50:07.405 +03:00 [DBG] Connection id "0HNFLB8RPIFJ4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:50:07.405 +03:00 [DBG] Connection id "0HNFLB8RPIFJ4" disconnecting.
2025-09-16 22:50:07.405 +03:00 [DBG] Connection id "0HNFLB8RPIFJ4" stopped.
2025-09-16 22:50:14.362 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:50:14.363 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:50:14.363 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:50:14.363 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:14.363 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:14.363 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:50:14.363 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:14.363 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.5619ms
2025-09-16 22:50:14.364 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:50:14.364 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:50:14.364 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:50:14.364 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:50:14.365 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:14.365 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:14.365 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:50:14.374 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:14.374 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1", Request id "0HNFLB8RPIFJ1:0000000D": started reading request body.
2025-09-16 22:50:14.374 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1", Request id "0HNFLB8RPIFJ1:0000000D": done reading request body.
2025-09-16 22:50:14.375 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:14.375 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:14.375 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:14.375 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:14.375 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.375 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:14.375 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:14.375 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:14.375 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:50:14.376 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:50:14.376 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:14.377 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:14.377 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.377 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:50:14.377 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.377 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:14.378 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:14.378 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.378 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:14.378 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:14.378 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:14.378 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:14.378 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:14.378 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:14.378 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:14.378 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:14.379 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:14.379 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.379 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:14.379 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.379 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:14.379 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:14.379 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:14.380 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.380 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:14.380 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:14.380 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:14.380 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:14.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:14.380 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.380 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:14.380 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:14.380 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:14.380 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:14.380 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:50:14.380 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:50:14.382 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:50:14.383 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:50:14.383 +03:00 [INF] Converting natural language to SQL. User query: Find products with low inventory
2025-09-16 22:50:14.383 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:50:14.383 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:50:14.383 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:50:15.168 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:50:15.168 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:50:15.170 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:50:15.170 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:15.170 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:15.170 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:15.170 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:15.170 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 805.9544ms
2025-09-16 22:50:20.756 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:50:20.757 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:50:20.757 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:50:20.757 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:20.757 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:20.757 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:50:20.757 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:20.757 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.3853ms
2025-09-16 22:50:20.758 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 261
2025-09-16 22:50:20.758 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:50:20.758 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:50:20.758 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:50:20.759 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:20.759 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:20.759 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:50:20.759 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:20.767 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1", Request id "0HNFLB8RPIFJ1:0000000F": started reading request body.
2025-09-16 22:50:20.767 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1", Request id "0HNFLB8RPIFJ1:0000000F": done reading request body.
2025-09-16 22:50:20.773 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:20.773 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:20.773 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:20.773 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:20.773 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:20.773 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:20.773 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:20.773 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:20.773 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:20.773 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:20.774 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:20.774 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:20.774 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:20.774 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:20.774 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:20.774 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:20.774 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:20.774 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:20.774 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:20.775 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:20.775 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:20.775 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:20.775 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:20.775 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:20.775 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:20.776 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:20.776 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:20.776 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:20.776 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:20.776 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:20.777 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:20.777 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 22:50:20.785 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 22:50:20.785 +03:00 [DBG] SQL: SELECT P.* FROM Products P WHERE P.StockQuantity < @param1;
2025-09-16 22:50:20.786 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:50:20.983 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 22:50:21.031 +03:00 [INF] Query execution finished in 244 ms, returned 0 rows
2025-09-16 22:50:21.036 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:21.036 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:21.036 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:21.036 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:21.036 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:21.036 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:21.036 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:21.036 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:21.036 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:21.036 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:21.037 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:21.041 +03:00 [INF] Query not saved due to profile rules for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Query already existed
2025-09-16 22:50:21.044 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:50:21.044 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:21.044 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:21.045 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:21.045 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:21.045 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 286.3337ms
2025-09-16 22:50:22.048 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:50:22.048 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:50:22.048 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:50:22.048 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:22.048 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:22.048 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:22.048 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:22.049 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:50:22.049 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:50:22.049 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:50:22.050 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:22.050 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:22.050 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:22.050 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:22.050 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:22.050 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:22.050 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:22.050 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:22.051 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:22.051 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:22.051 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:22.051 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:50:22.051 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:22.051 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:22.051 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:22.051 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:22.051 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:22.051 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:22.052 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:22.052 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:50:22.052 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:22.052 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:50:22.052 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:22.052 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:50:22.052 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:22.052 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:50:22.052 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:50:22.052 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:22.053 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:50:22.053 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:50:22.053 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:22.053 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:50:22.053 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:50:22.053 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:50:22.053 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 5.1843ms
2025-09-16 22:50:36.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:50:36.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:50:36.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:50:36.979 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:50:36.979 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:50:36.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:50:36.980 +03:00 [INF] Api health check sent.
2025-09-16 22:50:36.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:50:36.980 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:50:36.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5602ms
2025-09-16 22:51:06.062 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:51:06.062 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:51:06.062 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:51:06.062 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:51:06.062 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:51:06.062 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:51:06.063 +03:00 [INF] Api health check sent.
2025-09-16 22:51:06.063 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:51:06.063 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:51:06.063 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4949ms
2025-09-16 22:51:36.061 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:51:36.061 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:51:36.061 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:51:36.061 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:51:36.061 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:51:36.061 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:51:36.062 +03:00 [INF] Api health check sent.
2025-09-16 22:51:36.062 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:51:36.062 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:51:36.062 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.489ms
2025-09-16 22:52:02.006 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:52:02.006 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:52:02.006 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:52:02.006 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.006 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:52:02.006 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:52:02.006 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.007 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:52:02.007 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.007 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:52:02.007 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:52:02.008 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.6729ms
2025-09-16 22:52:02.008 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:52:02.009 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:52:02.009 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:52:02.009 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.009 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:52:02.009 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:52:02.009 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.009 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:52:02.009 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.009 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:52:02.009 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:52:02.009 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 0.8127ms
2025-09-16 22:52:02.015 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:52:02.015 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:52:02.015 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:52:02.015 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.015 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:52:02.015 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:52:02.015 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.016 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:52:02.016 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.016 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:52:02.016 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:52:02.017 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.6115ms
2025-09-16 22:52:02.018 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:52:02.018 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:52:02.018 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:52:02.018 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.018 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:52:02.018 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:52:02.018 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.019 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:52:02.019 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:52:02.019 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:52:02.019 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:52:02.019 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.3935ms
2025-09-16 22:52:06.061 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:52:06.061 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:52:06.061 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:52:06.061 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:52:06.061 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:52:06.061 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:52:06.061 +03:00 [INF] Api health check sent.
2025-09-16 22:52:06.061 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:52:06.061 +03:00 [DBG] Connection id "0HNFLB8RPIFJ1" completed keep alive response.
2025-09-16 22:52:06.061 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4069ms
2025-09-16 22:59:17.585 +03:00 [INF] This is a test log to file!
2025-09-16 22:59:17.854 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 22:59:17.858 +03:00 [INF] API configured successfully.
2025-09-16 22:59:17.955 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 22:59:18.011 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 22:59:18.691 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 22:59:18.811 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:18.837 +03:00 [INF] Registered 23 endpoints in 1,115 milliseconds.
2025-09-16 22:59:18.842 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:18.881 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:18.991 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:19.003 +03:00 [DBG] Created DbConnection. (9ms).
2025-09-16 22:59:19.005 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:19.009 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:19.011 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 22:59:19.012 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:19.021 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:19.023 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:19.027 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:19.027 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:19.029 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:19.031 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 22:59:19.035 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:59:19.040 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 22:59:19.041 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-16 22:59:19.046 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:59:19.072 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 22:59:19.075 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:59:19.075 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:59:19.076 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:59:19.076 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:59:19.0752417+00:00');
SELECT changes();
2025-09-16 22:59:19.084 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 19:59:19.0752417+00:00');
SELECT changes();
2025-09-16 22:59:19.132 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:59:19.135 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:59:19.137 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 22:59:19.137 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:59:19.137 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 22:59:19.137 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:59:19.138 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 22:59:19.139 +03:00 [DBG] Committing transaction.
2025-09-16 22:59:19.139 +03:00 [DBG] Committed transaction.
2025-09-16 22:59:19.141 +03:00 [DBG] Disposing transaction.
2025-09-16 22:59:19.143 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 22:59:19.143 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 22:59:19.144 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:19.144 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:19.144 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:19.144 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:19.144 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:19.144 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:19.144 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:59:19.144 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:59:19.144 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:59:19.145 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:59:19.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 22:59:19.146 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:19.146 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:19.146 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:19.147 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:59:19.147 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 22:59:19.150 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:19.150 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:59:19.154 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 22:59:19.155 +03:00 [DBG] Committing transaction.
2025-09-16 22:59:19.155 +03:00 [DBG] Committed transaction.
2025-09-16 22:59:19.155 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 22:59:19.155 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:59:19.155 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 22:59:19.155 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:59:19.159 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 22:59:19.159 +03:00 [DBG] Disposing transaction.
2025-09-16 22:59:19.160 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:19.163 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 22:59:19.163 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:19.163 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:19.163 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:19.163 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:59:19.163 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 22:59:19.185 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 22:59:19.205 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 22:59:19.206 +03:00 [DBG] Hosting starting
2025-09-16 22:59:19.277 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 22:59:19.279 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 22:59:19.297 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 22:59:19.297 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 22:59:19.298 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 22:59:19.298 +03:00 [INF] Hosting environment: Development
2025-09-16 22:59:19.299 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 22:59:19.299 +03:00 [DBG] Hosting started
2025-09-16 22:59:19.346 +03:00 [DBG] Connection id "0HNFLBE2U3664" accepted.
2025-09-16 22:59:19.347 +03:00 [DBG] Connection id "0HNFLBE2U3664" started.
2025-09-16 22:59:19.392 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:59:19.460 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:59:19.464 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:19.495 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:19.495 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:19.496 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 22:59:19.501 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:19.521 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:19.549 +03:00 [INF] Getting all users
2025-09-16 22:59:19.584 +03:00 [DBG] Connection id "0HNFLBE2U3665" accepted.
2025-09-16 22:59:19.585 +03:00 [DBG] Connection id "0HNFLBE2U3665" started.
2025-09-16 22:59:19.598 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 22:59:19.691 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:59:19.967 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:59:19.997 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:19.997 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:19.998 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:19.999 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:19.999 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:19.999 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:19.999 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:19.999 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:59:20.001 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:59:20.021 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.021 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 19ms reading results.
2025-09-16 22:59:20.023 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.023 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.066 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:20.066 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:20.068 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:20.071 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.072 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-16 22:59:20.074 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 682.8273ms
2025-09-16 22:59:20.082 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:59:20.085 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:20.086 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:20.087 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.088 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:20.089 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:20.089 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.090 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:20.114 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:59:20.114 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:59:20.114 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:20.117 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:20.117 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:20.118 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:20.119 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:20.119 +03:00 [INF] Getting all users
2025-09-16 22:59:20.124 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:20.125 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:20.125 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.125 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.125 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:20.125 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.125 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:59:20.126 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:59:20.126 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.126 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:20.127 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.127 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.128 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:20.128 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:20.128 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:20.128 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.129 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.130 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 16.154ms
2025-09-16 22:59:20.132 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:59:20.144 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:59:20.150 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 22:59:20.191 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:59:20.200 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:20.201 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:20.201 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.201 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.201 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:20.201 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.202 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 22:59:20.204 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:20.207 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:20.244 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:20.278 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:20.302 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.302 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 95ms reading results.
2025-09-16 22:59:20.302 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.302 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.305 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.305 +03:00 [DBG] Connection id "0HNFLBE2U3665" completed keep alive response.
2025-09-16 22:59:20.305 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:20.305 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.305 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.305 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 223.3956ms
2025-09-16 22:59:20.306 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:59:20.307 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:20.307 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:20.307 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.307 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:20.307 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:20.307 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.307 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:20.308 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:59:20.308 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:20.308 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:20.308 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.308 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.308 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:20.308 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.308 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.308 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:20.308 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:20.308 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:20.309 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:20.309 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.309 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:20.309 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.309 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.309 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.309 +03:00 [DBG] Connection id "0HNFLBE2U3665" completed keep alive response.
2025-09-16 22:59:20.309 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:20.309 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.309 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.309 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 2.738ms
2025-09-16 22:59:20.345 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 22:59:20.346 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 22:59:20.346 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:20.346 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:20.346 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:20.346 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:20.347 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:20.347 +03:00 [INF] Getting all users
2025-09-16 22:59:20.348 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:20.348 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:20.348 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.348 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.348 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:20.348 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.348 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.348 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:59:20.348 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 22:59:20.349 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.349 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:20.349 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.349 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.349 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 22:59:20.349 +03:00 [DBG] Connection id "0HNFLBE2U3665" completed keep alive response.
2025-09-16 22:59:20.349 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:20.349 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.349 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.349 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 4.0474ms
2025-09-16 22:59:20.352 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:59:20.352 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:20.352 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:20.352 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.353 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:20.353 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:20.353 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.353 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:20.354 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:59:20.354 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:20.354 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:20.354 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.355 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.355 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:20.355 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.355 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:20.355 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:20.355 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:20.355 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:20.356 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:20.356 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.356 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:20.356 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:20.356 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.356 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:20.356 +03:00 [DBG] Connection id "0HNFLBE2U3665" completed keep alive response.
2025-09-16 22:59:20.356 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:20.357 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:20.357 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:20.357 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.6155ms
2025-09-16 22:59:20.772 +03:00 [DBG] Connection id "0HNFLBE2U3666" accepted.
2025-09-16 22:59:20.772 +03:00 [DBG] Connection id "0HNFLBE2U3666" started.
2025-09-16 22:59:20.831 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:59:20.831 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:59:20.831 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:59:20.832 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:59:20.836 +03:00 [INF] Api health check sent.
2025-09-16 22:59:20.836 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:59:20.836 +03:00 [DBG] Connection id "0HNFLBE2U3666" completed keep alive response.
2025-09-16 22:59:20.836 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 4.9676ms
2025-09-16 22:59:24.855 +03:00 [DBG] Connection id "0HNFLBE2U3666" received FIN.
2025-09-16 22:59:24.856 +03:00 [DBG] Connection id "0HNFLBE2U3666" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:59:24.857 +03:00 [DBG] Connection id "0HNFLBE2U3666" disconnecting.
2025-09-16 22:59:24.858 +03:00 [DBG] Connection id "0HNFLBE2U3666" stopped.
2025-09-16 22:59:24.858 +03:00 [DBG] Connection id "0HNFLBE2U3667" accepted.
2025-09-16 22:59:24.858 +03:00 [DBG] Connection id "0HNFLBE2U3667" started.
2025-09-16 22:59:24.858 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:59:24.858 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:59:24.858 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:59:24.859 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:59:24.859 +03:00 [INF] Api health check sent.
2025-09-16 22:59:24.859 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:59:24.859 +03:00 [DBG] Connection id "0HNFLBE2U3667" completed keep alive response.
2025-09-16 22:59:24.859 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.9351ms
2025-09-16 22:59:24.863 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:59:24.863 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:24.863 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:24.863 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:24.863 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:24.863 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:24.863 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:24.865 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:24.865 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:59:24.866 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:24.866 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:24.866 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:24.866 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:24.866 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:24.866 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:24.866 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:24.866 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:24.867 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:24.867 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:24.867 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:24.868 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:24.868 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:59:24.868 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:24.869 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:24.869 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:24.870 +03:00 [DBG] Connection id "0HNFLBE2U3665" completed keep alive response.
2025-09-16 22:59:24.870 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:24.870 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:24.870 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:24.870 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 7.2432ms
2025-09-16 22:59:24.872 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 22:59:24.872 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:24.872 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 22:59:24.872 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:24.873 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:24.873 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:24.873 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:24.874 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:24.874 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 22:59:24.875 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:24.875 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:24.875 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:24.875 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:24.875 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:24.875 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:24.875 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:24.876 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:24.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:24.876 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:24.876 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:24.877 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:24.877 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:24.877 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:24.877 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:24.877 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 22:59:24.877 +03:00 [DBG] Connection id "0HNFLBE2U3665" completed keep alive response.
2025-09-16 22:59:24.877 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:24.877 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:24.877 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:24.877 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.1864ms
2025-09-16 22:59:24.952 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:59:24.952 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:59:24.953 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:59:24.953 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:24.953 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:24.953 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:24.954 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:24.955 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:59:24.955 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:59:24.956 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:59:24.956 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:24.956 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:24.956 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:24.956 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:24.957 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:24.957 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:24.963 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 22:59:24.964 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:59:24.986 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 22:59:24.990 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:24.990 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:24.990 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:24.990 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:24.990 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:24.990 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:24.990 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:24.990 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:24.990 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:24.990 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:24.990 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:24.991 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:24.991 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:24.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:24.991 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:24.991 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:24.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:24.991 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:24.991 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:24.992 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.000 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.000 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.006 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.006 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.006 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.006 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.007 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.007 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.007 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.007 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.007 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 15ms reading results.
2025-09-16 22:59:25.007 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 15ms reading results.
2025-09-16 22:59:25.007 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.007 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.007 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.007 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.008 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:25.009 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:25.009 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.009 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:25.009 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:25.009 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:25.009 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:25.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:25.010 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.010 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:25.010 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.010 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.017 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:25.018 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:25.018 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.018 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:25.018 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:25.018 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:25.019 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:25.019 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:25.020 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.020 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:25.020 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.020 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.022 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:25.022 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:25.025 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:25.025 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:25.025 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:25.025 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:25.025 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.026 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 70.8382ms
2025-09-16 22:59:25.027 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:59:25.028 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:59:25.029 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:59:25.029 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:25.029 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:25.029 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:25.029 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:25.030 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:25.030 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:25.030 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:25.030 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:25.030 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.030 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:25.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:25.031 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:25.031 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:25.031 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:25.032 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.032 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.032 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.032 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.032 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:25.033 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.033 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:59:25.033 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.033 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.033 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:25.034 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:25.034 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.034 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:25.034 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:25.034 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:25.034 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:25.034 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:25.034 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.035 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:25.035 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:25.035 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.035 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:25.035 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:25.035 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:25.035 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:25.035 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:25.036 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.036 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 8.3664ms
2025-09-16 22:59:25.042 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:59:25.044 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:59:25.053 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:59:25.367 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:59:25.469 +03:00 [INF] Loaded 3 tables
2025-09-16 22:59:25.669 +03:00 [INF] Schema loaded: 3 tables, 10 columns, 1 relations
2025-09-16 22:59:25.742 +03:00 [DBG] Saved cache file C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer_schemas.json
2025-09-16 22:59:25.742 +03:00 [INF] Cached schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory to C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer_schemas.json
2025-09-16 22:59:25.747 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.747 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:59:25.748 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:59:25.748 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:59:25.748 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.748 +03:00 [DBG] Connection id "0HNFLBE2U3665" completed keep alive response.
2025-09-16 22:59:25.748 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:25.748 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:25.748 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:25.748 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:25.749 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.749 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:25.749 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 796.5579ms
2025-09-16 22:59:25.749 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:25.749 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.750 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:25.750 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:25.750 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.3126ms
2025-09-16 22:59:25.751 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:59:25.751 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:59:25.751 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:59:25.751 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.751 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:25.751 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:25.751 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.752 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:25.752 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.752 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:25.753 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:25.753 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.9821ms
2025-09-16 22:59:25.755 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 22:59:25.755 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:59:25.755 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 22:59:25.755 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.756 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:25.756 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:25.756 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.757 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:25.757 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 22:59:25.757 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:25.757 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:25.757 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.1262ms
2025-09-16 22:59:26.080 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:59:26.080 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:59:26.081 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:59:26.081 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:26.081 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:26.081 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:59:26.081 +03:00 [INF] Api health check sent.
2025-09-16 22:59:26.081 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:59:26.081 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:26.081 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.2093ms
2025-09-16 22:59:26.095 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 22:59:26.095 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 22:59:26.096 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:59:26.096 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:26.096 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:26.096 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:59:26.098 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:26.102 +03:00 [INF] Listing all profiles
2025-09-16 22:59:26.104 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 22:59:26.105 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 22:59:26.120 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 22:59:26.122 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:26.122 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:26.122 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:26.122 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.122 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:26.122 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.123 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.123 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:59:26.123 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 22:59:26.124 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.124 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:59:26.125 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.125 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:26.125 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:26.125 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:26.125 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.125 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:26.125 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.125 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:26.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:26.126 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.126 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.126 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.126 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.126 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.126 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.126 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:26.126 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.126 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:26.127 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:26.127 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 22:59:26.128 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:26.128 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:26.128 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:26.128 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:26.128 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 33.5144ms
2025-09-16 22:59:26.138 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:59:26.138 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:59:26.139 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:59:26.139 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:26.139 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:26.139 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:59:26.139 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:26.139 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 1.0353ms
2025-09-16 22:59:26.142 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 22:59:26.142 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:59:26.142 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:59:26.142 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:59:26.142 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:26.142 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:26.142 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:59:26.144 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:26.152 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000000B": started reading request body.
2025-09-16 22:59:26.152 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000000B": done reading request body.
2025-09-16 22:59:26.164 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:26.164 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:26.165 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:26.165 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:26.166 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.166 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:26.166 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.166 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.166 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:26.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:26.167 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.168 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.168 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.168 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:59:26.168 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.168 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:26.169 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:26.169 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.169 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:26.169 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.169 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.169 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:26.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:26.171 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.171 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.171 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.171 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:26.172 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.172 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 22:59:26.172 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.172 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:26.173 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:26.173 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:26.173 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.174 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:26.174 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.174 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:26.174 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:26.174 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:26.174 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.174 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:26.174 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:26.175 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:26.175 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:26.175 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:59:26.175 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:59:26.201 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:59:26.210 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:59:26.211 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 22:59:26.211 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:59:26.212 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:59:26.222 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:59:26.935 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:59:26.943 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:59:26.944 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:59:26.944 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:26.944 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:26.945 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:26.945 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:26.945 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 803.0986ms
2025-09-16 22:59:28.861 +03:00 [DBG] Connection id "0HNFLBE2U3667" received FIN.
2025-09-16 22:59:28.861 +03:00 [DBG] Connection id "0HNFLBE2U3667" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 22:59:28.861 +03:00 [DBG] Connection id "0HNFLBE2U3667" disconnecting.
2025-09-16 22:59:28.861 +03:00 [DBG] Connection id "0HNFLBE2U3667" stopped.
2025-09-16 22:59:34.776 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 22:59:34.777 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:59:34.777 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:59:34.777 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:34.777 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:34.777 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:59:34.777 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:34.778 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 1.075ms
2025-09-16 22:59:34.779 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 22:59:34.779 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:59:34.779 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 22:59:34.779 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:59:34.779 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:34.779 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:34.779 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:59:34.787 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:34.788 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000000D": started reading request body.
2025-09-16 22:59:34.788 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000000D": done reading request body.
2025-09-16 22:59:34.788 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:34.789 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:34.789 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:34.789 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:34.789 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.789 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:34.789 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:34.789 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:34.790 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:34.790 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 22:59:34.790 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:34.790 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:34.790 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.791 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:34.791 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.791 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:34.791 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:34.791 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.791 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:34.791 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:34.791 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:34.791 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:34.791 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:34.792 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:34.792 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:34.792 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:34.792 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:34.792 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.792 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:34.792 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.792 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:34.793 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:34.793 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:34.793 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.793 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:34.793 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:34.793 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:34.793 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:34.793 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:34.794 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.794 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:34.794 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:34.794 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:34.794 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:34.795 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 22:59:34.795 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 22:59:34.796 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 22:59:34.797 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 22:59:34.797 +03:00 [INF] Converting natural language to SQL. User query: Find products with low inventory
2025-09-16 22:59:34.797 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 22:59:34.797 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 22:59:34.797 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 22:59:35.555 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 22:59:35.556 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 22:59:35.557 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 22:59:35.557 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:35.557 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:35.557 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:35.557 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:35.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 778.3245ms
2025-09-16 22:59:38.737 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:59:38.737 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:59:38.737 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:59:38.737 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:38.737 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:38.737 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:59:38.737 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:38.737 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.406ms
2025-09-16 22:59:38.738 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 261
2025-09-16 22:59:38.738 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:59:38.738 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:59:38.738 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:59:38.738 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:38.738 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:38.739 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:59:38.739 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:38.757 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000000F": started reading request body.
2025-09-16 22:59:38.757 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000000F": done reading request body.
2025-09-16 22:59:38.762 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:38.762 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:38.762 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:38.762 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.762 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:38.762 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:38.762 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:38.762 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:38.763 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:38.763 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:38.763 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:38.763 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:38.763 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:38.763 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:38.763 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.763 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:38.763 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.763 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:38.764 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:38.764 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:38.764 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.765 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:38.765 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:38.765 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:38.765 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:38.765 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:38.765 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.765 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:38.765 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.765 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:38.766 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:38.766 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 22:59:38.771 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 22:59:38.771 +03:00 [DBG] SQL: SELECT P.* FROM Products P WHERE P.StockQuantity < @param1;
2025-09-16 22:59:38.773 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:59:38.774 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 22:59:38.783 +03:00 [INF] Query execution finished in 10 ms, returned 0 rows
2025-09-16 22:59:38.786 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:38.786 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.786 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:38.786 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:38.786 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:38.786 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:38.786 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:38.786 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.786 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:38.786 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:38.786 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:38.793 +03:00 [INF] Query not saved due to profile rules for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Query already existed
2025-09-16 22:59:38.796 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:59:38.796 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:38.797 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:38.797 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:38.797 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:38.797 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 58.3763ms
2025-09-16 22:59:39.800 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:59:39.800 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:59:39.800 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:59:39.800 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:39.800 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:39.800 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:39.801 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:39.801 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:39.802 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:39.802 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:39.802 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:39.802 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:39.802 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:39.802 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:39.802 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:39.802 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:39.802 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:39.802 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:39.802 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:39.802 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:39.802 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:39.802 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:39.802 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:39.802 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:39.803 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:39.803 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:39.803 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:39.803 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:39.803 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:39.803 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:39.803 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:39.803 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:39.803 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:39.803 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:39.803 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:39.803 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:39.803 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:39.803 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:39.804 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:39.804 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:39.804 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:39.804 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:39.804 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:39.804 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:39.804 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.9617ms
2025-09-16 22:59:52.437 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 22:59:52.437 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:59:52.437 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 22:59:52.437 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:52.437 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:52.437 +03:00 [DBG] The request is a preflight request.
2025-09-16 22:59:52.437 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:52.437 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.3962ms
2025-09-16 22:59:52.438 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 255
2025-09-16 22:59:52.438 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:59:52.438 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 22:59:52.438 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:59:52.438 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:52.439 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:52.439 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:59:52.439 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:52.439 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000012": started reading request body.
2025-09-16 22:59:52.439 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000012": done reading request body.
2025-09-16 22:59:52.440 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:52.440 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:52.440 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:52.440 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.440 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:52.440 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:52.440 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:52.440 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:52.440 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:52.441 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.441 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.441 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.441 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.441 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.441 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.441 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:52.441 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.441 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:52.441 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:52.442 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:52.442 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.442 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:52.442 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:52.442 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:52.442 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:52.442 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:52.442 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.442 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:52.442 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.442 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:52.443 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:52.443 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 22:59:52.443 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 22:59:52.443 +03:00 [DBG] SQL: SELECT P.* FROM Products P WHERE P.StockQuantity < 5;
2025-09-16 22:59:52.443 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 22:59:52.443 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 22:59:52.454 +03:00 [INF] Query execution finished in 10 ms, returned 0 rows
2025-09-16 22:59:52.454 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:52.454 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.455 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:52.455 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:52.455 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:52.455 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:52.455 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:52.456 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.456 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:52.456 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.456 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:52.478 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.480 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.483 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:59:52.505 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.508 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:59:52.511 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 22:59:52.512 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 22:59:52.512 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 22:59:52.552 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:52.553 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.554 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:52.554 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:52.554 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:52.554 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 159), @p3='?' (Size = 53), @p4='?' (DbType = DateTime), @p5='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:59:52.558 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 159), @p3='?' (Size = 53), @p4='?' (DbType = DateTime), @p5='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 22:59:52.560 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.560 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 22:59:52.560 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:52.561 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:52.565 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:52.566 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 22:59:52.569 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-16T19:59:52.4565135Z","$type":"QueryAddedEvent"}
2025-09-16 22:59:52.571 +03:00 [INF] Saved query to DB for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:52.571 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 22:59:52.571 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:52.571 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:52.571 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:52.571 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:52.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 132.9782ms
2025-09-16 22:59:53.574 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 22:59:53.574 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:59:53.574 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 22:59:53.574 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:53.574 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:53.574 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:53.574 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:53.574 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 22:59:53.575 +03:00 [DBG] Creating DbConnection.
2025-09-16 22:59:53.575 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 22:59:53.575 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:53.575 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:53.575 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:53.575 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:53.575 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:53.575 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:53.575 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:53.576 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:53.576 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:53.576 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:53.576 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:53.576 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:53.576 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 22:59:53.576 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:53.576 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:53.576 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:53.576 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:53.576 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:53.577 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:53.577 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:53.577 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 22:59:53.577 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:53.577 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 22:59:53.577 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:53.577 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 22:59:53.577 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:53.577 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 22:59:53.577 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 22:59:53.577 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:53.578 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 22:59:53.578 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 22:59:53.578 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:53.578 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 22:59:53.578 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 22:59:53.578 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 22:59:53.578 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 4.6023ms
2025-09-16 22:59:56.947 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 22:59:56.947 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 22:59:56.947 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 22:59:56.947 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 22:59:56.947 +03:00 [INF] CORS policy execution successful.
2025-09-16 22:59:56.947 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 22:59:56.948 +03:00 [INF] Api health check sent.
2025-09-16 22:59:56.948 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 22:59:56.948 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 22:59:56.948 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4844ms
2025-09-16 23:00:01.337 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 23:00:01.337 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:01.337 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:00:01.337 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:01.337 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:01.337 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:00:01.337 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:01.337 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.3518ms
2025-09-16 23:00:01.338 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 217
2025-09-16 23:00:01.338 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:01.338 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:01.338 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:01.338 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:01.338 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:01.338 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:01.339 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:00:01.339 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000016": started reading request body.
2025-09-16 23:00:01.339 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000016": done reading request body.
2025-09-16 23:00:01.340 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:00:01.340 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:00:01.340 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:01.340 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.340 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:01.340 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:01.340 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:01.340 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:01.340 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:01.341 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.341 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.341 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.341 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.341 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.341 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.342 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.342 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:00:01.342 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.342 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:01.342 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:01.342 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:01.342 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.342 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:01.342 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:01.342 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:01.342 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:01.343 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:01.343 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.343 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:01.343 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.343 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:01.343 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:01.343 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 23:00:01.343 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 23:00:01.343 +03:00 [DBG] SQL: SELECT P.* FROM Products P WHERE P.StockQuantity < 5;
2025-09-16 23:00:01.343 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 23:00:01.344 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 23:00:01.369 +03:00 [INF] Query execution finished in 25 ms, returned 0 rows
2025-09-16 23:00:01.370 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:01.370 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.370 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:01.370 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:01.370 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:01.370 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:01.371 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:01.371 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.371 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:01.371 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.371 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:01.372 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.372 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.372 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 23:00:01.372 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.372 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 23:00:01.372 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 23:00:01.372 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 23:00:01.372 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 23:00:01.373 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:01.373 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.373 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:01.373 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:01.373 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:01.373 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 159), @p3='?' (Size = 53), @p4='?' (DbType = DateTime), @p5='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 23:00:01.376 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 159), @p3='?' (Size = 53), @p4='?' (DbType = DateTime), @p5='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 23:00:01.376 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.376 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:01.377 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:01.377 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:01.377 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:01.377 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 23:00:01.378 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-16T20:00:01.3714670Z","$type":"QueryAddedEvent"}
2025-09-16 23:00:01.378 +03:00 [INF] Saved query to DB for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:01.378 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:01.378 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:01.378 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:00:01.379 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:01.379 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:01.379 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 40.4682ms
2025-09-16 23:00:02.382 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:00:02.382 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:00:02.382 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:00:02.382 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:02.382 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:02.382 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:02.382 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:02.383 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:00:02.383 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:00:02.383 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:00:02.383 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:02.383 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:02.383 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:02.383 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:02.383 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:02.383 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:02.383 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:02.383 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:02.384 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:02.384 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:02.384 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:02.384 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:02.384 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:02.384 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:02.384 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:02.384 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:02.384 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:02.384 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:02.384 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:02.384 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:02.384 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:02.384 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:02.384 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:02.384 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:02.384 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:02.384 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:02.384 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:02.385 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:02.385 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:02.385 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:02.385 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:02.385 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:02.385 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:02.385 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:00:02.385 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:02.385 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:02.385 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.3083ms
2025-09-16 23:00:26.276 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 23:00:26.276 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:26.276 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:00:26.276 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:26.276 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:26.276 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:00:26.276 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:26.276 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.2746ms
2025-09-16 23:00:26.277 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 187
2025-09-16 23:00:26.277 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:26.277 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:26.277 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:26.277 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:26.277 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:26.277 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:26.278 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:00:26.278 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000019": started reading request body.
2025-09-16 23:00:26.278 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000019": done reading request body.
2025-09-16 23:00:26.279 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:00:26.279 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:00:26.279 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:26.279 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.279 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:26.279 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:26.279 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:26.279 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:26.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:26.280 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.280 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.280 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.280 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.280 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.280 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.280 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.280 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.280 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:26.280 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.280 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:26.280 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:26.280 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:26.280 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.280 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:26.280 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:26.280 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:26.280 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:26.280 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:26.281 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.281 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:26.281 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.281 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:26.281 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:26.281 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 23:00:26.281 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 23:00:26.281 +03:00 [DBG] SQL: SELECT * FROM Products;
2025-09-16 23:00:26.281 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 23:00:26.281 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 23:00:26.304 +03:00 [INF] Query execution finished in 23 ms, returned 19 rows
2025-09-16 23:00:26.305 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:26.305 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.305 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:26.305 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:26.305 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:26.305 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:26.305 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:26.305 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.305 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:26.305 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.305 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:26.313 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.314 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.314 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 23:00:26.314 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.314 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 23:00:26.314 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 23:00:26.314 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 23:00:26.314 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 23:00:26.315 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:26.315 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.315 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:26.315 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:26.315 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:26.315 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 2098), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 23:00:26.320 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 2098), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 23:00:26.320 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.320 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:26.320 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:26.320 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:26.320 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:26.320 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 23:00:26.321 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-16T20:00:26.3138705Z","$type":"QueryAddedEvent"}
2025-09-16 23:00:26.321 +03:00 [INF] Saved query to DB for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:26.324 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:26.324 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:26.324 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:00:26.324 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:26.324 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:26.324 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 47.1755ms
2025-09-16 23:00:26.948 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:00:26.948 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:00:26.948 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:00:26.948 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:26.948 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:26.949 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:00:26.949 +03:00 [INF] Api health check sent.
2025-09-16 23:00:26.949 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:00:26.949 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:26.949 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3618ms
2025-09-16 23:00:27.330 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:00:27.330 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:00:27.330 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:00:27.330 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:27.330 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:27.330 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:27.330 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:27.331 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:00:27.331 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:00:27.331 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:00:27.331 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:27.331 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:27.331 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:27.331 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:27.331 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:27.331 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:27.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:27.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:27.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:27.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:27.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:27.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:27.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:27.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:27.332 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:27.332 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:27.332 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:27.332 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:27.332 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:27.332 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:27.332 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:27.332 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:27.332 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:27.332 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:27.332 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:27.332 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:27.332 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:27.332 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:27.332 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:27.333 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:27.333 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:27.333 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:27.333 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:27.334 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:27.334 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:00:27.334 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:27.334 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:27.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.6942ms
2025-09-16 23:00:40.735 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 23:00:40.735 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:40.735 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:00:40.735 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:40.735 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:40.735 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:00:40.735 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:40.736 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.3717ms
2025-09-16 23:00:40.736 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 217
2025-09-16 23:00:40.736 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:40.736 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:00:40.737 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:40.737 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:40.737 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:40.737 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:40.737 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:00:40.737 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000001D": started reading request body.
2025-09-16 23:00:40.737 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000001D": done reading request body.
2025-09-16 23:00:40.737 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:00:40.737 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:40.737 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:00:40.737 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 1.0417ms
2025-09-16 23:00:41.783 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:00:41.783 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:00:41.783 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:00:41.783 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:41.783 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:41.783 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:41.783 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:41.783 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:00:41.784 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:00:41.784 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:00:41.784 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:41.784 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:41.784 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:41.784 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:41.784 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:41.784 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:41.784 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:41.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:41.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:41.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:41.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:41.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:41.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:41.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:41.784 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:00:41.784 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:41.784 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:41.784 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:41.784 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:41.784 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:41.785 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:41.785 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:41.785 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:00:41.785 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:41.785 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:00:41.785 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:41.785 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:00:41.785 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:41.785 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:00:41.785 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:00:41.785 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:41.785 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:00:41.786 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:00:41.786 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:41.786 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:00:41.786 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:00:41.786 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:00:41.786 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 2.9273ms
2025-09-16 23:00:56.948 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:00:56.949 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:00:56.949 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:00:56.949 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:00:56.949 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:00:56.949 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:00:56.949 +03:00 [INF] Api health check sent.
2025-09-16 23:00:56.949 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:00:56.949 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:00:56.949 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4029ms
2025-09-16 23:01:26.949 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:01:26.949 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:01:26.949 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:01:26.950 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:01:26.950 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:01:26.950 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:01:26.950 +03:00 [INF] Api health check sent.
2025-09-16 23:01:26.950 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:01:26.950 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:01:26.950 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5516ms
2025-09-16 23:01:36.348 +03:00 [DBG] Connection id "0HNFLBE2U3665" disconnecting.
2025-09-16 23:01:36.348 +03:00 [DBG] Connection id "0HNFLBE2U3665" stopped.
2025-09-16 23:01:36.348 +03:00 [DBG] Connection id "0HNFLBE2U3665" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:01:52.013 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:01:52.013 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:01:52.013 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:01:52.013 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:01:52.013 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:01:52.013 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:01:52.013 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:01:52.013 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3289ms
2025-09-16 23:01:52.014 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 172
2025-09-16 23:01:52.014 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:01:52.014 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:01:52.014 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:01:52.014 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:01:52.014 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:01:52.014 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:01:52.014 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:01:52.014 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000022": started reading request body.
2025-09-16 23:01:52.014 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000022": done reading request body.
2025-09-16 23:01:52.015 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:01:52.015 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:01:52.015 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:01:52.015 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:52.015 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.015 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:52.015 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:52.015 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:52.015 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:01:52.015 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:01:52.015 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.015 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.016 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.016 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:52.016 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.016 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:52.016 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:52.016 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.016 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:52.016 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:52.016 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:52.016 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:52.016 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:52.016 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.016 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.016 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.016 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.016 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.016 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.016 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:52.017 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.017 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:52.017 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.017 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:52.017 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:01:52.017 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:52.017 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.017 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:52.017 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:52.017 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:52.017 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:52.017 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:52.018 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.018 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:52.018 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:52.018 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:52.018 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:01:52.018 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:01:52.018 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:01:52.019 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:01:52.019 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:01:52.019 +03:00 [INF] Converting natural language to SQL. User query: Find products with low inventory
2025-09-16 23:01:52.019 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:01:52.019 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:01:52.021 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:01:52.802 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:01:52.804 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:01:52.804 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:01:52.804 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:01:52.804 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:01:52.805 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:52.805 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:52.805 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 790.9289ms
2025-09-16 23:01:56.949 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:01:56.949 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:01:56.949 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:01:56.949 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:01:56.949 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:01:56.949 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:01:56.949 +03:00 [INF] Api health check sent.
2025-09-16 23:01:56.949 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:01:56.949 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:01:56.950 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6355ms
2025-09-16 23:01:57.797 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 23:01:57.797 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:01:57.797 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:01:57.797 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:01:57.797 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:01:57.797 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:01:57.797 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:01:57.797 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.6557ms
2025-09-16 23:01:57.799 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 261
2025-09-16 23:01:57.799 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:01:57.799 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:01:57.799 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:01:57.799 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:01:57.799 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:01:57.799 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:01:57.799 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:01:57.799 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000025": started reading request body.
2025-09-16 23:01:57.799 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000025": done reading request body.
2025-09-16 23:01:57.800 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:01:57.800 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:01:57.800 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:57.800 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:57.800 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:57.800 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:57.800 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:57.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:57.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.800 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.800 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:57.801 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.801 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:57.801 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:01:57.801 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:57.801 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.801 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:57.801 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:57.801 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:57.801 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:57.802 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:57.802 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.802 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:57.802 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.802 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:57.802 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:01:57.802 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 23:01:57.802 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 23:01:57.802 +03:00 [DBG] SQL: SELECT P.* FROM Products P WHERE P.StockQuantity > @param1;
2025-09-16 23:01:57.802 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 23:01:57.802 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 23:01:57.804 +03:00 [INF] Query execution finished in 1 ms, returned 19 rows
2025-09-16 23:01:57.804 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:57.804 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.804 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:57.804 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:57.805 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:57.805 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:57.805 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:57.805 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.805 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:57.805 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.805 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:57.805 +03:00 [DBG] The navigation 'Query.Profile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.806 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.806 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 23:01:57.806 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Profile.Queries'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.806 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 23:01:57.806 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-16 23:01:57.806 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-16 23:01:57.806 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-16 23:01:57.806 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:57.806 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.806 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:57.806 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:57.806 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:57.806 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 2097), @p3='?' (Size = 59), @p4='?' (DbType = DateTime), @p5='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 23:01:57.810 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 2097), @p3='?' (Size = 59), @p4='?' (DbType = DateTime), @p5='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Queries" ("Id", "ProfileId", "ResultJson", "SqlQuery", "TimestampUtc", "UserQuery")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-16 23:01:57.811 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.811 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:57.811 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:57.811 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:57.811 +03:00 [DBG] An entity of type 'Query' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:57.811 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-16 23:01:57.811 +03:00 [INF] ProfileSettingsChangedEvent triggered: {"DateOccurred":"2025-09-16T20:01:57.8058709Z","$type":"QueryAddedEvent"}
2025-09-16 23:01:57.811 +03:00 [INF] Saved query to DB for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:01:57.811 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:01:57.811 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:01:57.811 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:01:57.811 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:57.811 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:57.811 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 12.6239ms
2025-09-16 23:01:58.834 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:01:58.834 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:01:58.834 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:01:58.834 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:01:58.834 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:01:58.834 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:01:58.834 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:01:58.835 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:01:58.835 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:01:58.835 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:01:58.835 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:58.835 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:58.835 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:58.835 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:58.835 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:58.835 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:58.835 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:01:58.836 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:58.836 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:58.836 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:58.836 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:58.836 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:01:58.836 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:58.836 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:58.836 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:01:58.836 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:58.836 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:01:58.836 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:58.837 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:01:58.837 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:58.837 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:01:58.837 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:01:58.837 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:58.837 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:01:58.837 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:01:58.837 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:01:58.837 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:01:58.837 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:01:58.837 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:01:58.837 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.438ms
2025-09-16 23:02:06.961 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:02:06.961 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:02:06.961 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:02:06.962 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:02:06.962 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:02:06.962 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:02:06.962 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:02:06.962 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:02:06.962 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:02:06.963 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:02:06.963 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:02:06.963 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.2626ms
2025-09-16 23:02:06.964 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:02:06.964 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:02:06.964 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:02:06.964 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:02:06.964 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:02:06.964 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:02:06.964 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:02:06.964 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:02:06.964 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:02:06.964 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:02:06.964 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:02:06.964 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 0.6396ms
2025-09-16 23:02:12.136 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:02:12.136 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:02:12.136 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:02:12.136 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:02:12.136 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:02:12.136 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:02:12.136 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:02:12.136 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3514ms
2025-09-16 23:02:12.137 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 23:02:12.137 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:02:12.137 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:02:12.137 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:02:12.137 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:02:12.137 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:02:12.137 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:02:12.138 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:02:12.138 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000002A": started reading request body.
2025-09-16 23:02:12.138 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000002A": done reading request body.
2025-09-16 23:02:12.138 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:02:12.138 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:02:12.138 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:02:12.138 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:02:12.138 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.138 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:02:12.138 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:12.138 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:12.138 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:02:12.138 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:02:12.138 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.138 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.138 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.138 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:02:12.138 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.138 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:02:12.139 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:02:12.139 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.139 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:02:12.139 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:12.139 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:12.139 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:02:12.139 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:02:12.139 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.139 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.139 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.139 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.139 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.139 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.139 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.139 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:12.139 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.139 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:02:12.139 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.139 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:02:12.139 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:02:12.139 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:02:12.139 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.139 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:02:12.139 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:12.139 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:12.139 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:02:12.139 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:02:12.140 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.140 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:02:12.140 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:12.140 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:02:12.140 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:02:12.140 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:02:12.140 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:02:12.140 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:02:12.141 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:02:12.141 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 23:02:12.141 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:02:12.141 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:02:12.141 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:02:12.918 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:02:12.919 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:02:12.919 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:02:12.919 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:02:12.919 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:02:12.919 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:02:12.919 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:02:12.919 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 781.8505ms
2025-09-16 23:02:25.463 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:02:25.463 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:02:25.463 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:02:25.463 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:02:25.463 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:02:25.463 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:02:25.463 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:02:25.463 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.219ms
2025-09-16 23:02:25.464 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 23:02:25.464 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:02:25.464 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:02:25.464 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:02:25.464 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:02:25.464 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:02:25.464 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:02:25.464 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:02:25.464 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000002C": started reading request body.
2025-09-16 23:02:25.464 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000002C": done reading request body.
2025-09-16 23:02:25.465 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:02:25.465 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:02:25.465 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:02:25.465 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:02:25.465 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.465 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:02:25.465 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:25.465 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:25.465 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:02:25.465 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:02:25.465 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.465 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.465 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.465 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:02:25.465 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.465 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:02:25.466 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:02:25.466 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.466 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:02:25.466 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:25.466 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:25.466 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:02:25.466 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:02:25.466 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.466 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.466 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.466 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.466 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.466 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.466 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.466 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:02:25.466 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.466 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:02:25.466 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.466 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:02:25.466 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:02:25.466 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:02:25.466 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.466 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:02:25.466 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:25.466 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:02:25.466 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:02:25.467 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:02:25.467 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.467 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:02:25.467 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:02:25.467 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:02:25.467 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:02:25.467 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:02:25.467 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:02:25.468 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:02:25.468 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:02:25.468 +03:00 [INF] Converting natural language to SQL. User query: show all tables in the database
2025-09-16 23:02:25.468 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:02:25.468 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:02:25.468 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:02:26.201 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:02:26.202 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:02:26.202 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:02:26.202 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:02:26.202 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:02:26.202 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:02:26.202 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:02:26.202 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 737.8186ms
2025-09-16 23:02:26.947 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:02:26.947 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:02:26.947 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:02:26.948 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:02:26.948 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:02:26.948 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:02:26.948 +03:00 [INF] Api health check sent.
2025-09-16 23:02:26.948 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:02:26.948 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:02:26.948 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.705ms
2025-09-16 23:02:56.948 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:02:56.948 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:02:56.948 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:02:56.948 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:02:56.948 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:02:56.948 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:02:56.948 +03:00 [INF] Api health check sent.
2025-09-16 23:02:56.948 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:02:56.948 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:02:56.948 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6306ms
2025-09-16 23:03:02.843 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:03:02.843 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:03:02.843 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:03:02.843 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:03:02.843 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:03:02.843 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:03:02.844 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:03:02.844 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.6272ms
2025-09-16 23:03:02.844 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 178
2025-09-16 23:03:02.844 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:03:02.844 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:03:02.845 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:03:02.845 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:03:02.845 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:03:02.845 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:03:02.845 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:03:02.845 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000030": started reading request body.
2025-09-16 23:03:02.845 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000030": done reading request body.
2025-09-16 23:03:02.845 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:03:02.845 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:03:02.845 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:03:02.845 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:03:02.845 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.845 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:03:02.845 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:03:02.845 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:03:02.846 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:03:02.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.846 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:03:02.846 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.846 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:03:02.846 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:03:02.846 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.846 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:03:02.846 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:03:02.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:03:02.846 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:03:02.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:03:02.846 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.846 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:03:02.846 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.846 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:03:02.847 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:03:02.847 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:03:02.847 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.847 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:03:02.847 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:03:02.847 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:03:02.847 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:03:02.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:03:02.847 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.847 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:03:02.847 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:03:02.847 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:03:02.847 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:03:02.847 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:03:02.847 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:03:02.848 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:03:02.848 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:03:02.848 +03:00 [INF] Converting natural language to SQL. User query: show all tables in the database top 10
2025-09-16 23:03:02.848 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:03:02.848 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:03:02.848 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:03:03.612 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:03:03.612 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:03:03.612 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:03:03.612 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:03:03.612 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:03:03.612 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:03:03.612 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:03:03.613 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 768.1356ms
2025-09-16 23:03:07.249 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 23:03:07.249 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:03:07.249 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:03:07.249 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:03:07.249 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:03:07.249 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:03:07.249 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:03:07.250 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:03:07.250 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000031": started reading request body.
2025-09-16 23:03:07.250 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:00000031": done reading request body.
2025-09-16 23:03:07.250 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:03:07.250 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:03:07.250 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:03:07.250 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 1.1639ms
2025-09-16 23:03:26.980 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:03:26.980 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:03:26.980 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:03:26.980 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:03:26.980 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:03:26.980 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:03:26.980 +03:00 [INF] Api health check sent.
2025-09-16 23:03:26.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:03:26.980 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:03:26.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3741ms
2025-09-16 23:03:56.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:03:56.978 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:03:56.978 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:03:56.978 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:03:56.978 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:03:56.978 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:03:56.978 +03:00 [INF] Api health check sent.
2025-09-16 23:03:56.978 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:03:56.978 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:03:56.978 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3876ms
2025-09-16 23:04:52.986 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:04:52.986 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:04:52.986 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:04:52.987 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:04:52.987 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:04:52.987 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:04:52.987 +03:00 [INF] Api health check sent.
2025-09-16 23:04:52.987 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:04:52.987 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:04:52.987 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.1198ms
2025-09-16 23:04:56.948 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:04:56.948 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:04:56.948 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:04:56.948 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:04:56.948 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:04:56.948 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:04:56.948 +03:00 [INF] Api health check sent.
2025-09-16 23:04:56.948 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:04:56.948 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:04:56.948 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3453ms
2025-09-16 23:05:26.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:05:26.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:05:26.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:05:26.979 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:05:26.979 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:05:26.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:05:26.979 +03:00 [INF] Api health check sent.
2025-09-16 23:05:26.979 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:05:26.979 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:05:26.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3118ms
2025-09-16 23:05:56.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:05:56.978 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:05:56.978 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:05:56.978 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:05:56.978 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:05:56.978 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:05:56.979 +03:00 [INF] Api health check sent.
2025-09-16 23:05:56.979 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:05:56.979 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:05:56.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3182ms
2025-09-16 23:06:28.072 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:06:28.072 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:06:28.072 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:06:28.073 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:06:28.073 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:06:28.073 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:06:28.073 +03:00 [INF] Api health check sent.
2025-09-16 23:06:28.073 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:06:28.073 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:06:28.073 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7496ms
2025-09-16 23:06:56.980 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:06:56.980 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:06:56.980 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:06:56.980 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:06:56.980 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:06:56.980 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:06:56.980 +03:00 [INF] Api health check sent.
2025-09-16 23:06:56.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:06:56.980 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:06:56.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5602ms
2025-09-16 23:07:07.012 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:07:07.012 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:07:07.012 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:07:07.012 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:07:07.012 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:07:07.012 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:07:07.012 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:07:07.013 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:07:07.013 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:07:07.013 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:07:07.013 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:07:07.014 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:07.014 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:07:07.014 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:07:07.014 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:07:07.014 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:07:07.018 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:07:07.018 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.018 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.018 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.018 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.019 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.019 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.019 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.019 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.019 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:07.019 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:07.019 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:07:07.019 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:07.019 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:07:07.019 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:07:07.019 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:07:07.019 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:07.019 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:07:07.019 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:07:07.019 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:07:07.020 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:07:07.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:07:07.020 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:07.020 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:07:07.020 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:07.020 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:07:07.021 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:07:07.022 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:07:07.022 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:07:07.022 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:07:07.022 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:07:07.022 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:07:07.022 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 10.2723ms
2025-09-16 23:07:23.006 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:07:23.006 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:07:23.006 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:07:23.006 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:07:23.006 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:07:23.006 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:07:23.006 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:07:23.007 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:07:23.007 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:07:23.007 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:07:23.007 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:07:23.007 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:23.007 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:07:23.007 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:07:23.007 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:07:23.007 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:07:23.008 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:07:23.008 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:23.008 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:07:23.008 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:23.008 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:07:23.008 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:07:23.008 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:07:23.008 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:23.008 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:07:23.008 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:07:23.008 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:07:23.008 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:07:23.009 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:07:23.009 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:23.009 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:07:23.009 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:07:23.009 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:07:23.010 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:07:23.010 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:07:23.010 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:07:23.010 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:07:23.010 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:07:23.010 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:07:23.010 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 4.1123ms
2025-09-16 23:07:26.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:07:26.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:07:26.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:07:26.979 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:07:26.979 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:07:26.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:07:26.979 +03:00 [INF] Api health check sent.
2025-09-16 23:07:26.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:07:26.980 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:07:26.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.288ms
2025-09-16 23:08:36.894 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:08:36.895 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:08:36.895 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:08:36.895 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:36.895 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:36.895 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:08:36.895 +03:00 [INF] Api health check sent.
2025-09-16 23:08:36.895 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:08:36.895 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:08:36.895 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4522ms
2025-09-16 23:08:41.224 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:08:41.224 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:08:41.224 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:08:41.224 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:41.224 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:41.224 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:08:41.224 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:08:41.224 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2614ms
2025-09-16 23:08:41.225 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 23:08:41.226 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:08:41.226 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:08:41.226 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:08:41.226 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:41.226 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:41.226 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:08:41.226 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:41.226 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000003F": started reading request body.
2025-09-16 23:08:41.226 +03:00 [DBG] Connection id "0HNFLBE2U3664", Request id "0HNFLBE2U3664:0000003F": done reading request body.
2025-09-16 23:08:41.226 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:41.227 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:41.227 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:41.227 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:41.227 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.227 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:41.227 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:41.227 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:41.227 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:41.227 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:41.227 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.227 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.227 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.227 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:41.227 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.227 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:41.227 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:41.228 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.228 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:41.228 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:41.228 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:41.228 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:41.228 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:41.228 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.228 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.228 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.228 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.228 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.228 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.228 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.228 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:41.228 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.228 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:41.228 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.228 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:41.228 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:41.228 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:41.228 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.228 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:41.228 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:41.228 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:41.228 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:41.229 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:41.229 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.229 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:41.229 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:41.229 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:41.229 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:41.229 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:08:41.229 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:08:41.230 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:08:41.230 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:08:41.230 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 23:08:41.230 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:08:41.230 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:08:41.230 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:08:42.003 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:08:42.003 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:08:42.003 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:08:42.003 +03:00 [DBG] Connection id "0HNFLBE2U3664" completed keep alive response.
2025-09-16 23:08:42.004 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:42.004 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:42.004 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:42.004 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 778.1383ms
2025-09-16 23:08:48.996 +03:00 [INF] This is a test log to file!
2025-09-16 23:08:49.182 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 23:08:49.185 +03:00 [INF] API configured successfully.
2025-09-16 23:08:49.246 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 23:08:49.290 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 23:08:49.692 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 23:08:49.759 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:49.775 +03:00 [INF] Registered 23 endpoints in 681 milliseconds.
2025-09-16 23:08:49.779 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:49.818 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:49.897 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:49.906 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 23:08:49.908 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:49.910 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:49.912 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 23:08:49.912 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:49.918 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:49.920 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:49.923 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:49.923 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:49.924 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:49.925 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 23:08:49.928 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:08:49.932 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 23:08:49.932 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-16 23:08:49.936 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 23:08:49.955 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 23:08:49.956 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:08:49.956 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:08:49.956 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:08:49.956 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 20:08:49.9562395+00:00');
SELECT changes();
2025-09-16 23:08:49.970 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 20:08:49.9562395+00:00');
SELECT changes();
2025-09-16 23:08:50.012 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 23:08:50.015 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 23:08:50.016 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 23:08:50.016 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 23:08:50.016 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 23:08:50.017 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 23:08:50.017 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 23:08:50.018 +03:00 [DBG] Committing transaction.
2025-09-16 23:08:50.018 +03:00 [DBG] Committed transaction.
2025-09-16 23:08:50.019 +03:00 [DBG] Disposing transaction.
2025-09-16 23:08:50.021 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 23:08:50.021 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 23:08:50.022 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:50.022 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:50.022 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:50.023 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.023 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:50.023 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:50.023 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:08:50.023 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:08:50.023 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:08:50.023 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 23:08:50.023 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 23:08:50.024 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:50.024 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:50.024 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:50.025 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 23:08:50.026 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 23:08:50.028 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.029 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 23:08:50.032 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 23:08:50.032 +03:00 [DBG] Committing transaction.
2025-09-16 23:08:50.033 +03:00 [DBG] Committed transaction.
2025-09-16 23:08:50.033 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:08:50.033 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:08:50.033 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:08:50.033 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 23:08:50.036 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 23:08:50.036 +03:00 [DBG] Disposing transaction.
2025-09-16 23:08:50.037 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.039 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 23:08:50.040 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:50.040 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:50.040 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:50.040 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 23:08:50.040 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 23:08:50.054 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 23:08:50.064 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 23:08:50.065 +03:00 [DBG] Hosting starting
2025-09-16 23:08:50.107 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 23:08:50.108 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 23:08:50.120 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 23:08:50.120 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 23:08:50.120 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 23:08:50.120 +03:00 [INF] Hosting environment: Development
2025-09-16 23:08:50.120 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 23:08:50.120 +03:00 [DBG] Hosting started
2025-09-16 23:08:50.197 +03:00 [DBG] Connection id "0HNFLBJD252RK" accepted.
2025-09-16 23:08:50.198 +03:00 [DBG] Connection id "0HNFLBJD252RK" started.
2025-09-16 23:08:50.218 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:08:50.249 +03:00 [DBG] Connection id "0HNFLBJD252RL" accepted.
2025-09-16 23:08:50.250 +03:00 [DBG] Connection id "0HNFLBJD252RL" started.
2025-09-16 23:08:50.255 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:08:50.255 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:50.277 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:50.277 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:50.278 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 23:08:50.281 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:50.295 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:50.315 +03:00 [INF] Getting all users
2025-09-16 23:08:50.358 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 23:08:50.433 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 23:08:50.729 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 23:08:50.757 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:50.757 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:50.760 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:50.761 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.762 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:50.762 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:50.762 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:50.762 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:08:50.766 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:08:50.785 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.786 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 19ms reading results.
2025-09-16 23:08:50.787 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.787 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:50.823 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:50.824 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:50.826 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:08:50.826 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:50.828 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:08:50.829 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:50.829 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:50.829 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:50.830 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:50.830 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:50.833 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:50.834 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:50.834 +03:00 [INF] Getting all users
2025-09-16 23:08:50.830 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 613.3374ms
2025-09-16 23:08:50.837 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:08:50.837 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:50.839 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:50.839 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:50.839 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:50.839 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:50.839 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:50.839 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.839 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:50.839 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:50.839 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:50.839 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:08:50.840 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:08:50.840 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.840 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:50.840 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.840 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:50.840 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:50.840 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:50.841 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:50.841 +03:00 [DBG] Connection id "0HNFLBJD252RL" completed keep alive response.
2025-09-16 23:08:50.841 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:50.841 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:50.841 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:50.842 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:50.842 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 15.716ms
2025-09-16 23:08:50.842 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:50.867 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:08:50.879 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 23:08:50.887 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 23:08:50.955 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 23:08:50.964 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:50.964 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:50.964 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:50.965 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:50.965 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:50.965 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:50.967 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 23:08:50.969 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:50.974 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:51.017 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:51.048 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:51.066 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.066 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 91ms reading results.
2025-09-16 23:08:51.066 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.066 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:51.069 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:08:51.070 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:51.070 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:51.070 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:51.070 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:51.070 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:51.070 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:51.070 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:51.070 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:51.070 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:51.070 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:51.070 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:51.070 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 233.6707ms
2025-09-16 23:08:51.071 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:51.071 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:08:51.072 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:51.072 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:51.072 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:51.072 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.072 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:51.073 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:51.073 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:51.073 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:51.075 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:51.075 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:51.076 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:51.076 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.077 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:08:51.077 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.077 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:51.077 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:51.077 +03:00 [DBG] Connection id "0HNFLBJD252RL" completed keep alive response.
2025-09-16 23:08:51.077 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:51.078 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:51.078 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:51.078 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 8.4534ms
2025-09-16 23:08:51.117 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:08:51.118 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:08:51.118 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:51.118 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:51.118 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:51.118 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:51.119 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:51.120 +03:00 [INF] Getting all users
2025-09-16 23:08:51.120 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:51.120 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:51.120 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:51.120 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.121 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:51.121 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:51.121 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:51.121 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:08:51.121 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:08:51.122 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.122 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:51.122 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.122 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:51.123 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:08:51.123 +03:00 [DBG] Connection id "0HNFLBJD252RL" completed keep alive response.
2025-09-16 23:08:51.123 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:51.123 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:51.123 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:51.124 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 6.1734ms
2025-09-16 23:08:51.152 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:08:51.153 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:51.153 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:51.153 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:51.153 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:51.153 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:51.153 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:51.154 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:51.154 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:08:51.155 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:51.155 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:51.155 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:51.155 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.155 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:51.155 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:51.155 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:51.155 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:51.156 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:51.156 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:51.156 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:51.156 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.156 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:51.156 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:51.156 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:51.157 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:51.157 +03:00 [DBG] Connection id "0HNFLBJD252RL" completed keep alive response.
2025-09-16 23:08:51.157 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:51.157 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:51.157 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:51.157 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.4881ms
2025-09-16 23:08:51.238 +03:00 [DBG] Connection id "0HNFLBJD252RM" accepted.
2025-09-16 23:08:51.238 +03:00 [DBG] Connection id "0HNFLBJD252RM" started.
2025-09-16 23:08:51.241 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:08:51.241 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:08:51.242 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:08:51.242 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:08:51.245 +03:00 [INF] Api health check sent.
2025-09-16 23:08:51.246 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:08:51.246 +03:00 [DBG] Connection id "0HNFLBJD252RM" completed keep alive response.
2025-09-16 23:08:51.246 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 4.9288ms
2025-09-16 23:08:55.259 +03:00 [DBG] Connection id "0HNFLBJD252RM" received FIN.
2025-09-16 23:08:55.259 +03:00 [DBG] Connection id "0HNFLBJD252RM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:08:55.260 +03:00 [DBG] Connection id "0HNFLBJD252RM" disconnecting.
2025-09-16 23:08:55.260 +03:00 [DBG] Connection id "0HNFLBJD252RM" stopped.
2025-09-16 23:08:55.271 +03:00 [DBG] Connection id "0HNFLBJD252RN" accepted.
2025-09-16 23:08:55.271 +03:00 [DBG] Connection id "0HNFLBJD252RN" started.
2025-09-16 23:08:55.271 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:08:55.271 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:08:55.271 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:08:55.272 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:08:55.272 +03:00 [INF] Api health check sent.
2025-09-16 23:08:55.272 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:08:55.272 +03:00 [DBG] Connection id "0HNFLBJD252RN" completed keep alive response.
2025-09-16 23:08:55.272 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.121ms
2025-09-16 23:08:55.278 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:08:55.279 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:55.279 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:55.279 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:55.279 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:55.279 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:55.279 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:55.280 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:55.281 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:08:55.282 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:55.282 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:55.282 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.282 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.282 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:55.282 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.282 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.283 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:55.283 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:55.283 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.283 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.283 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.284 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:55.284 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.284 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.284 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:55.284 +03:00 [DBG] Connection id "0HNFLBJD252RL" completed keep alive response.
2025-09-16 23:08:55.284 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:55.284 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.284 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.284 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.6201ms
2025-09-16 23:08:55.287 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:08:55.287 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:55.287 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:08:55.287 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:55.288 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:55.288 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:55.288 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:55.288 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:55.289 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:08:55.289 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:55.289 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:55.289 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.289 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.289 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:55.290 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.290 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.290 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:55.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:55.290 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.290 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.290 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.290 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:55.290 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.290 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.291 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:08:55.291 +03:00 [DBG] Connection id "0HNFLBJD252RL" completed keep alive response.
2025-09-16 23:08:55.291 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:55.291 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.291 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.291 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.9684ms
2025-09-16 23:08:55.362 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:08:55.362 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:08:55.362 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:08:55.362 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.362 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:55.362 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:55.362 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.363 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:08:55.364 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:08:55.364 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:08:55.364 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:08:55.365 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:55.365 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:55.365 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:08:55.365 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:55.366 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:55.370 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 23:08:55.372 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 23:08:55.388 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 23:08:55.392 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:55.392 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:55.392 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:55.392 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.392 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:55.392 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.392 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.392 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:55.392 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.392 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.392 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.393 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.393 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.393 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:55.393 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.393 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.393 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.393 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.394 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.394 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.404 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.404 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.409 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.409 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.410 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.410 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.410 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 17ms reading results.
2025-09-16 23:08:55.410 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 16ms reading results.
2025-09-16 23:08:55.410 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.410 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.410 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.410 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.411 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:55.412 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.412 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.412 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:55.412 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.412 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.412 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.413 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.413 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:55.413 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.414 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.418 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:55.418 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.419 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.419 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:55.419 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.419 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.419 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.420 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.420 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:55.420 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.420 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:55.421 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.421 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.422 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:55.423 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:08:55.423 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:55.424 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:55.424 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.424 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.424 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 60.2954ms
2025-09-16 23:08:55.426 +03:00 [DBG] Connection id "0HNFLBJD252RO" accepted.
2025-09-16 23:08:55.426 +03:00 [DBG] Connection id "0HNFLBJD252RO" started.
2025-09-16 23:08:55.427 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:08:55.427 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:08:55.428 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:08:55.428 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:08:55.428 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:55.428 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:55.428 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:08:55.428 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:08:55.429 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:55.429 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:55.429 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:55.429 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.429 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.429 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:55.429 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.429 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.430 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.430 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:08:55.430 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.430 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.430 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.430 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.430 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.430 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.430 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.431 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.431 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.431 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:55.431 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.431 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:08:55.432 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.432 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.432 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:55.433 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.433 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.433 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:55.433 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.433 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:55.433 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.434 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:55.434 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.434 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:55.434 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:55.434 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.435 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:55.435 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:08:55.435 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:55.435 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:55.435 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.435 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.435 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 8.6928ms
2025-09-16 23:08:55.494 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:08:55.498 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.499 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:08:55.500 +03:00 [DBG] Connection id "0HNFLBJD252RL" completed keep alive response.
2025-09-16 23:08:55.500 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:08:55.500 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:55.500 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:08:55.500 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:55.500 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.500 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:55.500 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:55.501 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:55.501 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 139.2171ms
2025-09-16 23:08:55.501 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.502 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:55.503 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.503 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:55.503 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:55.503 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 3.7987ms
2025-09-16 23:08:55.504 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:08:55.505 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:08:55.505 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:08:55.505 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.505 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:55.505 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:55.505 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.506 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:55.507 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.507 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:55.507 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:55.507 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.5814ms
2025-09-16 23:08:55.508 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:08:55.508 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:08:55.508 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:08:55.508 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.508 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:55.508 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:55.508 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.509 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:55.509 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:08:55.509 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:55.509 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:55.509 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.5348ms
2025-09-16 23:08:56.367 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:08:56.367 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:08:56.367 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:08:56.367 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:56.367 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:56.367 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:08:56.367 +03:00 [INF] Api health check sent.
2025-09-16 23:08:56.367 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:08:56.367 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:56.367 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.8117ms
2025-09-16 23:08:56.370 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 23:08:56.370 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 23:08:56.370 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:08:56.370 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:56.370 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:56.371 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:08:56.379 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:56.381 +03:00 [INF] Listing all profiles
2025-09-16 23:08:56.382 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 23:08:56.383 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 23:08:56.395 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 23:08:56.397 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:56.398 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:56.398 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:56.398 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.398 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:56.398 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.398 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.398 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 23:08:56.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 23:08:56.399 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.399 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:08:56.399 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.399 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:56.400 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:56.400 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:56.400 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.400 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:56.400 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.400 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.400 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:56.401 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:56.401 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.402 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.402 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.402 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.402 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.402 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.403 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.403 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.403 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.403 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.403 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 23:08:56.403 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.403 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:56.403 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:56.405 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:08:56.405 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:56.405 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:56.405 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:56.405 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:56.405 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 35.0141ms
2025-09-16 23:08:56.407 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:08:56.408 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:08:56.408 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:08:56.408 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:56.408 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:56.408 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:08:56.409 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:56.409 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 1.2716ms
2025-09-16 23:08:56.410 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 23:08:56.410 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:08:56.410 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:08:56.411 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:08:56.411 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:08:56.411 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:08:56.411 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:08:56.412 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:08:56.418 +03:00 [DBG] Connection id "0HNFLBJD252RK", Request id "0HNFLBJD252RK:0000000B": started reading request body.
2025-09-16 23:08:56.419 +03:00 [DBG] Connection id "0HNFLBJD252RK", Request id "0HNFLBJD252RK:0000000B": done reading request body.
2025-09-16 23:08:56.429 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:56.429 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:08:56.430 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:08:56.430 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:56.430 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.430 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:56.430 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.430 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.430 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:56.430 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:08:56.430 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.430 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.430 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.431 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:56.431 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.431 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:56.431 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:56.431 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.431 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:56.431 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.432 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.432 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:56.432 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:56.433 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.433 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.433 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.433 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.433 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.433 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.433 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.433 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:08:56.433 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.433 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:08:56.433 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.433 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:56.434 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:56.434 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:56.434 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.434 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:08:56.434 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.434 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:08:56.434 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:56.435 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:08:56.435 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.435 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:08:56.435 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:08:56.435 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:56.435 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:08:56.436 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:08:56.436 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:08:56.437 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:08:56.457 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:08:56.457 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 23:08:56.458 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:08:56.458 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:08:56.464 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:08:57.163 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:08:57.168 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:08:57.170 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:08:57.170 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:08:57.170 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:08:57.170 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:08:57.171 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:08:57.171 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 760.7622ms
2025-09-16 23:08:59.275 +03:00 [DBG] Connection id "0HNFLBJD252RN" received FIN.
2025-09-16 23:08:59.275 +03:00 [DBG] Connection id "0HNFLBJD252RN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:08:59.275 +03:00 [DBG] Connection id "0HNFLBJD252RN" disconnecting.
2025-09-16 23:08:59.275 +03:00 [DBG] Connection id "0HNFLBJD252RN" stopped.
2025-09-16 23:09:00.722 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 23:09:00.723 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:09:00.723 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:09:00.723 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:09:00.723 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:09:00.723 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:09:00.723 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:09:00.724 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:09:00.724 +03:00 [DBG] Connection id "0HNFLBJD252RK", Request id "0HNFLBJD252RK:0000000C": started reading request body.
2025-09-16 23:09:00.724 +03:00 [DBG] Connection id "0HNFLBJD252RK", Request id "0HNFLBJD252RK:0000000C": done reading request body.
2025-09-16 23:09:00.724 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:09:00.725 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:09:00.725 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:09:00.725 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:09:00.725 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.725 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:09:00.725 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:09:00.725 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:09:00.725 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:09:00.725 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:09:00.725 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.725 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.725 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.725 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:09:00.725 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.725 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:09:00.726 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:09:00.726 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.726 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:09:00.726 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:09:00.726 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:09:00.726 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:09:00.726 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:09:00.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:09:00.726 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.726 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:09:00.726 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.726 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:09:00.727 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:09:00.727 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:09:00.727 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.727 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:09:00.727 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:09:00.727 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:09:00.727 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:09:00.727 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:09:00.727 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.727 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:09:00.727 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:09:00.727 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:09:00.728 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:09:00.728 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:09:00.728 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:09:00.728 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:09:00.729 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:09:00.729 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 23:09:00.729 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:09:00.729 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:09:00.729 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:09:01.508 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:09:01.508 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:09:01.508 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:09:01.508 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:09:01.508 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:09:01.508 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:09:01.508 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:09:01.508 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 786.0682ms
2025-09-16 23:09:27.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:09:27.980 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:09:27.980 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:09:27.980 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:09:27.980 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:09:27.980 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:09:27.980 +03:00 [INF] Api health check sent.
2025-09-16 23:09:27.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:09:27.980 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:09:27.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4743ms
2025-09-16 23:09:57.978 +03:00 [DBG] Connection id "0HNFLBJD252RO" received FIN.
2025-09-16 23:09:57.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:09:57.978 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:09:57.978 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:09:57.978 +03:00 [DBG] Connection id "0HNFLBJD252RO" disconnecting.
2025-09-16 23:09:57.978 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:09:57.978 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:09:57.978 +03:00 [DBG] Connection id "0HNFLBJD252RO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:09:57.978 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:09:57.979 +03:00 [INF] Api health check sent.
2025-09-16 23:09:57.979 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:09:57.979 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:09:57.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4529ms
2025-09-16 23:09:57.980 +03:00 [DBG] Connection id "0HNFLBJD252RO" stopped.
2025-09-16 23:10:27.980 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:10:27.980 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:10:27.980 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:10:27.980 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:10:27.980 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:10:27.980 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:10:27.980 +03:00 [INF] Api health check sent.
2025-09-16 23:10:27.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:10:27.980 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:10:27.981 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7631ms
2025-09-16 23:10:57.980 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:10:57.980 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:10:57.980 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:10:57.980 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:10:57.980 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:10:57.980 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:10:57.980 +03:00 [INF] Api health check sent.
2025-09-16 23:10:57.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:10:57.980 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:10:57.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.9179ms
2025-09-16 23:11:01.001 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:11:01.001 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:11:01.001 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:11:01.001 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:01.001 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:01.001 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:01.001 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:01.002 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:01.002 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:01.003 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:01.003 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:01.003 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:01.003 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:01.003 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:01.003 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:01.003 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:01.003 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:01.003 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:01.004 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:01.004 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:01.014 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:01.015 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (10ms).
2025-09-16 23:11:01.015 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:01.015 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:01.015 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:01.015 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:01.015 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:01.015 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:01.015 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:01.016 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:01.016 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:01.016 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:01.016 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:01.016 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:01.017 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:01.017 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:01.017 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:11:01.017 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:01.017 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:01.017 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:01.017 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 16.6692ms
2025-09-16 23:11:06.177 +03:00 [DBG] Connection id "0HNFLBJD252RL" disconnecting.
2025-09-16 23:11:06.177 +03:00 [DBG] Connection id "0HNFLBJD252RL" stopped.
2025-09-16 23:11:06.177 +03:00 [DBG] Connection id "0HNFLBJD252RL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:11:27.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:11:27.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:11:27.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:11:27.979 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:27.979 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:27.979 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:11:27.980 +03:00 [INF] Api health check sent.
2025-09-16 23:11:27.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:11:27.980 +03:00 [DBG] Connection id "0HNFLBJD252RK" completed keep alive response.
2025-09-16 23:11:27.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5929ms
2025-09-16 23:11:51.461 +03:00 [INF] This is a test log to file!
2025-09-16 23:11:51.633 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 23:11:51.637 +03:00 [INF] API configured successfully.
2025-09-16 23:11:51.691 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 23:11:51.728 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 23:11:52.170 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 23:11:52.242 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:52.258 +03:00 [INF] Registered 23 endpoints in 706 milliseconds.
2025-09-16 23:11:52.262 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:52.298 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:52.370 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:52.378 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-16 23:11:52.381 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:52.383 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:52.384 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 23:11:52.386 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:52.393 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:52.395 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:52.397 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:52.398 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:52.399 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:52.401 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 23:11:52.404 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:11:52.409 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-16 23:11:52.410 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-16 23:11:52.415 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 23:11:52.436 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 23:11:52.437 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:11:52.437 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:11:52.437 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:11:52.437 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 20:11:52.4374457+00:00');
SELECT changes();
2025-09-16 23:11:52.443 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 20:11:52.4374457+00:00');
SELECT changes();
2025-09-16 23:11:52.480 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 23:11:52.482 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 23:11:52.484 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 23:11:52.484 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 23:11:52.484 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 23:11:52.484 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 23:11:52.485 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 23:11:52.485 +03:00 [DBG] Committing transaction.
2025-09-16 23:11:52.486 +03:00 [DBG] Committed transaction.
2025-09-16 23:11:52.487 +03:00 [DBG] Disposing transaction.
2025-09-16 23:11:52.488 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 23:11:52.488 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 23:11:52.490 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:52.490 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:52.490 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:52.490 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:52.490 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:52.490 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:52.491 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:11:52.491 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:11:52.491 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:11:52.491 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 23:11:52.491 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 23:11:52.492 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:52.492 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:52.492 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:52.492 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 23:11:52.493 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 23:11:52.495 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:52.496 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 23:11:52.498 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 23:11:52.498 +03:00 [DBG] Committing transaction.
2025-09-16 23:11:52.499 +03:00 [DBG] Committed transaction.
2025-09-16 23:11:52.499 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:11:52.499 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:11:52.499 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:11:52.499 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 23:11:52.502 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 23:11:52.502 +03:00 [DBG] Disposing transaction.
2025-09-16 23:11:52.503 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:52.505 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 23:11:52.505 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:52.506 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:52.506 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:52.506 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 23:11:52.506 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 23:11:52.522 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 23:11:52.533 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 23:11:52.534 +03:00 [DBG] Hosting starting
2025-09-16 23:11:52.578 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 23:11:52.580 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 23:11:52.591 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 23:11:52.591 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 23:11:52.592 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 23:11:52.592 +03:00 [INF] Hosting environment: Development
2025-09-16 23:11:52.592 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 23:11:52.592 +03:00 [DBG] Hosting started
2025-09-16 23:11:52.685 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" accepted.
2025-09-16 23:11:52.685 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" started.
2025-09-16 23:11:52.703 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:11:52.734 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" accepted.
2025-09-16 23:11:52.734 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" started.
2025-09-16 23:11:52.737 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:11:52.738 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:52.757 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:52.757 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:52.758 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 23:11:52.760 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:52.774 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:52.792 +03:00 [INF] Getting all users
2025-09-16 23:11:52.818 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 23:11:52.866 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 23:11:53.104 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 23:11:53.124 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:53.124 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:53.126 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.127 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.127 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:53.127 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.127 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.127 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:11:53.128 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:11:53.140 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.140 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 11ms reading results.
2025-09-16 23:11:53.141 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.141 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.167 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:53.167 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:53.169 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:53.169 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:11:53.170 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:11:53.170 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:53.171 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.171 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.171 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:53.172 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:53.172 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:53.173 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:53.173 +03:00 [INF] Getting all users
2025-09-16 23:11:53.176 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:53.172 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 470.3937ms
2025-09-16 23:11:53.176 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:53.176 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.176 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.176 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:53.176 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.176 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.176 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:11:53.176 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:11:53.177 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:53.177 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:11:53.177 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.177 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:53.177 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:53.177 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.177 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.177 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.178 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:53.178 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:11:53.178 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:53.178 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.179 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.179 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 9.9386ms
2025-09-16 23:11:53.179 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:53.179 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:53.180 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.181 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:53.199 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:11:53.210 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 23:11:53.215 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 23:11:53.245 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 23:11:53.253 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:53.253 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:53.253 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.253 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.254 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:53.254 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.255 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 23:11:53.256 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:53.259 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:53.279 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:53.306 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:53.352 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.353 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 93ms reading results.
2025-09-16 23:11:53.353 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.353 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.356 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:11:53.356 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:53.356 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:53.356 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.356 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.357 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:53.357 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:53.357 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:53.357 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:53.357 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.357 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.357 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.357 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 180.2829ms
2025-09-16 23:11:53.358 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:53.358 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:11:53.359 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:53.359 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:53.359 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.359 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.359 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:53.359 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.359 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.359 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:53.359 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:53.360 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:53.360 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:53.360 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.360 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:53.361 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.361 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.361 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.361 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:11:53.361 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:53.361 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.361 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.361 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.3587ms
2025-09-16 23:11:53.387 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:11:53.388 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:11:53.388 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:53.388 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:53.388 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:53.388 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:53.389 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:53.389 +03:00 [INF] Getting all users
2025-09-16 23:11:53.389 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:53.389 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:53.389 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.389 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.389 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:53.389 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.389 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.389 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:11:53.389 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:11:53.390 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.390 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:53.390 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.390 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.390 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:11:53.390 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:11:53.390 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:53.391 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.391 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.391 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 3.4068ms
2025-09-16 23:11:53.419 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:11:53.419 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:53.419 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:53.419 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.419 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:53.419 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:53.420 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.421 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:53.421 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:11:53.422 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:53.422 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:53.422 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.423 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.423 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:53.423 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.423 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:53.423 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:53.423 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:53.424 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:53.424 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:53.424 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.424 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:53.425 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:53.425 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.426 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:53.426 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:11:53.426 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:53.426 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:53.426 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:53.426 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 7.5202ms
2025-09-16 23:11:53.526 +03:00 [DBG] Connection id "0HNFLBL3EFT8R" accepted.
2025-09-16 23:11:53.526 +03:00 [DBG] Connection id "0HNFLBL3EFT8R" started.
2025-09-16 23:11:53.533 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:11:53.533 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:11:53.533 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:11:53.533 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:11:53.538 +03:00 [INF] Api health check sent.
2025-09-16 23:11:53.538 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:11:53.538 +03:00 [DBG] Connection id "0HNFLBL3EFT8R" completed keep alive response.
2025-09-16 23:11:53.538 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 5.5953ms
2025-09-16 23:11:57.549 +03:00 [DBG] Connection id "0HNFLBL3EFT8R" received FIN.
2025-09-16 23:11:57.549 +03:00 [DBG] Connection id "0HNFLBL3EFT8R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:11:57.550 +03:00 [DBG] Connection id "0HNFLBL3EFT8R" disconnecting.
2025-09-16 23:11:57.551 +03:00 [DBG] Connection id "0HNFLBL3EFT8R" stopped.
2025-09-16 23:11:57.552 +03:00 [DBG] Connection id "0HNFLBL3EFT8S" accepted.
2025-09-16 23:11:57.552 +03:00 [DBG] Connection id "0HNFLBL3EFT8S" started.
2025-09-16 23:11:57.552 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:11:57.552 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:11:57.552 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:11:57.552 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:11:57.553 +03:00 [INF] Api health check sent.
2025-09-16 23:11:57.553 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:11:57.553 +03:00 [DBG] Connection id "0HNFLBL3EFT8S" completed keep alive response.
2025-09-16 23:11:57.553 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.9033ms
2025-09-16 23:11:57.556 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:11:57.556 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:57.556 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:57.556 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:57.556 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:57.556 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:57.556 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:57.557 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:57.557 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:11:57.558 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:57.558 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:57.558 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.558 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.558 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:57.558 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.558 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.558 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:57.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:57.559 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.559 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.559 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.559 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:57.559 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.560 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.560 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:57.560 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:11:57.560 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:57.560 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.560 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.560 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.1875ms
2025-09-16 23:11:57.564 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:11:57.564 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:57.564 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:11:57.564 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:57.564 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:57.564 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:57.564 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:57.565 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:57.565 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:11:57.566 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:57.566 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:57.566 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.566 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.566 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:57.566 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.566 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.567 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:57.567 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:57.567 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.568 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.568 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.568 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:57.568 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.568 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.568 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:11:57.568 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:11:57.568 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:57.568 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.569 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.569 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.8459ms
2025-09-16 23:11:57.635 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:11:57.635 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:11:57.635 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:11:57.635 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.635 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:57.635 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:57.635 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.637 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:11:57.638 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:11:57.638 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:11:57.638 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:57.638 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:57.638 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:57.638 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:57.638 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:57.639 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:57.644 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 23:11:57.645 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 23:11:57.660 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 23:11:57.663 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:57.663 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:57.663 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:57.663 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:57.663 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.664 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.664 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.664 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:57.664 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.664 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.664 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.664 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.664 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:57.664 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.664 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.664 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.664 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.665 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.665 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.666 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.675 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.675 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.682 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.682 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.682 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 17ms reading results.
2025-09-16 23:11:57.682 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 16ms reading results.
2025-09-16 23:11:57.682 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.682 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.682 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.682 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.683 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:57.684 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.684 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.684 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:57.684 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.684 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.684 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.684 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.685 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.685 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:57.685 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.685 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.690 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:57.691 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:57.691 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.691 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.691 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:57.691 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.691 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.691 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.691 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.692 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.692 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:57.692 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.692 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.692 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:57.693 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:57.693 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:57.693 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:57.693 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.693 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.694 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 56.3853ms
2025-09-16 23:11:57.696 +03:00 [DBG] Connection id "0HNFLBL3EFT8T" accepted.
2025-09-16 23:11:57.696 +03:00 [DBG] Connection id "0HNFLBL3EFT8T" started.
2025-09-16 23:11:57.696 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:11:57.697 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:11:57.697 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:11:57.697 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:57.697 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:57.697 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:57.697 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:57.698 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:57.698 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:11:57.698 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:57.699 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:57.699 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.699 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.699 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:57.699 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.699 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.699 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.699 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.699 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.699 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:11:57.700 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.700 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.700 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.700 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.700 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.701 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.701 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.701 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:57.702 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.702 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-16 23:11:57.702 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.702 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.702 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:57.702 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.702 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.703 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:57.703 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.703 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:57.703 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.703 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:57.703 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.703 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:57.703 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:57.704 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.704 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:57.704 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:11:57.704 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:57.704 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:57.705 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.705 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.705 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 8.8086ms
2025-09-16 23:11:57.760 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:11:57.765 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.766 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:11:57.766 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:11:57.767 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:11:57.767 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.767 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:11:57.767 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:57.767 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:57.767 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:57.767 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:57.767 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:57.767 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.767 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 132.4546ms
2025-09-16 23:11:57.768 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:57.769 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.769 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:57.769 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:57.769 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 3.2658ms
2025-09-16 23:11:57.770 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:11:57.770 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:11:57.770 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:11:57.770 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.770 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:57.770 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:57.770 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.771 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:57.772 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.772 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:57.772 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:57.772 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.0054ms
2025-09-16 23:11:57.773 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:11:57.774 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:11:57.774 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:11:57.774 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.774 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:57.774 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:57.774 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.775 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:57.776 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:11:57.776 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:57.776 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:57.776 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.6374ms
2025-09-16 23:11:58.641 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:11:58.641 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:11:58.641 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:11:58.642 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:58.642 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:58.642 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:11:58.642 +03:00 [INF] Api health check sent.
2025-09-16 23:11:58.642 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:11:58.642 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:58.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7141ms
2025-09-16 23:11:58.644 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 23:11:58.644 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 23:11:58.644 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:11:58.644 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:58.644 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:58.644 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:11:58.653 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:58.654 +03:00 [INF] Listing all profiles
2025-09-16 23:11:58.656 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 23:11:58.656 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 23:11:58.672 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 23:11:58.675 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:58.675 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:58.675 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:58.675 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.675 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:58.676 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.676 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.676 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 23:11:58.677 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 23:11:58.678 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.678 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:11:58.678 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.678 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:58.679 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:58.679 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:58.679 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.679 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:58.679 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.679 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.679 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:58.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.680 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.681 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.681 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:11:58.681 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.681 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:58.681 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:58.682 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:11:58.682 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:58.682 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:58.682 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:58.683 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:58.683 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 38.8545ms
2025-09-16 23:11:58.685 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:11:58.685 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:11:58.685 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:11:58.685 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:58.685 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:58.686 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:11:58.686 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:58.686 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 1.0742ms
2025-09-16 23:11:58.687 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 23:11:58.688 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:11:58.688 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:11:58.688 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:11:58.688 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:11:58.688 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:11:58.688 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:11:58.690 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:11:58.696 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:0000000B": started reading request body.
2025-09-16 23:11:58.696 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:0000000B": done reading request body.
2025-09-16 23:11:58.708 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:58.708 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:11:58.708 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:11:58.709 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:58.709 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.709 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:58.709 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.709 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.709 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:58.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:11:58.709 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.709 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.709 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.710 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:58.710 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.710 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:58.710 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:58.710 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.710 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:58.710 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.710 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.710 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:58.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:58.711 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.711 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.711 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.711 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.711 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.711 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.711 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.712 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:11:58.712 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.712 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:11:58.712 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.712 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:58.713 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:58.713 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:58.713 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.713 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:11:58.713 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.713 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:11:58.713 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:58.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:11:58.714 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.714 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:11:58.714 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:11:58.714 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:58.715 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:11:58.715 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:11:58.715 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:11:58.716 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:11:58.735 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:11:58.736 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 23:11:58.737 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:11:58.737 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:11:58.743 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:11:59.436 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:11:59.441 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:11:59.443 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:11:59.443 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:11:59.443 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:11:59.443 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:11:59.443 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:11:59.443 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 756.0058ms
2025-09-16 23:12:01.556 +03:00 [DBG] Connection id "0HNFLBL3EFT8S" received FIN.
2025-09-16 23:12:01.556 +03:00 [DBG] Connection id "0HNFLBL3EFT8S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:12:01.556 +03:00 [DBG] Connection id "0HNFLBL3EFT8S" disconnecting.
2025-09-16 23:12:01.556 +03:00 [DBG] Connection id "0HNFLBL3EFT8S" stopped.
2025-09-16 23:12:04.304 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:12:04.304 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:12:04.304 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:12:04.305 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:12:04.305 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:12:04.305 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:12:04.305 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:12:04.305 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.4526ms
2025-09-16 23:12:04.306 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 23:12:04.306 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:12:04.306 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:12:04.306 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:12:04.306 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:12:04.306 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:12:04.306 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:12:04.306 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:12:04.307 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:0000000D": started reading request body.
2025-09-16 23:12:04.307 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:0000000D": done reading request body.
2025-09-16 23:12:04.307 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:12:04.307 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:12:04.307 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:12:04.307 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:04.307 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.307 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:04.307 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:04.307 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:04.307 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:12:04.308 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:12:04.308 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.308 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.308 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.308 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:04.308 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.308 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:04.308 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:04.308 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.308 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:04.308 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:04.308 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:04.308 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:04.308 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:04.308 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.308 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.308 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.308 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.309 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.309 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.309 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.309 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:04.309 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.309 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:04.309 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.309 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:04.309 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:12:04.309 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:04.309 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.309 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:04.309 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:04.309 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:04.309 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:04.310 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:04.310 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.310 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:04.310 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:04.310 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:04.310 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:12:04.310 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:12:04.310 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:12:04.311 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:12:04.311 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:12:04.311 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 23:12:04.311 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:12:04.311 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:12:04.311 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:12:05.073 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:12:05.074 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:12:05.074 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:12:05.074 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:12:05.074 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:12:05.074 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:05.074 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:05.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 768.3036ms
2025-09-16 23:12:29.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:12:29.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:12:29.979 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:12:29.979 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:12:29.979 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:12:29.980 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:12:29.980 +03:00 [INF] Api health check sent.
2025-09-16 23:12:29.980 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:12:29.980 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:12:29.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5005ms
2025-09-16 23:12:55.615 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:12:55.615 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:12:55.615 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:12:55.615 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:12:55.615 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:12:55.615 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:12:55.615 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:12:55.615 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.4022ms
2025-09-16 23:12:55.616 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 157
2025-09-16 23:12:55.616 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:12:55.616 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:12:55.616 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:12:55.616 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:12:55.616 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:12:55.616 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:12:55.617 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:12:55.617 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:00000010": started reading request body.
2025-09-16 23:12:55.617 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:00000010": done reading request body.
2025-09-16 23:12:55.617 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:12:55.617 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:12:55.617 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:12:55.617 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:55.617 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.617 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:55.617 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:55.617 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:55.618 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:12:55.618 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:12:55.618 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.618 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.618 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.618 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:55.618 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.618 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:55.618 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:55.618 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.618 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:55.618 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:55.618 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:55.618 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:55.618 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:55.619 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.619 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.619 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.619 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.619 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.619 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.619 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.619 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:55.619 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.619 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:55.619 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.619 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:55.619 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:12:55.619 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:55.619 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.619 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:55.619 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:55.619 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:55.619 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:55.619 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:55.619 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.620 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:55.620 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:55.629 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (9ms).
2025-09-16 23:12:55.629 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:12:55.630 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:12:55.630 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:12:55.630 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:12:55.631 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:12:55.631 +03:00 [INF] Converting natural language to SQL. User query: show all products
2025-09-16 23:12:55.631 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:12:55.631 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:12:55.632 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:12:56.381 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:12:56.383 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:12:56.384 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:12:56.384 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:12:56.384 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:12:56.384 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:56.384 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:56.384 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 768.0394ms
2025-09-16 23:12:59.419 +03:00 [DBG] Connection id "0HNFLBL3EFT8T" received FIN.
2025-09-16 23:12:59.419 +03:00 [DBG] Connection id "0HNFLBL3EFT8T" disconnecting.
2025-09-16 23:12:59.419 +03:00 [DBG] Connection id "0HNFLBL3EFT8T" stopped.
2025-09-16 23:12:59.419 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 23:12:59.419 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:12:59.419 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:12:59.419 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:12:59.419 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:12:59.419 +03:00 [DBG] Connection id "0HNFLBL3EFT8T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:12:59.419 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:12:59.419 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:12:59.419 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.3213ms
2025-09-16 23:12:59.420 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 310
2025-09-16 23:12:59.420 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:12:59.420 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:12:59.420 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:12:59.420 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:12:59.420 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:12:59.420 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:12:59.421 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:12:59.429 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:00000012": started reading request body.
2025-09-16 23:12:59.430 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:00000012": done reading request body.
2025-09-16 23:12:59.435 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:12:59.435 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:12:59.435 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:59.435 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.435 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:59.435 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:59.435 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:59.435 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:59.435 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:59.435 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.435 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.436 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.436 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.436 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.436 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.436 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.436 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.436 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:12:59.436 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.436 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:59.436 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.436 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:59.436 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:12:59.436 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:59.436 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.436 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:59.436 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:59.436 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:59.437 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:59.437 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:59.437 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.437 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:59.437 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.437 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:59.437 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:12:59.437 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 23:12:59.445 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 23:12:59.445 +03:00 [DBG] SQL: SELECT P.Id, P.Name, P.Price, P.StockQuantity, C.Name AS CategoryName FROM Products P INNER JOIN Categories C ON P.CategoryId = C.Id;
2025-09-16 23:12:59.447 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 23:12:59.457 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:12:59.458 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:12:59.458 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:12:59.458 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:12:59.458 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:12:59.458 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:12:59.458 +03:00 [INF] Api health check sent.
2025-09-16 23:12:59.458 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:12:59.458 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:12:59.458 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6457ms
2025-09-16 23:12:59.646 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 23:12:59.701 +03:00 [INF] Query execution finished in 254 ms, returned 19 rows
2025-09-16 23:12:59.707 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:59.707 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.707 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:12:59.707 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:59.707 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:12:59.707 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:59.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:12:59.708 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.708 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:12:59.708 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:12:59.708 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:59.724 +03:00 [INF] Query not saved due to profile rules for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Query already existed
2025-09-16 23:12:59.727 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:12:59.727 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:12:59.727 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:12:59.727 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:12:59.727 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:12:59.727 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 307.2984ms
2025-09-16 23:13:00.730 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:13:00.730 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:13:00.730 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:13:00.730 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:00.730 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:00.730 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:00.731 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:00.731 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:13:00.731 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:13:00.731 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:13:00.731 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:00.731 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:00.731 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:00.731 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:00.731 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:00.731 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:00.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:00.732 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:00.732 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:00.732 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:00.732 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:00.732 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:00.732 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:00.732 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:00.732 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:00.732 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:00.732 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:00.732 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:00.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:00.733 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:00.733 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:00.733 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:00.733 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:00.733 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:00.733 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:00.733 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:13:00.733 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:13:00.733 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:00.733 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:00.733 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 2.8815ms
2025-09-16 23:13:07.797 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:13:07.797 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:13:07.797 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:13:07.797 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:07.797 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:07.797 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:13:07.797 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:13:07.797 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.2526ms
2025-09-16 23:13:07.798 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 23:13:07.798 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:13:07.798 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:13:07.798 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:13:07.798 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:07.798 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:07.798 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:13:07.799 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:13:07.799 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:00000015": started reading request body.
2025-09-16 23:13:07.799 +03:00 [DBG] Connection id "0HNFLBL3EFT8P", Request id "0HNFLBL3EFT8P:00000015": done reading request body.
2025-09-16 23:13:07.799 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:07.799 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:13:07.799 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:13:07.799 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:07.799 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.799 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:07.799 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:07.799 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:07.800 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:13:07.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:13:07.800 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.800 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.800 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.800 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:07.800 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.800 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:07.800 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:07.800 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:07.800 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:07.800 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:07.800 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:07.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:07.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.801 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:07.801 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.801 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:07.801 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.801 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:07.801 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:07.801 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:07.801 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.801 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:07.801 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:07.801 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:07.801 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:07.801 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:07.801 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.801 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:07.802 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:07.802 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:07.802 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:07.802 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:13:07.802 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:13:07.802 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:13:07.802 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:13:07.802 +03:00 [INF] Converting natural language to SQL. User query: Show all tables in the database
2025-09-16 23:13:07.802 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:13:07.802 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:13:07.803 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:13:08.594 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:13:08.594 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:13:08.595 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:13:08.595 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:13:08.595 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:13:08.595 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:08.595 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:08.595 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 796.7848ms
2025-09-16 23:13:10.001 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:13:10.001 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:13:10.001 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:13:10.001 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:13:10.001 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:10.001 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:10.001 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:13:10.002 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:13:10.002 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:13:10.002 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:13:10.002 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:13:10.002 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.0347ms
2025-09-16 23:13:10.003 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:13:10.003 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:13:10.003 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:13:10.003 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:13:10.004 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:10.004 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:10.004 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:13:10.004 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:13:10.004 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:13:10.004 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:13:10.004 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:13:10.004 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.2891ms
2025-09-16 23:13:10.918 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:13:10.918 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:13:10.918 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:13:10.918 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:10.918 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:10.918 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:10.918 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:10.919 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:13:10.919 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:13:10.919 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:13:10.919 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:10.919 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.919 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:10.919 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:10.919 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:10.919 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:10.920 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.920 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.920 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:10.920 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.920 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:10.920 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:10.920 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:10.920 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.920 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:10.920 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:10.920 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:10.920 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:10.920 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:10.921 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.921 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:10.921 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.921 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:10.921 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:10.921 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:10.921 +03:00 [DBG] Connection id "0HNFLBL3EFT8P" completed keep alive response.
2025-09-16 23:13:10.921 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:13:10.921 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:10.921 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:10.921 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 2.9383ms
2025-09-16 23:13:10.922 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:13:10.922 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:13:10.922 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:13:10.922 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:10.922 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:10.922 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:10.922 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:10.923 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:13:10.923 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:13:10.923 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:13:10.923 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:10.923 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.923 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:10.923 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:10.923 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:10.923 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:10.924 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:13:10.924 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.924 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:10.924 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.924 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:10.924 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:10.924 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:10.924 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.924 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:13:10.924 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:10.925 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:13:10.925 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:10.925 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:13:10.925 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.925 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:13:10.925 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:13:10.925 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:10.925 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:13:10.925 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:13:10.925 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:13:10.925 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:13:10.925 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:13:10.925 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:13:10.925 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.5063ms
2025-09-16 23:13:13.974 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:13:13.974 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:13:13.974 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:13:13.974 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:13.974 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:13.974 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:13:13.974 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:13:13.974 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 0.3422ms
2025-09-16 23:13:13.975 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 171
2025-09-16 23:13:13.975 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:13:13.975 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:13:13.975 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:13:13.975 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:13.975 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:13.975 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:13:13.976 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:13:13.976 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q", Request id "0HNFLBL3EFT8Q:0000000B": started reading request body.
2025-09-16 23:13:13.976 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q", Request id "0HNFLBL3EFT8Q:0000000B": done reading request body.
2025-09-16 23:13:13.976 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:13:13.976 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:13:13.976 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:13:13.976 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 0.8577ms
2025-09-16 23:13:29.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:13:29.447 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:13:29.447 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:13:29.447 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:29.447 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:29.447 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:13:29.447 +03:00 [INF] Api health check sent.
2025-09-16 23:13:29.447 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:13:29.447 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:13:29.447 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4848ms
2025-09-16 23:13:59.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:13:59.447 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:13:59.447 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:13:59.447 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:13:59.447 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:13:59.448 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:13:59.448 +03:00 [INF] Api health check sent.
2025-09-16 23:13:59.448 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:13:59.448 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:13:59.448 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3865ms
2025-09-16 23:14:29.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:14:29.447 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:14:29.447 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:14:29.447 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:14:29.447 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:14:29.447 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:14:29.448 +03:00 [INF] Api health check sent.
2025-09-16 23:14:29.448 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:14:29.448 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:14:29.448 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5322ms
2025-09-16 23:14:59.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:14:59.447 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:14:59.447 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:14:59.447 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:14:59.447 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:14:59.447 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:14:59.448 +03:00 [INF] Api health check sent.
2025-09-16 23:14:59.448 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:14:59.448 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:14:59.448 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5588ms
2025-09-16 23:15:00.868 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - null null
2025-09-16 23:15:00.868 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:15:00.868 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:15:00.868 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:15:00.868 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:15:00.868 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:15:00.868 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:15:00.868 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 204 null null 0.4432ms
2025-09-16 23:15:00.869 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - application/json 297
2025-09-16 23:15:00.869 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:15:00.869 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/execute' with route pattern 'api/query/{profileId}/execute' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute'
2025-09-16 23:15:00.870 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:15:00.870 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:15:00.870 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:15:00.870 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:15:00.870 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:15:00.870 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q", Request id "0HNFLBL3EFT8Q:00000011": started reading request body.
2025-09-16 23:15:00.870 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q", Request id "0HNFLBL3EFT8Q:00000011": done reading request body.
2025-09-16 23:15:00.871 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:15:00.871 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:15:00.871 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:15:00.871 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.871 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:15:00.871 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:00.871 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:00.871 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:00.871 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:00.871 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.871 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:15:00.872 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.872 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:15:00.872 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:15:00.872 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:15:00.872 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.872 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:15:00.872 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:00.872 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:00.872 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:00.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:00.872 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.872 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:15:00.872 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.872 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:15:00.873 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:15:00.873 +03:00 [INF] Executing SQL for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Mode="ReadOnly"
2025-09-16 23:15:00.873 +03:00 [INF] Executing SQL on DESKTOP-QCK8UI5\SQLEXPRESS/ProductInventory (Mode="ReadOnly")
2025-09-16 23:15:00.873 +03:00 [DBG] SQL: SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA = 'dbo';
2025-09-16 23:15:00.873 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-16 23:15:00.873 +03:00 [DBG] Connection opened to DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-16 23:15:00.953 +03:00 [INF] Query execution finished in 80 ms, returned 3 rows
2025-09-16 23:15:00.953 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:15:00.953 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.953 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:15:00.953 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:00.953 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:00.953 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:00.954 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:00.954 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.954 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:15:00.954 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:00.954 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:15:00.954 +03:00 [INF] Query not saved due to profile rules for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", Query already existed
2025-09-16 23:15:00.954 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/execute'
2025-09-16 23:15:00.954 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:15:00.954 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:15:00.954 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:15:00.954 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:15:00.954 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/execute - 200 null application/json; charset=utf-8 84.9963ms
2025-09-16 23:15:01.958 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:15:01.958 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:15:01.958 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:15:01.958 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:15:01.958 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:15:01.958 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:15:01.958 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:15:01.959 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:15:01.959 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:15:01.959 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:15:01.959 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:15:01.959 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:01.959 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:15:01.959 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:01.959 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:01.959 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:01.959 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:01.959 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:15:01.960 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:01.960 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:15:01.960 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:01.960 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:15:01.960 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:15:01.960 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:15:01.960 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:01.960 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:15:01.960 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:01.960 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:15:01.960 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:01.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:15:01.960 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:01.961 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:15:01.961 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:15:01.961 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:15:01.961 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:15:01.961 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:15:01.961 +03:00 [DBG] Connection id "0HNFLBL3EFT8Q" completed keep alive response.
2025-09-16 23:15:01.961 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:15:01.961 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:15:01.961 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:15:01.961 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 3.3067ms
2025-09-16 23:16:36.531 +03:00 [INF] This is a test log to file!
2025-09-16 23:16:36.714 +03:00 [INF] Shared Kernal configured successfully.
2025-09-16 23:16:36.718 +03:00 [INF] API configured successfully.
2025-09-16 23:16:36.782 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-16 23:16:36.831 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-16 23:16:37.222 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-16 23:16:37.287 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:37.303 +03:00 [INF] Registered 23 endpoints in 681 milliseconds.
2025-09-16 23:16:37.307 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:37.345 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:37.423 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:37.431 +03:00 [DBG] Created DbConnection. (7ms).
2025-09-16 23:16:37.433 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:37.436 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:37.437 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-16 23:16:37.438 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:37.444 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:37.447 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:37.449 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:37.449 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:37.451 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:37.452 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-16 23:16:37.456 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:16:37.460 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-16 23:16:37.461 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-16 23:16:37.465 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 23:16:37.486 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-16 23:16:37.488 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:16:37.488 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:16:37.488 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:16:37.488 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 20:16:37.4877699+00:00');
SELECT changes();
2025-09-16 23:16:37.493 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-16 20:16:37.4877699+00:00');
SELECT changes();
2025-09-16 23:16:37.531 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 23:16:37.533 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 23:16:37.534 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-16 23:16:37.534 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 23:16:37.535 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-16 23:16:37.535 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 23:16:37.535 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-16 23:16:37.536 +03:00 [DBG] Committing transaction.
2025-09-16 23:16:37.538 +03:00 [DBG] Committed transaction.
2025-09-16 23:16:37.539 +03:00 [DBG] Disposing transaction.
2025-09-16 23:16:37.540 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-16 23:16:37.540 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-16 23:16:37.541 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:37.541 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:37.541 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:37.542 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:37.542 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:37.542 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:37.542 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:16:37.542 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:16:37.543 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:16:37.543 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 23:16:37.543 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-16 23:16:37.545 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:37.545 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:37.545 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:37.545 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 23:16:37.546 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-16 23:16:37.548 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:37.549 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:16:37.553 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-16 23:16:37.553 +03:00 [DBG] Committing transaction.
2025-09-16 23:16:37.553 +03:00 [DBG] Committed transaction.
2025-09-16 23:16:37.553 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-16 23:16:37.553 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:16:37.553 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-16 23:16:37.553 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 23:16:37.556 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-16 23:16:37.556 +03:00 [DBG] Disposing transaction.
2025-09-16 23:16:37.557 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:37.560 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-16 23:16:37.560 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:37.560 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:37.560 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:37.560 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 23:16:37.560 +03:00 [INF] Infrastructure configured successfully.
2025-09-16 23:16:37.576 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-16 23:16:37.587 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-16 23:16:37.588 +03:00 [DBG] Hosting starting
2025-09-16 23:16:37.626 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-16 23:16:37.626 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-16 23:16:37.635 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-16 23:16:37.635 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-16 23:16:37.635 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 23:16:37.636 +03:00 [INF] Hosting environment: Development
2025-09-16 23:16:37.636 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-16 23:16:37.636 +03:00 [DBG] Hosting started
2025-09-16 23:16:37.763 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" accepted.
2025-09-16 23:16:37.763 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" started.
2025-09-16 23:16:37.781 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:16:37.809 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" accepted.
2025-09-16 23:16:37.810 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" started.
2025-09-16 23:16:37.815 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:16:37.816 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:37.834 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:37.834 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:37.835 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-16 23:16:37.837 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:37.847 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:37.865 +03:00 [INF] Getting all users
2025-09-16 23:16:37.889 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-16 23:16:37.937 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 23:16:38.156 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 23:16:38.172 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:38.173 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:38.174 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.175 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.175 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:38.175 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.175 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.175 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:16:38.176 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:16:38.187 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.187 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 10ms reading results.
2025-09-16 23:16:38.188 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.188 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.212 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:38.213 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:38.213 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:38.214 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:16:38.215 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.216 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:16:38.216 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:38.216 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.217 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:38.217 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:38.218 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:38.219 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:38.219 +03:00 [INF] Getting all users
2025-09-16 23:16:38.217 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 437.2507ms
2025-09-16 23:16:38.221 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:16:38.222 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:38.222 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:38.222 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:38.222 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:38.222 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.222 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.222 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.222 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:38.222 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.223 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.223 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:16:38.223 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:16:38.223 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.223 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:38.223 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:38.223 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:38.223 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.223 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.224 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.224 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:38.224 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" completed keep alive response.
2025-09-16 23:16:38.225 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:38.225 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.225 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.225 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 10.7515ms
2025-09-16 23:16:38.225 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:38.244 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:16:38.249 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 23:16:38.253 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-16 23:16:38.276 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 23:16:38.283 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:38.283 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:38.283 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.283 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.283 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:38.283 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.285 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-16 23:16:38.286 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:38.289 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:38.313 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:38.355 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:38.372 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.372 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 82ms reading results.
2025-09-16 23:16:38.372 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.372 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.375 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.375 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:38.375 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:16:38.375 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:38.375 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:38.375 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:38.375 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.376 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.376 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.376 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 154.5843ms
2025-09-16 23:16:38.376 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:38.376 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:38.376 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.377 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:38.378 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:16:38.379 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:38.379 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:38.379 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.379 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.379 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:38.379 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.379 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.379 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:38.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:38.380 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:38.381 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:38.381 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.381 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:38.381 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.381 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.381 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.381 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" completed keep alive response.
2025-09-16 23:16:38.381 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:38.381 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.381 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.381 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 6.6394ms
2025-09-16 23:16:38.411 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-16 23:16:38.411 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-16 23:16:38.411 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:38.411 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:38.412 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:38.412 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:38.412 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:38.412 +03:00 [INF] Getting all users
2025-09-16 23:16:38.413 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:38.413 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:38.413 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.413 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.413 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:38.413 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.413 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.413 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:16:38.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-16 23:16:38.413 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.413 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:38.413 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.413 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.414 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-16 23:16:38.414 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" completed keep alive response.
2025-09-16 23:16:38.414 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:38.414 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.414 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.414 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 2.609ms
2025-09-16 23:16:38.435 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:16:38.435 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:38.435 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:38.436 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.436 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:38.436 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:38.436 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.436 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:38.436 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:16:38.437 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:38.437 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:38.437 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.437 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.437 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:38.437 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.437 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:38.437 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:38.437 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:38.437 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:38.437 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:38.437 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.438 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:38.438 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:38.438 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.438 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:38.438 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" completed keep alive response.
2025-09-16 23:16:38.438 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:38.438 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:38.439 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:38.439 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 3.2771ms
2025-09-16 23:16:38.525 +03:00 [DBG] Connection id "0HNFLBNOD6QVA" accepted.
2025-09-16 23:16:38.525 +03:00 [DBG] Connection id "0HNFLBNOD6QVA" started.
2025-09-16 23:16:38.528 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:16:38.528 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:16:38.528 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:16:38.528 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:16:38.532 +03:00 [INF] Api health check sent.
2025-09-16 23:16:38.532 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:16:38.533 +03:00 [DBG] Connection id "0HNFLBNOD6QVA" completed keep alive response.
2025-09-16 23:16:38.533 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 4.7791ms
2025-09-16 23:16:42.541 +03:00 [DBG] Connection id "0HNFLBNOD6QVA" received FIN.
2025-09-16 23:16:42.541 +03:00 [DBG] Connection id "0HNFLBNOD6QVA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-16 23:16:42.542 +03:00 [DBG] Connection id "0HNFLBNOD6QVA" disconnecting.
2025-09-16 23:16:42.543 +03:00 [DBG] Connection id "0HNFLBNOD6QVA" stopped.
2025-09-16 23:16:42.558 +03:00 [DBG] Connection id "0HNFLBNOD6QVB" accepted.
2025-09-16 23:16:42.558 +03:00 [DBG] Connection id "0HNFLBNOD6QVB" started.
2025-09-16 23:16:42.558 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:16:42.558 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:16:42.558 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:16:42.559 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:16:42.559 +03:00 [INF] Api health check sent.
2025-09-16 23:16:42.559 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:16:42.559 +03:00 [DBG] Connection id "0HNFLBNOD6QVB" completed keep alive response.
2025-09-16 23:16:42.559 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.8007ms
2025-09-16 23:16:42.562 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:16:42.563 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:42.563 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:42.563 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:42.563 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:42.563 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:42.563 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:42.565 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:42.565 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:16:42.565 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:42.565 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:42.565 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.565 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.565 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:42.565 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.566 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.566 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:42.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:42.566 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.566 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.567 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.567 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:42.567 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.567 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.567 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:42.568 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" completed keep alive response.
2025-09-16 23:16:42.568 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:42.568 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.568 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.568 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 5.6402ms
2025-09-16 23:16:42.571 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - null null
2025-09-16 23:16:42.571 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:42.571 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc'
2025-09-16 23:16:42.571 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:42.571 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:42.571 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:42.571 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:42.572 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:42.572 +03:00 [INF] Getting user by ID: "29ceab46-b1e1-4286-8552-c19c78cc9bfc"
2025-09-16 23:16:42.573 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:42.573 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:42.573 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.574 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.574 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:42.574 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.574 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.574 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:42.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:42.575 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.575 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.575 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.575 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:42.575 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.575 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.576 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-16 23:16:42.576 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" completed keep alive response.
2025-09-16 23:16:42.576 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:42.576 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.576 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.576 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/29ceab46-b1e1-4286-8552-c19c78cc9bfc - 200 null application/json; charset=utf-8 4.9846ms
2025-09-16 23:16:42.645 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:16:42.645 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:16:42.645 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:16:42.645 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.645 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:42.645 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:42.645 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.647 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:16:42.647 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:16:42.647 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:16:42.647 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:16:42.648 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:42.648 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:42.648 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:16:42.648 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:42.648 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:42.653 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-16 23:16:42.653 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 23:16:42.668 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-16 23:16:42.672 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:42.672 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:42.672 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:42.672 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:42.672 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.672 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.672 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.672 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:42.672 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.672 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.672 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.672 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.672 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:42.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.672 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.672 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.673 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.673 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.673 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.673 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.681 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.687 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.687 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.687 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.687 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.688 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.688 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.689 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 16ms reading results.
2025-09-16 23:16:42.689 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 15ms reading results.
2025-09-16 23:16:42.689 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.689 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.689 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.689 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.690 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:42.690 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.690 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:42.690 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.690 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.691 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.691 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.691 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.691 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:42.691 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.691 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.696 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:42.696 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:42.697 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.697 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.697 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:42.697 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.697 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.697 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.697 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.698 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.698 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:42.698 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.698 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.698 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:42.698 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:16:42.698 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:42.698 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:42.698 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.698 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.698 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 51.7491ms
2025-09-16 23:16:42.701 +03:00 [DBG] Connection id "0HNFLBNOD6QVC" accepted.
2025-09-16 23:16:42.701 +03:00 [DBG] Connection id "0HNFLBNOD6QVC" started.
2025-09-16 23:16:42.701 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - null null
2025-09-16 23:16:42.702 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:16:42.702 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a'
2025-09-16 23:16:42.702 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:16:42.702 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:42.702 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:42.702 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:16:42.703 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:42.703 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:42.704 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:42.704 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.704 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.704 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:42.704 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.704 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.704 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.704 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.704 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:16:42.704 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:16:42.705 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:42.705 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.706 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:16:42.706 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.706 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.706 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:42.706 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.707 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.707 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:42.707 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.707 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:42.707 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:42.708 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.708 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:42.708 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:42.708 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.708 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:42.709 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-16 23:16:42.709 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:42.709 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:42.709 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.709 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.709 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/023b170b-6e42-41cc-bef0-d210fdd89a8a - 200 null application/json; charset=utf-8 8.2793ms
2025-09-16 23:16:42.764 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:16:42.769 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.769 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:16:42.770 +03:00 [DBG] Connection id "0HNFLBNOD6QV9" completed keep alive response.
2025-09-16 23:16:42.770 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:16:42.770 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:42.770 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:16:42.770 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:42.770 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.770 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:42.770 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 125.6509ms
2025-09-16 23:16:42.770 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:42.770 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:42.770 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.771 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:42.771 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.771 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:42.771 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:42.772 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.2905ms
2025-09-16 23:16:42.773 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:16:42.773 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:16:42.773 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:16:42.773 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.773 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:42.774 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:42.774 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.775 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:42.775 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.775 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:42.775 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:42.775 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 2.6048ms
2025-09-16 23:16:42.776 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - null null
2025-09-16 23:16:42.776 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:16:42.776 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema'
2025-09-16 23:16:42.776 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.777 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:42.777 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:42.777 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.777 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:42.778 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-16 23:16:42.778 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:42.778 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:42.778 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/schema - 200 null application/json; charset=utf-8 1.6079ms
2025-09-16 23:16:43.651 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-16 23:16:43.652 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-16 23:16:43.652 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-16 23:16:43.652 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:43.652 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:43.652 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-16 23:16:43.652 +03:00 [INF] Api health check sent.
2025-09-16 23:16:43.652 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-16 23:16:43.652 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:43.652 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 1.2203ms
2025-09-16 23:16:43.655 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/profiles - null null
2025-09-16 23:16:43.655 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profiles'
2025-09-16 23:16:43.655 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:16:43.655 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:43.655 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:43.655 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:16:43.664 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:43.666 +03:00 [INF] Listing all profiles
2025-09-16 23:16:43.668 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .AsNoTracking()'
2025-09-16 23:16:43.669 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-16 23:16:43.683 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Profile>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
            3 -> 9
        SELECT p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
        FROM Profiles AS p
        LEFT JOIN Queries AS q ON p.Id == q.ProfileId
        ORDER BY p.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Profile entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Profile instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Profile);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                            {
                                return 
                                {
                                    Profile instance;
                                    instance = new Profile();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                    instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                    instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                    instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Profile)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (Profile)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Query entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Query instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Query);
                    dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                {
                                    return 
                                    {
                                        Query instance;
                                        instance = new Query();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                        instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Query)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
                return namelessParameter{12}.<Profile>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (Profile)(resultContext.Values[0]) : default(Profile);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-16 23:16:43.685 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:43.686 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:43.686 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:43.686 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.686 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:43.686 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.686 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.686 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 23:16:43.686 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM "Profiles" AS "p"
LEFT JOIN "Queries" AS "q" ON "p"."Id" = "q"."ProfileId"
ORDER BY "p"."Id"
2025-09-16 23:16:43.687 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.688 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:16:43.688 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.688 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:43.688 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:43.689 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:43.689 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.689 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:43.689 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.689 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.689 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:43.690 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:43.690 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.690 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.690 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.690 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.691 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.691 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.691 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.691 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.691 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.691 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.691 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:16:43.691 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.691 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:43.692 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:43.693 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/profiles'
2025-09-16 23:16:43.693 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:43.693 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:43.693 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:43.693 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:43.693 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/profiles - 200 null application/json; charset=utf-8 38.1108ms
2025-09-16 23:16:43.696 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - null null
2025-09-16 23:16:43.696 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:16:43.696 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-16 23:16:43.696 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:43.696 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:43.697 +03:00 [DBG] The request is a preflight request.
2025-09-16 23:16:43.697 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:43.697 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 204 null null 1.5362ms
2025-09-16 23:16:43.698 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - application/json 164
2025-09-16 23:16:43.699 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:16:43.699 +03:00 [DBG] Endpoint 'HTTP: POST api/query/{profileId}/convert' with route pattern 'api/query/{profileId}/convert' is valid for the request path '/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert'
2025-09-16 23:16:43.699 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:16:43.699 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-16 23:16:43.699 +03:00 [INF] CORS policy execution successful.
2025-09-16 23:16:43.700 +03:00 [INF] Executing endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:16:43.701 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-16 23:16:43.709 +03:00 [DBG] Connection id "0HNFLBNOD6QV8", Request id "0HNFLBNOD6QV8:0000000B": started reading request body.
2025-09-16 23:16:43.709 +03:00 [DBG] Connection id "0HNFLBNOD6QV8", Request id "0HNFLBNOD6QV8:0000000B": done reading request body.
2025-09-16 23:16:43.721 +03:00 [INF] Converting NL to SQL for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:43.721 +03:00 [DBG] Creating DbConnection.
2025-09-16 23:16:43.722 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-16 23:16:43.722 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:43.722 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.722 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:43.722 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.722 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.722 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:43.722 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-16 23:16:43.722 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.723 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.723 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.723 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:43.723 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.723 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:43.723 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:43.723 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.723 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:43.723 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.723 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.723 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:43.724 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:43.725 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.725 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.725 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.725 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.725 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.726 +03:00 [DBG] Context 'ContextDB' started tracking 'Query' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-16 23:16:43.726 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.726 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-16 23:16:43.726 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.726 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:43.727 +03:00 [INF] Fetching connection string for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:43.727 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:43.727 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.727 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-16 23:16:43.727 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.727 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-16 23:16:43.727 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:43.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-16 23:16:43.728 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.728 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-16 23:16:43.728 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-16 23:16:43.728 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:43.729 +03:00 [DBG] Fetched secret for profile "023b170b-6e42-41cc-bef0-d210fdd89a8a"
2025-09-16 23:16:43.729 +03:00 [DBG] Fetching schema for Profile "023b170b-6e42-41cc-bef0-d210fdd89a8a", ForceRefresh=false
2025-09-16 23:16:43.729 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-16 23:16:43.730 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-16 23:16:43.748 +03:00 [INF] Groq API key configured for HttpClient
2025-09-16 23:16:43.748 +03:00 [INF] Converting natural language to SQL. User query: SELECT 1 as health_check
2025-09-16 23:16:43.749 +03:00 [DBG] Generated prompt with system message, 2 examples, and user query
2025-09-16 23:16:43.750 +03:00 [DBG] Generated prompt with 6 messages
2025-09-16 23:16:43.756 +03:00 [DBG] Request payload prepared for LLM API
2025-09-16 23:16:44.430 +03:00 [INF] LLM API responded with status: "OK"
2025-09-16 23:16:44.435 +03:00 [INF] Successfully converted natural language to SQL query
2025-09-16 23:16:44.436 +03:00 [INF] Executed endpoint 'HTTP: POST api/query/{profileId}/convert'
2025-09-16 23:16:44.436 +03:00 [DBG] Connection id "0HNFLBNOD6QV8" completed keep alive response.
2025-09-16 23:16:44.436 +03:00 [DBG] 'ContextDB' disposed.
2025-09-16 23:16:44.436 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-16 23:16:44.436 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-16 23:16:44.436 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/query/023b170b-6e42-41cc-bef0-d210fdd89a8a/convert - 200 null application/json; charset=utf-8 737.9668ms
