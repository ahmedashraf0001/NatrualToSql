2025-09-15 08:46:50.645 +03:00 [INF] This is a test log to file!
2025-09-15 08:46:50.796 +03:00 [INF] Shared Kernal configured successfully.
2025-09-15 08:46:50.799 +03:00 [INF] API configured successfully.
2025-09-15 08:46:50.852 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 08:46:50.889 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 08:46:51.209 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-15 08:46:51.259 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:46:51.276 +03:00 [INF] Registered 23 endpoints in 547 milliseconds.
2025-09-15 08:46:51.280 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:46:51.318 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:46:51.392 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:46:51.401 +03:00 [DBG] Created DbConnection. (7ms).
2025-09-15 08:46:51.402 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-15 08:46:51.405 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:46:51.406 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-15 08:46:51.407 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:46:51.414 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:46:51.416 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:46:51.419 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:46:51.419 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:46:51.421 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:46:51.422 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-15 08:46:51.426 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:46:51.430 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-15 08:46:51.431 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-09-15 08:46:51.435 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 08:46:51.459 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 08:46:51.461 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:46:51.461 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:46:51.461 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:46:51.461 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 05:46:51.4607214+00:00');
SELECT changes();
2025-09-15 08:46:51.474 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 05:46:51.4607214+00:00');
SELECT changes();
2025-09-15 08:46:51.510 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:46:51.512 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:46:51.512 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:46:51.513 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:46:51.513 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:46:51.513 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 08:46:51.513 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 08:46:51.514 +03:00 [DBG] Committing transaction.
2025-09-15 08:46:51.514 +03:00 [DBG] Committed transaction.
2025-09-15 08:46:51.515 +03:00 [DBG] Disposing transaction.
2025-09-15 08:46:51.516 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:46:51.516 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:46:51.517 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:46:51.517 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:46:51.517 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:46:51.518 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:46:51.518 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:46:51.518 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:46:51.518 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:46:51.518 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:46:51.518 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:46:51.518 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 08:46:51.518 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 08:46:51.520 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:46:51.520 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:46:51.520 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:46:51.520 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 08:46:51.520 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 08:46:51.522 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:46:51.523 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 08:46:51.526 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-15 08:46:51.526 +03:00 [DBG] Committing transaction.
2025-09-15 08:46:51.526 +03:00 [DBG] Committed transaction.
2025-09-15 08:46:51.526 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:46:51.526 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:46:51.526 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:46:51.527 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 08:46:51.529 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 08:46:51.530 +03:00 [DBG] Disposing transaction.
2025-09-15 08:46:51.530 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:46:51.533 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-15 08:46:51.533 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:46:51.533 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:46:51.533 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:46:51.533 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 08:46:51.533 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 08:46:51.547 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 08:46:51.558 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-15 08:46:51.559 +03:00 [DBG] Hosting starting
2025-09-15 08:46:51.597 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 08:46:51.598 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 08:46:51.612 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-09-15 08:47:51.999 +03:00 [INF] This is a test log to file!
2025-09-15 08:47:52.175 +03:00 [INF] Shared Kernal configured successfully.
2025-09-15 08:47:52.178 +03:00 [INF] API configured successfully.
2025-09-15 08:47:52.250 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 08:47:52.298 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 08:47:52.790 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-15 08:47:52.879 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:47:52.900 +03:00 [INF] Registered 23 endpoints in 808 milliseconds.
2025-09-15 08:47:52.905 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:47:52.948 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:47:53.031 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:47:53.039 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-15 08:47:53.040 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.044 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:47:53.045 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-15 08:47:53.046 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.053 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.055 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.058 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.058 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.065 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.070 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.075 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-15 08:47:53.076 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (5ms).
2025-09-15 08:47:53.080 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-15 08:47:53.116 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-15 08:47:53.118 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.120 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-15 08:47:53.120 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.120 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.122 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-15 08:47:53.124 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:47:53.124 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:47:53.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:47:53.125 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 08:47:53.131 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 08:47:53.131 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.131 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.131 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.131 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-15 08:47:53.139 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-15 08:47:53.140 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:47:53.140 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:47:53.141 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:47:53.141 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 05:47:53.1402286+00:00');
SELECT changes();
2025-09-15 08:47:53.143 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 05:47:53.1402286+00:00');
SELECT changes();
2025-09-15 08:47:53.196 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:47:53.198 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:47:53.200 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.200 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.201 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.201 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 08:47:53.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 08:47:53.203 +03:00 [DBG] Committing transaction.
2025-09-15 08:47:53.208 +03:00 [DBG] Committed transaction.
2025-09-15 08:47:53.210 +03:00 [DBG] Disposing transaction.
2025-09-15 08:47:53.213 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:47:53.213 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:47:53.215 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:47:53.215 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:47:53.215 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.216 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.217 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.217 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.218 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:47:53.218 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:47:53.218 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:47:53.218 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 08:47:53.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 08:47:53.220 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:47:53.220 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:47:53.220 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:47:53.220 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 08:47:53.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 08:47:53.222 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.223 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 08:47:53.226 +03:00 [INF] Applying migration '20250825154106_init'.
2025-09-15 08:47:53.237 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.237 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.237 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.237 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-15 08:47:53.237 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-15 08:47:53.237 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.237 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.237 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.237 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-15 08:47:53.238 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-15 08:47:53.238 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.238 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.238 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.238 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-15 08:47:53.238 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-15 08:47:53.238 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.238 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.238 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.238 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-15 08:47:53.238 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-15 08:47:53.238 +03:00 [INF] Applying migration '20250826210914_updatedsqlite'.
2025-09-15 08:47:53.244 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.245 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.245 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.245 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-15 08:47:53.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-15 08:47:53.245 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.245 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.245 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.245 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-15 08:47:53.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-15 08:47:53.245 +03:00 [DBG] Committing transaction.
2025-09-15 08:47:53.249 +03:00 [DBG] Committed transaction.
2025-09-15 08:47:53.249 +03:00 [DBG] Disposing transaction.
2025-09-15 08:47:53.249 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.249 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.249 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.249 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-15 08:47:53.249 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-15 08:47:53.250 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:47:53.250 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:47:53.250 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.250 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.250 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.250 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-15 08:47:53.250 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-15 08:47:53.250 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.250 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.250 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.250 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-15 08:47:53.255 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-15 08:47:53.256 +03:00 [DBG] Committing transaction.
2025-09-15 08:47:53.260 +03:00 [DBG] Committed transaction.
2025-09-15 08:47:53.260 +03:00 [DBG] Disposing transaction.
2025-09-15 08:47:53.260 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.260 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.260 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.260 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-15 08:47:53.260 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-15 08:47:53.261 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.261 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.261 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.261 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-15 08:47:53.266 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-15 08:47:53.268 +03:00 [INF] Applying migration '20250831091732_setdatabasenameinprofile'.
2025-09-15 08:47:53.272 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:47:53.273 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:47:53.273 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.273 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.273 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.273 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-15 08:47:53.275 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-15 08:47:53.275 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.275 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.275 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.276 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-15 08:47:53.276 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-15 08:47:53.276 +03:00 [INF] Applying migration '20250904150142_addeduser'.
2025-09-15 08:47:53.288 +03:00 [WRN] The migration operation 'PRAGMA foreign_keys = 0;
' from migration 'addeduser' cannot be executed in a transaction. If the app is terminated or an unrecoverable error occurs while this operation is being executed then the migration will be left in a partially applied state and would need to be reverted manually before it can be applied again. Create a separate migration that contains just this operation.
2025-09-15 08:47:53.289 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.289 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.289 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.289 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-15 08:47:53.289 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-15 08:47:53.289 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.289 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.289 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.289 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-15 08:47:53.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-15 08:47:53.290 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.290 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.290 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.290 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-15 08:47:53.291 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-15 08:47:53.291 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.291 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.291 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.292 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-15 08:47:53.292 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-15 08:47:53.292 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.292 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.292 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.292 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-15 08:47:53.292 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-15 08:47:53.292 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.292 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.292 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.292 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-15 08:47:53.293 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-15 08:47:53.293 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.293 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.293 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.293 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-15 08:47:53.293 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-15 08:47:53.293 +03:00 [DBG] Committing transaction.
2025-09-15 08:47:53.301 +03:00 [DBG] Committed transaction.
2025-09-15 08:47:53.301 +03:00 [DBG] Disposing transaction.
2025-09-15 08:47:53.301 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.301 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.301 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.301 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-15 08:47:53.301 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-15 08:47:53.301 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:47:53.302 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:47:53.302 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.302 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.302 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.302 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-15 08:47:53.302 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-15 08:47:53.302 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.302 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.302 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.302 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-15 08:47:53.303 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-15 08:47:53.303 +03:00 [DBG] Committing transaction.
2025-09-15 08:47:53.311 +03:00 [DBG] Committed transaction.
2025-09-15 08:47:53.312 +03:00 [DBG] Disposing transaction.
2025-09-15 08:47:53.312 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.312 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.312 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.312 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-15 08:47:53.312 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-15 08:47:53.312 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:47:53.313 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:47:53.313 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.313 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.313 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.313 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-15 08:47:53.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-15 08:47:53.313 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.313 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.313 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.313 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-15 08:47:53.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-15 08:47:53.314 +03:00 [DBG] Committing transaction.
2025-09-15 08:47:53.318 +03:00 [DBG] Committed transaction.
2025-09-15 08:47:53.318 +03:00 [DBG] Disposing transaction.
2025-09-15 08:47:53.318 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:47:53.318 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.318 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:47:53.318 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-15 08:47:53.322 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-15 08:47:53.323 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:47:53.323 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:47:53.323 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:47:53.324 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 08:47:53.331 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 08:47:53.331 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.332 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.332 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:47:53.332 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.332 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.332 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 08:47:53.332 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 08:47:53.365 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 08:47:53.384 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-15 08:47:53.385 +03:00 [DBG] Hosting starting
2025-09-15 08:47:53.443 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 08:47:53.444 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 08:47:53.457 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-15 08:47:53.457 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-15 08:47:53.457 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 08:47:53.457 +03:00 [INF] Hosting environment: Development
2025-09-15 08:47:53.457 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-15 08:47:53.457 +03:00 [DBG] Hosting started
2025-09-15 08:47:53.465 +03:00 [DBG] Connection id "0HNFK3DKUHUMA" accepted.
2025-09-15 08:47:53.465 +03:00 [DBG] Connection id "0HNFK3DKUHUMA" started.
2025-09-15 08:47:53.487 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 08:47:53.511 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 08:47:53.512 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.526 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:47:53.526 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:47:53.527 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-15 08:47:53.529 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.543 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:47:53.570 +03:00 [INF] Getting all users
2025-09-15 08:47:53.594 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-15 08:47:53.632 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-15 08:47:53.710 +03:00 [DBG] Connection id "0HNFK3DKUHUMB" accepted.
2025-09-15 08:47:53.711 +03:00 [DBG] Connection id "0HNFK3DKUHUMB" started.
2025-09-15 08:47:53.832 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-15 08:47:53.849 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:47:53.849 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:47:53.850 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.851 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:47:53.851 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:47:53.851 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:47:53.851 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:47:53.853 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:47:53.857 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.857 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-15 08:47:53.859 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.860 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.905 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.906 +03:00 [DBG] Connection id "0HNFK3DKUHUMA" completed keep alive response.
2025-09-15 08:47:53.907 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:47:53.907 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 08:47:53.908 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 08:47:53.908 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.909 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.911 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.912 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:47:53.912 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:47:53.910 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 424.2509ms
2025-09-15 08:47:53.912 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.913 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:47:53.913 +03:00 [INF] Getting all users
2025-09-15 08:47:53.916 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:47:53.916 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:47:53.916 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.916 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.916 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:47:53.917 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:47:53.917 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:47:53.917 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:47:53.917 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:47:53.917 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.917 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:47:53.917 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.917 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.918 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.918 +03:00 [DBG] Connection id "0HNFK3DKUHUMB" completed keep alive response.
2025-09-15 08:47:53.919 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:47:53.919 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.919 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.919 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 12.1558ms
2025-09-15 08:47:53.955 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 08:47:53.956 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 08:47:53.956 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.957 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:47:53.957 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:47:53.958 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.959 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:47:53.959 +03:00 [INF] Getting all users
2025-09-15 08:47:53.960 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:47:53.961 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:47:53.961 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.961 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.961 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:47:53.961 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:47:53.961 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:47:53.961 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:47:53.961 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:47:53.961 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.961 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:47:53.961 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:47:53.961 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.962 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:47:53.962 +03:00 [DBG] Connection id "0HNFK3DKUHUMB" completed keep alive response.
2025-09-15 08:47:53.962 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:47:53.962 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:47:53.962 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:47:53.962 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 6.5145ms
2025-09-15 08:48:00.822 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/697ca0c3-8393-4200-924a-864e295d9258 - null null
2025-09-15 08:48:00.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/697ca0c3-8393-4200-924a-864e295d9258'
2025-09-15 08:48:00.823 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/697ca0c3-8393-4200-924a-864e295d9258'
2025-09-15 08:48:00.823 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:00.823 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:00.823 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:00.824 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:00.825 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:00.842 +03:00 [INF] Getting user by ID: "697ca0c3-8393-4200-924a-864e295d9258"
2025-09-15 08:48:00.850 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-15 08:48:00.853 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-15 08:48:00.879 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 08:48:00.887 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:00.887 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:00.887 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:00.887 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:00.887 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:00.887 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:00.889 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-15 08:48:00.890 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:48:00.893 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:48:00.893 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:00.893 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:48:00.894 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:00.894 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:00.895 +03:00 [WRN] User with ID "697ca0c3-8393-4200-924a-864e295d9258" not found
2025-09-15 08:48:00.899 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:00.901 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: User with ID 697ca0c3-8393-4200-924a-864e295d9258 not found
   at NaturalToQuery.Application.Services.UserInfoService.GetByIdAsync(Guid id, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\UserInfoService.cs:line 121
   at NaturalToQuery.Api.Controllers.UserInfo.GetUserById.HandleAsync(GetUserByIdRequest req, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\UserInfo\GetUserById.cs:line 25
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-15 08:48:00.937 +03:00 [ERR] Unhandled exception occurred.
2025-09-15 08:48:00.942 +03:00 [DBG] Connection id "0HNFK3DKUHUMB" completed keep alive response.
2025-09-15 08:48:00.942 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:00.942 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:00.942 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:00.943 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/697ca0c3-8393-4200-924a-864e295d9258 - 500 null application/json; charset=utf-8 120.3128ms
2025-09-15 08:48:00.946 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo - null null
2025-09-15 08:48:00.947 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 08:48:00.947 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-15 08:48:00.947 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:00.947 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:00.947 +03:00 [DBG] The request is a preflight request.
2025-09-15 08:48:00.948 +03:00 [DBG] Connection id "0HNFK3DKUHUMB" completed keep alive response.
2025-09-15 08:48:00.948 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo - 204 null null 1.9086ms
2025-09-15 08:48:00.949 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 28
2025-09-15 08:48:00.950 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 08:48:00.950 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-15 08:48:00.950 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:00.950 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:00.950 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-15 08:48:00.951 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:00.960 +03:00 [DBG] Connection id "0HNFK3DKUHUMB", Request id "0HNFK3DKUHUMB:00000005": started reading request body.
2025-09-15 08:48:00.960 +03:00 [DBG] Connection id "0HNFK3DKUHUMB", Request id "0HNFK3DKUHUMB:00000005": done reading request body.
2025-09-15 08:48:00.968 +03:00 [INF] Creating new user with API key: 
2025-09-15 08:48:00.969 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()'
2025-09-15 08:48:00.974 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserInfo entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserInfo instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserInfo);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserInfo)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                        {
                            return 
                            {
                                UserInfo instance;
                                instance = new UserInfo();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserInfo)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-15 08:48:00.975 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:00.975 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:00.975 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:00.975 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:00.975 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:00.976 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:00.976 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:00.976 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-15 08:48:00.976 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-15 08:48:00.976 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:00.976 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:48:00.976 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:00.976 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:00.998 +03:00 [DBG] 'ContextDB' generated a value for the property 'UserInfo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:01.043 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:01.048 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:48:01.071 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:48:01.074 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 08:48:01.075 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:48:01.076 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:48:01.128 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:01.128 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:01.129 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:01.129 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:01.131 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-15 08:48:01.131 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-15 08:48:01.135 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-15 08:48:01.137 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:01.138 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-15 08:48:01.138 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:01.138 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:01.143 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:01.144 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 08:48:01.144 +03:00 [INF] User created successfully with ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:48:01.147 +03:00 [INF] Executed endpoint 'HTTP: POST api/userinfo'
2025-09-15 08:48:01.147 +03:00 [DBG] Connection id "0HNFK3DKUHUMB" completed keep alive response.
2025-09-15 08:48:01.147 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:01.147 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:01.147 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:01.147 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 197.6763ms
2025-09-15 08:48:01.149 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:48:01.149 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:48:01.149 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:48:01.149 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:01.150 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:01.150 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:01.150 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:01.150 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:01.151 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:48:01.151 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:01.152 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:01.152 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:01.152 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:01.152 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:01.152 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:01.152 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:01.152 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:48:01.153 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:48:01.162 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:01.171 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:01.171 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 18ms reading results.
2025-09-15 08:48:01.171 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:01.172 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:01.176 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:01.176 +03:00 [DBG] Connection id "0HNFK3DKUHUMB" completed keep alive response.
2025-09-15 08:48:01.177 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:01.177 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:01.177 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:01.177 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 28.1731ms
2025-09-15 08:48:04.372 +03:00 [INF] This is a test log to file!
2025-09-15 08:48:04.490 +03:00 [INF] Shared Kernal configured successfully.
2025-09-15 08:48:04.492 +03:00 [INF] API configured successfully.
2025-09-15 08:48:04.542 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 08:48:04.576 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 08:48:04.983 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-15 08:48:05.055 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:05.071 +03:00 [INF] Registered 23 endpoints in 639 milliseconds.
2025-09-15 08:48:05.075 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:05.116 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:05.193 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:05.201 +03:00 [DBG] Created DbConnection. (6ms).
2025-09-15 08:48:05.203 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:05.205 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:05.206 +03:00 [DBG] Created DbConnection. (1ms).
2025-09-15 08:48:05.207 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:05.214 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:05.216 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:05.218 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:05.218 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:05.220 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:05.221 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-15 08:48:05.224 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:48:05.227 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-09-15 08:48:05.228 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-09-15 08:48:05.232 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 08:48:05.251 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 08:48:05.252 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:48:05.252 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:48:05.252 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:48:05.252 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 05:48:05.2520835+00:00');
SELECT changes();
2025-09-15 08:48:05.256 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 05:48:05.2520835+00:00');
SELECT changes();
2025-09-15 08:48:05.290 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:48:05.292 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:48:05.293 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:48:05.293 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:48:05.293 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:48:05.293 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 08:48:05.293 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 08:48:05.294 +03:00 [DBG] Committing transaction.
2025-09-15 08:48:05.295 +03:00 [DBG] Committed transaction.
2025-09-15 08:48:05.295 +03:00 [DBG] Disposing transaction.
2025-09-15 08:48:05.296 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:48:05.297 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:48:05.298 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:05.298 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:05.298 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:05.299 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:05.299 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:05.299 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:05.299 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:48:05.299 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:48:05.300 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:48:05.300 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 08:48:05.300 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 08:48:05.301 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:05.301 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:05.301 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:05.301 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 08:48:05.302 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 08:48:05.304 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:05.305 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-15 08:48:05.308 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-15 08:48:05.308 +03:00 [DBG] Committing transaction.
2025-09-15 08:48:05.308 +03:00 [DBG] Committed transaction.
2025-09-15 08:48:05.308 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:48:05.308 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:48:05.308 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:48:05.309 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 08:48:05.312 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 08:48:05.312 +03:00 [DBG] Disposing transaction.
2025-09-15 08:48:05.313 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:05.315 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-15 08:48:05.315 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:05.315 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:05.315 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:05.315 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 08:48:05.316 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 08:48:05.330 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 08:48:05.341 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-15 08:48:05.342 +03:00 [DBG] Hosting starting
2025-09-15 08:48:05.381 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 08:48:05.382 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 08:48:05.390 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-15 08:48:05.390 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-15 08:48:05.390 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 08:48:05.391 +03:00 [INF] Hosting environment: Development
2025-09-15 08:48:05.391 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-15 08:48:05.391 +03:00 [DBG] Hosting started
2025-09-15 08:48:08.272 +03:00 [DBG] Connection id "0HNFK3DPBOS1D" accepted.
2025-09-15 08:48:08.273 +03:00 [DBG] Connection id "0HNFK3DPBOS1D" started.
2025-09-15 08:48:08.290 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:48:08.326 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:48:08.326 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:48:08.343 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-15 08:48:08.345 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:48:08.373 +03:00 [INF] Api health check sent.
2025-09-15 08:48:08.374 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:48:08.374 +03:00 [DBG] Connection id "0HNFK3DPBOS1D" completed keep alive response.
2025-09-15 08:48:08.375 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 86.1059ms
2025-09-15 08:48:09.597 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" accepted.
2025-09-15 08:48:09.598 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" started.
2025-09-15 08:48:09.599 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:48:09.601 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:48:09.601 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:48:09.603 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:09.603 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:09.604 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:48:09.607 +03:00 [INF] Api health check sent.
2025-09-15 08:48:09.607 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:48:09.607 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:09.607 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 8.1102ms
2025-09-15 08:48:12.382 +03:00 [DBG] Connection id "0HNFK3DPBOS1D" received FIN.
2025-09-15 08:48:12.382 +03:00 [DBG] Connection id "0HNFK3DPBOS1D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 08:48:12.382 +03:00 [DBG] Connection id "0HNFK3DPBOS1D" disconnecting.
2025-09-15 08:48:12.383 +03:00 [DBG] Connection id "0HNFK3DPBOS1D" stopped.
2025-09-15 08:48:25.179 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:48:25.179 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:48:25.180 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:48:25.180 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:25.181 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:25.181 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:25.182 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:25.202 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:25.229 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:48:25.275 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-15 08:48:25.317 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-15 08:48:25.513 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 08:48:25.535 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:25.535 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:25.536 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:25.537 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:25.537 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:25.537 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:25.539 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-15 08:48:25.541 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:48:25.546 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:48:25.576 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:25.593 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:25.593 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 47ms reading results.
2025-09-15 08:48:25.595 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:25.596 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:25.612 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:25.612 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:25.613 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:25.615 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:25.615 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:25.615 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 436.1561ms
2025-09-15 08:48:25.709 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/providers - null null
2025-09-15 08:48:25.709 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/providers'
2025-09-15 08:48:25.709 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/providers'
2025-09-15 08:48:25.710 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:25.710 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:25.710 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/providers'
2025-09-15 08:48:25.712 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:25.721 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/providers'
2025-09-15 08:48:25.721 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:25.721 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:25.721 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/providers - 200 null application/json; charset=utf-8 12.3188ms
2025-09-15 08:48:25.996 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:48:25.997 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:48:25.997 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:48:25.997 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:48:25.997 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:48:25.997 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:25.997 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:25.997 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:48:25.998 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:48:25.999 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:25.999 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 2.4614ms
2025-09-15 08:48:28.320 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - null null
2025-09-15 08:48:28.321 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/servers/SqlServer'
2025-09-15 08:48:28.321 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/servers/{type}' with route pattern 'api/setup/servers/{type}' is valid for the request path '/api/setup/servers/SqlServer'
2025-09-15 08:48:28.322 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 08:48:28.322 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:28.322 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:28.322 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 08:48:28.323 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:28.334 +03:00 [INF] Fetching servers (forceRefresh=true)
2025-09-15 08:48:28.337 +03:00 [DBG] Looking up servers from registry key SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL
2025-09-15 08:48:28.352 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 08:48:28.537 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 08:48:28.540 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 08:48:28.628 +03:00 [INF] Discovered server DESKTOP-QCK8UI5\SQLEXPRESS with 4 running DBs
2025-09-15 08:48:28.691 +03:00 [DBG] Saved cache file C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 08:48:28.691 +03:00 [INF] Cached 1 servers to C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 08:48:28.696 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 08:48:28.697 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:28.698 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:28.698 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - 200 null application/json; charset=utf-8 377.2007ms
2025-09-15 08:48:28.914 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - null null
2025-09-15 08:48:28.914 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/servers/SqlServer'
2025-09-15 08:48:28.914 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/servers/{type}' with route pattern 'api/setup/servers/{type}' is valid for the request path '/api/setup/servers/SqlServer'
2025-09-15 08:48:28.914 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 08:48:28.915 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:28.915 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:28.915 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 08:48:28.915 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:28.916 +03:00 [INF] Fetching servers (forceRefresh=true)
2025-09-15 08:48:28.916 +03:00 [DBG] Looking up servers from registry key SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL
2025-09-15 08:48:28.916 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 08:48:28.916 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 08:48:28.916 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 08:48:28.918 +03:00 [INF] Discovered server DESKTOP-QCK8UI5\SQLEXPRESS with 4 running DBs
2025-09-15 08:48:28.920 +03:00 [DBG] Saved cache file C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 08:48:28.921 +03:00 [INF] Cached 1 servers to C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 08:48:28.921 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 08:48:28.921 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:28.921 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:28.921 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - 200 null application/json; charset=utf-8 6.8082ms
2025-09-15 08:48:29.406 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS - null null
2025-09-15 08:48:29.407 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-15 08:48:29.407 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}' with route pattern 'api/setup/databases/{type}/{serverName}' is valid for the request path '/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-15 08:48:29.407 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-15 08:48:29.407 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:29.407 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:29.407 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-15 08:48:29.408 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:29.412 +03:00 [INF] Fetching databases for server DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-15 08:48:29.416 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 08:48:29.416 +03:00 [DBG] Connected to server DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-15 08:48:30.161 +03:00 [INF] Found 8 databases on DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-15 08:48:30.164 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-15 08:48:30.164 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:30.164 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:30.164 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS - 200 null application/json; charset=utf-8 757.4583ms
2025-09-15 08:48:31.613 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/setup/profile - null null
2025-09-15 08:48:31.613 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-15 08:48:31.614 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-15 08:48:31.614 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:31.614 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:31.614 +03:00 [DBG] The request is a preflight request.
2025-09-15 08:48:31.615 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:31.615 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/setup/profile - 204 null null 1.7677ms
2025-09-15 08:48:31.617 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 206
2025-09-15 08:48:31.617 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-15 08:48:31.617 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-15 08:48:31.617 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:31.617 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:31.617 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-15 08:48:31.618 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:31.631 +03:00 [DBG] Connection id "0HNFK3DPBOS1E", Request id "0HNFK3DPBOS1E:00000009": started reading request body.
2025-09-15 08:48:31.631 +03:00 [DBG] Connection id "0HNFK3DPBOS1E", Request id "0HNFK3DPBOS1E:00000009": done reading request body.
2025-09-15 08:48:31.642 +03:00 [INF] Creating profile for provider "SqlServer"
2025-09-15 08:48:31.642 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-15 08:48:31.716 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-15 08:48:31.722 +03:00 [DBG] Saved secret profile-b4e746ad-95a3-4b9b-8df4-190cf7ee6669 for provider "SqlServer"
2025-09-15 08:48:31.723 +03:00 [DBG] Generated profile name SqlServer - ProductInventory with cache dir C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer
2025-09-15 08:48:31.726 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Any(p => p.DatabaseName.Equals(__profile_DatabaseName_0))'
2025-09-15 08:48:31.732 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 08:48:31.736 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:31.740 +03:00 [DBG] Created DbConnection. (3ms).
2025-09-15 08:48:31.740 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:31.740 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.740 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:31.740 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:31.741 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:31.741 +03:00 [DBG] Executing DbCommand [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-15 08:48:31.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-15 08:48:31.742 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.742 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:48:31.742 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.742 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:31.763 +03:00 [DBG] 'ContextDB' generated a value for the property 'Profile.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:31.783 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:31.786 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:48:31.799 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:48:31.802 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 08:48:31.808 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:48:31.808 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:48:31.846 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:31.847 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.847 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:31.847 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:31.848 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-15 08:48:31.849 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-15 08:48:31.853 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-15 08:48:31.856 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.856 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-15 08:48:31.857 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.857 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:31.861 +03:00 [DBG] An entity of type 'Profile' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:31.862 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 08:48:31.862 +03:00 [INF] Profile created successfully with Id "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:48:31.864 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-15 08:48:31.864 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:31.864 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:31.864 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:31.864 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:31.864 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 200 null application/json; charset=utf-8 247.4401ms
2025-09-15 08:48:31.867 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:48:31.867 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:48:31.867 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:48:31.867 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:31.868 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:31.868 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:31.868 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:31.868 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:31.869 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:48:31.872 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:31.872 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:31.872 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:31.872 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.872 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:31.873 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:31.873 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:31.873 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:48:31.873 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:48:31.873 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:31.877 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:31.877 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.877 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-15 08:48:31.878 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:31.878 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:31.879 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:48:31.879 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:31.880 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:31.880 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:31.880 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:31.880 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 12.4678ms
2025-09-15 08:48:31.998 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - null null
2025-09-15 08:48:31.998 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:48:31.998 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:48:31.998 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:48:31.998 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:31.998 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:31.998 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:48:31.999 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:32.006 +03:00 [DBG] Connection id "0HNFK3DPBOS1F" accepted.
2025-09-15 08:48:32.006 +03:00 [DBG] Connection id "0HNFK3DPBOS1F" started.
2025-09-15 08:48:32.006 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - null null
2025-09-15 08:48:32.006 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:48:32.006 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:48:32.006 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:48:32.006 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:32.007 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:32.007 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:48:32.007 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-15 08:48:32.007 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:32.008 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-15 08:48:32.021 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 08:48:32.024 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:32.024 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:32.024 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:32.024 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:32.024 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.024 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.024 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.024 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:32.024 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.024 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.024 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.025 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.025 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.025 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:32.025 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.025 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.025 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.025 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:32.025 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.026 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:32.026 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.026 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.026 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 08:48:32.026 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:48:32.026 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.026 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.026 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.026 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.027 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:48:32.027 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:48:32.028 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.028 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.028 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.028 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.028 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:32.028 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:32.028 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.028 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.028 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.028 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.028 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.028 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.028 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.028 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.028 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.028 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.028 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:48:32.028 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:48:32.028 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.028 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.028 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.028 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.030 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:48:32.030 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:48:32.030 +03:00 [DBG] Connection id "0HNFK3DPBOS1F" completed keep alive response.
2025-09-15 08:48:32.031 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:32.031 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.031 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.031 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - 200 null application/json; charset=utf-8 24.5939ms
2025-09-15 08:48:32.032 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - null null
2025-09-15 08:48:32.033 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:48:32.033 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:48:32.033 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:48:32.033 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:32.033 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:32.033 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:48:32.034 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:32.035 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:48:32.035 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:48:32.035 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.035 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.035 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:32.035 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.035 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.035 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.035 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:48:32.036 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.036 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:48:32.036 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.036 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.036 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:48:32.036 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.036 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.036 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:48:32.037 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.037 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:48:32.037 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.037 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:48:32.037 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.037 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:48:32.037 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:48:32.037 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.038 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:48:32.038 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:48:32.038 +03:00 [DBG] Connection id "0HNFK3DPBOS1F" completed keep alive response.
2025-09-15 08:48:32.038 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:32.038 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.038 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.038 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - 200 null application/json; charset=utf-8 6.6572ms
2025-09-15 08:48:32.047 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:48:32.049 +03:00 [DBG] Fetching schema for Profile "bd03b781-00bf-4e39-a761-f33855ba9d3a", ForceRefresh=false
2025-09-15 08:48:32.050 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-15 08:48:32.080 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-15 08:48:32.085 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:48:32.085 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:32.085 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:32.085 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:48:32.085 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:48:32.085 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - 200 null application/json; charset=utf-8 87.385ms
2025-09-15 08:48:32.086 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - null null
2025-09-15 08:48:32.087 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:48:32.087 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:48:32.087 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:48:32.087 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:32.087 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:32.087 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:48:32.088 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:48:32.088 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:48:32.088 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:32.088 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:48:32.088 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - 200 null application/json; charset=utf-8 2.5485ms
2025-09-15 08:48:39.613 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:48:39.613 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:48:39.613 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:48:39.613 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:48:39.613 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:48:39.613 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:48:39.613 +03:00 [INF] Api health check sent.
2025-09-15 08:48:39.613 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:48:39.613 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:48:39.613 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.66ms
2025-09-15 08:49:09.615 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:49:09.615 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:49:09.615 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:49:09.615 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:09.616 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:09.616 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:49:09.616 +03:00 [INF] Api health check sent.
2025-09-15 08:49:09.616 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:49:09.616 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:09.616 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7999ms
2025-09-15 08:49:09.858 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:49:09.858 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:49:09.858 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:49:09.858 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:49:09.858 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:09.858 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:09.858 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:09.858 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:09.858 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:09.858 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:09.859 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.5828ms
2025-09-15 08:49:24.302 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - null null
2025-09-15 08:49:24.302 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:49:24.302 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:49:24.302 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:49:24.302 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:24.302 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:24.302 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:49:24.303 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:24.303 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:49:24.303 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:24.303 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:24.303 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - 200 null application/json; charset=utf-8 1.235ms
2025-09-15 08:49:24.305 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - null null
2025-09-15 08:49:24.305 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:49:24.305 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:49:24.305 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:49:24.305 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:24.305 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:24.305 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:49:24.305 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:24.306 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:49:24.306 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:24.306 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:24.306 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - 200 null application/json; charset=utf-8 0.9206ms
2025-09-15 08:49:25.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - null null
2025-09-15 08:49:25.119 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:49:25.119 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:49:25.119 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.119 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:25.119 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:25.119 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.119 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:25.120 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:49:25.120 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:49:25.120 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.120 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.120 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:25.120 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.120 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.121 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.121 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:25.121 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.121 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:25.121 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.121 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.121 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:49:25.121 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.121 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.121 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:25.121 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.121 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.121 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.122 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.122 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.122 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:25.122 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.122 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.122 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:49:25.122 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.122 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:25.122 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:25.123 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.123 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.123 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - 200 null application/json; charset=utf-8 3.9246ms
2025-09-15 08:49:25.123 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - null null
2025-09-15 08:49:25.123 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:49:25.123 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:49:25.124 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.124 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:25.124 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:25.124 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.124 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:25.124 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:49:25.124 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:49:25.125 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.125 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.125 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:25.125 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.125 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.125 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:25.125 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.126 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:25.126 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.126 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.126 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:49:25.126 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.126 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.126 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:25.126 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.126 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.126 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.127 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.127 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.127 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:25.127 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.127 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.127 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:49:25.127 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.127 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:25.127 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:25.127 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.127 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.127 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - 200 null application/json; charset=utf-8 4.0706ms
2025-09-15 08:49:25.961 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - null null
2025-09-15 08:49:25.961 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:49:25.961 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:49:25.961 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.962 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:25.962 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:25.962 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.962 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:25.962 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:49:25.963 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:49:25.963 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.963 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.963 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:25.963 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.963 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.963 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.963 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:25.963 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.963 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:25.963 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.963 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.963 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:49:25.964 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.964 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.964 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:25.964 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.964 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.964 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.964 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.964 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:25.964 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.964 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.964 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:49:25.964 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.964 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:25.964 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:25.964 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.964 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.964 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - 200 null application/json; charset=utf-8 3.4843ms
2025-09-15 08:49:25.965 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - null null
2025-09-15 08:49:25.965 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:49:25.965 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:49:25.966 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.966 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:25.966 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:25.966 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.966 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:25.966 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:49:25.966 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:49:25.966 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.966 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.966 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:25.966 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.966 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.966 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.967 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:25.967 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.967 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:25.967 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.967 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.967 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:49:25.967 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.967 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.967 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:25.968 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.968 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:25.968 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.968 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:49:25.968 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.968 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:25.968 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:25.968 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.969 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:49:25.969 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:49:25.969 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:25.969 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:25.969 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:25.969 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:25.969 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - 200 null application/json; charset=utf-8 3.6074ms
2025-09-15 08:49:29.765 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - null null
2025-09-15 08:49:29.765 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:49:29.765 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-15 08:49:29.765 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:29.765 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:29.765 +03:00 [DBG] The request is a preflight request.
2025-09-15 08:49:29.766 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:29.766 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - 204 null null 0.3601ms
2025-09-15 08:49:29.767 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - application/json 81
2025-09-15 08:49:29.767 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:49:29.767 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:49:29.767 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:49:29.767 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:29.767 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:29.767 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:49:29.768 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:29.769 +03:00 [DBG] Connection id "0HNFK3DPBOS1E", Request id "0HNFK3DPBOS1E:00000017": started reading request body.
2025-09-15 08:49:29.769 +03:00 [DBG] Connection id "0HNFK3DPBOS1E", Request id "0HNFK3DPBOS1E:00000017": done reading request body.
2025-09-15 08:49:29.772 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:49:29.772 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:49:29.772 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:29.772 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.772 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:29.772 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:29.772 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:29.772 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:49:29.772 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:49:29.772 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:29.772 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:29.772 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.772 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:29.772 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.772 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:29.773 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:29.774 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:49:29.777 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:49:29.777 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 08:49:29.777 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:49:29.777 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:49:29.782 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:29.782 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.782 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:29.782 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:29.783 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:29.783 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 08:49:29.785 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 08:49:29.788 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.789 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-15 08:49:29.789 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.789 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:29.789 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:29.789 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 08:49:29.792 +03:00 [INF] AI mode changed to "Basic" for user "5fa14727-82ff-411a-87ce-bababe88ffb9" at "2025-09-15T05:49:29.7731071Z"
2025-09-15 08:49:29.793 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:49:29.793 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:29.793 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:29.793 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:29.793 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:29.793 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - 200 null application/json; charset=utf-8 26.6625ms
2025-09-15 08:49:29.832 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:49:29.832 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:49:29.832 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:49:29.832 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:49:29.832 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:29.832 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:29.832 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:49:29.833 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:29.833 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:49:29.833 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:49:29.833 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:49:29.833 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:29.833 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.833 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:29.833 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:29.833 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:29.833 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:49:29.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:49:29.834 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:29.834 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:29.834 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.834 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:29.834 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:29.834 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:29.835 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:49:29.835 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:29.835 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:29.835 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:29.835 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:29.835 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 3.2213ms
2025-09-15 08:49:30.340 +03:00 [DBG] Connection id "0HNFK3DPBOS1G" accepted.
2025-09-15 08:49:30.340 +03:00 [DBG] Connection id "0HNFK3DPBOS1G" started.
2025-09-15 08:49:30.341 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:49:30.341 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:49:30.341 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:49:30.341 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:49:30.341 +03:00 [INF] Api health check sent.
2025-09-15 08:49:30.341 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:49:30.341 +03:00 [DBG] Connection id "0HNFK3DPBOS1G" completed keep alive response.
2025-09-15 08:49:30.341 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4092ms
2025-09-15 08:49:34.344 +03:00 [DBG] Connection id "0HNFK3DPBOS1G" received FIN.
2025-09-15 08:49:34.344 +03:00 [DBG] Connection id "0HNFK3DPBOS1G" disconnecting.
2025-09-15 08:49:34.344 +03:00 [DBG] Connection id "0HNFK3DPBOS1G" stopped.
2025-09-15 08:49:34.344 +03:00 [DBG] Connection id "0HNFK3DPBOS1G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 08:49:39.612 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:49:39.612 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:49:39.612 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:49:39.612 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:39.612 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:39.612 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:49:39.613 +03:00 [INF] Api health check sent.
2025-09-15 08:49:39.613 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:49:39.613 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:39.613 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4123ms
2025-09-15 08:49:41.718 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - null null
2025-09-15 08:49:41.718 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:49:41.718 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-15 08:49:41.718 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:41.718 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:41.718 +03:00 [DBG] The request is a preflight request.
2025-09-15 08:49:41.718 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:41.719 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - 204 null null 0.2798ms
2025-09-15 08:49:41.719 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - application/json 81
2025-09-15 08:49:41.720 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:49:41.720 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:49:41.720 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:49:41.720 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:41.720 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:41.720 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:49:41.720 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:41.720 +03:00 [DBG] Connection id "0HNFK3DPBOS1E", Request id "0HNFK3DPBOS1E:0000001B": started reading request body.
2025-09-15 08:49:41.720 +03:00 [DBG] Connection id "0HNFK3DPBOS1E", Request id "0HNFK3DPBOS1E:0000001B": done reading request body.
2025-09-15 08:49:41.721 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:49:41.721 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:49:41.721 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:41.721 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.721 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:41.721 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:41.721 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:41.721 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:49:41.721 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:49:41.721 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:41.721 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:41.721 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.721 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:41.721 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.721 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:41.721 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:41.721 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:49:41.721 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:49:41.721 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 08:49:41.721 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:49:41.722 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:49:41.722 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:41.722 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.722 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:41.722 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:41.722 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:41.722 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 08:49:41.722 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 08:49:41.725 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.725 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-15 08:49:41.725 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.725 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:41.725 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:41.725 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 08:49:41.726 +03:00 [INF] AI mode changed to "Local" for user "5fa14727-82ff-411a-87ce-bababe88ffb9" at "2025-09-15T05:49:41.7217925Z"
2025-09-15 08:49:41.726 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:49:41.726 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:41.726 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:41.726 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:41.726 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:41.726 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - 200 null application/json; charset=utf-8 6.6906ms
2025-09-15 08:49:41.769 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:49:41.770 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:49:41.770 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:49:41.770 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:49:41.770 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:41.770 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:41.770 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:49:41.770 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:49:41.770 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:49:41.770 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:49:41.770 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:49:41.770 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:41.771 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.771 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:49:41.771 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:41.771 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:49:41.771 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:49:41.771 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:49:41.771 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:41.771 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:49:41.771 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.771 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:49:41.771 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:49:41.771 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:41.771 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:49:41.771 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:41.771 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:49:41.772 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:49:41.772 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:49:41.772 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 2.2326ms
2025-09-15 08:49:42.061 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:49:42.061 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:49:42.061 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:49:42.061 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:49:42.061 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:42.061 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:42.061 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:42.062 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:42.062 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:42.062 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:42.062 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.5951ms
2025-09-15 08:49:42.275 +03:00 [DBG] Connection id "0HNFK3DPBOS1H" accepted.
2025-09-15 08:49:42.275 +03:00 [DBG] Connection id "0HNFK3DPBOS1H" started.
2025-09-15 08:49:42.275 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:49:42.275 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:49:42.275 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:49:42.275 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:49:42.276 +03:00 [INF] Api health check sent.
2025-09-15 08:49:42.276 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:49:42.276 +03:00 [DBG] Connection id "0HNFK3DPBOS1H" completed keep alive response.
2025-09-15 08:49:42.276 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.8386ms
2025-09-15 08:49:43.285 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:49:43.285 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:49:43.285 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:49:43.285 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:43.285 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:43.285 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:49:43.285 +03:00 [INF] Api health check sent.
2025-09-15 08:49:43.285 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:49:43.285 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:43.285 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.466ms
2025-09-15 08:49:43.528 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:49:43.528 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:49:43.528 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:49:43.528 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:49:43.528 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:43.528 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:49:43.528 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:49:43.528 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:43.529 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:49:43.529 +03:00 [DBG] Connection id "0HNFK3DPBOS1E" completed keep alive response.
2025-09-15 08:49:43.529 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3385ms
2025-09-15 08:49:46.277 +03:00 [DBG] Connection id "0HNFK3DPBOS1H" received FIN.
2025-09-15 08:49:46.277 +03:00 [DBG] Connection id "0HNFK3DPBOS1H" disconnecting.
2025-09-15 08:49:46.278 +03:00 [DBG] Connection id "0HNFK3DPBOS1H" stopped.
2025-09-15 08:49:46.278 +03:00 [DBG] Connection id "0HNFK3DPBOS1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 08:50:49.778 +03:00 [INF] This is a test log to file!
2025-09-15 08:50:50.018 +03:00 [INF] Shared Kernal configured successfully.
2025-09-15 08:50:50.023 +03:00 [INF] API configured successfully.
2025-09-15 08:50:50.092 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 08:50:50.138 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 08:50:50.744 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-15 08:50:50.828 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:50.847 +03:00 [INF] Registered 23 endpoints in 953 milliseconds.
2025-09-15 08:50:50.851 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:50.893 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:50.984 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:50.995 +03:00 [DBG] Created DbConnection. (9ms).
2025-09-15 08:50:50.998 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:51.003 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:51.005 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-15 08:50:51.006 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:51.034 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:51.038 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:51.043 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (1ms).
2025-09-15 08:50:51.043 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:51.045 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:51.047 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-15 08:50:51.053 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:50:51.058 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-15 08:50:51.059 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-15 08:50:51.065 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 08:50:51.102 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 08:50:51.107 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:50:51.107 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:50:51.107 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:50:51.107 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 05:50:51.1069172+00:00');
SELECT changes();
2025-09-15 08:50:51.112 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 05:50:51.1069172+00:00');
SELECT changes();
2025-09-15 08:50:51.170 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:50:51.172 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:50:51.174 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 08:50:51.174 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:50:51.174 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 08:50:51.174 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 08:50:51.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 08:50:51.176 +03:00 [DBG] Committing transaction.
2025-09-15 08:50:51.177 +03:00 [DBG] Committed transaction.
2025-09-15 08:50:51.178 +03:00 [DBG] Disposing transaction.
2025-09-15 08:50:51.180 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 08:50:51.181 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 08:50:51.182 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:51.182 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:51.182 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:51.183 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:51.183 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:51.183 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:51.183 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:50:51.183 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:50:51.184 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:50:51.184 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 08:50:51.184 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 08:50:51.186 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:51.186 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:51.186 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:51.186 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 08:50:51.187 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 08:50:51.189 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:51.190 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 2ms reading results.
2025-09-15 08:50:51.193 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-15 08:50:51.194 +03:00 [DBG] Committing transaction.
2025-09-15 08:50:51.194 +03:00 [DBG] Committed transaction.
2025-09-15 08:50:51.194 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 08:50:51.194 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:50:51.194 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 08:50:51.194 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 08:50:51.197 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 08:50:51.197 +03:00 [DBG] Disposing transaction.
2025-09-15 08:50:51.198 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:51.200 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-15 08:50:51.201 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:51.201 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:51.201 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:51.201 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 08:50:51.201 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 08:50:51.220 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 08:50:51.234 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-15 08:50:51.235 +03:00 [DBG] Hosting starting
2025-09-15 08:50:51.287 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 08:50:51.289 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 08:50:51.309 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-15 08:50:51.309 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-15 08:50:51.309 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 08:50:51.309 +03:00 [INF] Hosting environment: Development
2025-09-15 08:50:51.309 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-15 08:50:51.309 +03:00 [DBG] Hosting started
2025-09-15 08:50:51.460 +03:00 [DBG] Connection id "0HNFK3FA01UCL" accepted.
2025-09-15 08:50:51.461 +03:00 [DBG] Connection id "0HNFK3FA01UCL" started.
2025-09-15 08:50:51.491 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 08:50:51.506 +03:00 [DBG] Connection id "0HNFK3FA01UCM" accepted.
2025-09-15 08:50:51.507 +03:00 [DBG] Connection id "0HNFK3FA01UCM" started.
2025-09-15 08:50:51.559 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 08:50:51.560 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:51.583 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:51.584 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:51.587 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-15 08:50:51.592 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:51.610 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:51.631 +03:00 [INF] Getting all users
2025-09-15 08:50:51.673 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-15 08:50:51.721 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-15 08:50:51.927 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-15 08:50:51.948 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:51.949 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:51.950 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:51.951 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:51.951 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:51.951 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:51.951 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:51.952 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:50:51.953 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:50:51.969 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:51.970 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 16ms reading results.
2025-09-15 08:50:51.971 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:51.971 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.006 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:52.007 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:52.008 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:52.008 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 08:50:52.009 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 08:50:52.010 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.011 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.011 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:52.013 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:52.013 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:52.014 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:52.015 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:52.011 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 522.4789ms
2025-09-15 08:50:52.015 +03:00 [INF] Getting all users
2025-09-15 08:50:52.016 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:50:52.017 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:52.017 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:52.017 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.018 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:52.018 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:52.019 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:52.019 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:52.019 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.019 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.019 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:52.020 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.020 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.020 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.020 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:50:52.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:50:52.021 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.021 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:52.021 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:52.021 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.021 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.022 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:52.022 +03:00 [DBG] Connection id "0HNFK3FA01UCM" completed keep alive response.
2025-09-15 08:50:52.022 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:52.022 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.022 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.023 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 14.7329ms
2025-09-15 08:50:52.047 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:50:52.052 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-15 08:50:52.055 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-15 08:50:52.087 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 08:50:52.095 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:52.095 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:52.095 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.095 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.095 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:52.095 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.096 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-15 08:50:52.099 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:52.103 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:52.131 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:52.155 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:52.169 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.170 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 66ms reading results.
2025-09-15 08:50:52.170 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.170 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.171 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.171 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:52.171 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:50:52.172 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:52.172 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:52.172 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.172 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.172 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:52.172 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 155.4133ms
2025-09-15 08:50:52.172 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.172 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:52.172 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:52.172 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.173 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:52.174 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:50:52.175 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:52.175 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:52.175 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.175 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.175 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:52.175 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.175 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.175 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:52.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:52.176 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:52.176 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:52.176 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.176 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:52.176 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.177 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.177 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.177 +03:00 [DBG] Connection id "0HNFK3FA01UCM" completed keep alive response.
2025-09-15 08:50:52.177 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:52.177 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.177 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.177 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 5.7959ms
2025-09-15 08:50:52.210 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 08:50:52.210 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 08:50:52.210 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:52.210 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:52.210 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:52.210 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:52.211 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:52.211 +03:00 [INF] Getting all users
2025-09-15 08:50:52.212 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:52.212 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:52.212 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.212 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.213 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:52.213 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.213 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.213 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:50:52.213 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 08:50:52.213 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.214 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:52.214 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.214 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.214 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 08:50:52.214 +03:00 [DBG] Connection id "0HNFK3FA01UCM" completed keep alive response.
2025-09-15 08:50:52.214 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:52.214 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.214 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.215 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 4.7733ms
2025-09-15 08:50:52.234 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:50:52.234 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:52.234 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:52.235 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.235 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:52.235 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:52.235 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.235 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:52.236 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:50:52.236 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:52.236 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:52.236 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.236 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.236 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:52.236 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.236 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:52.236 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:52.237 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:52.237 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:52.237 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:52.237 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.237 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:52.237 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:52.237 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.238 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:52.238 +03:00 [DBG] Connection id "0HNFK3FA01UCM" completed keep alive response.
2025-09-15 08:50:52.238 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:52.238 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:52.238 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:52.238 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 4.136ms
2025-09-15 08:50:52.295 +03:00 [DBG] Connection id "0HNFK3FA01UCN" accepted.
2025-09-15 08:50:52.295 +03:00 [DBG] Connection id "0HNFK3FA01UCN" started.
2025-09-15 08:50:52.300 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:50:52.300 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:50:52.300 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:50:52.300 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:50:52.303 +03:00 [INF] Api health check sent.
2025-09-15 08:50:52.303 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:50:52.303 +03:00 [DBG] Connection id "0HNFK3FA01UCN" completed keep alive response.
2025-09-15 08:50:52.303 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 3.8211ms
2025-09-15 08:50:56.313 +03:00 [DBG] Connection id "0HNFK3FA01UCN" received FIN.
2025-09-15 08:50:56.313 +03:00 [DBG] Connection id "0HNFK3FA01UCN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 08:50:56.313 +03:00 [DBG] Connection id "0HNFK3FA01UCN" disconnecting.
2025-09-15 08:50:56.314 +03:00 [DBG] Connection id "0HNFK3FA01UCN" stopped.
2025-09-15 08:50:56.314 +03:00 [DBG] Connection id "0HNFK3FA01UCO" accepted.
2025-09-15 08:50:56.314 +03:00 [DBG] Connection id "0HNFK3FA01UCO" started.
2025-09-15 08:50:56.315 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:50:56.315 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:50:56.315 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:50:56.315 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:50:56.315 +03:00 [INF] Api health check sent.
2025-09-15 08:50:56.315 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:50:56.316 +03:00 [DBG] Connection id "0HNFK3FA01UCO" completed keep alive response.
2025-09-15 08:50:56.316 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.9378ms
2025-09-15 08:50:56.318 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:50:56.318 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:56.318 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:56.319 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:56.319 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:56.319 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:56.319 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:56.327 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:56.328 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:50:56.328 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:56.329 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:56.329 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:56.329 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:56.329 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:56.330 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:56.330 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:56.330 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:56.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:56.331 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:56.331 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:56.331 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:56.332 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:56.332 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:56.332 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:56.332 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:56.332 +03:00 [DBG] Connection id "0HNFK3FA01UCM" completed keep alive response.
2025-09-15 08:50:56.332 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:56.332 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:56.332 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:56.332 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 14.1086ms
2025-09-15 08:50:56.337 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:50:56.337 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:56.338 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:50:56.338 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:56.338 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:56.338 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:56.338 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:56.339 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:56.339 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:50:56.339 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:56.340 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:56.340 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:56.340 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:56.340 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:56.340 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:56.340 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:56.340 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:56.340 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:50:56.341 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:56.341 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:56.341 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:56.342 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 08:50:56.342 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:56.342 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:56.342 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:50:56.342 +03:00 [DBG] Connection id "0HNFK3FA01UCM" completed keep alive response.
2025-09-15 08:50:56.342 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:56.342 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:56.342 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:56.342 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 5.0631ms
2025-09-15 08:50:58.451 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - null null
2025-09-15 08:50:58.451 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:50:58.451 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:50:58.451 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.451 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:58.451 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:58.451 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.453 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - null null
2025-09-15 08:50:58.453 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:50:58.453 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:50:58.453 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:50:58.453 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:58.453 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:58.453 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:50:58.454 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:58.454 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:58.459 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-15 08:50:58.460 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-15 08:50:58.482 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 08:50:58.487 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:58.487 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:58.487 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:58.487 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:58.487 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.487 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.487 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.487 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:58.487 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.487 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.487 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.487 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.487 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:58.487 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.487 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.488 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.488 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.488 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:58.489 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.489 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:58.489 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.489 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.490 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 08:50:58.490 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:58.490 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.490 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.490 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.490 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.490 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:50:58.491 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.491 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.491 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:58.491 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.491 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.491 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.491 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.492 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.492 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:58.492 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.492 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.497 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:50:58.497 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:50:58.498 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:58.498 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:58.498 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.498 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.498 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - 200 null application/json; charset=utf-8 45.1531ms
2025-09-15 08:50:58.498 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:50:58.499 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.499 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - null null
2025-09-15 08:50:58.499 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.499 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:58.499 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.499 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.499 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.499 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.500 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.500 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:58.500 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:50:58.500 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.500 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a'
2025-09-15 08:50:58.500 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:50:58.500 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.500 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:58.500 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:58.500 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:50:58.500 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:50:58.501 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:58.501 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:50:58.502 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:50:58.502 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.502 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.502 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:58.502 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.502 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.502 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.502 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.502 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:50:58.502 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.502 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:58.502 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.503 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.503 +03:00 [INF] Fetching connection string for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:50:58.503 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.503 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.503 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:50:58.503 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.503 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:50:58.503 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.503 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 08:50:58.503 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.503 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:50:58.504 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:50:58.504 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.504 +03:00 [DBG] Fetched secret for profile "bd03b781-00bf-4e39-a761-f33855ba9d3a"
2025-09-15 08:50:58.504 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 08:50:58.504 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:58.504 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:58.504 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.504 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.504 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/bd03b781-00bf-4e39-a761-f33855ba9d3a - 200 null application/json; charset=utf-8 5.5981ms
2025-09-15 08:50:58.507 +03:00 [DBG] Fetching schema for Profile "bd03b781-00bf-4e39-a761-f33855ba9d3a", ForceRefresh=false
2025-09-15 08:50:58.509 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-15 08:50:58.565 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-15 08:50:58.570 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.570 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - null null
2025-09-15 08:50:58.571 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:50:58.571 +03:00 [DBG] Connection id "0HNFK3FA01UCM" completed keep alive response.
2025-09-15 08:50:58.571 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:50:58.571 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.571 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:58.571 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:50:58.571 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:50:58.571 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - 200 null application/json; charset=utf-8 120.6007ms
2025-09-15 08:50:58.571 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:58.571 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:58.571 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.572 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:58.573 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.573 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:58.573 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:58.573 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - 200 null application/json; charset=utf-8 2.6711ms
2025-09-15 08:50:58.574 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - null null
2025-09-15 08:50:58.574 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:50:58.574 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:50:58.574 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.574 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:58.574 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:58.574 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.575 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:58.575 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.575 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:58.575 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:58.575 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - 200 null application/json; charset=utf-8 0.9967ms
2025-09-15 08:50:58.576 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - null null
2025-09-15 08:50:58.576 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:50:58.576 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema'
2025-09-15 08:50:58.576 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.576 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:58.576 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:58.576 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.576 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:50:58.577 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 08:50:58.577 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:58.577 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:50:58.577 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/bd03b781-00bf-4e39-a761-f33855ba9d3a/schema - 200 null application/json; charset=utf-8 1.5643ms
2025-09-15 08:50:59.457 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:50:59.457 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:50:59.457 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:50:59.457 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:59.457 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:59.458 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:50:59.458 +03:00 [INF] Api health check sent.
2025-09-15 08:50:59.458 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:50:59.458 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:59.458 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.9715ms
2025-09-15 08:50:59.489 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:50:59.490 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:50:59.490 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:50:59.490 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:50:59.490 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:50:59.490 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:50:59.490 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:50:59.490 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:50:59.491 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:50:59.491 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:50:59.491 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 1.8093ms
2025-09-15 08:51:00.317 +03:00 [DBG] Connection id "0HNFK3FA01UCO" received FIN.
2025-09-15 08:51:00.317 +03:00 [DBG] Connection id "0HNFK3FA01UCO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 08:51:00.318 +03:00 [DBG] Connection id "0HNFK3FA01UCO" disconnecting.
2025-09-15 08:51:00.318 +03:00 [DBG] Connection id "0HNFK3FA01UCO" stopped.
2025-09-15 08:51:29.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:51:29.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:51:29.495 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:51:29.495 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:51:29.495 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:51:29.495 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:51:29.496 +03:00 [INF] Api health check sent.
2025-09-15 08:51:29.496 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:51:29.496 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:51:29.496 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6435ms
2025-09-15 08:51:59.498 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:51:59.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:51:59.498 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:51:59.499 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:51:59.499 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:51:59.499 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:51:59.499 +03:00 [INF] Api health check sent.
2025-09-15 08:51:59.499 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:51:59.499 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:51:59.499 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6817ms
2025-09-15 08:51:59.551 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:51:59.551 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:51:59.551 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:51:59.551 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:51:59.551 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:51:59.551 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:51:59.551 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:51:59.551 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:51:59.551 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:51:59.551 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:51:59.551 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.482ms
2025-09-15 08:52:29.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:52:29.496 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:52:29.496 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:52:29.496 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:52:29.496 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:52:29.496 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:52:29.496 +03:00 [INF] Api health check sent.
2025-09-15 08:52:29.496 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:52:29.496 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:52:29.496 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4982ms
2025-09-15 08:52:59.500 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:52:59.500 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:52:59.501 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:52:59.501 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:52:59.501 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:52:59.501 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:52:59.501 +03:00 [INF] Api health check sent.
2025-09-15 08:52:59.501 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:52:59.501 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:52:59.501 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7728ms
2025-09-15 08:52:59.556 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:52:59.556 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:52:59.556 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:52:59.556 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:52:59.556 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:52:59.557 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:52:59.557 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:52:59.557 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:52:59.557 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:52:59.557 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:52:59.557 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.6931ms
2025-09-15 08:53:09.345 +03:00 [DBG] Connection id "0HNFK3FA01UCM" disconnecting.
2025-09-15 08:53:09.345 +03:00 [DBG] Connection id "0HNFK3FA01UCM" stopped.
2025-09-15 08:53:09.345 +03:00 [DBG] Connection id "0HNFK3FA01UCM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 08:53:29.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:53:29.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:53:29.495 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:53:29.496 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:53:29.496 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:53:29.496 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:53:29.496 +03:00 [INF] Api health check sent.
2025-09-15 08:53:29.496 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:53:29.496 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:53:29.496 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6512ms
2025-09-15 08:53:59.498 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:53:59.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:53:59.498 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:53:59.499 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:53:59.499 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:53:59.499 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:53:59.499 +03:00 [INF] Api health check sent.
2025-09-15 08:53:59.499 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:53:59.499 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:53:59.499 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5889ms
2025-09-15 08:53:59.541 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:53:59.541 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:53:59.541 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:53:59.541 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:53:59.541 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:53:59.541 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:53:59.541 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:53:59.541 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:53:59.541 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:53:59.541 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:53:59.541 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.3963ms
2025-09-15 08:54:29.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:54:29.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:54:29.495 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:54:29.495 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:54:29.495 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:54:29.495 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:54:29.495 +03:00 [INF] Api health check sent.
2025-09-15 08:54:29.495 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:54:29.495 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:54:29.495 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4465ms
2025-09-15 08:54:59.498 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:54:59.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:54:59.498 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:54:59.498 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:54:59.498 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:54:59.498 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:54:59.498 +03:00 [INF] Api health check sent.
2025-09-15 08:54:59.498 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:54:59.498 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:54:59.498 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6342ms
2025-09-15 08:54:59.538 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:54:59.538 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:54:59.539 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:54:59.539 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:54:59.539 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:54:59.539 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:54:59.539 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:54:59.539 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:54:59.539 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:54:59.539 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:54:59.539 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.5359ms
2025-09-15 08:55:29.571 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:55:29.571 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:55:29.571 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:55:29.571 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:55:29.571 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:55:29.571 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:55:29.571 +03:00 [INF] Api health check sent.
2025-09-15 08:55:29.571 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:55:29.571 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:55:29.571 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4566ms
2025-09-15 08:55:59.497 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:55:59.497 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:55:59.497 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:55:59.497 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:55:59.497 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:55:59.497 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:55:59.498 +03:00 [INF] Api health check sent.
2025-09-15 08:55:59.498 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:55:59.498 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:55:59.498 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.6258ms
2025-09-15 08:55:59.557 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:55:59.557 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:55:59.557 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:55:59.557 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:55:59.557 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:55:59.557 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:55:59.557 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:55:59.557 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:55:59.557 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:55:59.557 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:55:59.557 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.7881ms
2025-09-15 08:56:29.496 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:56:29.496 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:56:29.496 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:56:29.496 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:56:29.496 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:56:29.496 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:56:29.496 +03:00 [INF] Api health check sent.
2025-09-15 08:56:29.496 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:56:29.496 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:56:29.496 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4786ms
2025-09-15 08:56:59.498 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:56:59.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:56:59.498 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:56:59.498 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:56:59.498 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:56:59.498 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:56:59.499 +03:00 [INF] Api health check sent.
2025-09-15 08:56:59.499 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:56:59.499 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:56:59.499 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5296ms
2025-09-15 08:56:59.544 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 08:56:59.544 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 08:56:59.544 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:56:59.544 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 08:56:59.544 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:56:59.544 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:56:59.544 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:56:59.544 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:56:59.544 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 08:56:59.544 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:56:59.544 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.583ms
2025-09-15 08:57:16.411 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - null null
2025-09-15 08:57:16.411 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:57:16.411 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-15 08:57:16.411 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:57:16.411 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:57:16.411 +03:00 [DBG] The request is a preflight request.
2025-09-15 08:57:16.412 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:57:16.412 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - 204 null null 0.9478ms
2025-09-15 08:57:16.413 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - application/json 81
2025-09-15 08:57:16.414 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:57:16.414 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode'
2025-09-15 08:57:16.414 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:57:16.414 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:57:16.414 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:57:16.414 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:57:16.415 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:57:16.423 +03:00 [DBG] Connection id "0HNFK3FA01UCL", Request id "0HNFK3FA01UCL:0000001D": started reading request body.
2025-09-15 08:57:16.423 +03:00 [DBG] Connection id "0HNFK3FA01UCL", Request id "0HNFK3FA01UCL:0000001D": done reading request body.
2025-09-15 08:57:16.435 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:57:16.435 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:57:16.435 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:57:16.436 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.436 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:57:16.436 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:57:16.436 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:57:16.436 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:57:16.440 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:57:16.440 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:57:16.440 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:57:16.440 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.440 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:57:16.440 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.440 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:57:16.452 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:57:16.456 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:57:16.478 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:57:16.483 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 08:57:16.485 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 08:57:16.486 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 08:57:16.535 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:57:16.535 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.536 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:57:16.536 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:57:16.537 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:57:16.537 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 08:57:16.538 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 08:57:16.578 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.578 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 39ms reading results.
2025-09-15 08:57:16.578 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.578 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:57:16.579 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:57:16.580 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 08:57:16.583 +03:00 [INF] AI mode changed to "Basic" for user "5fa14727-82ff-411a-87ce-bababe88ffb9" at "2025-09-15T05:57:16.4411829Z"
2025-09-15 08:57:16.584 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 08:57:16.584 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:57:16.584 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:57:16.584 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:57:16.584 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:57:16.584 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9/aimode - 200 null application/json; charset=utf-8 171.1309ms
2025-09-15 08:57:16.586 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 08:57:16.587 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:57:16.587 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 08:57:16.587 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:57:16.587 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:57:16.587 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:57:16.587 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:57:16.587 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 08:57:16.587 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 08:57:16.588 +03:00 [DBG] Creating DbConnection.
2025-09-15 08:57:16.588 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 08:57:16.588 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:57:16.588 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.588 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 08:57:16.588 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:57:16.588 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 08:57:16.588 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:57:16.588 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 08:57:16.588 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:57:16.589 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 08:57:16.589 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.589 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 08:57:16.589 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 08:57:16.589 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:57:16.589 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 08:57:16.589 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:57:16.589 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 08:57:16.589 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 08:57:16.589 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 08:57:16.589 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 200 null application/json; charset=utf-8 2.4952ms
2025-09-15 08:57:17.093 +03:00 [DBG] Connection id "0HNFK3FA01UCP" accepted.
2025-09-15 08:57:17.093 +03:00 [DBG] Connection id "0HNFK3FA01UCP" started.
2025-09-15 08:57:17.094 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:57:17.094 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:57:17.094 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:57:17.094 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:57:17.094 +03:00 [INF] Api health check sent.
2025-09-15 08:57:17.094 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:57:17.094 +03:00 [DBG] Connection id "0HNFK3FA01UCP" completed keep alive response.
2025-09-15 08:57:17.094 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3472ms
2025-09-15 08:57:21.095 +03:00 [DBG] Connection id "0HNFK3FA01UCP" received FIN.
2025-09-15 08:57:21.096 +03:00 [DBG] Connection id "0HNFK3FA01UCP" disconnecting.
2025-09-15 08:57:21.096 +03:00 [DBG] Connection id "0HNFK3FA01UCP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 08:57:21.097 +03:00 [DBG] Connection id "0HNFK3FA01UCP" stopped.
2025-09-15 08:57:29.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:57:29.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:57:29.495 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:57:29.495 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:57:29.495 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:57:29.495 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:57:29.495 +03:00 [INF] Api health check sent.
2025-09-15 08:57:29.495 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:57:29.495 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:57:29.495 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.5576ms
2025-09-15 08:57:59.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:57:59.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:57:59.495 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:57:59.495 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:57:59.495 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:57:59.495 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:57:59.495 +03:00 [INF] Api health check sent.
2025-09-15 08:57:59.495 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:57:59.495 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:57:59.495 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4082ms
2025-09-15 08:58:29.570 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:58:29.570 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:58:29.570 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:58:29.570 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:58:29.570 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:58:29.570 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:58:29.570 +03:00 [INF] Api health check sent.
2025-09-15 08:58:29.570 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:58:29.571 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:58:29.571 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.381ms
2025-09-15 08:58:59.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:58:59.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:58:59.495 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:58:59.495 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:58:59.495 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:58:59.495 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:58:59.495 +03:00 [INF] Api health check sent.
2025-09-15 08:58:59.495 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:58:59.495 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:58:59.495 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.3797ms
2025-09-15 08:59:29.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:59:29.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:59:29.495 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:59:29.495 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:59:29.495 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:59:29.495 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:59:29.495 +03:00 [INF] Api health check sent.
2025-09-15 08:59:29.495 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:59:29.496 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:59:29.496 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4432ms
2025-09-15 08:59:59.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 08:59:59.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 08:59:59.495 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 08:59:59.495 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 08:59:59.495 +03:00 [INF] CORS policy execution successful.
2025-09-15 08:59:59.495 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 08:59:59.495 +03:00 [INF] Api health check sent.
2025-09-15 08:59:59.495 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 08:59:59.495 +03:00 [DBG] Connection id "0HNFK3FA01UCL" completed keep alive response.
2025-09-15 08:59:59.495 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4209ms
2025-09-15 09:01:17.843 +03:00 [INF] This is a test log to file!
2025-09-15 09:01:18.037 +03:00 [INF] Shared Kernal configured successfully.
2025-09-15 09:01:18.040 +03:00 [INF] API configured successfully.
2025-09-15 09:01:18.109 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 09:01:18.157 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 09:01:18.635 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-15 09:01:18.701 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:01:18.722 +03:00 [INF] Registered 23 endpoints in 777 milliseconds.
2025-09-15 09:01:18.727 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:01:18.765 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:01:18.846 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:01:18.856 +03:00 [DBG] Created DbConnection. (7ms).
2025-09-15 09:01:18.858 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:18.861 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:01:18.863 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-15 09:01:18.864 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:18.870 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:18.872 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:18.877 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:18.878 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:18.890 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:18.895 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:18.901 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-09-15 09:01:18.902 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2025-09-15 09:01:18.907 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-15 09:01:18.940 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-09-15 09:01:18.942 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:18.945 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-15 09:01:18.945 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:18.945 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:18.946 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-15 09:01:18.948 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 09:01:18.949 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:01:18.949 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:01:18.949 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 09:01:18.955 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 09:01:18.955 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:18.955 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:18.956 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:18.956 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-15 09:01:18.967 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-09-15 09:01:18.969 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 09:01:18.969 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:01:18.969 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:01:18.969 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 06:01:18.9687815+00:00');
SELECT changes();
2025-09-15 09:01:18.971 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 06:01:18.9687815+00:00');
SELECT changes();
2025-09-15 09:01:19.029 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 09:01:19.034 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 09:01:19.035 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.035 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.035 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.035 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 09:01:19.036 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 09:01:19.039 +03:00 [DBG] Committing transaction.
2025-09-15 09:01:19.044 +03:00 [DBG] Committed transaction.
2025-09-15 09:01:19.045 +03:00 [DBG] Disposing transaction.
2025-09-15 09:01:19.047 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 09:01:19.047 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 09:01:19.049 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:01:19.050 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:01:19.050 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.050 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.052 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.052 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.052 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 09:01:19.052 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:01:19.052 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:01:19.052 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 09:01:19.053 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 09:01:19.054 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:01:19.054 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:01:19.054 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:01:19.055 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 09:01:19.055 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 09:01:19.057 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.058 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 09:01:19.063 +03:00 [INF] Applying migration '20250825154106_init'.
2025-09-15 09:01:19.084 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.084 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.084 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.084 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-15 09:01:19.084 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "CacheFile" TEXT NULL,
    "EmbeddingStatus" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL
);
2025-09-15 09:01:19.084 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.085 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.085 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.085 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-15 09:01:19.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Queries" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Queries" PRIMARY KEY,
    "UserQuery" TEXT NOT NULL,
    "SqlQuery" TEXT NOT NULL,
    "ResultJson" TEXT NOT NULL,
    "TimestampUtc" TEXT NOT NULL,
    "ProfileId" TEXT NOT NULL,
    CONSTRAINT "FK_Queries_Profiles_ProfileId" FOREIGN KEY ("ProfileId") REFERENCES "Profiles" ("Id") ON DELETE CASCADE
);
2025-09-15 09:01:19.085 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.085 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.085 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.085 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-15 09:01:19.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Queries_ProfileId" ON "Queries" ("ProfileId");
2025-09-15 09:01:19.085 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.085 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.085 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.085 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-15 09:01:19.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250825154106_init', '9.0.8');
2025-09-15 09:01:19.086 +03:00 [INF] Applying migration '20250826210914_updatedsqlite'.
2025-09-15 09:01:19.092 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.093 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.093 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.093 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-15 09:01:19.093 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL
);
2025-09-15 09:01:19.093 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.093 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.093 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.093 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-15 09:01:19.093 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef")
SELECT "Id", "CacheFile", "CreatedUtc", "Name", "Provider", "SecretRef"
FROM "Profiles";
2025-09-15 09:01:19.093 +03:00 [DBG] Committing transaction.
2025-09-15 09:01:19.097 +03:00 [DBG] Committed transaction.
2025-09-15 09:01:19.097 +03:00 [DBG] Disposing transaction.
2025-09-15 09:01:19.098 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.098 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.098 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.098 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-15 09:01:19.099 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-15 09:01:19.099 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 09:01:19.099 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 09:01:19.099 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.099 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.099 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.099 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-15 09:01:19.099 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-15 09:01:19.099 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.099 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.099 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.100 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-15 09:01:19.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-15 09:01:19.101 +03:00 [DBG] Committing transaction.
2025-09-15 09:01:19.104 +03:00 [DBG] Committed transaction.
2025-09-15 09:01:19.104 +03:00 [DBG] Disposing transaction.
2025-09-15 09:01:19.104 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.104 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.104 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.104 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-15 09:01:19.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-15 09:01:19.104 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.104 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.104 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.104 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-15 09:01:19.107 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250826210914_updatedsqlite', '9.0.8');
2025-09-15 09:01:19.107 +03:00 [INF] Applying migration '20250831091732_setdatabasenameinprofile'.
2025-09-15 09:01:19.112 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 09:01:19.112 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 09:01:19.112 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.112 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.112 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.112 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-15 09:01:19.113 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "DatabaseName" TEXT NOT NULL DEFAULT '';
2025-09-15 09:01:19.113 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.113 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.113 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.113 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-15 09:01:19.113 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250831091732_setdatabasenameinprofile', '9.0.8');
2025-09-15 09:01:19.113 +03:00 [INF] Applying migration '20250904150142_addeduser'.
2025-09-15 09:01:19.120 +03:00 [WRN] The migration operation 'PRAGMA foreign_keys = 0;
' from migration 'addeduser' cannot be executed in a transaction. If the app is terminated or an unrecoverable error occurs while this operation is being executed then the migration will be left in a partially applied state and would need to be reverted manually before it can be applied again. Create a separate migration that contains just this operation.
2025-09-15 09:01:19.120 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.120 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.120 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-15 09:01:19.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId" TEXT NULL;
2025-09-15 09:01:19.120 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.120 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.120 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-15 09:01:19.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Profiles" ADD "UserInfoId1" TEXT NULL;
2025-09-15 09:01:19.120 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.120 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.120 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-15 09:01:19.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserInfos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserInfos" PRIMARY KEY,
    "ApiKey" TEXT NOT NULL,
    "Mode" INTEGER NOT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "LastUpdatedUtc" TEXT NOT NULL
);
2025-09-15 09:01:19.120 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.120 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.120 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-15 09:01:19.121 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-15 09:01:19.121 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.121 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.121 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.121 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-15 09:01:19.121 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-15 09:01:19.121 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.121 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.121 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.121 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-15 09:01:19.121 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Profiles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Profiles" PRIMARY KEY,
    "CacheFile" TEXT NULL,
    "CreatedUtc" TEXT NOT NULL,
    "DatabaseName" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Provider" INTEGER NOT NULL,
    "SecretRef" TEXT NOT NULL,
    "UserInfoId" TEXT NULL,
    "UserInfoId1" TEXT NULL,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId" FOREIGN KEY ("UserInfoId") REFERENCES "UserInfos" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Profiles_UserInfos_UserInfoId1" FOREIGN KEY ("UserInfoId1") REFERENCES "UserInfos" ("Id")
);
2025-09-15 09:01:19.121 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.121 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.121 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.121 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-15 09:01:19.121 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
SELECT "Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1"
FROM "Profiles";
2025-09-15 09:01:19.121 +03:00 [DBG] Committing transaction.
2025-09-15 09:01:19.124 +03:00 [DBG] Committed transaction.
2025-09-15 09:01:19.124 +03:00 [DBG] Disposing transaction.
2025-09-15 09:01:19.125 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.125 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.125 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-15 09:01:19.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2025-09-15 09:01:19.125 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 09:01:19.125 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 09:01:19.125 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.125 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.125 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-15 09:01:19.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Profiles";
2025-09-15 09:01:19.125 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.125 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.125 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-15 09:01:19.126 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Profiles" RENAME TO "Profiles";
2025-09-15 09:01:19.126 +03:00 [DBG] Committing transaction.
2025-09-15 09:01:19.129 +03:00 [DBG] Committed transaction.
2025-09-15 09:01:19.129 +03:00 [DBG] Disposing transaction.
2025-09-15 09:01:19.129 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.129 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.129 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.129 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-15 09:01:19.129 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2025-09-15 09:01:19.129 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 09:01:19.130 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 09:01:19.130 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.130 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.130 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.130 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-15 09:01:19.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId" ON "Profiles" ("UserInfoId");
2025-09-15 09:01:19.130 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.130 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.130 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.130 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-15 09:01:19.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Profiles_UserInfoId1" ON "Profiles" ("UserInfoId1");
2025-09-15 09:01:19.130 +03:00 [DBG] Committing transaction.
2025-09-15 09:01:19.133 +03:00 [DBG] Committed transaction.
2025-09-15 09:01:19.133 +03:00 [DBG] Disposing transaction.
2025-09-15 09:01:19.133 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:01:19.133 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.133 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:01:19.133 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-15 09:01:19.136 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250904150142_addeduser', '9.0.8');
2025-09-15 09:01:19.137 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 09:01:19.137 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:01:19.137 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:01:19.137 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 09:01:19.140 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 09:01:19.140 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.141 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.141 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:01:19.141 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.141 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.141 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 09:01:19.141 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 09:01:19.161 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 09:01:19.174 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-15 09:01:19.175 +03:00 [DBG] Hosting starting
2025-09-15 09:01:19.227 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 09:01:19.228 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 09:01:19.238 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-15 09:01:19.238 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-15 09:01:19.238 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 09:01:19.239 +03:00 [INF] Hosting environment: Development
2025-09-15 09:01:19.239 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-15 09:01:19.239 +03:00 [DBG] Hosting started
2025-09-15 09:01:19.315 +03:00 [DBG] Connection id "0HNFK3L53NQIM" accepted.
2025-09-15 09:01:19.316 +03:00 [DBG] Connection id "0HNFK3L53NQIM" started.
2025-09-15 09:01:19.341 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 09:01:19.354 +03:00 [DBG] Connection id "0HNFK3L53NQIN" accepted.
2025-09-15 09:01:19.355 +03:00 [DBG] Connection id "0HNFK3L53NQIN" started.
2025-09-15 09:01:19.360 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 09:01:19.361 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.377 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:01:19.378 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:01:19.379 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-15 09:01:19.381 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.395 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:01:19.414 +03:00 [INF] Getting all users
2025-09-15 09:01:19.442 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .AsNoTracking()'
2025-09-15 09:01:19.485 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-15 09:01:19.663 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
            3 -> 5
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
        FROM UserInfos AS u
        LEFT JOIN Profiles AS p ON u.Id == p.UserInfoId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            UserInfo entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserInfo instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserInfo);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                            {
                                return 
                                {
                                    UserInfo instance;
                                    instance = new UserInfo();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                    instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(UserInfo)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (UserInfo)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                trackingQuery: False, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    Profile instance2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(Profile);
                    dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) != null ? 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                        instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                        instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{11}, namelessParameter{12}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{11}, 
                    value: namelessParameter{12}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return IsTrue(resultCoordinator.ResultReady)
         ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-15 09:01:19.687 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:01:19.687 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:01:19.688 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.689 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:01:19.690 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:01:19.690 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:01:19.690 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 09:01:19.692 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 09:01:19.696 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.698 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-15 09:01:19.700 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.700 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.728 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.729 +03:00 [DBG] Connection id "0HNFK3L53NQIM" completed keep alive response.
2025-09-15 09:01:19.729 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:01:19.730 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 09:01:19.731 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 09:01:19.731 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.731 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.732 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.732 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:01:19.732 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:01:19.733 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.733 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:01:19.734 +03:00 [INF] Getting all users
2025-09-15 09:01:19.732 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 393.0376ms
2025-09-15 09:01:19.736 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:01:19.736 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:01:19.736 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.736 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.736 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:01:19.736 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:01:19.736 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:01:19.736 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 09:01:19.736 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 09:01:19.736 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.736 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:01:19.737 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.737 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.737 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.737 +03:00 [DBG] Connection id "0HNFK3L53NQIN" completed keep alive response.
2025-09-15 09:01:19.737 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:01:19.737 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.738 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.738 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 7.8576ms
2025-09-15 09:01:19.760 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo - null null
2025-09-15 09:01:19.760 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 09:01:19.760 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.761 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:01:19.761 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:01:19.761 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.762 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:01:19.762 +03:00 [INF] Getting all users
2025-09-15 09:01:19.763 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:01:19.763 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:01:19.763 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.763 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.763 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:01:19.763 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:01:19.763 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:01:19.763 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 09:01:19.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM "UserInfos" AS "u"
LEFT JOIN "Profiles" AS "p" ON "u"."Id" = "p"."UserInfoId"
ORDER BY "u"."Id"
2025-09-15 09:01:19.764 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.764 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:01:19.764 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:01:19.764 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.764 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo'
2025-09-15 09:01:19.764 +03:00 [DBG] Connection id "0HNFK3L53NQIN" completed keep alive response.
2025-09-15 09:01:19.764 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:01:19.764 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:01:19.764 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:01:19.764 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 4.7263ms
2025-09-15 09:03:31.299 +03:00 [DBG] Connection id "0HNFK3L53NQIM" disconnecting.
2025-09-15 09:03:31.299 +03:00 [DBG] Connection id "0HNFK3L53NQIN" disconnecting.
2025-09-15 09:03:31.300 +03:00 [DBG] Connection id "0HNFK3L53NQIN" stopped.
2025-09-15 09:03:31.300 +03:00 [DBG] Connection id "0HNFK3L53NQIM" stopped.
2025-09-15 09:03:31.301 +03:00 [DBG] Connection id "0HNFK3L53NQIN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 09:03:31.301 +03:00 [DBG] Connection id "0HNFK3L53NQIM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 09:04:45.975 +03:00 [DBG] Connection id "0HNFK3L53NQIO" accepted.
2025-09-15 09:04:45.975 +03:00 [DBG] Connection id "0HNFK3L53NQIO" started.
2025-09-15 09:04:45.975 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - null null
2025-09-15 09:04:45.976 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 09:04:45.976 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9'
2025-09-15 09:04:45.976 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:04:45.977 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:04:45.977 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:04:45.977 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:04:46.016 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:04:46.072 +03:00 [INF] Getting user by ID: "5fa14727-82ff-411a-87ce-bababe88ffb9"
2025-09-15 09:04:46.076 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-15 09:04:46.079 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-15 09:04:46.149 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 09:04:46.154 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:04:46.154 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:04:46.154 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:46.154 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.154 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:04:46.154 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:46.155 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:46.182 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:04:46.237 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:04:46.238 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.238 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:04:46.238 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.238 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:46.264 +03:00 [WRN] User with ID "5fa14727-82ff-411a-87ce-bababe88ffb9" not found
2025-09-15 09:04:46.345 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:04:46.397 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: User with ID 5fa14727-82ff-411a-87ce-bababe88ffb9 not found
   at NaturalToQuery.Application.Services.UserInfoService.GetByIdAsync(Guid id, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToQuery.Application\Services\UserInfoService.cs:line 121
   at NaturalToQuery.Api.Controllers.UserInfo.GetUserById.HandleAsync(GetUserByIdRequest req, CancellationToken ct) in C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql\Controllers\UserInfo\GetUserById.cs:line 25
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-15 09:04:46.689 +03:00 [ERR] Unhandled exception occurred.
2025-09-15 09:04:46.762 +03:00 [DBG] Connection id "0HNFK3L53NQIO" completed keep alive response.
2025-09-15 09:04:46.762 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:04:46.762 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:46.762 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:46.762 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/5fa14727-82ff-411a-87ce-bababe88ffb9 - 500 null application/json; charset=utf-8 786.849ms
2025-09-15 09:04:46.794 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo - null null
2025-09-15 09:04:46.794 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 09:04:46.794 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-15 09:04:46.794 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:04:46.794 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:04:46.795 +03:00 [DBG] The request is a preflight request.
2025-09-15 09:04:46.795 +03:00 [DBG] Connection id "0HNFK3L53NQIO" completed keep alive response.
2025-09-15 09:04:46.795 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo - 204 null null 1.3427ms
2025-09-15 09:04:46.809 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/userinfo - application/json 28
2025-09-15 09:04:46.809 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo'
2025-09-15 09:04:46.809 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/userinfo'
2025-09-15 09:04:46.809 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:04:46.809 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:04:46.809 +03:00 [INF] Executing endpoint 'HTTP: POST api/userinfo'
2025-09-15 09:04:46.810 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:04:46.821 +03:00 [DBG] Connection id "0HNFK3L53NQIO", Request id "0HNFK3L53NQIO:00000003": started reading request body.
2025-09-15 09:04:46.821 +03:00 [DBG] Connection id "0HNFK3L53NQIO", Request id "0HNFK3L53NQIO:00000003": done reading request body.
2025-09-15 09:04:46.836 +03:00 [INF] Creating new user with API key: 
2025-09-15 09:04:46.837 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()'
2025-09-15 09:04:46.843 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
        SELECT u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
        FROM UserInfos AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserInfo entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserInfo instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserInfo);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserInfo)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                        {
                            return 
                            {
                                UserInfo instance;
                                instance = new UserInfo();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserInfo)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-15 09:04:46.845 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:04:46.845 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:04:46.845 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:46.845 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.845 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:04:46.846 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:46.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:46.846 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-15 09:04:46.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
FROM "UserInfos" AS "u"
2025-09-15 09:04:46.846 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.846 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:04:46.846 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.846 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:46.872 +03:00 [DBG] 'ContextDB' generated a value for the property 'UserInfo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:04:46.910 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:04:46.913 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 09:04:46.924 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 09:04:46.927 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 09:04:46.928 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 09:04:46.928 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 09:04:46.970 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:46.970 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.971 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:04:46.971 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:46.972 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-15 09:04:46.972 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-15 09:04:46.985 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserInfos" ("Id", "ApiKey", "CreatedUtc", "LastUpdatedUtc", "Mode")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-15 09:04:46.987 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.987 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 09:04:46.987 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:46.987 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:46.992 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:04:46.993 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 09:04:46.993 +03:00 [INF] User created successfully with ID: "f03cbf45-2fa6-49d3-9536-2e54e7415ff3"
2025-09-15 09:04:47.003 +03:00 [INF] Executed endpoint 'HTTP: POST api/userinfo'
2025-09-15 09:04:47.003 +03:00 [DBG] Connection id "0HNFK3L53NQIO" completed keep alive response.
2025-09-15 09:04:47.003 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:04:47.003 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:47.003 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:47.003 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/userinfo - 200 null application/json; charset=utf-8 194.6156ms
2025-09-15 09:04:47.006 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - null null
2025-09-15 09:04:47.006 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:04:47.006 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:04:47.006 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:04:47.006 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:04:47.006 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:04:47.006 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:04:47.007 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:04:47.007 +03:00 [INF] Getting user by ID: "f03cbf45-2fa6-49d3-9536-2e54e7415ff3"
2025-09-15 09:04:47.008 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:04:47.008 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:04:47.009 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:47.009 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:47.009 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:04:47.009 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:47.010 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:47.010 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:04:47.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:04:47.021 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:04:47.025 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:47.025 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 14ms reading results.
2025-09-15 09:04:47.025 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:47.025 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:47.029 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:04:47.029 +03:00 [DBG] Connection id "0HNFK3L53NQIO" completed keep alive response.
2025-09-15 09:04:47.029 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:04:47.029 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:47.029 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:47.029 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - 200 null application/json; charset=utf-8 23.2641ms
2025-09-15 09:04:50.568 +03:00 [INF] This is a test log to file!
2025-09-15 09:04:50.777 +03:00 [INF] Shared Kernal configured successfully.
2025-09-15 09:04:50.782 +03:00 [INF] API configured successfully.
2025-09-15 09:04:50.860 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 09:04:50.913 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 09:04:51.334 +03:00 [WRN] The foreign key property 'Profile.UserInfoId1' was created in shadow state because a conflicting property with the simple name 'UserInfoId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-15 09:04:51.409 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:04:51.437 +03:00 [INF] Registered 23 endpoints in 748 milliseconds.
2025-09-15 09:04:51.443 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:04:51.498 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:04:51.576 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:04:51.587 +03:00 [DBG] Created DbConnection. (8ms).
2025-09-15 09:04:51.589 +03:00 [DBG] Migrating using database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:51.594 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:04:51.595 +03:00 [DBG] Created DbConnection. (2ms).
2025-09-15 09:04:51.598 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:51.612 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:51.614 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:51.619 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:51.619 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:51.623 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:51.624 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-15 09:04:51.629 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 09:04:51.635 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-09-15 09:04:51.636 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-09-15 09:04:51.642 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 09:04:51.667 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-09-15 09:04:51.668 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 09:04:51.668 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:04:51.669 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:04:51.669 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 06:04:51.6682762+00:00');
SELECT changes();
2025-09-15 09:04:51.684 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-09-15 06:04:51.6682762+00:00');
SELECT changes();
2025-09-15 09:04:51.734 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 09:04:51.737 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 09:04:51.738 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-15 09:04:51.738 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:04:51.739 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-15 09:04:51.739 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 09:04:51.739 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-09-15 09:04:51.740 +03:00 [DBG] Committing transaction.
2025-09-15 09:04:51.743 +03:00 [DBG] Committed transaction.
2025-09-15 09:04:51.744 +03:00 [DBG] Disposing transaction.
2025-09-15 09:04:51.745 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-15 09:04:51.745 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-09-15 09:04:51.747 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:04:51.747 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:04:51.747 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:51.748 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:51.748 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:51.748 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:51.749 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 09:04:51.749 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:04:51.749 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:04:51.749 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 09:04:51.749 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-09-15 09:04:51.751 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:04:51.751 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:51.751 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:04:51.751 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 09:04:51.752 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-15 09:04:51.755 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:51.756 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 3ms reading results.
2025-09-15 09:04:51.760 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-15 09:04:51.760 +03:00 [DBG] Committing transaction.
2025-09-15 09:04:51.761 +03:00 [DBG] Committed transaction.
2025-09-15 09:04:51.761 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-15 09:04:51.761 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:04:51.761 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-15 09:04:51.761 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 09:04:51.773 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-09-15 09:04:51.773 +03:00 [DBG] Disposing transaction.
2025-09-15 09:04:51.774 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:04:51.776 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (2ms).
2025-09-15 09:04:51.776 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:04:51.776 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:04:51.776 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:04:51.776 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 09:04:51.776 +03:00 [INF] Infrastructure configured successfully.
2025-09-15 09:04:51.800 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 09:04:51.818 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-09-15 09:04:51.819 +03:00 [DBG] Hosting starting
2025-09-15 09:04:51.883 +03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 09:04:51.885 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 09:04:51.909 +03:00 [INF] Now listening on: http://localhost:5000
2025-09-15 09:04:51.910 +03:00 [DBG] Loaded hosting startup assembly NaturalToQuery.Api
2025-09-15 09:04:51.910 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 09:04:51.910 +03:00 [INF] Hosting environment: Development
2025-09-15 09:04:51.911 +03:00 [INF] Content root path: C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish
2025-09-15 09:04:51.911 +03:00 [DBG] Hosting started
2025-09-15 09:04:54.301 +03:00 [DBG] Connection id "0HNFK3N560JQP" accepted.
2025-09-15 09:04:54.302 +03:00 [DBG] Connection id "0HNFK3N560JQP" started.
2025-09-15 09:04:54.342 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 09:04:54.379 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 09:04:54.379 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 09:04:54.400 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-15 09:04:54.402 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 09:04:54.436 +03:00 [INF] Api health check sent.
2025-09-15 09:04:54.437 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 09:04:54.438 +03:00 [DBG] Connection id "0HNFK3N560JQP" completed keep alive response.
2025-09-15 09:04:54.439 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 98.2775ms
2025-09-15 09:04:55.515 +03:00 [DBG] Connection id "0HNFK3N560JQQ" accepted.
2025-09-15 09:04:55.515 +03:00 [DBG] Connection id "0HNFK3N560JQQ" started.
2025-09-15 09:04:55.516 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 09:04:55.517 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 09:04:55.518 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 09:04:55.519 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:04:55.520 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:04:55.520 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 09:04:55.521 +03:00 [INF] Api health check sent.
2025-09-15 09:04:55.521 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 09:04:55.521 +03:00 [DBG] Connection id "0HNFK3N560JQQ" completed keep alive response.
2025-09-15 09:04:55.522 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 5.7046ms
2025-09-15 09:04:58.452 +03:00 [DBG] Connection id "0HNFK3N560JQP" received FIN.
2025-09-15 09:04:58.452 +03:00 [DBG] Connection id "0HNFK3N560JQP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 09:04:58.453 +03:00 [DBG] Connection id "0HNFK3N560JQP" disconnecting.
2025-09-15 09:04:58.455 +03:00 [DBG] Connection id "0HNFK3N560JQP" stopped.
2025-09-15 09:05:18.829 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - null null
2025-09-15 09:05:18.829 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:05:18.830 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:05:18.830 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:18.831 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:18.831 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:18.832 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:18.852 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:18.878 +03:00 [INF] Getting user by ID: "f03cbf45-2fa6-49d3-9536-2e54e7415ff3"
2025-09-15 09:05:18.925 +03:00 [DBG] Compiling query expression: 
'DbSet<UserInfo>()
    .Include(p => p.Profiles)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-15 09:05:18.964 +03:00 [DBG] Including navigation: 'UserInfo.Profiles'.
2025-09-15 09:05:19.144 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserInfo>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserInfo>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: UserInfo.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserInfo.ApiKey (string) Required MaxLength(200), 1], [Property: UserInfo.CreatedUtc (DateTime) Required, 2], [Property: UserInfo.LastUpdatedUtc (DateTime) Required, 3], [Property: UserInfo.Mode (AIMode) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Profile.CacheFile (string) MaxLength(500), 6], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 7], [Property: Profile.DatabaseName (string) Required, 8], [Property: Profile.Name (string) Required MaxLength(200), 9], [Property: Profile.Provider (ProviderType) Required, 10], [Property: Profile.SecretRef (string) Required, 11], [Property: Profile.UserInfoId (Guid?) FK Index, 12], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 13] }
                3 -> 5
            SELECT u0.Id, u0.ApiKey, u0.CreatedUtc, u0.LastUpdatedUtc, u0.Mode, p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
            FROM 
            (
                SELECT TOP(1) u.Id, u.ApiKey, u.CreatedUtc, u.LastUpdatedUtc, u.Mode
                FROM UserInfos AS u
                WHERE u.Id == @__id_0
            ) AS u0
            LEFT JOIN Profiles AS p ON u0.Id == p.UserInfoId
            ORDER BY u0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                UserInfo entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    UserInfo instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(UserInfo);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserInfo.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (UserInfo)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]: 
                                {
                                    return 
                                    {
                                        UserInfo instance;
                                        instance = new UserInfo();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApiKey>k__BackingField = dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetDateTime(2);
                                        instance.<LastUpdatedUtc>k__BackingField = dataReader.GetDateTime(3);
                                        instance.<Mode>k__BackingField = Invoke(((EnumToNumberConverter<AIMode, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserInfo.Mode (AIMode) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindProperty("Mode")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(4));
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserInfo | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserInfo)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<UserInfo, UserInfo>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (UserInfo)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: UserInfo.Profiles (List<Profile>) Collection ToDependent Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<UserInfo, Profile>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(5) ? default(Guid?) : (Guid?)dataReader.GetGuid(5) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Profile entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Profile instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Profile);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetGuid(5) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Profile)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                    {
                                        shadowSnapshot2 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13));
                                        return 
                                        {
                                            Profile instance;
                                            instance = new Profile();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(5) ? default(Guid) : dataReader.GetGuid(5);
                                            instance.<CacheFile>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                            instance.<CreatedUtc>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset) : dataReader.GetFieldValue<DateTimeOffset>(7);
                                            instance.<DatabaseName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                            instance.<Name>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                            instance.<Provider>k__BackingField = dataReader.IsDBNull(10) ? default(ProviderType) : Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(10));
                                            instance.<SecretRef>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid?) : (Guid?)dataReader.GetGuid(12);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Profile)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: default(INavigationBase), 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    return [LIFTABLE Constant: ClrICollectionAccessor<UserInfo, List<Profile>, Profile> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.UserInfos.UserInfo").FindNavigation("Profiles").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (UserInfo)(resultContext.Values[0]) : default(UserInfo);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 09:05:19.165 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:19.165 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:19.167 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:19.167 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:19.168 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:19.168 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:19.168 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:19.170 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:19.175 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:19.206 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:19.228 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:19.228 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 52ms reading results.
2025-09-15 09:05:19.229 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:19.229 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:19.248 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:19.248 +03:00 [DBG] Connection id "0HNFK3N560JQQ" completed keep alive response.
2025-09-15 09:05:19.248 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:19.250 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:19.251 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:19.251 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - 200 null application/json; charset=utf-8 421.8798ms
2025-09-15 09:05:19.289 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/providers - null null
2025-09-15 09:05:19.289 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/providers'
2025-09-15 09:05:19.289 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/providers'
2025-09-15 09:05:19.290 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:19.290 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:19.290 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/providers'
2025-09-15 09:05:19.293 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:19.303 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/providers'
2025-09-15 09:05:19.303 +03:00 [DBG] Connection id "0HNFK3N560JQQ" completed keep alive response.
2025-09-15 09:05:19.304 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:19.304 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/providers - 200 null application/json; charset=utf-8 14.5253ms
2025-09-15 09:05:19.601 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 09:05:19.602 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 09:05:19.602 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 09:05:19.602 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 09:05:19.602 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:19.602 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:19.602 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:19.602 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:19.604 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:19.604 +03:00 [DBG] Connection id "0HNFK3N560JQQ" completed keep alive response.
2025-09-15 09:05:19.604 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 2.776ms
2025-09-15 09:05:21.696 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - null null
2025-09-15 09:05:21.697 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/servers/SqlServer'
2025-09-15 09:05:21.697 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/servers/{type}' with route pattern 'api/setup/servers/{type}' is valid for the request path '/api/setup/servers/SqlServer'
2025-09-15 09:05:21.697 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:21.697 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:21.698 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:21.698 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:21.699 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:21.709 +03:00 [INF] Fetching servers (forceRefresh=true)
2025-09-15 09:05:21.710 +03:00 [DBG] Looking up servers from registry key SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL
2025-09-15 09:05:21.748 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.018 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.021 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.117 +03:00 [INF] Discovered server DESKTOP-QCK8UI5\SQLEXPRESS with 4 running DBs
2025-09-15 09:05:22.186 +03:00 [DBG] Saved cache file C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 09:05:22.186 +03:00 [INF] Cached 1 servers to C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 09:05:22.192 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:22.193 +03:00 [DBG] Connection id "0HNFK3N560JQR" accepted.
2025-09-15 09:05:22.193 +03:00 [DBG] Connection id "0HNFK3N560JQR" started.
2025-09-15 09:05:22.193 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - null null
2025-09-15 09:05:22.193 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/servers/SqlServer'
2025-09-15 09:05:22.193 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/servers/{type}' with route pattern 'api/setup/servers/{type}' is valid for the request path '/api/setup/servers/SqlServer'
2025-09-15 09:05:22.193 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:22.193 +03:00 [DBG] Connection id "0HNFK3N560JQQ" completed keep alive response.
2025-09-15 09:05:22.194 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:22.194 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:22.194 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:22.194 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:22.194 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - 200 null application/json; charset=utf-8 497.4654ms
2025-09-15 09:05:22.194 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:22.195 +03:00 [INF] Fetching servers (forceRefresh=true)
2025-09-15 09:05:22.195 +03:00 [DBG] Looking up servers from registry key SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL
2025-09-15 09:05:22.196 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.196 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.196 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.198 +03:00 [INF] Discovered server DESKTOP-QCK8UI5\SQLEXPRESS with 4 running DBs
2025-09-15 09:05:22.200 +03:00 [DBG] Saved cache file C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 09:05:22.200 +03:00 [INF] Cached 1 servers to C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 09:05:22.201 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:22.202 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:22.202 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:22.202 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - 200 null application/json; charset=utf-8 8.7167ms
2025-09-15 09:05:22.518 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - null null
2025-09-15 09:05:22.518 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/servers/SqlServer'
2025-09-15 09:05:22.518 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/servers/{type}' with route pattern 'api/setup/servers/{type}' is valid for the request path '/api/setup/servers/SqlServer'
2025-09-15 09:05:22.518 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:22.518 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:22.518 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:22.518 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:22.518 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:22.519 +03:00 [INF] Fetching servers (forceRefresh=true)
2025-09-15 09:05:22.519 +03:00 [DBG] Looking up servers from registry key SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL
2025-09-15 09:05:22.519 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.519 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.519 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.520 +03:00 [INF] Discovered server DESKTOP-QCK8UI5\SQLEXPRESS with 4 running DBs
2025-09-15 09:05:22.523 +03:00 [DBG] Saved cache file C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 09:05:22.523 +03:00 [INF] Cached 1 servers to C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer\SqlServer.json
2025-09-15 09:05:22.523 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/servers/{type}'
2025-09-15 09:05:22.523 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:22.523 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:22.523 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/servers/SqlServer - 200 null application/json; charset=utf-8 5.6381ms
2025-09-15 09:05:22.709 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS - null null
2025-09-15 09:05:22.709 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-15 09:05:22.709 +03:00 [DBG] Endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}' with route pattern 'api/setup/databases/{type}/{serverName}' is valid for the request path '/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS'
2025-09-15 09:05:22.709 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-15 09:05:22.709 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:22.709 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:22.709 +03:00 [INF] Executing endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-15 09:05:22.710 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:22.714 +03:00 [INF] Fetching databases for server DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-15 09:05:22.720 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=master)
2025-09-15 09:05:22.720 +03:00 [DBG] Connected to server DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-15 09:05:23.534 +03:00 [INF] Found 8 databases on DESKTOP-QCK8UI5\SQLEXPRESS
2025-09-15 09:05:23.538 +03:00 [INF] Executed endpoint 'HTTP: GET api/setup/databases/{type}/{serverName}'
2025-09-15 09:05:23.538 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:23.538 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:23.538 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/setup/databases/SqlServer/DESKTOP-QCK8UI5\SQLEXPRESS - 200 null application/json; charset=utf-8 829.4905ms
2025-09-15 09:05:24.889 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/setup/profile - null null
2025-09-15 09:05:24.889 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-15 09:05:24.889 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-15 09:05:24.889 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:24.889 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:24.889 +03:00 [DBG] The request is a preflight request.
2025-09-15 09:05:24.890 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:24.890 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/setup/profile - 204 null null 1.2331ms
2025-09-15 09:05:24.892 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/setup/profile - application/json 206
2025-09-15 09:05:24.892 +03:00 [DBG] 1 candidate(s) found for the request path '/api/setup/profile'
2025-09-15 09:05:24.892 +03:00 [DBG] Request matched endpoint 'HTTP: POST api/setup/profile'
2025-09-15 09:05:24.892 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:24.892 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:24.892 +03:00 [INF] Executing endpoint 'HTTP: POST api/setup/profile'
2025-09-15 09:05:24.893 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:24.912 +03:00 [DBG] Connection id "0HNFK3N560JQR", Request id "0HNFK3N560JQR:00000005": started reading request body.
2025-09-15 09:05:24.912 +03:00 [DBG] Connection id "0HNFK3N560JQR", Request id "0HNFK3N560JQR:00000005": done reading request body.
2025-09-15 09:05:24.925 +03:00 [INF] Creating profile for provider "SqlServer"
2025-09-15 09:05:24.925 +03:00 [INF] Creating connection (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-15 09:05:24.975 +03:00 [DBG] Connected to database for schema extraction (Server=DESKTOP-QCK8UI5\SQLEXPRESS, Database=ProductInventory)
2025-09-15 09:05:24.987 +03:00 [DBG] Saved secret profile-461c3e3e-f0c1-477c-8787-7aa3da2b411d for provider "SqlServer"
2025-09-15 09:05:24.987 +03:00 [DBG] Generated profile name SqlServer - ProductInventory with cache dir C:\Users\Zyad\AppData\Local\MicroSqlRag\SqlServer
2025-09-15 09:05:24.992 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Any(p => p.DatabaseName.Equals(__profile_DatabaseName_0))'
2025-09-15 09:05:24.999 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Profiles AS p
                WHERE p.DatabaseName == @__profile_DatabaseName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 09:05:25.003 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:25.003 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:25.003 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.003 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.003 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.003 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.004 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.004 +03:00 [DBG] Executing DbCommand [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-15 09:05:25.004 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__profile_DatabaseName_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Profiles" AS "p"
    WHERE "p"."DatabaseName" = @__profile_DatabaseName_0)
2025-09-15 09:05:25.005 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.005 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:25.005 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.005 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.027 +03:00 [DBG] 'ContextDB' generated a value for the property 'Profile.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:25.049 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:25.052 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 09:05:25.066 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 09:05:25.069 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 09:05:25.069 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 09:05:25.070 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 09:05:25.108 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.109 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.109 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.109 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.110 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.110 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-15 09:05:25.120 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 49), @p2='?' (DbType = DateTimeOffset), @p3='?' (Size = 16), @p4='?' (Size = 28), @p5='?' (DbType = Int32), @p6='?' (Size = 44), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("Id", "CacheFile", "CreatedUtc", "DatabaseName", "Name", "Provider", "SecretRef", "UserInfoId", "UserInfoId1")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-15 09:05:25.122 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.122 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 09:05:25.123 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.123 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.129 +03:00 [DBG] An entity of type 'Profile' tracked by 'ContextDB' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:25.130 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 09:05:25.130 +03:00 [INF] Profile created successfully with Id "8b6ea46e-c87b-4695-b0c1-60345c466480"
2025-09-15 09:05:25.131 +03:00 [INF] Executed endpoint 'HTTP: POST api/setup/profile'
2025-09-15 09:05:25.131 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:25.132 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:25.132 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.132 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.132 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/setup/profile - 200 null application/json; charset=utf-8 240.0257ms
2025-09-15 09:05:25.134 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - null null
2025-09-15 09:05:25.134 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:05:25.134 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:05:25.134 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:25.134 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:25.134 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:25.134 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:25.134 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:25.135 +03:00 [INF] Getting user by ID: "f03cbf45-2fa6-49d3-9536-2e54e7415ff3"
2025-09-15 09:05:25.138 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:25.138 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:25.138 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.138 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.138 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.138 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.138 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.138 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:25.138 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:25.138 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:25.142 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:25.142 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.142 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-15 09:05:25.142 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.142 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.144 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:25.144 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:25.144 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:25.144 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.144 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.144 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - 200 null application/json; charset=utf-8 10.3323ms
2025-09-15 09:05:25.197 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/8b6ea46e-c87b-4695-b0c1-60345c466480/schema - null null
2025-09-15 09:05:25.197 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/8b6ea46e-c87b-4695-b0c1-60345c466480/schema'
2025-09-15 09:05:25.197 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/8b6ea46e-c87b-4695-b0c1-60345c466480/schema'
2025-09-15 09:05:25.197 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 09:05:25.197 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:25.197 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:25.197 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 09:05:25.198 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:25.201 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/8b6ea46e-c87b-4695-b0c1-60345c466480 - null null
2025-09-15 09:05:25.202 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/8b6ea46e-c87b-4695-b0c1-60345c466480'
2025-09-15 09:05:25.202 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/8b6ea46e-c87b-4695-b0c1-60345c466480'
2025-09-15 09:05:25.202 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 09:05:25.202 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:25.202 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:25.202 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 09:05:25.202 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:25.204 +03:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Include(e => e.Queries)
    .FirstOrDefault(e => e.Id.Equals(__id_0))'
2025-09-15 09:05:25.205 +03:00 [DBG] Including navigation: 'Profile.Queries'.
2025-09-15 09:05:25.217 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Profile>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.CacheFile (string) MaxLength(500), 1], [Property: Profile.CreatedUtc (DateTimeOffset) Required, 2], [Property: Profile.DatabaseName (string) Required, 3], [Property: Profile.Name (string) Required MaxLength(200), 4], [Property: Profile.Provider (ProviderType) Required, 5], [Property: Profile.SecretRef (string) Required, 6], [Property: Profile.UserInfoId (Guid?) FK Index, 7], [Property: Profile.UserInfoId1 (no field, Guid?) Shadow FK Index, 8] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Query.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Query.ProfileId (Guid) Required FK Index, 10], [Property: Query.ResultJson (string) Required, 11], [Property: Query.SqlQuery (string) Required, 12], [Property: Query.TimestampUtc (DateTime) Required, 13], [Property: Query.UserQuery (string) Required, 14] }
                3 -> 9
            SELECT p0.Id, p0.CacheFile, p0.CreatedUtc, p0.DatabaseName, p0.Name, p0.Provider, p0.SecretRef, p0.UserInfoId, p0.UserInfoId1, q.Id, q.ProfileId, q.ResultJson, q.SqlQuery, q.TimestampUtc, q.UserQuery
            FROM 
            (
                SELECT TOP(1) p.Id, p.CacheFile, p.CreatedUtc, p.DatabaseName, p.Name, p.Provider, p.SecretRef, p.UserInfoId, p.UserInfoId1
                FROM Profiles AS p
                WHERE p.Id == @__id_0
            ) AS p0
            LEFT JOIN Queries AS q ON p0.Id == q.ProfileId
            ORDER BY p0.Id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Profile entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Profile instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Profile);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Profile.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Profile)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]: 
                                {
                                    shadowSnapshot1 = (ISnapshot)new Snapshot<Guid?>(dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8));
                                    return 
                                    {
                                        Profile instance;
                                        instance = new Profile();
                                        instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                        instance.<CacheFile>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<CreatedUtc>k__BackingField = dataReader.GetFieldValue<DateTimeOffset>(2);
                                        instance.<DatabaseName>k__BackingField = dataReader.GetString(3);
                                        instance.<Name>k__BackingField = dataReader.GetString(4);
                                        instance.<Provider>k__BackingField = Invoke(((EnumToNumberConverter<ProviderType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Profile.Provider (ProviderType) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindProperty("Provider")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(5));
                                        instance.<SecretRef>k__BackingField = dataReader.GetString(6);
                                        instance.<UserInfoId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Profile | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Profile)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Profile, Profile>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Profile)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: Profile.Queries (List<Query>) Collection ToDependent Query Inverse: Profile | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Profile, Query>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    Query entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        Query instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(Query);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: Query.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (Query)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]: 
                                    {
                                        return 
                                        {
                                            Query instance;
                                            instance = new Query();
                                            instance.<Id>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                            instance.<ProfileId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                            instance.<ResultJson>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                            instance.<SqlQuery>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                            instance.<TimestampUtc>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime) : dataReader.GetDateTime(13);
                                            instance.<UserQuery>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: Query | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(Query)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: Query.Profile (Profile) ToPrincipal Profile Inverse: Queries | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Queries.Query").FindNavigation("Profile")], 
                fixup: (namelessParameter{10}, namelessParameter{11}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Profile, List<Query>, Query> | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("NaturalToQuery.Core.Contributers.Entities.Profiles.Profile").FindNavigation("Queries").GetCollectionAccessor()].Add(
                        entity: namelessParameter{10}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                    return namelessParameter{11}.<Profile>k__BackingField = namelessParameter{10};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Profile)(resultContext.Values[0]) : default(Profile);
        }, 
        contextType: NaturalToQuery.Infrastructure.Persistence.ContextDB, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 09:05:25.220 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:25.220 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:25.220 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:25.220 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.220 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:25.220 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.220 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.220 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.220 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.221 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.221 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.221 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.221 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.221 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.221 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.221 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:25.221 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.222 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.222 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:25.222 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.222 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.222 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:25.222 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 1ms reading results.
2025-09-15 09:05:25.223 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.223 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.223 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.224 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.224 +03:00 [INF] Fetching connection string for profile "8b6ea46e-c87b-4695-b0c1-60345c466480"
2025-09-15 09:05:25.224 +03:00 [INF] Fetching connection string for profile "8b6ea46e-c87b-4695-b0c1-60345c466480"
2025-09-15 09:05:25.225 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.225 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.225 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.225 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.225 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.225 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.225 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.225 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.225 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.225 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.225 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.225 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.225 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.225 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.226 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.226 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.226 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:25.226 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:25.226 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.226 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.226 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.226 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.227 +03:00 [DBG] Fetched secret for profile "8b6ea46e-c87b-4695-b0c1-60345c466480"
2025-09-15 09:05:25.229 +03:00 [DBG] Fetching schema for Profile "8b6ea46e-c87b-4695-b0c1-60345c466480", ForceRefresh=false
2025-09-15 09:05:25.230 +03:00 [INF] Fetching schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory (ForceRefresh=false)
2025-09-15 09:05:25.249 +03:00 [DBG] Fetched secret for profile "8b6ea46e-c87b-4695-b0c1-60345c466480"
2025-09-15 09:05:25.249 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 09:05:25.249 +03:00 [DBG] Connection id "0HNFK3N560JQQ" completed keep alive response.
2025-09-15 09:05:25.249 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:25.249 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.250 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.250 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/8b6ea46e-c87b-4695-b0c1-60345c466480 - 200 null application/json; charset=utf-8 48.1744ms
2025-09-15 09:05:25.251 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/profile/8b6ea46e-c87b-4695-b0c1-60345c466480 - null null
2025-09-15 09:05:25.252 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/profile/8b6ea46e-c87b-4695-b0c1-60345c466480'
2025-09-15 09:05:25.252 +03:00 [DBG] Endpoint 'HTTP: GET api/query/profile/{Id}' with route pattern 'api/query/profile/{Id}' is valid for the request path '/api/query/profile/8b6ea46e-c87b-4695-b0c1-60345c466480'
2025-09-15 09:05:25.252 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 09:05:25.252 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:25.252 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:25.252 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 09:05:25.253 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:25.253 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:25.253 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:25.253 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.254 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.254 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.254 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.254 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.254 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.254 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.254 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:25.254 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.254 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:25.255 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.255 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.255 +03:00 [INF] Fetching connection string for profile "8b6ea46e-c87b-4695-b0c1-60345c466480"
2025-09-15 09:05:25.255 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.255 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.255 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:25.255 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.255 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:25.256 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.256 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."CacheFile", "p0"."CreatedUtc", "p0"."DatabaseName", "p0"."Name", "p0"."Provider", "p0"."SecretRef", "p0"."UserInfoId", "p0"."UserInfoId1", "q"."Id", "q"."ProfileId", "q"."ResultJson", "q"."SqlQuery", "q"."TimestampUtc", "q"."UserQuery"
FROM (
    SELECT "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
    FROM "Profiles" AS "p"
    WHERE "p"."Id" = @__id_0
    LIMIT 1
) AS "p0"
LEFT JOIN "Queries" AS "q" ON "p0"."Id" = "q"."ProfileId"
ORDER BY "p0"."Id"
2025-09-15 09:05:25.256 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.256 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:25.256 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:25.256 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.257 +03:00 [DBG] Fetched secret for profile "8b6ea46e-c87b-4695-b0c1-60345c466480"
2025-09-15 09:05:25.257 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/profile/{Id}'
2025-09-15 09:05:25.257 +03:00 [DBG] Connection id "0HNFK3N560JQQ" completed keep alive response.
2025-09-15 09:05:25.257 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:25.257 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.257 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.257 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/profile/8b6ea46e-c87b-4695-b0c1-60345c466480 - 200 null application/json; charset=utf-8 6.6346ms
2025-09-15 09:05:25.266 +03:00 [INF] Loaded schema for DESKTOP-QCK8UI5\SQLEXPRESS|ProductInventory from cache file
2025-09-15 09:05:25.273 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 09:05:25.274 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:25.274 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:25.274 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:25.274 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:25.274 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/8b6ea46e-c87b-4695-b0c1-60345c466480/schema - 200 null application/json; charset=utf-8 76.9872ms
2025-09-15 09:05:25.275 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/query/8b6ea46e-c87b-4695-b0c1-60345c466480/schema - null null
2025-09-15 09:05:25.275 +03:00 [DBG] 1 candidate(s) found for the request path '/api/query/8b6ea46e-c87b-4695-b0c1-60345c466480/schema'
2025-09-15 09:05:25.275 +03:00 [DBG] Endpoint 'HTTP: GET api/query/{profileId}/schema' with route pattern 'api/query/{profileId}/schema' is valid for the request path '/api/query/8b6ea46e-c87b-4695-b0c1-60345c466480/schema'
2025-09-15 09:05:25.275 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 09:05:25.276 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:25.276 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:25.276 +03:00 [INF] Executing endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 09:05:25.276 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:25.277 +03:00 [INF] Executed endpoint 'HTTP: GET api/query/{profileId}/schema'
2025-09-15 09:05:25.277 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:25.277 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:25.277 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/query/8b6ea46e-c87b-4695-b0c1-60345c466480/schema - 200 null application/json; charset=utf-8 2.2187ms
2025-09-15 09:05:25.605 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 09:05:25.605 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 09:05:25.605 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 09:05:25.606 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:25.606 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:25.606 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 09:05:25.606 +03:00 [INF] Api health check sent.
2025-09-15 09:05:25.606 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 09:05:25.606 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:25.606 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7255ms
2025-09-15 09:05:27.655 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode - null null
2025-09-15 09:05:27.655 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode'
2025-09-15 09:05:27.655 +03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-09-15 09:05:27.655 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:27.655 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:27.655 +03:00 [DBG] The request is a preflight request.
2025-09-15 09:05:27.655 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:27.656 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode - 204 null null 0.559ms
2025-09-15 09:05:27.656 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode - application/json 81
2025-09-15 09:05:27.657 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode'
2025-09-15 09:05:27.657 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode'
2025-09-15 09:05:27.657 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 09:05:27.657 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:27.657 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:27.657 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 09:05:27.657 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:27.659 +03:00 [DBG] Connection id "0HNFK3N560JQR", Request id "0HNFK3N560JQR:0000000B": started reading request body.
2025-09-15 09:05:27.659 +03:00 [DBG] Connection id "0HNFK3N560JQR", Request id "0HNFK3N560JQR:0000000B": done reading request body.
2025-09-15 09:05:27.661 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:27.661 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:27.661 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:27.662 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.662 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:27.662 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:27.662 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:27.662 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:27.662 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:27.662 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:27.662 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:27.663 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.663 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:27.663 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.663 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:27.664 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:27.664 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 09:05:27.667 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 09:05:27.668 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 09:05:27.668 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 09:05:27.668 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 09:05:27.675 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:27.675 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.675 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:27.675 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:27.676 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:27.676 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 09:05:27.679 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 09:05:27.685 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.685 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 5ms reading results.
2025-09-15 09:05:27.685 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.685 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:27.686 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:27.686 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 09:05:27.689 +03:00 [INF] AI mode changed to "Basic" for user "f03cbf45-2fa6-49d3-9536-2e54e7415ff3" at "2025-09-15T06:05:27.6635696Z"
2025-09-15 09:05:27.689 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 09:05:27.689 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:27.689 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:27.689 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:27.689 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:27.689 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode - 200 null application/json; charset=utf-8 32.9757ms
2025-09-15 09:05:27.724 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - null null
2025-09-15 09:05:27.725 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:05:27.725 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:05:27.725 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:27.725 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:27.725 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:27.725 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:27.726 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:27.726 +03:00 [INF] Getting user by ID: "f03cbf45-2fa6-49d3-9536-2e54e7415ff3"
2025-09-15 09:05:27.726 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:27.727 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:27.727 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:27.727 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.727 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:27.727 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:27.727 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:27.727 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:27.727 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:27.727 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:27.728 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:27.728 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.728 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:27.728 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:27.728 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:27.729 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:27.729 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:27.729 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:27.729 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:27.729 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:27.729 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - 200 null application/json; charset=utf-8 4.3694ms
2025-09-15 09:05:28.235 +03:00 [DBG] Connection id "0HNFK3N560JQS" accepted.
2025-09-15 09:05:28.235 +03:00 [DBG] Connection id "0HNFK3N560JQS" started.
2025-09-15 09:05:28.235 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 09:05:28.236 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 09:05:28.236 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 09:05:28.236 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 09:05:28.236 +03:00 [INF] Api health check sent.
2025-09-15 09:05:28.236 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 09:05:28.236 +03:00 [DBG] Connection id "0HNFK3N560JQS" completed keep alive response.
2025-09-15 09:05:28.236 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.308ms
2025-09-15 09:05:31.547 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode - application/json 81
2025-09-15 09:05:31.547 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode'
2025-09-15 09:05:31.547 +03:00 [DBG] Endpoint 'HTTP: PUT api/userinfo/{userId}/aimode' with route pattern 'api/userinfo/{userId}/aimode' is valid for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode'
2025-09-15 09:05:31.547 +03:00 [DBG] Request matched endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 09:05:31.547 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:31.547 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:31.547 +03:00 [INF] Executing endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 09:05:31.548 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:31.548 +03:00 [DBG] Connection id "0HNFK3N560JQR", Request id "0HNFK3N560JQR:0000000D": started reading request body.
2025-09-15 09:05:31.548 +03:00 [DBG] Connection id "0HNFK3N560JQR", Request id "0HNFK3N560JQR:0000000D": done reading request body.
2025-09-15 09:05:31.549 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:31.549 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:31.549 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:31.549 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.549 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:31.549 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:31.549 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:31.549 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:31.549 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:31.549 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:31.549 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:31.549 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.549 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:31.550 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.550 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:31.550 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:31.550 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 09:05:31.550 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 09:05:31.550 +03:00 [DBG] SaveChanges starting for 'ContextDB'.
2025-09-15 09:05:31.550 +03:00 [DBG] DetectChanges starting for 'ContextDB'.
2025-09-15 09:05:31.550 +03:00 [DBG] DetectChanges completed for 'ContextDB'.
2025-09-15 09:05:31.550 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:31.550 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.550 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:31.550 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:31.550 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:31.550 +03:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 09:05:31.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserInfos" SET "ApiKey" = @p0, "CreatedUtc" = @p1, "LastUpdatedUtc" = @p2, "Mode" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-09-15 09:05:31.555 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.555 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 4ms reading results.
2025-09-15 09:05:31.555 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.555 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:31.555 +03:00 [DBG] An entity of type 'UserInfo' tracked by 'ContextDB' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:31.555 +03:00 [DBG] SaveChanges completed for 'ContextDB' with 1 entities written to the database.
2025-09-15 09:05:31.556 +03:00 [INF] AI mode changed to "Local" for user "f03cbf45-2fa6-49d3-9536-2e54e7415ff3" at "2025-09-15T06:05:31.5500518Z"
2025-09-15 09:05:31.556 +03:00 [INF] Executed endpoint 'HTTP: PUT api/userinfo/{userId}/aimode'
2025-09-15 09:05:31.556 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:31.556 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:31.556 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:31.556 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:31.557 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3/aimode - 200 null application/json; charset=utf-8 9.4026ms
2025-09-15 09:05:31.601 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - null null
2025-09-15 09:05:31.601 +03:00 [DBG] 1 candidate(s) found for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:05:31.601 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3'
2025-09-15 09:05:31.601 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:31.601 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:31.601 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:31.601 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:31.602 +03:00 [DBG] Entity Framework Core 9.0.8 initialized 'ContextDB' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.8' with options: None
2025-09-15 09:05:31.602 +03:00 [INF] Getting user by ID: "f03cbf45-2fa6-49d3-9536-2e54e7415ff3"
2025-09-15 09:05:31.602 +03:00 [DBG] Creating DbConnection.
2025-09-15 09:05:31.602 +03:00 [DBG] Created DbConnection. (0ms).
2025-09-15 09:05:31.602 +03:00 [DBG] Opening connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:31.602 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.602 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 09:05:31.602 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:31.602 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-15 09:05:31.602 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:31.603 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "u0"."Id", "u0"."ApiKey", "u0"."CreatedUtc", "u0"."LastUpdatedUtc", "u0"."Mode", "p"."Id", "p"."CacheFile", "p"."CreatedUtc", "p"."DatabaseName", "p"."Name", "p"."Provider", "p"."SecretRef", "p"."UserInfoId", "p"."UserInfoId1"
FROM (
    SELECT "u"."Id", "u"."ApiKey", "u"."CreatedUtc", "u"."LastUpdatedUtc", "u"."Mode"
    FROM "UserInfos" AS "u"
    WHERE "u"."Id" = @__id_0
    LIMIT 1
) AS "u0"
LEFT JOIN "Profiles" AS "p" ON "u0"."Id" = "p"."UserInfoId"
ORDER BY "u0"."Id"
2025-09-15 09:05:31.603 +03:00 [DBG] Context 'ContextDB' started tracking 'UserInfo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:31.603 +03:00 [DBG] Context 'ContextDB' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 09:05:31.603 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.603 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db' is being disposed after spending 0ms reading results.
2025-09-15 09:05:31.603 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Zyad\Documents\NaturalToSql\NaturalToSql.UI\db-ql-ui\api_publish\schema_cache.db'.
2025-09-15 09:05:31.603 +03:00 [DBG] Closed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:31.603 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/{id}'
2025-09-15 09:05:31.603 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:31.603 +03:00 [DBG] 'ContextDB' disposed.
2025-09-15 09:05:31.603 +03:00 [DBG] Disposing connection to database 'main' on server 'schema_cache.db'.
2025-09-15 09:05:31.603 +03:00 [DBG] Disposed connection to database 'main' on server 'schema_cache.db' (0ms).
2025-09-15 09:05:31.603 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/f03cbf45-2fa6-49d3-9536-2e54e7415ff3 - 200 null application/json; charset=utf-8 2.5721ms
2025-09-15 09:05:31.913 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 09:05:31.913 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 09:05:31.913 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 09:05:31.913 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 09:05:31.913 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:31.913 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:31.913 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:31.914 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:31.914 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:31.914 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:31.914 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.5421ms
2025-09-15 09:05:32.108 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 09:05:32.108 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 09:05:32.108 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 09:05:32.108 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 09:05:32.108 +03:00 [INF] Api health check sent.
2025-09-15 09:05:32.108 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 09:05:32.108 +03:00 [DBG] Connection id "0HNFK3N560JQS" completed keep alive response.
2025-09-15 09:05:32.108 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.4164ms
2025-09-15 09:05:33.116 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/health - null null
2025-09-15 09:05:33.116 +03:00 [DBG] 1 candidate(s) found for the request path '/api/health'
2025-09-15 09:05:33.116 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/health'
2025-09-15 09:05:33.117 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:33.117 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:33.117 +03:00 [INF] Executing endpoint 'HTTP: GET api/health'
2025-09-15 09:05:33.117 +03:00 [INF] Api health check sent.
2025-09-15 09:05:33.117 +03:00 [INF] Executed endpoint 'HTTP: GET api/health'
2025-09-15 09:05:33.117 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:33.117 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/health - 200 null application/json; charset=utf-8 0.7644ms
2025-09-15 09:05:33.363 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - null null
2025-09-15 09:05:33.363 +03:00 [DBG] 2 candidate(s) found for the request path '/api/userinfo/localllm'
2025-09-15 09:05:33.363 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/localllm' with route pattern 'api/userinfo/localllm' is valid for the request path '/api/userinfo/localllm'
2025-09-15 09:05:33.363 +03:00 [DBG] Endpoint 'HTTP: GET api/userinfo/{id}' with route pattern 'api/userinfo/{id}' is valid for the request path '/api/userinfo/localllm'
2025-09-15 09:05:33.363 +03:00 [DBG] Request matched endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:33.364 +03:00 [DBG] The request has an origin header: 'http://127.0.0.1:5174'.
2025-09-15 09:05:33.364 +03:00 [INF] CORS policy execution successful.
2025-09-15 09:05:33.364 +03:00 [INF] Executing endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:33.364 +03:00 [INF] Executed endpoint 'HTTP: GET api/userinfo/localllm'
2025-09-15 09:05:33.364 +03:00 [DBG] Connection id "0HNFK3N560JQR" completed keep alive response.
2025-09-15 09:05:33.364 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/userinfo/localllm - 200 null application/json; charset=utf-8 0.4408ms
2025-09-15 09:05:36.109 +03:00 [DBG] Connection id "0HNFK3N560JQS" received FIN.
2025-09-15 09:05:36.110 +03:00 [DBG] Connection id "0HNFK3N560JQS" disconnecting.
2025-09-15 09:05:36.110 +03:00 [DBG] Connection id "0HNFK3N560JQS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 09:05:36.111 +03:00 [DBG] Connection id "0HNFK3N560JQS" stopped.
